(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){},219:function(e,t,n){e.exports=n.p+"static/media/Water image_Dreamstime.b2e60f28.jpg"},223:function(e,t,n){e.exports=n.p+"static/media/baseline-search-24px.a87eca9e.svg"},288:function(e,t,n){e.exports=n(544)},293:function(e,t,n){},295:function(e,t,n){},297:function(e,t,n){},299:function(e,t,n){},33:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///9ccHxZbXjCxslYbXpUandQZ3SAiI3s7e2ytbf39/eYoKRSaHZWbHhkdX/8+/tyf4bm6OnP0dLW2NlebneFkZeMlZry8/OorrFMYm/U1dbc3uCip6rj4+NseoLHy8yBjpZ4gYe3u754h5CTnKGIlZ1qd325wMWttLhxgYrL6+a6AAAGVElEQVR4nO2d65qqOgyGBdqKIiCKCh7QQWer93+DG3XPHpjlAWhC46y8v2d8+pm0Sduk9noMwzAMwzAMwzAMwzAMwzAMwzAMwzAMw/ylhMMC04NAIlxtneNxfSg4HY/OJDI9IFiGg8Mus2wpfSGEL6W0g/PO24amxwXD0E2CdOT7VpVC6Cj9Z+maHp4+Wy+W1iOEyk4r0yPUY3qwHuu7apSZ98Z2XPRT8VTfFZkmC9MjbYmTPbfft8bZ1vRYWzGzahjwhm/lpkfbnGldA95Qs3cLkHnwMzy88tTxxvSYG+HYtT30CzF+p7gxaOShXxLtpelx12ZgtxB4kfguVtyOWgm8OOp7LDeTlvreRqK7b7iKlpFz08OvwazNKvM/in7oT5SOwIKJaQUvWGWNA2EVMaOdhg89LR+9IB3TIp4y1fXRgpT04cZY00evRkxMq3gChAktcSYcFGcAJiyMSDdiTAMIgZbYk11Oc+2F9MaIagbufoA46SUmmpbygEgjIa1im5bygGPbXdMfKKInGlBOSjckAq0zBeJgWstdhimYQn9HMnObgE3DIq0hORFbHbA9ICB57LYGVGiRvMjQ3xp+Y5PcJP5+hZ9g4fBvUCiPptXc4/fb8ACWeFNV+PtXmt8fD0FzGpIn3w5cXmplJM8xXLi9hdjRLGAEVEj0kk33UuYbuTat5T5wi6kiudD0eiuIM/0rqWkpD3Ch3FR8mJbygDABytskyXh/YduujuYPArIVp+EOxIjyZFrIY3KQtCaYmtbxBJAbUqLh/gZEbpoSvgLu9RY77YAhPdMinqO9nIqAtAkL1rp+SjRh+2YYa/mpPJC8k6mw1FlPhU1zY1hFYyqKgOSd00/CU2srBmQT0h/0W6426cD0yOsSeu3y07cRWAR+r42jvpHAImasm0oU6bu1lOZBo7jon8lH+j9o1Nql5tRztd4mT7yC8jg3c1XTjEKty4F+e/mkgUMnNLpTL06VLPClmpfHtT37NTQKu/xP4XR8/Sw5UmmWbAjUYU5PY1lyRxk7JXO4p+Clq8pzXlpiFutS15uQapYbNmU0D2TVTMKq9Eq6nj16bMdCQnwsm2my//GN+H5msks48u7NNJEOymMKnVnmy3t/J+2zV6kMWtybuULKgal0fJk9SF1+di6vHG9sq5JKUczYeH9yqgvow87o6uzujvxxJ7NvJdWvPXSj1bqfxXGapiqOx/N1FP04FHWfdEb7mYFoGfafZi0ycBq5lju458jfRk87r99feK/2D+pQ/9hzOBm/XHMHHSd1p9e7Bz+Y1dQ42NVp3e9271hvkytUkLsvnHW4SZ7FkxJpl3f79c9iVOY9S79Wx7ldN33tsoXW3TfYNxRR7zC4e5k0TT6zOmndF77X1VQcHppdZwsxSuOPfFoEiP+Iosl6rNTT5fMOqqtKqVaHaUWCJuNsfCWzZWN1V2RHF4vN9rZVnVda/3tHNRqg9WsNsbsIGdEZsI60Kf6hgyT8CFhG2pwOns6INGYhACJDVwhZY9kGhW7E2KxA/CviLVhlV0tEhrwbhixXb4eP26iwMRkqbog5asBwgOq6dLAxtxihyXzmC9QnbMDqK3UQfUSFcDWyOmDW11JwUtwaaQpOiruHgus30MHHe1RCqxgIDhuv0zshMQ0xu6IOJKYh4mNZQGXc+qAVghNISm/4WG+6TWAeSQIgQzpVdIg4KV7yfSSylBZZDY5CgBcDoUB67wygDh8KpBd6XIgnA2FA2kBFBPb3X8Q4CslMQ6znziIaefcVnE0wjQ3+DRyFVHYWF3DO9kkpRGlRJKUQ5S2wPplwWCQ1KHX9rLBLWCErZIXmYYWskBWaB0chjcvDGzhXiA6l/SHKceKGkkIMgb2IzKG+ZQUoChczMqf6WMVtUD/uoA9WgeKSipuKMdLdE50b0gSr8WJAZDVFfLFd7+0ZKDCLaB0Sa41C7CsZzglIVKhtJQSKFXzcCtre0nThF36P3tHseio6eK9uW//HqOHxsy66LJfmYobsd9OYv/qo+2gJLCJFXmRK5EGT7lYgfXLf5Y/PrE5ZvQZsMH2jfd7xCyBuPk6l1OgHrS9OSKX6SxMvnAxz7/McBL6NiBVk+8/1xOAjWZvlxMFkO5mSfTaZYRiGYRiGYRiGYRiGYRiGYRiGYRiG6Zp/ATJ+d0E+ds0FAAAAAElFTkSuQmCC"},380:function(e,t,n){},472:function(e,t,n){},532:function(e,t,n){},535:function(e,t,n){},537:function(e,t,n){},539:function(e,t,n){},544:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(27),o=n.n(i),c=(n(293),n(13)),s=n(14),l=n(16),u=n(15),d=n(17),p=n(546),m=n(548),h=n(547),f=n(5),g=n(4),b=(n(295),n(218)),v=n.n(b),x=(n(297),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=new Date;return r.a.createElement("div",{className:"absolute-header"},r.a.createElement("div",{className:"header-team"},"#\u0415\u0434\u0438\u043d\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430"),r.a.createElement("div",{className:"header-date"},r.a.createElement("span",null,"\u0441\u0435\u0433\u043e\u0434\u043d\u044f"),r.a.createElement(v.a,{element:"span",format:"DD.MM.YYYY"},e),r.a.createElement("span",{id:"header-date-day"},e.toLocaleString("ru",{weekday:"long"}))))}}]),t}(a.Component)),w=(n(299),n(33)),E=n.n(w),y=n(41),k=n.n(y),j=n(6),O=n(219),C=n.n(O),S=n(109),N=n.n(S);function T(){var e=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return T=function(){return e},e}var D=j.a.div(T()),_=function(e){return r.a.createElement(D,{style:{minHeight:e.minHeight}},r.a.createElement(N.a,{color:e.color}))},I=n(222),A=n.n(I);function P(){var e=Object(f.a)(["\n  background: url('","') no-repeat center/cover;\n"]);return P=function(){return e},e}var M=j.a.div(P(),C.a),F=function(e){var t=e.user,n={backgroundImage:"url(".concat(E.a,")")},i="";return i=window.location.host.includes("localhost")&&t.avatar?{backgroundImage:"url(".concat(t.avatar.slice(16),")")}:{backgroundImage:"url(".concat(t.avatar,")")},r.a.createElement(M,null,window.innerWidth<600&&!window.location.pathname.includes("id")?null:r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"person"},e.loading?r.a.createElement("div",{className:"person-image",style:{background:"rgba(255,255,255,0.5)"}},r.a.createElement(_,{minHeight:125,color:"primary"})):r.a.createElement("div",{className:"person-image",style:""===t.avatar?n:i}),r.a.createElement("div",{className:"person-info"},r.a.createElement("div",{className:"person-info__container"},e.loading?r.a.createElement(_,{minHeight:70,color:"primary"}):r.a.createElement(a.Fragment,null,r.a.createElement("p",{className:"person-info__name"},"".concat(t.name," ").concat(t.surname)),r.a.createElement("p",{className:"person-info__position"},t.position))),r.a.createElement(k.a,{variant:"contained",href:"logout.php",color:"primary"},"\u0412\u044b\u0439\u0442\u0438"))),r.a.createElement(k.a,{variant:"contained",href:"/settings",color:"primary"},window.innerWidth>600?"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438":r.a.createElement(A.a,null))))},q=n(50),L=n.n(q),H=n(62),W=n(51),z=(n(380),n(11)),Y=n.n(z),B=n(3),R=window.location.host.includes("localhost")?"http://akvatory.local":window.location.origin,U=n(72),V=n.n(U),G=n(47),K=n.n(G),X=n(63),Z=n.n(X),J=n(35);function Q(){var e=Object(f.a)(["\n  cursor: pointer;\n  right: 25px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  position: absolute;\n  height: fit-content;\n  svg {\n    color: rgba(0,0,0,.54);\n  }\n"]);return Q=function(){return e},e}function $(){var e=Object(f.a)(["\n  position: absolute;\n  right: 25px;\n  top: 10px;\n  cursor: pointer;\n  svg {\n    color: #1976d2;\n  }\n\n  @media all and (max-width: 600px) {\n    right: 15px;\n    top: 25px;\n    svg {\n      font-size: 32px;\n    }\n  }\n"]);return $=function(){return e},e}function ee(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-left: 10px;\n  background: #fff;\n  height: 110px;\n  width: 100%;\n\n  textarea {\n    max-height: 90px;\n    background: #fff;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 100%;\n    & > div {\n      height: 100%;\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(f.a)(["\n  min-width: 30px;\n  border-radius: 50%;\n  min-height: 30px;\n  margin-right: 15px;\n"]);return te=function(){return e},e}function ne(){var e=Object(f.a)(["\n  padding: 15px 30px;\n  background: #f5f8fa;\n  width: 100%;\n  margin-top: 20px;\n  margin-left: -30px;\n  border-bottom: 1px solid #e6ecf0;\n  border-top: 1px solid #e6ecf0;\n  display: flex;\n  flex-direction: column;\n  .close {\n    top: 5px;\n  }\n  button {\n    width: 150px;\n    align-self: flex-end;\n    margin-top: 15px;\n  }\n  \n  .newcomment-reply {\n    margin: 0 40px;\n    color: #657786;\n    a {\n      color: #0084B4;\n      text-decoration: none;\n      margin-left: 5px;\n      :hover {\n        text-decoration: underline;\n      }\n    }\n  }\n\n  .newcomment-input {\n    display: flex;\n    align-items: flex-start;\n    margin-top: 20px;\n    div {\n      margin-right: 0;\n    }\n  }\n\n  @media all and (max-width: 600px) {\n    margin-left: -15px;\n    padding: 15px;\n    width: calc(100% + 30px);\n  }\n"]);return ne=function(){return e},e}function ae(){var e=Object(f.a)(["\n  margin-left: -30px;\n  width: 600px;\n  border-bottom: 1px solid #e6ecf0;\n  cursor: pointer;\n  padding: 15px 30px;\n  position: relative;\n\n  :last-child {\n    border-bottom: none;\n  }\n\n  :hover {\n    background: #f5f8fa;\n    transition: .37s ease;\n  }\n\n  .comment-header {\n    display: flex;\n    align-items: center;\n    \n    div {\n      border-radius: 50%;\n      width: 30px;\n      height: 30px;\n    }\n  }\n\n  .comment-text {\n    padding-left: 45px;\n  }\n\n  .comment-date {\n    margin-left: 10px;\n    color: #657786;\n    :before {\n      content: '\0b7';\n      margin-right: 10px;\n    }\n  }\n"],["\n  margin-left: -30px;\n  width: 600px;\n  border-bottom: 1px solid #e6ecf0;\n  cursor: pointer;\n  padding: 15px 30px;\n  position: relative;\n\n  :last-child {\n    border-bottom: none;\n  }\n\n  :hover {\n    background: #f5f8fa;\n    transition: .37s ease;\n  }\n\n  .comment-header {\n    display: flex;\n    align-items: center;\n    \n    div {\n      border-radius: 50%;\n      width: 30px;\n      height: 30px;\n    }\n  }\n\n  .comment-text {\n    padding-left: 45px;\n  }\n\n  .comment-date {\n    margin-left: 10px;\n    color: #657786;\n    :before {\n      content: '\\00b7';\n      margin-right: 10px;\n    }\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 20px;\n\n  img {\n    width: 15px;\n    margin-right: 40px;\n    margin-left: 10px;\n    opacity: .7;\n    cursor: pointer;\n  }\n\n  img:hover {\n    opacity: 1;\n    transition: .37s ease;\n  }\n"]);return re=function(){return e},e}function ie(){var e=Object(f.a)(["\n  border-top: 1px solid #e6ecf0;\n  border-bottom: 1px solid #e6ecf0;\n  margin-top: 20px;\n  1px solid #e6ecf0;\n  align-items: center;\n  display: flex;\n\n  div {\n    margin: 0 5px;\n  }\n\n  h6:first-child {\n    width: 50%;\n    padding: 15px 10px;\n    border-right: 1px solid #e6ecf0;\n  }\n\n  span {\n    width: 50%;\n    padding: 15px 10px 15px;\n  }\n\n  @media all and (max-width: 600px) {\n    h6:first-child {\n      font-size: 12px;\n    }\n  }\n"]);return ie=function(){return e},e}function oe(){var e=Object(f.a)(["\n  p {\n    margin: 15px 0 5px;\n    font-size: 20px;\n  }\n  span {\n    color: #657786;\n    font-size: 14px;\n  }\n"]);return oe=function(){return e},e}function ce(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 25px;\n\n  img {\n    border-radius: 50%;\n    width: 60px;\n  }\n  p {\n    font-size: 18px;\n    font-weight: 700;\n  }\n"]);return ce=function(){return e},e}function se(){var e=Object(f.a)(["\n  position: fixed;\n  background: rgba(0,0,0,.5);\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  z-index: 49;\n"]);return se=function(){return e},e}function le(){var e=Object(f.a)(["\n  width: 600px;\n  min-height: 300px;\n  left: 0;\n  right: 0;\n  margin: auto;\n  position: fixed;\n  z-index: 50;\n  background: #fff;\n  top: 100px;\n  border-radius: 10px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n  padding: 15px 30px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  max-height: 80%;\n\n  .close {\n    top: 5px;\n  }\n  ::-webkit-scrollbar { \n    display: none; \n  }\n\n  @media all and (max-width: 600px) {\n    width: 100%;\n    height: calc(100vh - 50px);\n    top: 0;\n    max-height: unset;\n    border-radius: 0;\n    padding: 30px 15px 15px;\n  }\n"]);return le=function(){return e},e}var ue=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getAvatars=function(){var e=n.state.currentNews.liked_by.split(", ").slice(1),t=new FormData,a=Object(g.a)(Object(g.a)(n));t.append("likedBy",e),Y.a.ajax({url:"".concat(R,"/api/user/getAvatars.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(e){return a.setState({likedBy:e})},error:function(e){return console.log(e)}})},n.handleChange=function(e){return n.setState({commentText:e.target.value})},n.addLike=function(e,t){var a=document.getElementById("actions-news");a.style.pointerEvents="none";var r=Object(g.a)(Object(g.a)(n));t.preventDefault();var i=new FormData;i.append("id",e),i.append("liked_by",n.props.user.id),Y.a.ajax({url:"".concat(R,"/api/news/addlike.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(e,t){console.log(t),fetch("".concat(R,"/api/news/read_one.php?id=").concat(r.props.singleNewsId)).then(function(e){return e.json()}).then(function(e){return r.setState({currentNews:e})}).then(function(){return r.getAvatars(r.props.singleNewsId)}),setTimeout(function(){return a.style.pointerEvents="all"},1e3)},error:function(e){console.log(e)}})},n.removeLike=function(e,t){var a=document.getElementById("actions-news");a.style.pointerEvents="none";var r=Object(g.a)(Object(g.a)(n));t.preventDefault(),t.stopPropagation();var i=new FormData;i.append("id",e),i.append("liked_by",n.props.user.id),Y.a.ajax({url:"".concat(R,"/api/news/removelike.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),fetch("".concat(R,"/api/news/read_one.php?id=").concat(r.props.singleNewsId)).then(function(e){return e.json()}).then(function(e){return r.setState({currentNews:e})}).then(function(){return r.getAvatars(r.props.singleNewsId)}),setTimeout(function(){return a.style.pointerEvents="all"},1e3)},error:function(e){console.log(e)}})},n.submitComment=function(e){n.setState({commentsLoading:!0});var t=Object(g.a)(Object(g.a)(n));e.preventDefault();var a=new FormData;a.append("news_id",n.props.singleNewsId),a.append("who","".concat(n.props.user.name," ").concat(n.props.user.surname)),a.append("date",(new Date).toJSON().slice(0,10).replace(/-/g,".")),a.append("visible",1),a.append("time",(new Date).toLocaleTimeString().slice(0,-3)),a.append("text",n.state.commentText),a.append("author_id",n.props.user.id),Y.a.ajax({url:"".concat(R,"/api/news/addcomment.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(){t.setState({commentText:""}),t.fetchComments(),t.props.enqueueSnackbar("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0431\u044b\u043b \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",{variant:"success"}),setTimeout(function(){t.setState({commentsLoading:!1});var e=document.getElementById("single-news");e.scrollTop=e.scrollHeight},250)},error:function(e){console.log(e),t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",{variant:"error"})}})},n.deleteComment=function(e,t,a){n.setState({commentsLoading:!0});var r=Object(g.a)(Object(g.a)(n));e.preventDefault(),Y.a.ajax({url:"".concat(R,"/api/news/deletecomment.php"),data:{id:t,news_id:a},type:"POST",success:function(){r.props.enqueueSnackbar("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"info"}),r.fetchComments(),setTimeout(function(){return r.setState({commentsLoading:!1})},250)},error:function(){r.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",{variant:"error"})}})},n.state={thisComments:[],loadedComments:!1,commentText:"",currentNews:[],likedBy:[],loading:!0,commentsLoading:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(H.a)(L.a.mark(function e(){var t=this;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(R,"/api/news/read_one.php?id=").concat(this.props.singleNewsId)).then(function(e){return e.json()}).then(function(e){return t.setState({currentNews:e})});case 2:return e.next=4,this.fetchComments(this.props.singleNewsId);case 4:return e.next=6,this.getAvatars(this.props.singleNewsId);case 6:return e.next=8,this.setState({loading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchComments",value:function(e){var t=this;fetch("".concat(R,"/api/news/single_comments.php?id=").concat(e)).then(function(e){return e.json()}).then(function(e){return t.setState({thisComments:e,loadedComments:!t.state.loadedComments})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.closeNews,i=t.singleNewsId,o=t.user,c=this.state,s=c.thisComments,l=c.loadedComments,u=c.commentText,d=c.currentNews,p=c.likedBy,m=c.loading,h=c.commentsLoading,f=null;f=window.location.host.includes("localhost")&&o.avatar?o.avatar.slice(16):o.avatar;var g=null;return g=window.location.host.includes("localhost")&&d.avatar?d.avatar.slice(16):d.avatar,l||this.fetchComments(i),r.a.createElement(a.Fragment,null,r.a.createElement(de,{id:"single-news"},m?r.a.createElement(_,{minHeight:500,color:"primary"}):r.a.createElement(a.Fragment,null,r.a.createElement(B.q,{placement:"left",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},r.a.createElement(Ee,null,r.a.createElement(K.a,{onClick:n}))),r.a.createElement(me,null,r.a.createElement(xe,{style:{background:"url(".concat(d.avatar?g:E.a,") no-repeat center/cover")}}),r.a.createElement(B.r,{variant:"subtitle2"},d.author)),"1"===d.importance?this.props.createImportantBar(10):null,r.a.createElement(B.r,{variant:"h5"},d.title.replace(/&quot;/g,'"')),r.a.createElement(he,null,r.a.createElement(B.r,{variant:"body1"},d.text.replace(/&quot;/g,'"')),r.a.createElement(B.r,{variant:"caption"},d.date)),r.a.createElement(fe,null,r.a.createElement(B.r,{variant:"subtitle2"},d.likes," ",this.props.getNoun(d.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"'),p.map(function(e,t){for(;t<7;)return r.a.createElement(B.q,{key:t,title:"".concat(e.name," ").concat(e.surname),placement:"top"},r.a.createElement(xe,{style:{background:"url(".concat(e.avatar?e.avatar:E.a,") no-repeat center/cover")}}))})),r.a.createElement(ge,{id:"actions-news"},s.length,r.a.createElement(B.q,{placement:"top",title:"".concat(s.length," ").concat(this.props.getCommentsNoun(s.length))},r.a.createElement(W.a,{icon:"comments",style:{marginLeft:10}})),V.a.some(p,["id",o.id])?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,d.likes),r.a.createElement(B.q,{placement:"top",title:"".concat(d.likes," ").concat(this.props.getNoun(d.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"')},r.a.createElement(W.a,{onClick:function(t){return e.removeLike(d.id,t)},icon:"heart",style:{color:"#1976d2",marginLeft:10}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,d.likes),r.a.createElement(B.q,{placement:"top",title:"".concat(d.likes," ").concat(this.props.getNoun(d.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"')},r.a.createElement(W.a,{onClick:function(t){return e.addLike(d.id,t)},icon:"heart",style:{marginLeft:10}})))),r.a.createElement(ve,null,r.a.createElement("p",{className:"newcomment-reply"},"\u0412 \u043e\u0442\u0432\u0435\u0442 ",r.a.createElement("a",{href:"".concat(window.location.origin,"/id").concat(d.id)},d.author)),r.a.createElement("div",{className:"newcomment-input"},r.a.createElement(xe,{style:{background:"url(".concat(o.avatar?f:E.a,") no-repeat center/cover")}}),r.a.createElement(we,null,r.a.createElement(B.p,{label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,variant:"outlined",name:"commentText",value:u,onChange:this.handleChange,required:!0}))),r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.submitComment,disabled:!u},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),h?r.a.createElement(_,{minHeight:280,color:"primary"}):s.map(function(t,n){return r.a.createElement(be,{key:n},r.a.createElement("div",{className:"comment-header"},r.a.createElement(xe,{style:{background:"url(".concat(t.avatar?t.avatar:E.a,") no-repeat center/cover"),marginTop:20}}),r.a.createElement(B.r,{variant:"subtitle2"},t.who),r.a.createElement(B.r,{variant:"caption",className:"comment-date"},t.date)),r.a.createElement("div",{className:"comment-text"},t.text),t.author_id===o.id?r.a.createElement(ye,null,r.a.createElement(B.q,{placement:"left",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(Z.a,{onClick:function(n){return e.deleteComment(n,t.id,t.news_id)}}))):null)}))),r.a.createElement(pe,{onClick:n}))}}]),t}(a.Component),de=j.a.div(le()),pe=j.a.div(se()),me=j.a.div(ce()),he=j.a.div(oe()),fe=j.a.div(ie()),ge=j.a.div(re()),be=j.a.div(ae()),ve=j.a.div(ne()),xe=j.a.div(te()),we=j.a.div(ee()),Ee=j.a.div($()),ye=j.a.div(Q()),ke=Object(J.withSnackbar)(ue),je=n(64),Oe=n.n(je),Ce=n(29);function Se(){var e=Object(f.a)(["\n  height: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: .37;\n  margin-bottom: 20px;\n"]);return Se=function(){return e},e}function Ne(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n\n  .news-item {\n    width: 100%;\n    padding-bottom: 0;\n  }\n  svg {\n    margin-left: 0;\n  }\n  .news-caption {\n    display: flex;\n    align-items: flex-start;\n    width: 111%;\n    cursor: pointer;\n    margin-left: -15px;\n    padding: 10px 15px 8px;\n    &:hover {\n      background: #1976d2;\n      color: #ffffff;\n      transition: .37s ease;\n    }\n    svg {\n      color: rgba(0,0,0,.15) !important;\n      margin-right: 8px;\n      font-size: 22px;\n    }\n  }\n\n  .news-item-comment {\n    width: 111%;\n    cursor: pointer;\n    margin-left: -15px;\n    padding: 12px 15px;\n    &:hover {\n      background: rgba(0,0,0,0.015);\n    }\n  }\n"]);return Ne=function(){return e},e}function Te(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Te=function(){return e},e}function De(){var e=Object(f.a)(["\n  width: 30%;\n  @media all and (max-width: 600px) {\n    display: none;\n  }\n"]);return De=function(){return e},e}function _e(){var e=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 0;\n    margin-top: ","px;\n    svg {\n      color: rgba(0,0,0,.15);\n      margin-right: 5px;  \n    }\n  "]);return _e=function(){return e},e}var Ie=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).goToSingleNews=function(e){return n.setState({singleNews:!0,singleNewsId:e})},n.closeNews=function(){n.setState({singleNews:!1,singleNewsId:""}),n.reloadComponent()},n.changeImportance=function(){return n.setState({importance:!n.state.importance})},n.getNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043e\u0442\u043c\u0435\u0442\u043e\u043a":1===(e%=10)?"\u043e\u0442\u043c\u0435\u0442\u043a\u0430":e>=2&&e<=4?"\u043e\u0442\u043c\u0435\u0442\u043a\u0438":"\u043e\u0442\u043c\u0435\u0442\u043e\u043a"},n.getCommentsNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432":1===(e%=10)?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439":e>=2&&e<=4?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},n.createImportantBar=function(e){var t=j.a.div(_e(),e);return r.a.createElement(t,null,r.a.createElement(Oe.a,null),r.a.createElement(B.r,{variant:"caption"},'\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a "\u0412\u0430\u0436\u043d\u043e\u0435"'))},n.state={news:[],importance:!1,singleNews:!1,singleNewsData:[],singleNewsId:"",comments:[],loading:!0},n.reloadComponent=n.reloadComponent.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.reloadComponent()}},{key:"reloadComponent",value:function(){var e=Object(H.a)(L.a.mark(function e(){var t=this;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({loading:!0});case 2:return e.next=4,fetch("".concat(R,"/api/news/read.php")).then(function(e){return e.json()}).then(function(e){return t.props.getNews(e.records||[])});case 4:return e.next=6,fetch("".concat(R,"/api/news/getcomments.php")).then(function(e){return e.json()}).then(function(e){return t.setState({comments:e.records})});case 6:return e.next=8,this.setState({loading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.news,a=t.importance,i=t.singleNews,o=t.singleNewsId,c=t.comments,s=t.loading,l=0;return 0===this.state.news.length&&setTimeout(function(){return e.setState({news:e.props.store.news})},0),r.a.createElement(Ae,null,r.a.createElement(B.n,null,s?r.a.createElement(_,{minHeight:250,color:"primary"}):r.a.createElement(Me,null,r.a.createElement(Pe,null,r.a.createElement(B.r,{variant:"subtitle2"},"\u0422\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u043e\u0435 "),r.a.createElement(B.o,{color:"primary",onClick:this.changeImportance.bind(this)})),n.length>0?this.props.store.news.map(function(t,n){if(a){if("1"===t.importance&&l<3)return l++,r.a.createElement("div",{key:n,className:"news-item"},r.a.createElement("div",{className:"news-item-header"},r.a.createElement(B.r,{variant:"subtitle2"},t.author),r.a.createElement(B.r,{variant:"caption"},t.date)),r.a.createElement(B.r,{variant:"button",className:"news-caption",onClick:function(){return e.goToSingleNews(t.id)}},"1"===t.importance?r.a.createElement(B.q,{title:"\u0412\u0430\u0436\u043d\u043e\u0435!",placement:"left"},r.a.createElement(Oe.a,null)):null,t.title),r.a.createElement("div",{className:"news-item-text"},r.a.createElement(B.r,{variant:"body2"},t.text)),r.a.createElement(B.q,{title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c",placement:"top-start"},r.a.createElement("div",{onClick:function(){return e.goToSingleNews(t.id)},className:"news-item-comment"},r.a.createElement(W.a,{icon:"comments"}),t.comments," ",e.getCommentsNoun(t.comments))))}else for(;n<3;)return r.a.createElement("div",{key:n,className:"news-item"},r.a.createElement("div",{className:"news-item-header"},r.a.createElement(B.r,{variant:"subtitle2"},t.author),r.a.createElement(B.r,{variant:"caption"},t.date)),r.a.createElement(B.r,{variant:"button",className:"news-caption",onClick:function(){return e.goToSingleNews(t.id)}},"1"===t.importance?r.a.createElement(B.q,{title:"\u0412\u0430\u0436\u043d\u043e\u0435!",placement:"top-start"},r.a.createElement(Oe.a,null)):null,t.title.replace(/&quot;/g,'"')),r.a.createElement("div",{className:"news-item-text"},r.a.createElement(B.r,{variant:"body2"},t.text.replace(/&quot;/g,'"'))),r.a.createElement(B.q,{title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c",placement:"top-start"},r.a.createElement("div",{onClick:function(){return e.goToSingleNews(t.id)},className:"news-item-comment"},r.a.createElement(W.a,{icon:"comments"}),t.comments," ",e.getCommentsNoun(t.comments))))}):r.a.createElement(Fe,null,r.a.createElement(B.r,{variant:"h6"},"\u043d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439")),r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:function(){e.props.handleChangeSection("news"),window.scrollTo(0,0)}},"\u041a\u041e \u0412\u0421\u0415\u041c \u041d\u041e\u0412\u041e\u0421\u0422\u042f\u041c"),i?r.a.createElement(ke,{closeNews:this.closeNews.bind(this),singleNewsId:o,news:n,user:this.props.user,comments:c,getNoun:this.getNoun,getCommentsNoun:this.getCommentsNoun,reloadComponent:this.reloadComponent,createImportantBar:this.createImportantBar.bind(this)}):null)))}}]),t}(a.Component),Ae=j.a.div(De()),Pe=j.a.div(Te()),Me=j.a.div(Ne()),Fe=j.a.div(Se()),qe=Object(Ce.b)(function(e){return{store:e}},function(e){return{getNews:function(t){e({type:"FETCH_NEWS",payload:t})}}})(Ie),Le=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"setCookie",value:function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"checkCookie",value:function(){var e=this.getCookie("username");""!==e?alert("Welcome again "+e):""!==(e=prompt("Please enter your name:",""))&&null!==e&&this.setCookie("username",e,365)}}]),e}(),He=n(70),We=n.n(He),ze=n(69),Ye=n.n(ze),Be=n(80),Re=n.n(Be),Ue=n(78),Ve=n.n(Ue),Ge=n(79),Ke=n.n(Ge);var Xe={};window.innerWidth<600?(Xe.width=50,Xe.height=50):(Xe.width=100,Xe.height=100);var Ze=function(e){var t="";return t=window.location.host.includes("localhost")&&e.friend.avatar?e.friend.avatar.slice(16):e.friend.avatar,r.a.createElement(Ye.a,{button:!0,TouchRippleProps:{classes:{child:"touch-ripple"}}},r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{style:{height:Xe.height,width:Xe.width},alt:"".concat(e.friend.name," ").concat(e.friend.surname),src:""!==e.friend.avatar?t:E.a})),r.a.createElement(Re.a,{inset:!0,primary:"".concat(e.friend.name," ").concat(e.friend.surname),secondary:e.friend.position}))},Je=n(36),Qe=n.n(Je),$e=n(45),et=n.n($e),tt=n(30),nt=n.n(tt),at=n(223),rt=n.n(at);function it(){var e=Object(f.a)(["\n  padding: 20px\n  & > div {\n    width: 100%;\n  }\n\n  @media all and (max-width: 600px) {\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    padding: 10px 20px 12px;\n    height: 80px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    label {\n      line-height: .5;\n    }\n    input {\n      padding: 9px 18.5px;\n    }\n    input::placeholder {\n      color: red;\n    }\n  }\n"]);return it=function(){return e},e}var ot=j.a.div(it()),ct=function(e){return r.a.createElement(ot,null,r.a.createElement(nt.a,{id:"outlined-adornment-password",variant:"outlined",type:"text",label:"\u041f\u043e\u0438\u0441\u043a",margin:"dense",value:e.searchValue,onChange:e.handleSearch,InputProps:{endAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Qe.a,{"aria-label":"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043a\u043e\u043b\u043b\u0435\u0433"},r.a.createElement("img",{alt:"\u041f\u043e\u0438\u0441\u043a",src:rt.a,style:{opacity:".37"}})))}}))},st=n(545),lt=n(43),ut=n.n(lt);function dt(){var e=Object(f.a)(["\n  a {\n    text-decoration: none;\n  }\n  ul {\n    padding: 0;\n    padding-bottom: 50px;\n  }\n\n  @media all and (max-width: 600px) {\n    ul {\n      padding-top: 15px;\n      padding-bottom: 15px;\n    }\n  }\n"]);return dt=function(){return e},e}var pt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={friends:[],initial:[],searchValue:"",loading:!0,documentTitle:document.title},n.handleSearch=function(e){n.setState({searchValue:e.target.value});var t=e.target.value.toLowerCase();document.title=e.target.value||n.state.documentTitle;var a=n.state.initial;a=a.filter(function(e){return e.name.toLowerCase().includes(t)||e.surname.toLowerCase().includes(t)||e.position.toLowerCase().includes(t)}),n.setState({friends:a})},n.componentWillUnmount=function(){document.title=n.state.documentTitle},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(R,"/api/user/read.php")).then(function(e){return e.json()}).then(function(t){return e.setState({friends:t.data.filter(function(t){return t.id!==e.props.user_id.toString()}),initial:t.data.filter(function(t){return t.id!==e.props.user_id.toString()})})}).then(function(){return e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement(ut.a,null,this.state.loading?r.a.createElement(_,{minHeight:370,color:"primary"}):r.a.createElement(mt,null,r.a.createElement(ct,{handleSearch:this.handleSearch,searchValue:this.searchValue}),r.a.createElement(We.a,null,this.state.friends.map(function(t){return r.a.createElement(st.a,{key:t.id,to:"id".concat(t.id),onClick:function(){return e.props.handleChangeUserId(t.id)}},r.a.createElement(Ze,{friend:t}))}))))}}]),t}(a.Component),mt=j.a.div(dt()),ht=n(39),ft=n(37),gt=n(224),bt=n.n(gt),vt=(n(472),n(226)),xt=n.n(vt),wt=n(52),Et=n.n(wt),yt=n(59);function kt(){var e=Object(f.a)(["\n  width: 100%;\n  display: inline-block;\n  & > div {\n    display: block;\n    margin-bottom: 10px;\n    padding-left: 37px;\n  }\n  & > div > div {\n    display: block;\n    pointer-events: none;\n    margin-top: -5px;\n  }\n  label {\n    font-size: 12px;\n    position: relative;\n    text-transform: lowercase;\n  }\n  .inline-input {\n    display: inline-flex;\n    margin-left: 10px;\n  }\n  @media all and (max-width: 600px) {\n    & > div {\n      padding-left: 15px;\n    }\n  }\n"]);return kt=function(){return e},e}function jt(){var e=Object(f.a)(["\n  margin-top: 15px;\n  button {\n    margin-right: 15px;\n  }\n  padding-left: 15px;\n"]);return jt=function(){return e},e}function Ot(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  & > div {\n    width: 90%;\n  }\n\n  svg {\n    opacity: .5;\n    cursor: pointer;\n    font-size: 24px;\n    &:hover {\n      opacity: .8;\n    }\n  }\n"]);return Ot=function(){return e},e}function Ct(){var e=Object(f.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: 20px 0 5px;\n  padding-left: 15px;\n"]);return Ct=function(){return e},e}function St(){var e=Object(f.a)(["\n  width: 30%;\n  position: relative;\n  margin-bottom: 15px;\n  margin-right: 3%;\n\n  &:hover > svg {\n    display: block;\n  } \n\n  svg {\n    display: none;\n    position: absolute;\n    right: 0;\n    top: 0;\n    opacity: .5;\n    cursor: pointer;\n    font-size: 20px;\n    &:hover {\n      opacity: .8;\n    }\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n    svg {\n      display: block;\n      font-size: 28px;\n    }\n  }\n"]);return St=function(){return e},e}function Nt(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n"]);return Nt=function(){return e},e}function Tt(){var e=Object(f.a)(["\n  padding-bottom: 30px;\n  label {\n    text-transform: lowercase;\n  }\n  .user-header {\n    color: #1976d2;\n    font-size: 20px;\n  }\n  .user-position {\n    display: block;\n    margin-top: -10px;\n    & > div > div {\n      margin: 0;\n      padding: 0;\n      & > div > input {\n        color: rgba(0,0,0,.54);\n        font-size: 14px;\n      }\n    }\n  }\n  fieldset {\n    border: none;\n  }\n"]);return Tt=function(){return e},e}var Dt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleDateChange=function(e){return n.setState({selectedDate:e.format()})},n.removeInput=function(){return n.setState({newChildInput:!1})},n.createInput=function(e,t,a){var i=n.props;return i.user_id===i.user_logged_id?r.a.createElement(B.p,{label:e,value:t,fullWidth:!0,name:a,margin:"dense",InputLabelProps:{shrink:!0},onChange:n.handleChange,variant:"outlined"}):r.a.createElement(qt,null,"name"===a||"surname"===a||"position"===a?r.a.createElement(B.h,null,r.a.createElement(Et.a,{value:t})):r.a.createElement(B.h,null,r.a.createElement(B.k,{htmlFor:a},e),r.a.createElement(Et.a,{id:a,value:t})))},n.state={userInfo:{},newChildInput:!1,nameError:!0,yearError:!0,childName:"",childBirthyear:"",loading:!0,selectedDate:"",loadingChild:!1},n.handleSubmit=n.handleSubmit.bind(Object(g.a)(Object(g.a)(n))),n.handleChange=n.handleChange.bind(Object(g.a)(Object(g.a)(n))),n.fetchUserInfo=n.fetchUserInfo.bind(Object(g.a)(Object(g.a)(n))),n.deleteChild=n.deleteChild.bind(Object(g.a)(Object(g.a)(n))),n.prepareChild=n.prepareChild.bind(Object(g.a)(Object(g.a)(n))),n.handleChild=n.handleChild.bind(Object(g.a)(Object(g.a)(n))),n.addChild=n.addChild.bind(Object(g.a)(Object(g.a)(n))),n.removeInput=n.removeInput.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"fetchUserInfo",value:function(e){var t=this;e||this.setState({loading:!0}),"child"===e&&this.setState({loadingChild:!0}),fetch("".concat(R,"/api/user/info.php?id=").concat(this.props.user_id)).then(function(e){return e.json()}).then(function(e){return t.setState({userInfo:e,selectedDate:e.birthday})}).then(function(){return t.setState({loading:!1,loadingChild:!1})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){this.fetchUserInfo()}},{key:"handleChange",value:function(e){var t=Object(ft.a)({},this.state.userInfo);t[e.target.name]=e.target.value,this.setState({userInfo:t})}},{key:"prepareChild",value:function(){this.setState({newChildInput:!0})}},{key:"handleChild",value:function(e){var t;this.setState((t={},Object(ht.a)(t,e.target.name,e.target.value),Object(ht.a)(t,"nameError",!0),Object(ht.a)(t,"yearError",!0),t))}},{key:"addChild",value:function(e){if(e.preventDefault(),this.state.childName&&this.state.childBirthyear){var t=this,n=new FormData;n.append("name",this.state.childName),n.append("year",this.state.childBirthyear),n.append("parent",t.props.user_logged_id),Y.a.ajax({url:"".concat(R,"/api/child/add.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){t.fetchUserInfo("child"),t.setState({newChildInput:!1,childBirthyear:"",childName:""}),t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"}),console.log(e)},error:function(){t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}else this.state.newChildInput&&(this.props.enqueueSnackbar("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"}),this.state.childBirthyear||this.setState({yearError:!1}),this.state.childName||this.setState({nameError:!1}))}},{key:"deleteChild",value:function(e){var t=this;t.setState({modal:!1});var n=new FormData;n.append("id",e),Y.a.ajax({url:"".concat(R,"/api/child/delete.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){t.fetchUserInfo("child"),t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"}),console.log(e)},error:function(){t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData;n.append("id",this.props.user_logged_id),n.append("adress",Y()('input[name="adress"]').val()),n.append("army_country",Y()('input[name="army_country"]').val()),n.append("army_type",Y()('input[name="army_type"]').val()),n.append("birthday",this.state.selectedDate.slice(0,10)),n.append("district",Y()('input[name="district"]').val()),n.append("fakultet",Y()('input[name="fakultet"]').val()),n.append("name",Y()('input[name="name"]').val()),n.append("phone",Y()('input[name="phone"]').val()),n.append("position",Y()('input[name="position"]').val()),n.append("status",Y()('input[name="status"]').val()),n.append("surname",Y()('input[name="surname"]').val()),n.append("vuz",Y()('input[name="vuz"]').val()),n.append("city",Y()('input[name="city"]').val()),n.append("sex",this.state.userInfo.sex),Y.a.ajax({url:"".concat(R,"/api/user/update.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(n){switch(n.result){case 0:t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"});break;case 1:t.fetchUserInfo("update"),t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"}),t.addChild(e)}},error:function(){t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,i=t.userInfo,o=t.newChildInput,c=t.childName,s=t.childBirthyear,l=t.nameError,u=t.yearError,d=this.props,p=d.user_id,m=d.user_logged_id,h=d.user,f={},g=h.avatar;return i.childs&&(f=JSON.parse(i.childs.replace(/\//g,""))),window.location.host.includes("localhost")&&g&&(g=g.slice(16)),r.a.createElement(B.n,{className:"personal"},n?r.a.createElement(_,{minHeight:400,color:"primary"}):r.a.createElement(_t,{id:"personal-info",action:"",method:"POST",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"personal-header"},r.a.createElement("div",{className:"personal-header__photo"},r.a.createElement("div",{style:{background:"url(".concat(g||E.a,") no-repeat center/cover")}})),r.a.createElement("div",{className:m===p?"personal-header__info":null},m===p?r.a.createElement(a.Fragment,null,this.createInput("\u0418\u043c\u044f",i.name,"name"),this.createInput("\u0424\u0430\u043c\u0438\u043b\u0438\u044f",i.surname,"surname"),this.createInput("\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",i.position,"position")):r.a.createElement(a.Fragment,null,r.a.createElement(Et.a,{className:"user-header",value:i.name+" "+i.surname}),r.a.createElement("span",{className:"user-position"},this.createInput("\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",i.position,"position"))),m===p?r.a.createElement(bt.a,{mask:"+7 (999) 99-99-999",value:i.phone,onChange:this.handleChange},function(){return r.a.createElement(B.p,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone",fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},variant:"outlined"})}):r.a.createElement(qt,null,r.a.createElement(Et.a,{id:"phone",style:{pointerEvents:"none",padding:0},value:i.phone})),m===p?r.a.createElement(B.h,null,r.a.createElement(yt.a,{variant:"outlined",name:"birthday",margin:"dense",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",format:"Do MMMM YYYY",value:this.state.selectedDate?this.state.selectedDate:i.birthday,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,"aria-describedby":"component-helper-text"}),r.a.createElement(B.j,{id:"component-helper-text"},"*\u0413\u043e\u0434 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u0438\u0434\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0443")):null)),r.a.createElement("div",{className:"personal-section"},r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(B.r,{variant:"h6",color:"primary"},"\u0421\u0435\u043c\u044c\u044f"),r.a.createElement("hr",null)),m===p?r.a.createElement(B.p,{select:!0,label:"\u0421\u0435\u043c\u0435\u0439\u043d\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435",name:"status",value:i.status||"",onChange:this.handleChange,margin:"dense",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0}},"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"===i.sex?r.a.createElement(B.l,{value:"\u041d\u0435 \u0437\u0430\u043c\u0443\u0436\u0435\u043c"},"\u041d\u0435 \u0437\u0430\u043c\u0443\u0436\u0435\u043c"):r.a.createElement(B.l,{value:"\u041d\u0435 \u0436\u0435\u043d\u0430\u0442"},"\u041d\u0435 \u0436\u0435\u043d\u0430\u0442"),"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"===i.sex?r.a.createElement(B.l,{value:"\u0417\u0430\u043c\u0443\u0436\u0435\u043c"},"\u0417\u0430\u043c\u0443\u0436\u0435\u043c"):r.a.createElement(B.l,{value:"\u0416\u0435\u043d\u0430\u0442"},"\u0416\u0435\u043d\u0430\u0442"),r.a.createElement(B.l,{value:"\u0412 \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u043e\u043c \u0431\u0440\u0430\u043a\u0435"},"\u0412 \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u043e\u043c \u0431\u0440\u0430\u043a\u0435")):r.a.createElement(qt,null,r.a.createElement(B.h,null,r.a.createElement(B.k,{htmlFor:"status"},"\u0421\u0435\u043c\u0435\u0439\u043d\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),r.a.createElement(Et.a,{id:"status",value:i.status})))),r.a.createElement("div",{className:"personal-section"},r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(B.r,{variant:"h6",color:"primary"},"\u0414\u0435\u0442\u0438"),r.a.createElement("hr",null)),this.state.loadingChild?r.a.createElement(_,{minHeight:120,color:"primary"}):r.a.createElement(Pt,null,Object.keys(f).map(function(t){return r.a.createElement(At,{key:f[t].id},r.a.createElement(B.r,{variant:"subtitle2"},"\u0418\u043c\u044f: ",f[t].child_name," "),r.a.createElement(B.r,{variant:"caption"},f[t].child_birthyear," \u0433.\u0440."),m===p?r.a.createElement(B.q,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",placement:"right"},r.a.createElement(K.a,{onClick:function(){return e.deleteChild(f[t].id)}})):null)}))),o?r.a.createElement(Mt,null,r.a.createElement("div",null,r.a.createElement(B.p,{label:"\u0418\u043c\u044f",value:c,fullWidth:!0,name:"childName",margin:"dense",error:!l,InputLabelProps:{shrink:!0},onChange:this.handleChild,variant:"outlined"}),r.a.createElement(B.p,{label:"\u0413\u043e\u0434 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",value:s,fullWidth:!0,name:"childBirthyear",margin:"dense",type:"date",error:!u,InputLabelProps:{shrink:!0},onChange:this.handleChild,variant:"outlined"})),r.a.createElement("span",null,r.a.createElement(B.q,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",placement:"right"},r.a.createElement(xt.a,{onClick:this.addChild})),r.a.createElement(B.q,{title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",placement:"right"},r.a.createElement(K.a,{onClick:function(){return e.setState({newChildInput:!1,childBirthyear:"",childName:"",nameError:!0,yearError:!0})}})))):null,m===p?r.a.createElement(Ft,null,r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:o?this.addChild:this.prepareChild},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")):null),r.a.createElement("div",{className:"personal-section"},r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(B.r,{variant:"h6",color:"primary"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),r.a.createElement("hr",null)),this.createInput("\u0420\u043e\u0434\u043d\u043e\u0439 \u0433\u043e\u0440\u043e\u0434",i.city,"city"),this.createInput("\u041e\u0431\u043b\u0430\u0441\u0442\u0438/\u043a\u0440\u0430\u044f",i.district,"district"),this.createInput("\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441",i.adress,"adress")),r.a.createElement("div",{className:"personal-section"},r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(B.r,{variant:"h6",color:"primary"},"\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("hr",null)),this.createInput("\u0412\u0423\u0417",i.vuz,"vuz"),this.createInput("\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442",i.fakultet,"fakultet")),"\u043c\u0443\u0436\u0441\u043a\u043e\u0439"===i.sex?r.a.createElement("div",{className:"personal-section"},r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(B.r,{variant:"h6",color:"primary"},"\u0421\u043b\u0443\u0436\u0431\u0430"),r.a.createElement("hr",null)),this.createInput("\u0421\u0442\u0440\u0430\u043d\u0430",i.army_country,"army_country"),this.createInput("\u0420\u043e\u0434 \u0432\u043e\u0439\u0441\u043a",i.army_type,"army_type")):null,m===p?r.a.createElement(It,null,r.a.createElement(B.a,{type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435")):null))}}]),t}(a.Component),_t=j.a.form(Tt()),It=j.a.div(Nt()),At=j.a.div(St()),Pt=j.a.div(Ct()),Mt=j.a.div(Ot()),Ft=j.a.div(jt()),qt=j.a.div(kt()),Lt=Object(J.withSnackbar)(Dt),Ht=n(32),Wt=n(125),zt=n.n(Wt),Yt=n(58),Bt=n.n(Yt);var Rt=Object(Ht.withStyles)(function(e){return{fixed:{position:"fixed",bottom:window.innerWidth>600?2*e.spacing.unit:74,right:3*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(Bt.a,{title:e.title,"aria-label":e.title},r.a.createElement(B.g,{color:e.secondary?"secondary":"primary",className:t.fixed},r.a.createElement(zt.a,null))))}),Ut=n(68),Vt=n.n(Ut);function Gt(e){return r.a.createElement(Vt.a,{open:e.open,onClose:e.handleClose},e.component)}var Kt=n(230),Xt=n.n(Kt),Zt=n(116),Jt=n.n(Zt),Qt=n(117),$t=n.n(Qt),en=n(118),tn=n.n(en),nn=n(119),an=n.n(nn),rn=n(25),on=n.n(rn),cn=n(243),sn=n(10),ln=n.n(sn),un=n(244),dn=n(227),pn=n.n(dn),mn=n(67);function hn(e){var t=e.inputRef,n=Object(cn.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))}var fn={Control:function(e){return r.a.createElement(B.p,Object.assign({fullWidth:!0,InputProps:{inputComponent:hn,inputProps:Object(ft.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(B.n,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(B.c,{tabIndex:-1,label:e.children,className:ln()(e.selectProps.classes.chip,Object(ht.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(pn.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(B.r,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(B.l,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(B.r,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(B.r,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},gn=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,a=this.props.users.map(function(e){return{value:e.id,label:"".concat(e.name," ").concat(e.surname)}}),i={input:function(e){return Object(ft.a)({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(B.m,null,r.a.createElement(un.a,{classes:t,styles:i,textFieldProps:{label:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",InputLabelProps:{shrink:!0}},options:a,components:fn,value:this.props.multi,onChange:this.props.handleChange("multi"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432",isMulti:!0}),r.a.createElement(B.i,{control:r.a.createElement(B.b,{onChange:this.props.changeImportance,color:"primary"}),label:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u0443\u044e"})))}}]),t}(r.a.Component),bn=Object(Ht.withStyles)(function(e){return{root:{flexGrow:1,height:120,marginTop:20,display:"flex",flexDirection:"column",justifyContent:"space-between"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(mn.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0}}},{withTheme:!0})(gn),vn=n(115),xn=n.n(vn),wn=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(xn.a,{container:!0,justify:"space-around",style:{paddingBottom:30}},r.a.createElement(yt.a,{margin:"normal",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",value:this.props.selectedDate,fullWidth:!0,onChange:this.props.handleDateChange}),r.a.createElement(yt.c,{ampm:!1,margin:"normal",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f",value:this.props.selectedTime,locale:"ru",fullWidth:!0,onChange:this.props.handleTimeChange}))}}]),t}(r.a.Component);function En(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n  height: 150px;\n\n  textarea {\n    max-height: 130px;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 100%;\n    & > div {\n      height: 100%;\n    }\n  }\n"]);return En=function(){return e},e}function yn(e){return r.a.createElement(kn,null,r.a.createElement(B.p,{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",multiline:!0,variant:"outlined",name:"text",onChange:e.handleTextChange,value:e.text,required:!0}))}var kn=j.a.div(En());var jn=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeStep:0},n.handleNext=function(){n.setState(function(e){return{activeStep:e.activeStep+1}})},n.handleBack=function(){n.setState(function(e){return{activeStep:e.activeStep-1}})},n.handleReset=function(){n.setState({activeStep:0})},n.checkDisabled=function(e,t,n,a,r){return(0!==e||0===t.length)&&((1!==e||"string"!==typeof n||"string"!==typeof a)&&!(2===e&&r.length>0))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.users,i=t.multi,o=t.selectedTime,c=t.selectedDate,s=t.text,l=["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0438 \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u044c","\u041d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043c\u044f","\u041f\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443"],u=this.state.activeStep;return r.a.createElement("div",{className:n.root},r.a.createElement(Jt.a,{activeStep:u,orientation:"vertical"},l.map(function(t,a){return r.a.createElement($t.a,{key:t},r.a.createElement(tn.a,null,t),r.a.createElement(an.a,null,r.a.createElement(on.a,null,function(e){switch(e){case 0:return"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432. \u041a \u0442\u043e\u043c\u0443 \u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u0443\u044e \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438.";case 1:return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043c\u044f \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044f\u0445.";case 2:return"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0435\u043c\u0443 \u0437\u0430\u0434\u0430\u0447\u0438 \u0432 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u0445.";default:return"Unknown step"}}(a)),r.a.createElement("div",{className:n.actionsContainer},r.a.createElement("div",null,r.a.createElement(k.a,{disabled:0===u,onClick:e.handleBack,className:n.button},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:u===l.length-1?function(){e.props.handleSubmit(),e.handleNext()}:e.handleNext,className:n.button,disabled:e.checkDisabled(u,i,c,o,s)},u===l.length-1?"\u0424\u0438\u043d\u0438\u0448":"\u0414\u0430\u043b\u044c\u0448\u0435")))))})),0===u?r.a.createElement(bn,{users:a,multi:i,handleChange:this.props.handleChange,changeImportance:this.props.changeImportance}):1===u?r.a.createElement(wn,{selectedTime:o,selectedDate:c,handleDateChange:this.props.handleDateChange,handleTimeChange:this.props.handleTimeChange}):2===u?r.a.createElement(yn,{text:s,handleTextChange:this.props.handleTextChange}):null,u===l.length&&r.a.createElement(ut.a,{square:!0,elevation:0,className:n.resetContainer},r.a.createElement(on.a,null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430."),r.a.createElement(k.a,{onClick:function(){e.handleReset(),e.props.resetAll()},variant:"contained",color:"primary",className:n.button},"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u0437\u0430\u0434\u0430\u0447\u0443"),r.a.createElement(k.a,{onClick:this.props.handleClose,className:n.button},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}}]),t}(r.a.Component),On=Object(Ht.withStyles)(function(e){return{root:{width:"100%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}})(jn);function Cn(){var e=Object(f.a)(["\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  max-width: 600px;\n  min-height: 300px;\n  height: fit-content;\n  margin: auto;\n  background: #ffffff;\n  border-radius: 10px;\n  outline: none;\n\n  .listFor {\n    max-height: 220px;\n    margin-top: 20px;\n    overflow: auto;\n  }\n  .listFor::-webkit-scrollbar {\n    width: 10px;\n  }\n  .listFor::-webkit-scrollbar-track {\n    background-color: #ebebeb;\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n  }\n  .listFor::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n    background: #1976d2; \n  }\n\n  & > div {\n    height: fit-content;\n    padding: 20px 30px;\n  }\n   \n  .closeNewTask svg {\n    font-size: 30px;\n    color: #1976d2;\n    opacity: .8;\n    cursor: pointer;\n    position: absolute;\n    right: 20px;\n    top: 20px;\n\n    :hover {\n      opacity: .8;\n      transition: .37s ease;\n    }\n  }\n  @media all and (max-width: 600px) {\n    top: 0;\n    max-width: 100%;\n    border-radius: unset;\n    height: calc(100vh - 55px);\n    margin: unset;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    & > div {\n      padding: 20px 15px;\n      box-shadow: unset;\n      & > div {\n        > div:first-child {\n          padding: 20px 5px;\n        }\n      }\n    }\n    .closeNewTask svg {\n      font-size: 32px;\n      right: 15px;\n    } \n  }\n"]);return Cn=function(){return e},e}var Sn=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedDate:new Date,selectedTime:new Date,users:[],multi:[],text:"",importance:0},n.componentDidMount=function(){fetch("".concat(R,"/api/user/read.php")).then(function(e){return e.json()}).then(function(e){return n.setState({users:e.data.filter(function(e){return Number(e.id)!==n.props.user_logged_id})})}).catch(function(e){return console.log(e)})},n.handleChange=function(e){return function(t){return n.setState(Object(ht.a)({},e,t))}},n.handleDateChange=function(e){return n.setState({selectedDate:e.format()})},n.handleTimeChange=function(e){return n.setState({selectedTime:e.format()})},n.handleTextChange=function(e){return n.setState({text:e.target.value})},n.changeImportance=function(){return n.setState({importance:!n.state.importance})},n.resetAll=function(){n.setState({selectedDate:new Date,selectedTime:new Date,multi:[],text:"",importance:0})},n.handleSubmit=function(){var e=n.state,t=e.multi,a=e.selectedTime,r=e.selectedDate,i=e.text,o=e.importance,c=new FormData,s=Object(g.a)(Object(g.a)(n)),l=[],u=new Date;t.forEach(function(e){return l.push("for".concat(e.value))}),c.append("from",n.props.user_logged_id),c.append("date",u.toLocaleDateString()),c.append("for",l.join(",")),c.append("time","".concat(u.getHours()<10?"0"+u.getHours():u.getHours(),":").concat(u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes())),c.append("until_date",r.slice(0,10)),c.append("text",i),c.append("until_time",a.slice(11,16)),c.append("importance",o?"1":"0"),Y.a.ajax({url:"".concat(R,"/api/tasks/add.php"),data:c,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),fetch("".concat(R,"/api/tasks/read.php?id=").concat(n.props.user_logged_id)).then(function(e){return e.json()}).then(function(e){return s.props.onAddNewTask(e.data)}).then(function(){return s.props.enqueueSnackbar("\u0417\u0430\u0434\u0430\u0447\u0430 \u0431\u044b\u043b\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430",{variant:"success"})}).catch(function(e){return console.log(e)})},error:function(e){console.log(e),s.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.users,n=e.multi,a=e.selectedTime,i=e.selectedDate,o=e.text;return r.a.createElement(Nn,null,r.a.createElement(B.n,null,r.a.createElement("span",{className:"closeNewTask",onClick:this.props.handleClose},r.a.createElement(B.q,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",placement:"left"},r.a.createElement(Xt.a,null))),r.a.createElement(B.r,{variant:"h5"},"\u041d\u043e\u0432\u0430\u044f \u0417\u0430\u0434\u0430\u0447\u0430"),r.a.createElement(On,{users:t,multi:n,text:o,selectedTime:a,selectedDate:i,handleChange:this.handleChange,handleTextChange:this.handleTextChange,handleDateChange:this.handleDateChange,handleTimeChange:this.handleTimeChange,changeImportance:this.changeImportance,resetAll:this.resetAll,handleClose:this.props.handleClose,handleSubmit:this.handleSubmit})))}}]),t}(a.Component),Nn=j.a.div(Cn()),Tn=Object(Ce.b)(function(e){return{store:e}},function(e){return{onAddNewTask:function(t){e({type:"ADD_TASK",payload:t})}}})(Object(J.withSnackbar)(Sn)),Dn=n(231),_n=n.n(Dn),In=n(28),An=n.n(In);function Pn(){var e=Object(f.a)(["\n  .task-completed {\n    color: darkgreen;\n  }\n  .task-doing {\n    color: darkblue;\n  }\n  .task-late {\n    color: darkred;\n  }\n"]);return Pn=function(){return e},e}function Mn(){var e=Object(f.a)(["\n  margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n"]);return Mn=function(){return e},e}function Fn(){var e=Object(f.a)(["\n  svg {\n    font-size: 32px;\n    color: rgba(0,0,0,0.54);\n    right: 55px;\n    padding: 5px;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    position: absolute;\n  }\n"]);return Fn=function(){return e},e}function qn(){var e=Object(f.a)(["\n  svg {\n    color: rgba(0,0,0,.15) !important;\n    margin-left: 8px;\n    font-size: 22px;\n  }\n"]);return qn=function(){return e},e}var Ln=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getUserNames=function(e){var t=e.split(","),a="\u0414\u043b\u044f: ";return t.forEach(function(e){a+="".concat(n.props.users.find(function(t){return t.id===e.slice(3)}).name," "),a+="".concat(n.props.users.find(function(t){return t.id===e.slice(3)}).surname,", ")}),a},n.getAdresant=function(e){var t="\u041e\u0442: ";return n.props.user_logged_id?t+"\u0412\u0430\u0441":n.props.users.length>0?(t+=n.props.users.find(function(e){return e.id===n.props.task.from}).name,t+=" ".concat(n.props.users.find(function(e){return e.id===n.props.task.from}).surname)):void 0},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=An()(new Date),n=An()(this.props.task.until_date),a=An.a.duration(n.diff(t))._milliseconds;return r.a.createElement(B.d,null,r.a.createElement(B.f,{expandIcon:r.a.createElement(_n.a,null)},r.a.createElement(B.r,{variant:"caption"},r.a.createElement(B.r,{variant:"subtitle2",style:Hn.flex},"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e: ",this.props.task.date," \u0432 ","".concat(this.props.task.time," "),"1"===this.props.task.importance?r.a.createElement(B.q,{title:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a '\u0412\u0430\u0436\u043d\u043e\u0435'",placement:"top-start"},r.a.createElement(Wn,null,r.a.createElement(Oe.a,null))):null),this.getAdresant(this.props.task.from),r.a.createElement(Bn,null,r.a.createElement(B.r,{variant:"caption",className:ln()({"task-completed":"1"===this.props.task.status,"task-doing":"0"===this.props.task.status,"task-late":a<0})},"1"===this.props.task.status&&a>0?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":"0"===this.props.task.status&&a>0?"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f":"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u0430"))),r.a.createElement(zn,{onClick:function(t){return e.props.handleConfirm(t,e.props.task.id)}},r.a.createElement(B.q,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",placement:"left"},r.a.createElement(Z.a,null)))),r.a.createElement(B.e,{style:Hn.details},r.a.createElement(B.r,{variant:"h6"}," ",this.props.task.text,"  "),r.a.createElement(Yn,null,r.a.createElement("div",null,r.a.createElement(B.r,{variant:"caption"},this.props.users.length>0?this.getUserNames(this.props.task.for).slice(0,-2):null),r.a.createElement(B.r,{variant:"subtitle2"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e: ",this.props.task.until_date.split("-").reverse().join("."),", ",this.props.task.until_time)),"0"===this.props.task.status&&this.props.task.from.includes("for".concat(this.props.user_logged_id))?a<0?r.a.createElement(B.q,{title:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443",placement:"top-start",leaveDelay:200},r.a.createElement("span",null,r.a.createElement(B.a,{disabled:!0,variant:"contained",color:"primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"))):r.a.createElement(B.a,{onClick:function(){return e.props.handleCompleted(e.props.task.id)},variant:"contained",color:"primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"):null)))}}]),t}(r.a.Component),Hn={flex:{display:"flex",alignItems:"center"},details:{flexDirection:"column"}},Wn=j.a.div(qn()),zn=j.a.span(Fn()),Yn=j.a.div(Mn()),Bn=j.a.span(Pn());function Rn(){var e=Object(f.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: 100vh;\n  width: 100vw;\n  background: rgba(0,0,0,.37);\n"]);return Rn=function(){return e},e}function Un(){var e=Object(f.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return Un=function(){return e},e}function Vn(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return Vn=function(){return e},e}function Gn(){var e=Object(f.a)(["\n  position: fixed;\n  height: 200px;\n  width: 400px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  z-index: 1000;\n  & > div {\n    height: 100%;\n    position: relative;\n    display: flex;\n    padding: 30px;\n    flex-direction: column;\n    justify-content: center;\n  }\n  @media all and (max-width: 600px) {\n    width: 95%;\n  }\n"]);return Gn=function(){return e},e}function Kn(e){return r.a.createElement(a.Fragment,null,r.a.createElement(Xn,null,r.a.createElement(B.n,null,r.a.createElement(Jn,{onClick:e.handleClose},r.a.createElement(K.a,null)),r.a.createElement(B.r,{variant:"body1"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443?"),r.a.createElement(B.r,{variant:"caption"},"\u0412\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u0437\u0430\u0434\u0430\u0447\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e."),r.a.createElement(Zn,null,r.a.createElement(B.a,{variant:"contained",color:"secondary",onClick:e.handleDelete},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(B.a,{variant:"text",color:"default",onClick:e.handleClose},"\u041e\u0442\u043c\u0435\u043d\u0430")))),r.a.createElement(Qn,{onClick:e.handleClose}))}var Xn=j.a.div(Gn()),Zn=j.a.div(Vn()),Jn=j.a.div(Un()),Qn=j.a.div(Rn());function $n(){var e=Object(f.a)(["\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); \n  height: 80px;\n  padding: 36px 20px 15px;\n  font-size: 24px;\n"]);return $n=function(){return e},e}function ea(e){return r.a.createElement(ta,null,r.a.createElement(on.a,{variant:"h6"},e.title))}var ta=j.a.div($n());function na(){var e=Object(f.a)(["\n  height: 60px;\n  display: flex;\n  justify-content: space-around;\n  button {\n    width: 33.3%;\n  }\n\n  @media all and (max-width: 600px) {\n    height: 45px;\n      \n    button {\n      > span {\n        font-size: 10px;\n        color: #757575;\n      }\n    }\n    button:disabled {\n      > span {\n        font-size: 12px;\n        color: #232323;\n      }\n    }\n  }\n"]);return na=function(){return e},e}function aa(){var e=Object(f.a)(["\n  .no-tasks {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    opacity: .37;\n    height: 300px;\n    font-size: 20px;\n  }\n"]);return aa=function(){return e},e}var ra=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,confirm:!1,preparedToDelete:null,tasks:[],initial:[],users:[],disabledButton:1,loading:!0},n.componentDidMount=function(){fetch("".concat(R,"/api/tasks/read.php?id=").concat(n.props.user_logged_id)).then(function(e){return e.json()}).then(function(e){return n.props.getTasks(e.data)}).catch(function(e){return console.log(e)}),fetch("".concat(R,"/api/user/read.php")).then(function(e){return e.json()}).then(function(e){return n.setState({users:e.data})}).then(function(){return n.setState({loading:!1})}).catch(function(e){return console.log(e)})},n.handleOpen=function(e){return n.setState({open:!0})},n.handleConfirm=function(e,t){e.stopPropagation(),n.setState({confirm:!0,preparedToDelete:t})},n.handleClose=function(){return n.setState({open:!1,confirm:!1,preparedToDelete:null})},n.handleCompleted=function(e){var t=new FormData,a=Object(g.a)(Object(g.a)(n)),r=new Date;n.setState({loading:!0});var i=r.toLocaleDateString(),o="".concat(r.getHours()<10?"0"+r.getHours():r.getHours(),":").concat(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes());t.append("id",e),t.append("done_date",i),t.append("done_time",o),Y.a.ajax({url:"".concat(R,"/api/tasks/complete.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),fetch("".concat(R,"/api/tasks/read.php?id=").concat(a.props.user_logged_id)).then(function(e){return e.json()}).then(function(e){return a.setState({tasks:e.data,initial:e.data})}).then(function(){return a.props.enqueueSnackbar('\u0417\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u0430 \u043a\u0430\u043a "\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f"',{variant:"success"})}).then(function(){return a.props.markAsCompleted(a.state.tasks)}).then(function(){return n.setState({loading:!1})}).catch(function(e){return console.log(e)})},error:function(e){console.log(e),a.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",{variant:"error"})}})},n.handleFilter=function(e,t){n.setState({disabledButton:e});var a=n.state.initial;"initial"===t&&n.props.onFilter(n.state.initial),"transfered"===t&&(a=a.filter(function(e){return Number(e.from)===n.props.user_logged_id}),n.props.onFilter(a)),"completed"===t&&(a=a.filter(function(e){return"1"===e.status}),n.props.onFilter(a))},n.handleDelete=function(){var e=new FormData,t=Object(g.a)(Object(g.a)(n));n.setState({loading:!0}),e.append("id",n.state.preparedToDelete),Y.a.ajax({url:"".concat(R,"/api/tasks/delete.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),fetch("".concat(R,"/api/tasks/read.php?id=").concat(t.props.user_logged_id)).then(function(e){return e.json()}).then(function(e){return t.setState({tasks:e.data||[],initial:e.data||[]})}).then(function(){return t.props.enqueueSnackbar("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",{variant:"info"})}).then(function(){return t.props.onDeleteTask(t.state.preparedToDelete)}).then(function(){return t.handleClose()}).then(function(){return n.setState({loading:!1})}).catch(function(e){return console.log(e)})},error:function(e){console.log(e),t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",{variant:"error"})}})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.open,i=t.users,o=t.disabledButton;return 0===this.state.initial.length&&setTimeout(function(){return e.setState({initial:e.props.store.tasks,tasks:e.props.store.tasks})},0),r.a.createElement(ia,null,r.a.createElement(B.n,null,window.innerWidth<600?r.a.createElement(ea,{title:"\u0417\u0430\u0434\u0430\u0447\u0438"}):null,this.state.loading?r.a.createElement(_,{minHeight:300,color:"primary"}):r.a.createElement(a.Fragment,null,r.a.createElement(oa,null,r.a.createElement(B.a,{onClick:function(){return e.handleFilter(1,"initial")},variant:1!==o?"contained":"text",disabled:1===o},"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"),r.a.createElement(B.a,{onClick:function(){return e.handleFilter(2,"transfered")},variant:2!==o?"contained":"text",disabled:2===o},"\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(B.a,{onClick:function(){return e.handleFilter(3,"completed")},variant:3!==o?"contained":"text",disabled:3===o},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435")),this.props.store.tasks.length>0?this.props.store.tasks.map(function(t){return r.a.createElement(Ln,{key:t.id,task:t,users:i,user_logged_id:e.props.user_logged_id,handleCompleted:e.handleCompleted,handleConfirm:e.handleConfirm.bind(e)})}):r.a.createElement(B.r,{className:"no-tasks",variant:"caption"},"\u043d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447"))),r.a.createElement("span",{onClick:this.handleOpen},r.a.createElement(Rt,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"})),r.a.createElement(Gt,{open:n,handleClose:this.handleClose.bind(this),component:r.a.createElement(Tn,{handleClose:this.handleClose.bind(this),user_logged_id:this.props.user_logged_id})}),r.a.createElement(Gt,{open:this.state.confirm,handleClose:this.handleClose.bind(this),component:r.a.createElement(Kn,{handleDelete:this.handleDelete,handleClose:this.handleClose.bind(this)})}))}}]),t}(a.Component),ia=j.a.div(aa()),oa=j.a.div(na()),ca=Object(Ce.b)(function(e){return{store:e}},function(e){return{markAsCompleted:function(t){e({type:"MARK_COMPLETED",payload:t})},onDeleteTask:function(t){e({type:"DELETE_TASK",payload:t})},onFilter:function(t){e({type:"FILTER_TASKS",payload:t})},getTasks:function(t){e({type:"FETCH_TASKS",payload:t})}}})(Object(J.withSnackbar)(ra));function sa(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: absolute;\n  top: 15px;\n  right: 20px;\n  svg {\n    font-size: 32px;\n    color: #1976d2;\n  }\n  @media all and (max-width: 600px) {\n    right: 15px;\n  }\n"]);return sa=function(){return e},e}function la(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n  height: 150px;\n\n  textarea {\n    max-height: 130px;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 85%;\n    & > div {\n      height: 100%;\n    }\n  }\n  @media all and (max-width: 600px) {\n    & > div {\n      width: 100%;\n    }\n    height: 250px;\n    textarea {\n      max-height: 230px;\n    }\n  }\n"]);return la=function(){return e},e}function ua(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 5px;\n\n  & > div {\n    width: 85%;\n  }\n  @media all and (max-width: 600px) {\n    flex-direction: column;\n    align-items: flex-start;\n    & > div {\n      width: 100%;\n    }\n  }\n"]);return ua=function(){return e},e}function da(){var e=Object(f.a)(["\n  display: flex;\n  height: 90px;\n  align-items: center;\n  justify-content: space-between;\n  width: 85%;\n  margin-left: 15%;\n  @media all and (max-width: 600px) {\n    width: 100%;\n    margin-left: 0;\n  }\n"]);return da=function(){return e},e}function pa(){var e=Object(f.a)(["\n  .image {\n    width: 56px;\n    height: 56px;\n    border-radius: 50%;\n    display: inline-block;\n  }\n  padding: 0 25px;\n  @media all and (max-width: 600px) {\n    .image {\n      display: none;\n    }\n    padding: 0 15px;\n  }\n"]);return pa=function(){return e},e}function ma(){var e=Object(f.a)(["\n  display: flex;\n  height: 50px;\n  align-items: center;\n  justify-content: center;\n"]);return ma=function(){return e},e}function ha(){var e=Object(f.a)(["\n  background: #ffffff;\n  width: 600px;\n  position: fixed;\n  top: 150px;\n  left: 0;\n  right: 0;\n  margin: auto;\n  border-radius: 10px;\n  z-index: 37;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n\n  .close {\n    top: -5px;\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    box-shadow: unset;\n    border-radius: 0;\n    padding-top: 10px;\n  }\n"]);return ha=function(){return e},e}function fa(){var e=Object(f.a)(["\n  position: fixed;\n  background: rgba(0,0,0, .5);\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  z-index: 30;\n"]);return fa=function(){return e},e}function ga(e){var t="";return t=!window.location.host.includes("localhost")&&e.user.avatar?e.user.avatar:e.user.avatar.slice(16),r.a.createElement(a.Fragment,null,r.a.createElement(va,null,r.a.createElement(xa,null,r.a.createElement(B.r,{variant:"button"},"\u041d\u043e\u0432\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement(B.q,{placement:"left",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},r.a.createElement(ja,null,r.a.createElement(K.a,{onClick:e.closeNews})))),r.a.createElement(wa,null,r.a.createElement("form",{action:"",method:"POST",onSubmit:e.submitNews},r.a.createElement(ya,null,""===e.user.avatar?r.a.createElement("div",{className:"image",alt:"".concat(e.user.name," ").concat(e.user.surname),style:{background:"url(".concat(E.a,") no-repeat center/cover")}}):r.a.createElement("div",{className:"image",alt:"".concat(e.user.name," ").concat(e.user.surname),style:{background:"url(".concat(t,") no-repeat center/cover")}}),r.a.createElement(B.p,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:e.newNewsTopic,onChange:e.handleChange,error:e.invalidTopic,variant:"outlined",name:"newNewsTopic",type:"text",required:!0})),r.a.createElement(ka,null,r.a.createElement(B.p,{label:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",multiline:!0,variant:"outlined",name:"newNewsText",error:e.invalidText,onChange:e.handleChange,value:e.newNewsText,required:!0})),r.a.createElement(Ea,null,r.a.createElement(B.i,{control:r.a.createElement(B.b,{checked:e.newNewsImportance,onChange:e.changeImportance,color:"primary"}),label:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u043e\u0435"}),r.a.createElement(B.a,{onClick:e.submitNews,variant:"contained",color:"primary"},window.innerWidth>600?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c":r.a.createElement(zt.a,null)))))),r.a.createElement(ba,{onClick:e.closeNews}))}var ba=j.a.div(fa()),va=j.a.div(ha()),xa=j.a.div(ma()),wa=j.a.div(pa()),Ea=j.a.div(da()),ya=j.a.div(ua()),ka=j.a.div(la()),ja=j.a.div(sa());function Oa(){var e=Object(f.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return Oa=function(){return e},e}function Ca(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return Ca=function(){return e},e}function Sa(){var e=Object(f.a)(["\n  position: fixed !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0,0,0,0.54);\n  width: 100vw;\n  height: 100vh !important;\n  z-index: 5;\n"]);return Sa=function(){return e},e}function Na(){var e=Object(f.a)(["\n  position: fixed;\n  height: 200px;\n  width: 400px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  & > div {\n    height: 100%;\n    position: relative;\n    display: flex;\n    padding: 30px;\n    flex-direction: column;\n    justify-content: center;\n    z-index: 10;\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n  }\n"]);return Na=function(){return e},e}function Ta(e){return r.a.createElement(Da,null,r.a.createElement(B.n,null,r.a.createElement(Aa,{onClick:e.closeNews},r.a.createElement(K.a,null)),r.a.createElement(B.r,{variant:"body1"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c?"),r.a.createElement(B.r,{variant:"caption"},"\u0412\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u043d\u043e\u0432\u043e\u0441\u0442\u0438 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e."),r.a.createElement(Ia,null,r.a.createElement(B.a,{variant:"contained",color:"secondary",onClick:e.removeNews},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(B.a,{variant:"text",color:"default",onClick:e.closeNews},"\u041e\u0442\u043c\u0435\u043d\u0430"))),r.a.createElement(_a,null))}var Da=j.a.div(Na()),_a=j.a.section(Sa()),Ia=j.a.div(Ca()),Aa=j.a.div(Oa());function Pa(){var e=Object(f.a)(["\n  cursor: pointer;\n  svg {\n    color: rgba(0,0,0,0.54);\n  }\n"]);return Pa=function(){return e},e}function Ma(){var e=Object(f.a)(["\n  height: 254px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: .37;\n  margin-bottom: 20px;\n"]);return Ma=function(){return e},e}function Fa(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin: 15px 0 10px;\n  height: 120px;\n\n  textarea {\n    max-height: 100px;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 100%;\n    & > div {\n      height: 100%;\n    }\n  }\n"]);return Fa=function(){return e},e}function qa(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n\n  p {\n    margin-right: 5px;\n    color: #657786;\n  }\n"]);return qa=function(){return e},e}function La(){var e=Object(f.a)(["\n  position: absolute;\n  left: 20px;\n  top: 30px;\n  border-radius: 50%;\n  width: 80px;\n  height: 80px;\n  @media all and (max-width: 600px) {\n    width: 45px;\n    height: 45px;\n  }\n"]);return La=function(){return e},e}function Ha(){var e=Object(f.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 5px;\n\n  span {\n    display: flex;\n    align-items: baseline;\n    h6 {\n      margin-right: 10px;\n      :after {\n        content: '\0b7';\n        margin-left: 10px;\n      }\n    }\n  }\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 5px;\n\n  span {\n    display: flex;\n    align-items: baseline;\n    h6 {\n      margin-right: 10px;\n      :after {\n        content: '\\00b7';\n        margin-left: 10px;\n      }\n    }\n  }\n"]);return Ha=function(){return e},e}function Wa(){var e=Object(f.a)(["\n  padding: 10px 15px;\n  margin-top: 10px;\n  background: rgba(0,0,0,0.015);\n"]);return Wa=function(){return e},e}function za(){var e=Object(f.a)(["\n  position: relative;\n  padding: 20px 40px 20px 120px;\n  border-bottom: 1px solid #e6ecf0;\n  cursor: pointer;\n\n  input {\n    padding: 10px 15px;\n  }\n  :hover {\n    background: rgba(0,0,0,0.037);\n    transition: .37s ease;\n  }\n  @media all and (max-width: 600px) {\n    padding: 10px 20px 10px 80px;\n  }\n"]);return za=function(){return e},e}function Ya(){var e=Object(f.a)(["\n      display: flex;\n      align-items: center;\n      margin-bottom: 0;\n      margin-top: ","px;\n      svg {\n        color: rgba(0,0,0,.15);\n        margin-right: 5px;  \n      }\n    "]);return Ya=function(){return e},e}var Ba=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(ht.a)({},e.target.name,e.target.value)),n.setState({invalidText:!1,invalidTopic:!1})},n.addLike=function(e,t){var a=Object(g.a)(Object(g.a)(n));t.preventDefault(),t.stopPropagation();var r=new FormData;r.append("id",e),r.append("liked_by",n.props.user.id);var i=document.getElementById("actions");i.style.pointerEvents="none",Y.a.ajax({url:"".concat(R,"/api/news/addlike.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(){a.reloadComponent("like"),setTimeout(function(){return i.style.pointerEvents="all"},500)},error:function(e){console.log(e)}})},n.removeLike=function(e,t){var a=Object(g.a)(Object(g.a)(n));t.preventDefault(),t.stopPropagation();var r=document.getElementById("actions");r.style.pointerEvents="none";var i=new FormData;i.append("id",e),i.append("liked_by",n.props.user.id),Y.a.ajax({url:"".concat(R,"/api/news/removelike.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(e){a.reloadComponent("like"),a.setState({newNews:!1}),setTimeout(function(){return r.style.pointerEvents="all"},500)},error:function(e){console.log(e)}})},n.submitNews=function(e){var t=Object(g.a)(Object(g.a)(n));if(e.preventDefault(),""!==n.state.newNewsTopic&&""!==n.state.newNewsText){var a=new FormData;a.append("author","".concat(n.props.user.name," ").concat(n.props.user.surname)),a.append("title",n.state.newNewsTopic),a.append("text",n.state.newNewsText),a.append("date",(new Date).toJSON().slice(0,10).replace(/-/g,".")),a.append("created",(new Date).getTime()),a.append("importance",n.state.newNewsImportance?1:0),a.append("author_id",n.props.user.id),Y.a.ajax({url:"".concat(R,"/api/news/submitnews.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),t.reloadComponent(),t.setState({newNews:!t.state.newNews,newNewsText:"",newNewsTopic:""}),t.props.enqueueSnackbar("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u043e\u0432\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"success"})},error:function(e){console.log(e),t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"}),""===t.state.newNewsTopic&&n.setState({invalidTopic:!0}),""===t.state.newNewsText&&n.setState({invalidText:!0})},n.changeImportance=function(){return n.setState({newNewsImportance:!n.state.newNewsImportance})},n.removeNews=function(){n.setState({editing:!0});var e=Object(g.a)(Object(g.a)(n)),t=new FormData;t.append("id",n.state.preparedNewsId),Y.a.ajax({url:"".concat(R,"/api/news/delete.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(){e.reloadComponent(),e.setState({editing:"",preparedNewsId:"",confirmDelete:!1}),e.props.enqueueSnackbar("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",{variant:"info"})},error:function(t){console.log(t),e.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"error"})}})},n.prepareNews=function(e){var t=n.props.store.news.find(function(t){return t.id===e}).title,a=n.props.store.news.find(function(t){return t.id===e}).text;n.setState({editing:e,newNewsTopic:t,newNewsText:a})},n.editNews=function(e,t){e.preventDefault(),e.stopPropagation();var a=Object(g.a)(Object(g.a)(n));if(""!==n.state.newNewsTopic&&""!==n.state.newNewsText){var r=new FormData;r.append("id",t),r.append("title",n.state.newNewsTopic),r.append("text",n.state.newNewsText),Y.a.ajax({url:"".concat(R,"/api/news/edit.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(){a.reloadComponent(),setTimeout(function(){return a.setState({editing:""})},200),a.props.enqueueSnackbar("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0431\u044b\u043b\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430",{variant:"info"})},error:function(e){console.log(e),a.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"error"})}})}else a.props.enqueueSnackbar("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0451 \u043f\u043e\u043b\u044f",{variant:"warning"}),""===a.state.newNewsTopic&&n.setState({invalidTopic:!0}),""===a.state.newNewsText&&n.setState({invalidText:!0})},n.addNews=function(){return n.setState({editing:"",newNews:!n.state.newNews,newNewsText:"",newNewsTopic:""})},n.closeNews=function(){n.setState({singleNews:!1,singleNewsId:"",newNews:!1,likedBy:[],preparedNewsId:"",confirmDelete:!1}),n.reloadComponent("close")},n.getNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043e\u0442\u043c\u0435\u0442\u043e\u043a":1===(e%=10)?"\u043e\u0442\u043c\u0435\u0442\u043a\u0430":e>=2&&e<=4?"\u043e\u0442\u043c\u0435\u0442\u043a\u0438":"\u043e\u0442\u043c\u0435\u0442\u043e\u043a"},n.getCommentsNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432":1===(e%=10)?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439":e>=2&&e<=4?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},n.createImportantBar=function(e){var t=j.a.div(Ya(),e);return r.a.createElement(t,null,r.a.createElement(Oe.a,null),r.a.createElement(B.r,{variant:"caption"},'\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a "\u0412\u0430\u0436\u043d\u043e\u0435"'))},n.prepareDelete=function(e,t){n.setState({confirmDelete:!0,preparedNewsId:t}),e.stopPropagation()},n.handleAvatarRoute=function(e){return window.location.host.includes("localhost")?e.slice(16):e},n.state={news:[],newNews:!1,newNewsTopic:"",newNewsText:"",newNewsImportance:!1,editing:"",singleNews:!1,singleNewsData:[],singleNewsId:"",invalidText:!1,invalidTopic:!1,loading:!0,confirmDelete:!1,preparedNewsId:""},n.addLike=n.addLike.bind(Object(g.a)(Object(g.a)(n))),n.reloadComponent=n.reloadComponent.bind(Object(g.a)(Object(g.a)(n))),n.removeLike=n.removeLike.bind(Object(g.a)(Object(g.a)(n))),n.addNews=n.addNews.bind(Object(g.a)(Object(g.a)(n))),n.handleChange=n.handleChange.bind(Object(g.a)(Object(g.a)(n))),n.submitNews=n.submitNews.bind(Object(g.a)(Object(g.a)(n))),n.removeNews=n.removeNews.bind(Object(g.a)(Object(g.a)(n))),n.editNews=n.editNews.bind(Object(g.a)(Object(g.a)(n))),n.prepareNews=n.prepareNews.bind(Object(g.a)(Object(g.a)(n))),n.showNews=n.showNews.bind(Object(g.a)(Object(g.a)(n))),n.changeImportance=n.changeImportance.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.reloadComponent()}},{key:"reloadComponent",value:function(){var e=Object(H.a)(L.a.mark(function e(t){var n=this;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.next=3,this.setState({loading:!0});case 3:return e.next=5,fetch("".concat(R,"/api/news/read.php")).then(function(e){return e.json()}).then(function(e){return n.props.onAddNews(e.records||[])});case 5:return e.next=7,this.setState({loading:!1});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showNews",value:function(e){var t=this;setTimeout(function(){""===t.state.editing&&t.setState({singleNews:!0,singleNewsId:e})},100)}},{key:"render",value:function(){var e=this,t=this.state,n=t.news,i=t.invalidText,o=t.invalidTopic,c=t.newNews,s=t.loading,l=t.newNewsText,u=t.newNewsTopic,d=t.editing,p=t.singleNews,m=t.singleNewsId,h=t.newNewsImportance,f=this.props.user;return window.location.host.includes("localhost")&&f.avatar?f.avatar.slice(16):f.avatar,0===this.state.news.length&&setTimeout(function(){return e.setState({news:e.props.store.news})},0),r.a.createElement(B.n,null,window.innerWidth<600?r.a.createElement(ea,{title:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}):null,s?r.a.createElement(_,{minHeight:300,color:"primary"}):this.props.store.news.length>0&&this.props.store.news?this.props.store.news.map(function(t,n){return r.a.createElement(Ra,{key:n,onClick:function(){return e.showNews(t.id)}},r.a.createElement(Ga,{style:{background:"url(".concat(""===e.handleAvatarRoute(t.avatar)?E.a:e.handleAvatarRoute(t.avatar),") no-repeat center/cover")}}),r.a.createElement("div",null,r.a.createElement(Va,null,f.id===t.author_id?r.a.createElement(a.Fragment,null,r.a.createElement(B.r,{variant:"caption"},r.a.createElement(B.r,{variant:"subtitle2"},"\u0412\u044b"),t.date),r.a.createElement(Ja,null,r.a.createElement(B.q,{placement:"left",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(Z.a,{onClick:function(n){return e.prepareDelete(n,t.id)}})))):r.a.createElement(B.r,{variant:"caption"},r.a.createElement(B.r,{variant:"subtitle2"},t.author),t.date)),"1"===t.importance?e.createImportantBar(0):null,d!==t.id?r.a.createElement(a.Fragment,null,r.a.createElement(B.r,{variant:"button"},t.title.replace(/&quot;/g,'"')),r.a.createElement(Ua,null,r.a.createElement(B.r,{variant:"body2"},t.text.replace(/&quot;/g,'"')))):r.a.createElement("form",{id:"edit-news",action:"".concat(R,"/api/news/edit.php"),method:"POST",onSubmit:function(n){return e.editNews(n,t.id)}},r.a.createElement(B.p,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:u,onChange:e.handleChange,variant:"outlined",name:"newNewsTopic",type:"text",error:e.state.invalidTopic}),r.a.createElement(Xa,null,r.a.createElement(B.p,{label:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",multiline:!0,variant:"outlined",name:"newNewsText",onChange:e.handleChange,value:l,error:e.state.invalidText})),r.a.createElement(B.a,{onClick:function(n){return e.editNews(n,t.id)},variant:"contained",color:"primary"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"))),r.a.createElement(Ka,{id:"actions"},r.a.createElement("p",null,t.comments),r.a.createElement(B.q,{title:"".concat(t.comments," ").concat(e.getCommentsNoun(t.comments)),placement:"top"},r.a.createElement(W.a,{onClick:""===d?function(){return e.showNews(t.id)}:null,icon:"comments"})),r.a.createElement("p",null,t.likes),t.liked_by.includes(" ".concat(f.id))?r.a.createElement(B.q,{title:"".concat(t.likes," ").concat(e.getNoun(t.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"'),placement:"top"},r.a.createElement(W.a,{onClick:function(n){return e.removeLike(t.id,n)},icon:"heart",style:{color:"#1976d2"}})):r.a.createElement(B.q,{title:"".concat(t.likes," ").concat(e.getNoun(t.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"'),placement:"top"},r.a.createElement(W.a,{onClick:function(n){return e.addLike(t.id,n)},icon:"heart"})),f.id===t.author_id?r.a.createElement(B.q,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",placement:"top"},r.a.createElement(W.a,{onClick:function(){return e.prepareNews(t.id)},icon:"edit",style:{marginLeft:"25px"}})):null,window.innerWidth>=600?r.a.createElement(B.a,{onClick:function(){return e.showNews(t.id)},variant:"contained",color:"primary",style:{position:"absolute",right:window.innerWidth>600?40:20}},"\u0427\u0438\u0442\u0430\u0442\u044c"):null))}):r.a.createElement(Za,null,r.a.createElement(B.r,{variant:"h6"},"\u043d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439")),r.a.createElement("div",{onClick:this.addNews},r.a.createElement(Rt,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"})),c?r.a.createElement(ga,{user:f,newNewsTopic:u,newNewsText:l,invalidText:i,invalidTopic:o,submitNews:this.submitNews,handleChange:this.handleChange,changeImportance:this.changeImportance,newNewsImportance:h,closeNews:this.closeNews.bind(this)}):null,p?r.a.createElement(ke,{showNews:this.showNews,closeNews:this.closeNews.bind(this),singleNewsId:m,news:n,user:f,getNoun:this.getNoun,getCommentsNoun:this.getCommentsNoun,reloadComponent:this.reloadComponent,createImportantBar:this.createImportantBar}):null,this.state.confirmDelete?r.a.createElement(Ta,{closeNews:this.closeNews.bind(this),removeNews:this.removeNews.bind(this)}):null)}}]),t}(a.Component),Ra=j.a.div(za()),Ua=j.a.div(Wa()),Va=j.a.div(Ha()),Ga=j.a.div(La()),Ka=j.a.div(qa()),Xa=j.a.div(Fa()),Za=j.a.div(Ma()),Ja=j.a.div(Pa()),Qa=Object(Ce.b)(function(e){return{store:e}},function(e){return{onAddNews:function(t){e({type:"ADD_NEWS",payload:t})}}})(Object(J.withSnackbar)(Ba)),$a=n(120),er=n.n($a),tr=n(81),nr=n.n(tr),ar=n(71),rr=n.n(ar),ir=n(121),or=n.n(ir),cr=n(232),sr=n.n(cr),lr=n(233),ur=n.n(lr),dr=n(235),pr=n.n(dr),mr=n(234),hr=n.n(mr),fr=n(236),gr=n.n(fr),br=[{value:0,section:"id",label:window.innerWidth<600?"\u0413\u043b\u0430\u0432\u043d\u0430\u044f":"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",img:r.a.createElement(sr.a,null)},{value:1,section:"messages",label:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",img:r.a.createElement(ur.a,null)},{value:2,section:"news",label:window.innerWidth<600?"\u041d\u043e\u0432\u043e\u0441\u0442\u0438":"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",img:r.a.createElement(hr.a,null)},{value:3,section:"tasks",label:window.innerWidth<600?"\u0417\u0430\u0434\u0430\u0447\u0438":"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",img:r.a.createElement(pr.a,null)},{value:4,section:"colleagues",label:"\u041a\u043e\u043b\u043b\u0435\u0433\u0438",img:r.a.createElement(gr.a,null)}];function vr(){var e=Object(f.a)(["\n  & > span > span {\n    top: -19px;\n    right: -5px;\n  }\n"]);return vr=function(){return e},e}function xr(){var e=Object(f.a)(["\n  flex-grow: 1;\n  width: 100%;\n  background-color: #ffffff;\n  margin-bottom: 4px;\n\n  a {\n    width: ","%\n  }\n  svg {\n    color: #1976d2;\n  }\n\n  @media all and (max-width: 600px) {\n    position: fixed;\n    bottom: 0;\n    z-index: 1000;\n    opacity: 1;\n    margin-bottom: 0;\n    a {\n      padding-top: 5px;\n      min-height: 50px;\n    }\n    a > span > span {\n      display: block;\n      font-size: 8px;\n    }\n  }\n"]);return xr=function(){return e},e}var wr=window.location.pathname,Er=V.a.find(br,["section",wr.includes("id")?"id":wr.slice(1)]);Er&&(Er=Er.value);var yr=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:Er},n.componentDidMount=function(){fetch("".concat(R,"/api/tasks/read.php?id=").concat(n.props.user_logged_id)).then(function(e){return e.json()}).then(function(e){return n.props.getTasks(e.data)}).catch(function(e){return console.log(e)})},n.handleChange=function(e,t){return n.setState({value:t})},n.countTask=function(){var e=0,t=An()(new Date);return n.props.store.tasks.filter(function(e){return Number(e.from)!==n.props.user_logged_id}).forEach(function(n){var a=An()(n.until_date),r=An.a.duration(a.diff(t))._milliseconds;"0"===n.status&&r>0&&e++}),e},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.value,n=this.props;return r.a.createElement(kr,null,r.a.createElement(er.a,{position:"static",color:"default"},r.a.createElement(nr.a,{value:t,onChange:this.handleChange,indicatorColor:"primary",centered:!0},br.map(function(t,a){return r.a.createElement(rr.a,{key:a,label:"tasks"===t.section&&e.countTask()>0?r.a.createElement(jr,null,r.a.createElement(or.a,{color:"secondary",badgeContent:e.countTask()},t.label)):t.label,onClick:function(){return n.handleChangeSection("id"!==t.section?t.section:"id".concat(n.user_logged_id))},component:st.a,to:"id"!==t.section?t.section:"id".concat(n.user_logged_id),icon:t.img})}))))}}]),t}(r.a.Component),kr=j.a.div(xr(),100/br.length),jr=j.a.div(vr()),Or=Object(Ce.b)(function(e){return{store:e}},function(e){return{getTasks:function(t){e({type:"FETCH_TASKS",payload:t})}}})(yr);function Cr(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return Cr=function(){return e},e}function Sr(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  opacity: .87;\n  svg {\n    margin-right: 6px;\n    font-size: 17px;\n    color: #1976d2;\n  }\n"]);return Sr=function(){return e},e}var Nr=j.a.div(Sr()),Tr=j.a.div(Cr()),Dr=function(e){var t,n="";return n=window.location.host.includes("localhost")&&e.friend.avatar?e.friend.avatar.slice(16):e.friend.avatar,r.a.createElement(Ye.a,{onClick:function(){return e.openRoom(e.friend.hasOwnProperty("message")&&e.friend.message?e.friend.message.chat:0,e.friend)},button:!0,TouchRippleProps:{classes:{child:"touch-ripple"}}},r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{style:{height:50,width:50},alt:"".concat(e.friend.name," ").concat(e.friend.surname),src:""!==e.friend.avatar?n:E.a})),r.a.createElement(Re.a,{inset:!0,primary:r.a.createElement(Tr,null,r.a.createElement(on.a,{variant:"subtitle1"},"".concat(e.friend.name," ").concat(e.friend.surname)),e.friend.message?function(t,n,a){var i=An()().startOf("day").format(),o=An()(n,"DD.MM.YYYY").format();return An()(i).isSame(o,"day")?r.a.createElement(Nr,null,r.a.createElement(on.a,{variant:"subtitle2",color:"primary"},e.friend.message.time)):r.a.createElement(Nr,null,r.a.createElement(on.a,{variant:"subtitle2",color:"primary"},An()(n,"DD.MM.YYYY").calendar().slice(0,-4)," ",t))}(e.friend.message.time,e.friend.message.date,e.friend.message.readed):null),secondary:e.friend.message?r.a.createElement(a.Fragment,null,r.a.createElement(on.a,{component:"span",style:{display:"inline"},color:"primary"},e.friend.id===e.friend.message.user?"".concat(e.friend.name," ").concat(e.friend.surname,":"):"\u0412\u044b:")," \u2014 ".concat((t=e.friend.message.body,t.length<137?t:"".concat(t.substring(0,137),"..."))," ")):null}))},_r=n(131),Ir=n(238),Ar=n.n(Ir);function Pr(){var e=Object(f.a)(["\n  padding: 30px 80px;\n  height: 250px;\n  display: flex;\n  opacity: .75;\n  text-align: center;\n  justify-content: center;\n  flex-direction: column;\n\n  @media all and (max-width: 600px) {\n    padding: 30px 40px;\n    height: 160px;\n  }\n"]);return Pr=function(){return e},e}function Mr(){return r.a.createElement(Fr,null,r.a.createElement(B.r,{variant:"body1",style:{marginBottom:12}},"\u0411\u0443\u0434\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c, \u043a\u0442\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u044d\u0442\u043e\u043c \u0434\u0438\u0430\u043b\u043e\u0433\u0435."),r.a.createElement(B.r,{variant:"body2"},'\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u0433\u0435, \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0441\u043d\u0438\u0437\u0443 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043b\u0430\u0432\u0438\u0448\u0443 "Enter".'))}var Fr=j.a.div(Pr()),qr=n(126),Lr=n.n(qr);function Hr(){var e=Object(f.a)(["\n  max-width: 70%;\n  background: #fafafa;\n  padding: 10px 15px;\n  border-radius: 7px;\n  margin: 15px 0 0;\n  .message-time {\n    font-size: .7rem;\n    display: flex;\n    align-items: center;\n    svg {\n      font-size: 18px;\n      margin-left: 5px; \n    }\n  }\n  .message-name {\n    display: flex;\n    align-items: center;\n    min-width: 100px;\n    justify-content: space-between;\n    svg {\n      font-size: 16px;\n      margin-left: 5px; \n      color: rgba(0,0,0,.34);\n      cursor: pointer;\n    }\n  }\n"]);return Hr=function(){return e},e}function Wr(){var e=Object(f.a)(["\n  min-width: 35px;\n  min-height: 35px;\n  border-radius: 50%;\n  margin: 0 15px;\n"]);return Wr=function(){return e},e}function zr(){var e=Object(f.a)(["\n  display: flex;\n  align-items: flex-end;\n"]);return zr=function(){return e},e}var Yr=j.a.div(zr()),Br=j.a.div(Wr()),Rr=j.a.div(Hr()),Ur=Object(Ce.b)(function(e){return{store:e}})(function(e){var t=e.store,n=t.room,a=t.user;return r.a.createElement(Yr,{style:n.user.id!==e.message.user?{flexDirection:"row-reverse"}:{}},r.a.createElement(Br,{style:n.user.id!==e.message.user?{background:"url(".concat("").concat(a[0].avatar?a[0].avatar:E.a,") no-repeat center/cover")}:{background:"url(".concat("").concat(n.user.avatar?n.user.avatar:E.a,") no-repeat center/cover")}}),r.a.createElement(Rr,null,r.a.createElement(B.r,{className:"message-name",variant:"subtitle2",color:"secondary"},n.user.id!==e.message.user?"\u0412\u044b":"".concat(n.user.name," ").concat(n.user.surname),n.user.id!==e.message.user?r.a.createElement("span",null,r.a.createElement(B.q,{title:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",placement:"top"},r.a.createElement(Lr.a,{onClick:function(){return e.editMessage(e.message.body,e.message.id)}})),r.a.createElement(B.q,{title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",placement:"top"},r.a.createElement(Z.a,{onClick:e.handleDelete}))):null),r.a.createElement(B.r,{variant:"body2"},e.message.body),r.a.createElement(B.r,{className:"message-time",variant:"subtitle2",color:"primary"},function(e){var t=An()().startOf("day").format(),n=An()(e,"DD.MM.YYYY").format();return An()(t).isSame(n,"day")?null:An()(e,"DD.MM.YYYY").calendar().slice(0,-4)}(e.message.date)," ",e.message.time,"1"===e.message.edited?" \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e":null)))});function Vr(){var e=Object(f.a)(["\n  overflow: auto;\n  margin-top: 5px;\n  max-height: 310px;\n  &::-webkit-scrollbar {\n    width: 2px;\n  } \n  &::-webkit-scrollbar-track {\n    background-color: #fafafa;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #1976d2; \n  }\n\n  @media all and (max-width: 600px) {\n    max-height: calc(100vh - 100px);\n  }\n"]);return Vr=function(){return e},e}var Gr=j.a.div(Vr()),Kr=Object(Ce.b)(function(e){return{store:e}})(function(e){var t=e.store.messages;return setTimeout(function(){var e=document.getElementById("messages");0!==t.length&&e&&(e.scrollTop=e.scrollHeight)},0),r.a.createElement(Gr,{id:"messages"},0!==t.length?t.map(function(t){return r.a.createElement(Ur,{key:t.id,message:t,editMessage:e.editMessage,handleDelete:function(){return e.handleDelete(t.id)}})}):r.a.createElement(Mr,null))}),Xr=n(237),Zr=n.n(Xr);function Jr(){var e=Object(f.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background: #fafafa;\n  & > div {\n    margin: 0;\n  }\n  & > div > div {\n    background: #fafafa !important;\n    :hover {\n      background: #fafafa;\n    }\n  }\n  input {\n    background: #fafafa;\n    padding: 13px 25px;\n    font-size: 14px;\n  }\n"]);return Jr=function(){return e},e}function Qr(e){return r.a.createElement($r,{onSubmit:e.sendMessage},r.a.createElement(nt.a,{placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",fullWidth:!0,autoFocus:!0,margin:"dense",variant:"filled",onChange:e.handleNewMessage,value:e.message,InputProps:{endAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Bt.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",position:"top"},r.a.createElement(Qe.a,{"aria-label":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onClick:e.sendMessage},r.a.createElement(Zr.a,null))))}}))}var $r=j.a.form(Jr());function ei(){var e=Object(f.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background: #fafafa;\n  z-index: 10;\n  & > div {\n    margin: 0;\n  }\n  & > div > div {\n    background: #fafafa !important;\n    :hover {\n      background: #fafafa;\n    }\n  }\n  input {\n    background: #fafafa;\n    padding: 13px 25px;\n    font-size: 14px;\n  }\n"]);return ei=function(){return e},e}function ti(e){return r.a.createElement(ni,{onSubmit:e.submitEdit},r.a.createElement(nt.a,{placeholder:"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",fullWidth:!0,autoFocus:!0,margin:"dense",variant:"filled",onChange:e.handleEdit,value:e.message,InputProps:{startAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Bt.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",position:"top"},r.a.createElement(Qe.a,{"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:e.submitEdit},r.a.createElement(Lr.a,null)))),endAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Bt.a,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",position:"top"},r.a.createElement(Qe.a,{"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.closeEditing},r.a.createElement(K.a,null))))}}))}var ni=j.a.form(ei());function ai(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0; bottom: 0;\n  left: 0; right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5;\n  background: rgba(0,0,0,.17);\n"]);return ai=function(){return e},e}function ri(){var e=Object(f.a)(["\n  display: flex;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 30px 20px 10px;\n  width: 320px;\n  height: 200px;\n  margin: auto;\n  z-index: 10;\n  background: #fafafa;\n  box-shadow: rgba(0,0,0,0.2) 0px 1px 3px 0px, rgba(0,0,0,0.14) 0px 1px 1px 0px, rgba(0,0,0,0.12) 0px 2px 1px -1px;\n  flex-direction: column;\n  justify-content: space-between;\n  & > div {\n    display: flex;\n    justify-content: flex-end;\n  }\n"]);return ri=function(){return e},e}function ii(e){return r.a.createElement(a.Fragment,null,r.a.createElement(oi,null,r.a.createElement(B.r,{variant:"body2"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?"),r.a.createElement(B.r,{variant:"body2"},"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0443\u0434\u0430\u043b\u0438\u0442 \u0435\u0433\u043e \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0447\u0430\u0442\u0430."),r.a.createElement("div",null,r.a.createElement(B.a,{variant:"text",color:"primary",onClick:e.closeDelete},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(B.a,{variant:"text",color:"primary",onClick:e.submitDelete},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(ci,{onClick:e.closeDelete}))}var oi=j.a.div(ri()),ci=j.a.div(ai());function si(){var e=Object(f.a)(["\n  width: 60px;\n  height: 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n"]);return si=function(){return e},e}function li(){var e=Object(f.a)(["\n  background: #1976d2;\n  height: 60px;\n  color: rgba(255,255,255,.5);\n  display: flex;\n  align-items: center;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 2px 1px -1px;\n\n  .room-header__user {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n  .room-header__avatar {\n    height: 45px;\n    width: 45px;\n    border-radius: 50%;\n    margin-right: 15px;\n  }\n  h6 {\n    color: #fff;\n    opacity: .85;\n  }\n  span {\n    color: rgba(255,255,255,.5);\n  }\n  :hover {\n    color: #fff;\n    transition: .37s ease;\n  }\n"]);return li=function(){return e},e}function ui(){var e=Object(f.a)(["\n  overflow: hidden;\n  height: 432px;\n\n  @media all and (max-width: 600px) {\n    height: calc(100vh - 55px);\n  }\n"]);return ui=function(){return e},e}var di=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,editing:!1,editText:"",deleting:!1,newMessage:"",deleteID:null,editID:null},n.interval=null,n.componentDidMount=function(){n.getMessages(),n.interval=setInterval(function(){return n.getMessages()},5e3)},n.componentWillUnmount=function(){clearInterval(n.interval)},n.getMessages=function(){var e=new FormData,t=Object(g.a)(Object(g.a)(n));e.append("chat",n.props.store.room.chat_id),Y.a.ajax({url:"".concat(R,"/api/message/read.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(e){t.setState({loading:!1}),e.messages&&t.props.getMessages(e.messages)},error:function(e){return console.log(e)}})},n.handleEdit=function(e){return n.setState({editText:e.target.value})},n.editMessage=function(e,t){n.state.editing||n.setState({editing:!n.state.editing,editText:e,editID:t})},n.closeEditing=function(){return n.setState({editing:!1,editText:"",editID:null})},n.handleDelete=function(e){return n.setState({deleting:!0,deleteID:e})},n.closeDelete=function(){return n.setState({deleting:!1,deleteID:null})},n.handleNewMessage=function(e){return n.setState({newMessage:e.target.value})},n.sendMessage=function(e){e&&e.preventDefault();var t=n.props.store,a=t.room,r=t.user;if(a.hasOwnProperty("chat_id")){fetch("".concat(R,"/api/message/get_id.php")).then(function(e){return e.json()}).then(function(e){return localStorage.setItem("message_id",e.message_id)}).catch(function(e){return console.log(e)});var i=new FormData,o=Object(g.a)(Object(g.a)(n)),c={user:r[0].id,chat:a.hasOwnProperty("chat_id")?a.chat_id:localStorage.getItem("chat_id"),body:n.state.newMessage,date:An()().format("L"),time:An()().format("LT")};i.append("chat",c.chat),i.append("user",c.user),i.append("body",c.body),i.append("date",c.date),i.append("time",c.time),Y.a.ajax({url:"".concat(R,"/api/message/send.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(e){o.props.store.chats.find(function(e){return e.id===c.chat})||o.props.createChat(localStorage.getItem("users"),c.chat,c),o.props.addMessage(c),o.setState({newMessage:""}),o.getMessages()},error:function(e){return console.log(e)}})}else n.getMessageId(r[0].id,a.user.id)},n.getMessageId=function(e,t){fetch("".concat(R,"/api/message/get_id.php")).then(function(e){return e.json()}).then(function(a){return n.createChat(e,t,a.message_id)}).catch(function(e){return console.log(e)})},n.createChat=function(e,t,a){var r=new FormData,i=Object(g.a)(Object(g.a)(n)),o="id".concat(e,", id").concat(t),c=(Number(a)+1).toString();r.append("users",o),r.append("last_msg",c),Y.a.ajax({url:"".concat(R,"/api/chat/create.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(n){i.props.assignChat(n.chat_id),localStorage.setItem("message_id",c),localStorage.setItem("chat_id",n.chat_id),localStorage.setItem("users","id".concat(e,", id").concat(t)),i.sendMessage(!1)},error:function(e){return console.log(e)}})},n.submitDelete=function(){var e=new FormData,t=Object(g.a)(Object(g.a)(n));e.append("id",n.state.deleteID),Y.a.ajax({url:"".concat(R,"/api/message/delete.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(e){t.props.deleteMessage(t.state.deleteID),0===t.props.store.messages.length&&t.props.deleteChat(t.props.store.room.chat_id),t.closeDelete(),t.getMessages()},error:function(e){return console.log(e)}})},n.submitEdit=function(e){e.preventDefault();var t=new FormData,a=Object(g.a)(Object(g.a)(n));t.append("id",n.state.editID),t.append("body",n.state.editText),Y.a.ajax({url:"".concat(R,"/api/message/edit.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(){var e=Object(H.a)(L.a.mark(function e(){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.closeEditing(),e.next=3,a.getMessages();case 3:return e.next=5,a.props.editMessage(a.state.editID,a.state.editText);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),error:function(e){return console.log(e)}})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.editing,i=t.deleting,o=this.props.store.room,c=null;return o.hasOwnProperty("user")&&window.location.host.includes("localhost")?c=o.user.avatar.slice(16):o.hasOwnProperty("user")&&(c=o.user.avatar),r.a.createElement(pi,null,r.a.createElement(mi,null,r.a.createElement(hi,{onClick:function(){return e.props.openRoom(0,o.user)}},r.a.createElement(Ar.a,null)),o.hasOwnProperty("user")?r.a.createElement("div",{className:"room-header__user"},r.a.createElement("div",{className:"room-header__avatar",style:{background:"url(".concat(""!==o.user.avatar?c:E.a,") no-repeat center/cover")}}),r.a.createElement("div",{className:"room-header__info"},r.a.createElement(B.r,{variant:"subtitle2"},o.user.name," ",o.user.surname),r.a.createElement(B.r,{variant:"caption"},o.user.position))):null),n?r.a.createElement(_,{minHeight:250,color:"primary"}):r.a.createElement(Kr,{editMessage:this.editMessage.bind(this),handleDelete:this.handleDelete.bind(this)}),a?r.a.createElement(ti,{closeEditing:this.closeEditing.bind(this),message:this.state.editText,handleEdit:this.handleEdit.bind(this),submitEdit:this.submitEdit.bind(this)}):null,r.a.createElement(Qr,{message:this.state.newMessage,sendMessage:this.sendMessage,handleNewMessage:this.handleNewMessage}),i?r.a.createElement(ii,{closeDelete:this.closeDelete.bind(this),submitDelete:this.submitDelete.bind(this)}):null)}}]),t}(a.Component),pi=j.a.div(ui()),mi=j.a.div(li()),hi=j.a.div(si()),fi=Object(Ce.b)(function(e){return{store:e}},function(e){return{getMessages:function(t){e({type:"FETCH_MESSAGES",payload:t})},createChat:function(t,n,a){e({type:"CREATE_CHAT",payload:{users:t,id:n,message:a}})},assignChat:function(t){e({type:"ASSIGN_CHAT",payload:t})},addMessage:function(t){e({type:"ADD_MESSAGE",payload:t})},deleteMessage:function(t){e({type:"DELETE_MESSAGE",payload:t})},editMessage:function(t,n){e({type:"EDIT_MESSAGE",payload:[t,n]})},deleteChat:function(t){e({type:"DELETE_CHAT",payload:t})}}})(di);function gi(){var e=Object(f.a)(["\n  height: 432px;\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  } \n  &::-webkit-scrollbar-track {\n    background-color: #fafafa;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #1976d2; \n  }\n  a {\n    text-decoration: none;\n  }\n  ul {\n    padding: 0;\n    padding-bottom: 50px;\n  }\n\n  @media all and (max-width: 600px) {\n    height: calc(100vh - 55px);\n    ul {\n      padding: unset;\n      padding-top: 10px;\n    }\n  }\n"]);return gi=function(){return e},e}var bi=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSearch=function(e){n.setState({searchValue:e.target.value});var t=e.target.value.toLowerCase();document.title=e.target.value||n.state.documentTitle;var a=n.state.initial;a=a.filter(function(e){return e.name.toLowerCase().includes(t)||e.surname.toLowerCase().includes(t)||e.position.toLowerCase().includes(t)}),n.setState({friends:a})},n.componentWillUnmount=function(){document.title=n.state.documentTitle},n.rebuildList=function(e){var t=n.state.friends;e.forEach(function(e){t.find(function(t){return e.users.includes("id".concat(t.id))}).message=e.message});var a=t.filter(function(e){return e.hasOwnProperty("message")}),r=t.filter(function(e){return!e.hasOwnProperty("message")}),i=a.concat(r);n.setState({completed:!0,friends:i})},n.openRoom=function(e,t){n.state.initialAnimation||n.setState({initialAnimation:!0}),e?n.props.openChat(e,t):(n.rebuildList(n.props.store.chats),setTimeout(function(){return n.props.closeChat(t)},570)),n.setState({direction:!n.state.direction}),setTimeout(function(){return n.setState(function(e){return{index:1===e.index?0:1}})},300)},n.pages=[function(e){return r.a.createElement(_r.animated.div,{style:Object(ft.a)({},e,{position:"absolute",width:"100%"})},r.a.createElement(fi,{openRoom:n.openRoom.bind(Object(g.a)(Object(g.a)(n)))}))},function(e){return r.a.createElement(_r.animated.div,{style:Object(ft.a)({},e,{position:"absolute",width:"100%"})},r.a.createElement(ct,{handleSearch:n.handleSearch,searchValue:n.searchValue}),r.a.createElement(We.a,null,n.state.friends.map(function(e){return r.a.createElement(Dr,{openRoom:n.openRoom.bind(Object(g.a)(Object(g.a)(n))),key:e.id,friend:e})})))}],n.getDirection=function(e){return e?"translateX(100%)":"translateX(-100%)"},n.state={friends:[],initial:[],searchValue:"",loading:!0,documentTitle:document.title,completed:!1,openRoom:!1,index:1,initialAnimation:!1,direction:!0},n.rebuildList=n.rebuildList.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(R,"/api/user/read.php")).then(function(e){return e.json()}).then(function(t){var n=t.data.filter(function(t){return t.id!==e.props.user_id});e.setState({friends:n,initial:n,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.store.chats,n=this.state,a=n.completed,i=n.friends,o=n.index,c=n.direction;return t.length>0&&i.length>0&&!a&&this.rebuildList(t),r.a.createElement(ut.a,null,this.state.loading?r.a.createElement(_,{minHeight:370,color:"primary"}):r.a.createElement(vi,null,r.a.createElement(_r.Transition,{reset:!0,unique:!0,native:!0,items:o,from:this.state.initialAnimation?{transform:this.getDirection(c)}:{zIndex:1},enter:{transform:"translateX(0%)"},leave:{transform:this.getDirection(!c)}},function(t){return e.pages[t]})))}}]),t}(a.Component),vi=j.a.div(gi()),xi=Object(Ce.b)(function(e){return{store:e}},function(e){return{openChat:function(t,n){e({type:"OPEN_CHAT",payload:[t,n]})},closeChat:function(t){e({type:"CLOSE_CHAT",payload:[null,t]})}}})(bi);function wi(){var e=Object(f.a)(["\n  padding: 30px 40px;\n  height: 150px;\n  display: flex;\n  justify-content: space-around;\n  flex-direction: column;\n"]);return wi=function(){return e},e}function Ei(){return r.a.createElement(yi,null,r.a.createElement(B.r,{variant:"body1"},"\u041f\u043e\u043a\u0430 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u0430."),r.a.createElement(B.r,{variant:"body2"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b\u043b\u0435\u0433\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435 \u0438\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u0438\u043c\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0438\u043b\u0438 \u0437\u0430\u043d\u0438\u043c\u0430\u044e\u0449\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u0433\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435."))}var yi=j.a.div(wi()),ki=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,user:[]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"fetchChats",value:function(e){var t=new FormData,n=this;t.append("id",e),Y.a.ajax({url:"".concat(R,"/api/chat/read.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(t){(n.setState({loading:!1}),t.chats)&&(t.chats.forEach(function(t){t.users=t.users.replace(e,"").replace(",","").trim()}),n.props.getChats(t.chats))},error:function(e){return console.log(e)}})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.user,a=this.props.store.chats,i=this.props.store.user;return i.length>0&&0===n.length&&(this.setState({user:i}),this.fetchChats("id".concat(i[0].id))),r.a.createElement(B.n,null,0===a.length?r.a.createElement(Ei,null):null,t?r.a.createElement(_,{minHeight:300,color:"primary"}):r.a.createElement(xi,{user_id:this.props.user.id}))}}]),t}(a.Component),ji=Object(Ce.b)(function(e){return{store:e}},function(e){return{getChats:function(t){e({type:"FETCH_CHATS",payload:t})}}})(ki);function Oi(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Oi=function(){return e},e}var Ci=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user_id:0,user_logged_id:0,user:[],initialUser:[],section:window.location.pathname.slice(1),loading:!0},n.handleChangeUrl=n.handleChangeUrl.bind(Object(g.a)(Object(g.a)(n))),n.handleChangeSection=n.handleChangeSection.bind(Object(g.a)(Object(g.a)(n))),n.handleChangeUserId=n.handleChangeUserId.bind(Object(g.a)(Object(g.a)(n))),n.switchComponent=n.switchComponent.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChangeUrl",value:function(){var e=this;this.setState({user_id:this.state.user_logged_id}),fetch("".concat(R,"/api/user/read_one.php?id=").concat(this.state.user_logged_id)).then(function(e){return e.json()}).then(function(t){return e.setState({user:t})}).catch(function(e){return console.log(e)})}},{key:"handleChangeSection",value:function(e){this.setState({section:e}),this.handleChangeUrl()}},{key:"handleChangeUserId",value:function(e){var t=this;this.setState({user_id:e,section:"id".concat(e)}),fetch("".concat(R,"/api/user/read_one.php?id=").concat(e)).then(function(e){return e.json()}).then(function(e){return t.setState({user:e})})}},{key:"componentWillMount",value:function(){var e=(new Le).getCookie("user_id");if(this.setState({user_id:parseInt(e),user_logged_id:parseInt(e)}),window.location.pathname.includes("id")){var t=window.location.pathname.slice(3);this.setState({user_id:parseInt(t)})}}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(R,"/api/user/read_one.php?id=").concat(this.state.user_id)).then(function(e){return e.json()}).then(function(t){return e.setState({user:t,initialUser:t,loading:!1})}).then(function(){return e.props.getUser(e.state.initialUser)}).catch(function(e){return console.log(e)})}},{key:"switchComponent",value:function(){switch(this.state.section){case"id".concat(this.state.user_id):return r.a.createElement(Lt,{user_id:this.state.user_id,user_logged_id:this.state.user_logged_id,user:this.state.user});case"messages":return r.a.createElement(ji,{user:this.state.user});case"news":return r.a.createElement(Qa,{user:this.state.user});case"tasks":return r.a.createElement(ca,{user_logged_id:this.state.user_logged_id});case"colleagues":return r.a.createElement(pt,{handleChangeUserId:this.handleChangeUserId,user_id:this.state.user_logged_id});default:return null}}},{key:"render",value:function(){var e=this.state,t=e.user_id,n=e.user_logged_id,i=e.user,o=e.initialUser,c=e.loading;return 1===i.error&&(window.location.href="/404"),r.a.createElement(a.Fragment,null,r.a.createElement(F,{user:o,loading:c}),r.a.createElement("div",{className:"container"},r.a.createElement(x,null),r.a.createElement(Or,{user_id:t,user_logged_id:n,handleChangeUrl:this.handleChangeUrl,handleChangeSection:this.handleChangeSection}),r.a.createElement(Si,null,r.a.createElement(qe,{handleChangeSection:this.handleChangeSection,user:i}),r.a.createElement("div",{className:"main-page-container"},this.switchComponent()))))}}]),t}(a.Component),Si=j.a.div(Oi()),Ni=Object(Ce.b)(function(e){return{store:e}},function(e){return{getUser:function(t){e({type:"LOGGED_IN",payload:t})}}})(Ci);function Ti(){var e=Object(f.a)(["\n  position: absolute;\n  right: 25px;\n  top: 15px;  \n  cursor: pointer;\n  svg {\n    color: #1976d2;\n  }\n"]);return Ti=function(){return e},e}function Di(){var e=Object(f.a)(["\n  background: #fff;\n  z-index: 100;\n  width: 500px;\n  height: 258px;\n  left: 0;\n  right: 0;\n  position: fixed;\n  top: 25%;\n  margin: auto;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  padding: 30px;\n"]);return Di=function(){return e},e}var _i=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={credentials:""},n.handleSubmit=function(e){var t=Object(g.a)(Object(g.a)(n));if(e.preventDefault(),n.state.credentials){var a=new FormData;a.append("credentials",n.state.credentials),Y.a.ajax({url:"".concat(R,"/api/user/forget.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),1===e.result?(t.props.enqueueSnackbar("\u041d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u043c\u0438 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 email - \u0431\u044b\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044e \u043f\u0430\u0440\u043e\u043b\u044f",{variant:"info"}),t.props.forgetPassword()):t.props.enqueueSnackbar("\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0442\u0430\u043a\u043e\u0433\u043e \u043b\u043e\u0433\u0438\u043d\u0430 \u0438\u043b\u0438 email - \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",{variant:"info"})},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435, \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",{variant:"warning"})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(a.Fragment,null,r.a.createElement(Ii,null,r.a.createElement(Ai,null,r.a.createElement(K.a,{onClick:this.props.forgetPassword})),r.a.createElement(B.r,{variant:"subtitle2"},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f."),r.a.createElement(B.p,{label:"E-mail \u0438\u043b\u0438 \u043b\u043e\u0433\u0438\u043d",variant:"outlined",name:"login",fullWidth:!0,margin:"dense",error:this.state.credential,onChange:function(t){return e.setState({credentials:t.target.value})},value:this.state.username}),r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("div",{className:"black-wrapper black-wrapper__this",onClick:this.props.forgetPassword}))}}]),t}(a.Component),Ii=j.a.div(Di()),Ai=j.a.div(Ti()),Pi=Object(J.withSnackbar)(_i),Mi=n(84),Fi=n.n(Mi),qi=n(83),Li=n.n(qi),Hi=n(49),Wi=n.n(Hi);function zi(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 35px;\n"]);return zi=function(){return e},e}var Yi=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).forgetPassword=function(){return n.setState({isForget:!n.state.isForget})},n.handleClickShowPassword=function(){n.setState({isPassHidden:!n.state.isPassHidden})},n.state={login:"",password:"",isForget:"",isPassHidden:!1,invalidText:!1,invalidPass:!1},n.handleChange=n.handleChange.bind(Object(g.a)(Object(g.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({invalidText:!1,invalidPass:!1}),this.setState(Object(ht.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""!==this.state.login&&this.state.password.length>=8){var n=new FormData;n.append("login",this.state.login),n.append("password",this.state.password),Y.a.ajax({url:"".concat(R,"/api/user/signup.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e);var n=e.result,a=e.user_id,r=new Le;switch(n){case 0:t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",{variant:"warning"});break;case.5:t.props.enqueueSnackbar("\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0432\u0430\u0448\u0430 \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c \u0435\u0449\u0451 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435",{variant:"info"});break;case 1:r.setCookie("user_id",a,30),localStorage.setItem("user_id",a),window.location.href="/"}},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"}),this.state.password.length<8&&this.setState({invalidPass:!0}),this.state.login||this.setState({invalidText:!0})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"form-container",style:{paddingBottom:"45px"}},r.a.createElement("form",{className:"registerForm",id:"register",action:"",method:"POST",onSubmit:this.handleSubmit},r.a.createElement(nt.a,{label:"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 email",variant:"outlined",name:"login",fullWidth:!0,margin:"dense",onChange:this.handleChange,value:this.state.username,error:this.state.invalidText}),r.a.createElement(nt.a,{fullWidth:!0,variant:"outlined",type:this.state.isPassHidden?"text":"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",margin:"dense",name:"password",error:this.state.invalidPass,value:this.state.password,onChange:this.handleChange,InputProps:{endAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Qe.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.isPassHidden?r.a.createElement(Li.a,null):r.a.createElement(Fi.a,null)))}}),this.state.invalidPass?r.a.createElement(Wi.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):"",r.a.createElement(Bi,null,r.a.createElement(B.a,{variant:"text",color:"default",onClick:this.forgetPassword},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.a.createElement(B.a,{variant:"contained",color:"primary",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),this.state.isForget?r.a.createElement(Pi,{forgetPassword:this.forgetPassword}):null)))}}]),t}(a.Component),Bi=j.a.div(zi()),Ri=Object(Ce.b)(function(e){return{global:e}},function(e){return{login:function(t){e({type:"LOGGED_IN",payload:t})}}})(Object(J.withSnackbar)(Yi));function Ui(){var e=Object(f.a)(["\n  button {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 30px;\n    margin: auto;\n    width: fit-content;\n    min-width: 199px;\n    background: #1976d2 !important;\n    & > span > div > div {\n      height: 25px !important;\n      width: 25px !important;\n    }\n  }\n"]);return Ui=function(){return e},e}var Vi=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClickShowPassword=function(){n.setState({isPassHidden:!n.state.isPassHidden})},n.state={email:"",login:"",password:"",confirmed:"",isEmailValid:"",isPassHidden:!1,entered:!1,loading:!1},n.handleChange=n.handleChange.bind(Object(g.a)(Object(g.a)(n))),n.validateEmail=n.validateEmail.bind(Object(g.a)(Object(g.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(Object(g.a)(n))),n.showPassword=n.showPassword.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t;this.setState((t={},Object(ht.a)(t,e.target.name,e.target.value),Object(ht.a)(t,"entered",!1),t)),"email"===e.target.name&&(this.validateEmail(e.target.value),""===e.target.value&&this.setState({isEmailValid:""}))}},{key:"validateEmail",value:function(e){/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?this.setState({isEmailValid:!0}):this.setState({isEmailValid:!1})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.setState({entered:!0,loading:!0}),this.state.login&&this.state.isEmailValid&&this.state.password){var n=new FormData;n.append("login",this.state.login),n.append("email",this.state.email),n.append("password",this.state.password),Y.a.ajax({url:"".concat(R,"/api/user/register.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){switch(e.result){case 0:t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044cc\u044f.",{variant:"error"});break;case 1:t.props.enqueueSnackbar("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c, \u043a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0448\u0443 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u044f\u0442 - \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0447\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c. \u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0447\u0442\u0435.",{variant:"success"}),t.setState({email:"",login:"",password:"",confirmed:"",isEmailValid:"",isPassHidden:!1,entered:!1,loading:!1});break;case 2:t.props.enqueueSnackbar("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0438\u043b\u0438 email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",{variant:"warning"});break;default:return null}},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"})}},{key:"showPassword",value:function(){this.setState({isPassHidden:!this.state.isPassHidden})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{id:"register",action:"",method:"POST",onSubmit:this.handleSubmit},r.a.createElement(nt.a,{label:"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 email",variant:"outlined",name:"login",fullWidth:!0,error:this.state.entered&&!this.state.login,margin:"dense",onChange:this.handleChange,value:this.state.login}),r.a.createElement(nt.a,{fullWidth:!0,variant:"outlined",type:this.state.isPassHidden?"text":"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",margin:"dense",name:"password",value:this.state.password,onChange:this.handleChange,error:this.state.entered&&this.state.password.length<8,InputProps:{endAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Qe.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.isPassHidden?r.a.createElement(Li.a,null):r.a.createElement(Fi.a,null)))}}),this.state.password.length>0&&this.state.password.length<8?r.a.createElement(Wi.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):"",r.a.createElement(nt.a,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",name:"confirmed",fullWidth:!0,margin:"dense",type:"password",error:this.state.entered&&this.state.confirmed.length<8,onChange:this.handleChange,value:this.state.confirmed}),this.state.password!==this.state.confirmed&&""!==this.state.confirmed?r.a.createElement(Wi.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):null,r.a.createElement(nt.a,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",name:"email",fullWidth:!0,error:this.state.entered&&!this.state.isEmailValid&&!this.state.email.lentgh,margin:"dense",onChange:this.handleChange,value:this.state.email}),!this.state.isEmailValid&&this.state.email?r.a.createElement(Wi.a,{style:{color:"#f44336"}},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0439 email \u0430\u0434\u0440\u0435\u0441"):"",r.a.createElement(Gi,null,r.a.createElement(B.a,{variant:"contained",color:"primary",type:"submit",disabled:this.state.loading},this.state.loading?r.a.createElement(_,{minHeight:30,color:"secondary"}):"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))}}]),t}(a.Component),Gi=j.a.div(Ui()),Ki=Object(J.withSnackbar)(Vi),Xi=(n(532),function(){return r.a.createElement("ul",{className:"bg-bubbles"},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null))}),Zi=(n(154),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={whichForm:!1},n.changeForm=n.changeForm.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"changeForm",value:function(){this.setState({whichForm:!this.state.whichForm})}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-screen"},r.a.createElement(x,null),r.a.createElement("div",{className:"login-screen-container"},r.a.createElement("p",{className:"login-screen-greetings"},"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435"),r.a.createElement("div",{className:"login-button-container"},r.a.createElement("button",{className:this.state.whichForm?"login-screen-button login-screen-button-enabled":"login-screen-button",onClick:this.changeForm},r.a.createElement(on.a,{variant:"button"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("button",{className:this.state.whichForm?"login-screen-button":"login-screen-button login-screen-button-enabled",onClick:this.changeForm},r.a.createElement(on.a,{variant:"button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),this.state.whichForm?r.a.createElement(Ki,null):r.a.createElement(Ri,null)),r.a.createElement(Xi,null))}}]),t}(a.Component)),Ji=(n(535),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).goToMain=function(){return window.location.href="/"},n.closeWindow=function(){return window.close()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-screen"},r.a.createElement(x,null),r.a.createElement("div",{className:"approved-container"},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0431\u044b\u043b\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430."),r.a.createElement("button",{onClick:this.goToMain},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")),r.a.createElement(Xi,null))}}]),t}(a.Component));n(537);function Qi(){var e=Object(f.a)(["\n  margin-top: 15px;\n"]);return Qi=function(){return e},e}function $i(){var e=Object(f.a)(["\n  button {\n    position: absolute;\n    bottom: 35px;\n    left: 0;\n    right: 0;\n    margin: auto;\n    width: fit-content;\n  }\n"]);return $i=function(){return e},e}var eo=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t;n.setState((t={},Object(ht.a)(t,e.target.name,e.target.value),Object(ht.a)(t,"entered",!1),t))},n.handleClickShowPassword=function(){n.setState({isPassHidden:!n.state.isPassHidden})},n.state={pw:"",confirmed:"",isPassHidden:!1,entered:!1},n.handleSubmit=n.handleSubmit.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.setState({entered:!0}),t.state.pw===t.state.confirmed&&t.state.pw&&t.state.confirmed){t.setState({modal:!1}),e.preventDefault();var n=new FormData;n.append("password",Y()('input[name="pw"]').val()),n.append("auth",function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,a){e[n]=a});return e}().auth),Y.a.ajax({url:"".concat(R,"/api/user/restore.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){switch(console.log(e),e.result){case 0:t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",{variant:"error"});break;case 1:t.props.enqueueSnackbar("\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c, \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c - \u0442\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443",{variant:"success"}),setTimeout(function(){return window.location.href="login"},237);break;default:return null}},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",{variant:"error"})}})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-screen"},r.a.createElement(x,null),r.a.createElement("div",{className:"form-container restore-container"},r.a.createElement(B.r,{variant:"h6"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c."),r.a.createElement(B.r,{variant:"caption"}," \u0412\u044b\u0431\u043e\u0440 \u0431\u043e\u043b\u0435\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u043e\u043b\u044f \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0437\u0430\u0449\u0438\u0442\u0443 \u0432\u0430\u0448\u0435\u0439 \u043b\u0438\u0447\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438."),r.a.createElement(no,null,r.a.createElement(nt.a,{fullWidth:!0,variant:"outlined",type:this.state.isPassHidden?"text":"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",margin:"dense",name:"pw",value:this.state.pw,onChange:this.handleChange,error:this.state.pw.length>0&&this.state.pw.length<8,InputProps:{endAdornment:r.a.createElement(et.a,{position:"end"},r.a.createElement(Qe.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.isPassHidden?r.a.createElement(Li.a,null):r.a.createElement(Fi.a,null)))}}),this.state.pw.length>0&&this.state.pw.length<8?r.a.createElement(Wi.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):"",r.a.createElement(nt.a,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",name:"confirmed",fullWidth:!0,margin:"dense",type:"password",error:this.state.entered&&this.state.confirmed.length<8&&this.state.confirmed.length>0,onChange:this.handleChange,value:this.state.confirmed}),this.state.pw!==this.state.confirmed&&this.state.confirmed?r.a.createElement(Wi.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):null),r.a.createElement(to,null,r.a.createElement(B.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"))),r.a.createElement(Xi,null))}}]),t}(a.Component),to=j.a.div($i()),no=j.a.div(Qi()),ao=Object(J.withSnackbar)(eo),ro=(n(539),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).goToMain=function(){return window.location.href="/"},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("div",{className:"loading wave"},"404"),r.a.createElement("div",{className:"not-found wave"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),r.a.createElement("button",{onClick:this.goToMain},"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))}}]),t}(a.Component)),io=n(110),oo=n.n(io),co=n(122),so=n.n(co);"/settings"===window.location.pathname&&Y()(document.body).css({background:"linear-gradient(to bottom right,#00c5fe,#9de3dc,#0d11b4)"});var lo={default:{width:window.innerWidth<600?"95%":600,margin:"10px auto",position:"relative",padding:window.innerWidth<600?"20px 15px 80px":"20px 40px 80px",zIndex:37},input:{width:"100%"},button:{position:"absolute",left:0,right:0,width:120,bottom:25,margin:"auto"},upload:{background:"#ef6c00",color:"white",margin:"auto",cursor:"pointer",position:"relative"},hiddenInput:{opacity:0,position:"absolute",cursor:"pointer",left:0,right:0,bottom:0,top:0},avatar:{width:100,height:100,marginBottom:15,borderRadius:"50%"},header:{marginTop:100,marginBottom:12,color:"#fff",textAlign:"center",fontWeight:500,display:window.innerWidth<600?"none":"block"}},uo=[{value:"\u043c\u0443\u0436\u0441\u043a\u043e\u0439",label:"\u043c\u0443\u0436\u0441\u043a\u043e\u0439"},{value:"\u0436\u0435\u043d\u0441\u043a\u0438\u0439",label:"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"}],po=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).fileSelect=function(e){e.target.files[0].size<2097152?(n.setState({selectedFile:e.target.files[0]}),n.uploadAvatar(e.target.files[0])):n.props.enqueueSnackbar("\u0424\u0430\u0439\u043b \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439, \u0440\u0430\u0437\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0435 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 2\u041c\u0411",{variant:"warning"})},n.uploadAvatar=function(e){var t=new FormData,a=e,r=Object(g.a)(Object(g.a)(n));t.append("file",a),t.append("id",n.state.user_id),Y.a.ajax({url:"".concat(R,"/api/user/upload.php"),type:"post",data:t,contentType:!1,processData:!1,success:function(e){window.location.host.includes("localhost")?r.setState({uploadedAvatar:e.location.slice(22)}):r.setState({uploadedAvatar:e.location.slice(6)}),console.log(e)}})},n.componentDidMount=function(){var e=localStorage.getItem("user_id");n.setState({user_id:e}),fetch("".concat(R,"/api/user/info.php?id=").concat(e)).then(function(e){return e.json()}).then(function(e){return n.setState({user:e})})},n.handleChange=function(e){var t=Object(ft.a)({},n.state.user);t[e.target.name]=e.target.value,n.setState({user:t})},n.handleSubmit=function(e){var t=Object(g.a)(Object(g.a)(n));t.setState({modal:!1}),e.preventDefault();var a=new FormData;a.append("id",t.state.user.id),a.append("surname",Y()('input[name="surname"]').val()),a.append("name",Y()('input[name="name"]').val()),a.append("birthday",t.state.selectedDate.slice(0,10)||n.state.user.birthday),a.append("sex",Y()('input[name="sex"]').val()),a.append("position",Y()('input[name="position"]').val()),a.append("avatar",t.state.uploadedAvatar),Y.a.ajax({url:"".concat(R,"/api/user/settings.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(e){switch(console.log(e),e.result){case 0:t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"});break;case 1:t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b",{variant:"success"}),window.location.href="id".concat(t.state.user.id)}},error:function(){t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})},n.handleDateChange=function(e){return n.setState({selectedDate:e.format()})},n.state={user:[],selectedFile:null,user_id:"",uploadedAvatar:"",selectedDate:""},n.handleSubmit=n.handleSubmit.bind(Object(g.a)(Object(g.a)(n))),n.handleChange=n.handleChange.bind(Object(g.a)(Object(g.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,n=e.uploadedAvatar,a=null;return a=window.location.host.includes("localhost")&&t.avatar?t.avatar.slice(16):t.avatar,r.a.createElement(r.a.Fragment,null,r.a.createElement(on.a,{variant:"h5",style:Object(ft.a)({},lo.header)},"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(ut.a,{style:Object(ft.a)({},lo.default),elevation:1},r.a.createElement("form",{id:"personal-info",action:"",method:"POST",encType:"multipart/form-data"},n?r.a.createElement("div",{style:Object(ft.a)({},lo.avatar,{background:"url(".concat(n||E.a,") no-repeat center/cover")})}):r.a.createElement("div",{style:Object(ft.a)({},lo.avatar,{background:"url(".concat(a,") no-repeat center/cover")})}),r.a.createElement(k.a,{variant:"contained",style:Object(ft.a)({},lo.upload)},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f",r.a.createElement(so.a,{style:{marginLeft:10}},"cloud_upload"),r.a.createElement("input",{id:"avatar",accept:"image/*",style:Object(ft.a)({},lo.hiddenInput),type:"file",name:"avatar",onChange:this.fileSelect})),r.a.createElement(nt.a,{required:!0,label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"name",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.handleChange,value:t.name,style:Object(ft.a)({},lo.input)}),r.a.createElement(nt.a,{required:!0,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",name:"surname",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.handleChange,value:t.surname,style:Object(ft.a)({},lo.input)}),r.a.createElement(nt.a,{select:!0,required:!0,label:"\u041f\u043e\u043b",InputLabelProps:{shrink:!0},value:t.sex,onChange:this.handleChange,helperText:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b",margin:"normal",name:"sex",style:Object(ft.a)({},lo.input)},uo.map(function(e){return r.a.createElement(oo.a,{name:"sex",key:e.value,value:e.value},e.label)})),r.a.createElement(nt.a,{required:!0,label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",name:"position",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.handleChange,value:t.position,style:Object(ft.a)({},lo.input)}),r.a.createElement(yt.a,{name:"birthday",margin:"normal",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",format:"Do MMMM YYYY",value:this.state.selectedDate?this.state.selectedDate:t.birthday,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,"aria-describedby":"component-helper-text",style:Object(ft.a)({},lo.input),required:!0}),r.a.createElement(on.a,{variant:"caption",gutterBottom:!0},"*\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u0438\u0434\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0443"),r.a.createElement(k.a,{variant:"contained",color:"primary",style:Object(ft.a)({},lo.button),onClick:this.handleSubmit},"\u0412\u043f\u0435\u0440\u0451\u0434!"))),r.a.createElement(Xi,null))}}]),t}(a.Component),mo=Object(J.withSnackbar)(po),ho=n(92),fo=n(93);ho.b.add(fo.a,fo.d,fo.c,fo.b);var go=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(m.a,null,r.a.createElement(h.a,{path:"/id:user_id",component:Ni}),r.a.createElement(h.a,{path:"/friends",component:Ni}),r.a.createElement(h.a,{path:"/colleagues",component:Ni}),r.a.createElement(h.a,{path:"/tasks",component:Ni}),r.a.createElement(h.a,{path:"/messages",component:Ni}),r.a.createElement(h.a,{path:"/news",component:Ni}),r.a.createElement(h.a,{path:"/settings",component:mo}),r.a.createElement(h.a,{path:"/login",component:Zi}),r.a.createElement(h.a,{path:"/approved",component:Ji}),r.a.createElement(h.a,{path:"/restore",component:ao}),r.a.createElement(h.a,{path:"/404",component:ro}),r.a.createElement(h.a,{path:"/:any",component:ro})))}}]),t}(a.Component),bo=n(82);var vo=n(46);var xo=Object(bo.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN":return[t.payload];default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NEWS":return Object(vo.a)(t.payload);case"DELETE_NEWS":var n=e.filter(function(e){return e.id!==t.payload});return Object(vo.a)(n);case"ADD_NEWS":return Object(vo.a)(t.payload);default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TASKS":case"MARK_COMPLETED":case"ADD_TASK":case"FILTER_TASKS":return Object(vo.a)(t.payload);case"DELETE_TASK":var n=e.filter(function(e){return e.id!==t.payload});return Object(vo.a)(n);default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHATS":return Object(vo.a)(t.payload);case"CREATE_CHAT":return[].concat(Object(vo.a)(e),[t.payload]);case"DELETE_CHAT":return e.filter(function(e){return e.id!==t.payload});case"ADD_MESSAGE":var n=e.filter(function(e){return e.id!==t.payload.chat}),a=e.find(function(e){return e.id===t.payload.chat});return a.message=t.payload,n=V.a.concat(n,a);case"EDIT_MESSAGE":var r=e.filter(function(e){return e.message.id!==t.payload[0]}),i=e.find(function(e){return e.message.id===t.payload[0]});return i&&(i.message.body=t.payload[1],r=V.a.concat(r,i)),r;default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_CHAT":return{chat_id:t.payload[0],user:t.payload[1]};case"CLOSE_CHAT":return{user:t.payload[1]};case"DELETE_CHAT":var n=e;return delete n.chat_id,n.user.message=null,n;case"ASSIGN_CHAT":var a=e;return a.chat_id=t.payload,a;default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MESSAGES":return Object(vo.a)(t.payload);case"ADD_MESSAGE":var n=t.payload;return n.id=(Number(localStorage.getItem("message_id"))+1).toString(),e.find(function(e){return e.id===n.id})&&(n.id=(Number(n.id)+1).toString()),[].concat(Object(vo.a)(e),[n]);case"DELETE_MESSAGE":return e.filter(function(e){return e.id!==t.payload});case"CLOSE_CHAT":return[];default:return e}}}),wo=n(240);n(543);An.a.locale("ru");var Eo=Object(Ht.createMuiTheme)({palette:{primary:{main:"#1976d2"},secondary:{main:"#ff4800"}},typography:{useNextVariants:!0},overrides:{MuiSnackbar:{root:{bottom:window.innerWidth<600?"60px !important":"0"}},MuiModal:{root:{bottom:window.innerWidth<600?"60px !important":"0"}},MuiBackdrop:{root:{bottom:window.innerWidth<600?"display: none":"display: block"}}}});var yo=Object(bo.c)(xo,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(function(){return r.a.createElement(Ht.MuiThemeProvider,{theme:Eo},r.a.createElement(Ce.a,{store:yo},r.a.createElement(yt.b,{utils:wo.a,moment:An.a},r.a.createElement(J.SnackbarProvider,{maxSnack:3},r.a.createElement(go,null)))))},null),document.getElementById("root"))}},[[288,2,1]]]);
//# sourceMappingURL=main.2bedb904.chunk.js.map