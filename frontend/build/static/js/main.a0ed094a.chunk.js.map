{"version":3,"sources":["components/img/photos/Water image_Dreamstime.jpg","components/img/icons/baseline-search-24px.svg","components/img/photos/images.png","components/Header.jsx","components/Loader/Loader.jsx","components/MainpageHeader.jsx","components/functions/API.js","components/SingleNews.jsx","components/SideNews.jsx","components/functions/Cookie.js","components/FriendsList/Friend.jsx","components/FriendsList/Search.jsx","components/FriendsList/FriendsList.jsx","components/PersonalInfo.jsx","components/Fab/Fab.jsx","components/Modal/Modal.jsx","components/Tasks/Autocomplete.jsx","components/Tasks/Pickers.jsx","components/Tasks/TextInput.jsx","components/Tasks/Stepper.jsx","components/Tasks/NewTask.jsx","components/Tasks/Task.jsx","components/Tasks/ConfirmDelete.jsx","components/Tasks/Tasks.jsx","components/News/NewNews.jsx","components/News/ConfirmDelete.jsx","components/News.jsx","components/Navigation/sections.js","components/Navigation/Navigation.jsx","components/Chat/ChatItem.jsx","components/Chat/NoMessages.jsx","components/Chat/Message.jsx","components/Chat/Messages.jsx","components/Chat/SendMessageInput.jsx","components/Chat/EditMessageInput.jsx","components/Chat/DeleteModal.jsx","components/Chat/ChatRoom.jsx","components/Chat/Dialogues.jsx","components/Chat/NoChats.jsx","components/Chat/Chat.jsx","components/MainPage.jsx","components/ForgetPassword.jsx","components/SignupForm.jsx","components/RegisterForm.jsx","components/BgBubbles.jsx","components/LoginForm.jsx","components/Approved.jsx","components/Restore.jsx","components/Page404.jsx","components/Settings.jsx","App.jsx","reducers/index.js","reducers/user.js","reducers/news.js","reducers/tasks.js","reducers/chats.js","reducers/room.js","reducers/messages.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","date","Date","react_default","a","createElement","className","dist_default","element","format","id","toLocaleString","weekday","Component","StyledLoader","styled","div","_templateObject","Loader","props","style","minHeight","CircularProgress_default","color","Wrapper","MainpageHeader_templateObject","defaultBackground","MainpageHeader","user","defaultAvatar","backgroundImage","concat","image","uploadedAvatar","window","location","host","includes","avatar","slice","loading","background","components_Loader_Loader","react","name","surname","position","Button_default","variant","href","API","origin","SingleNews","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getAvatars","likedBy","state","currentNews","liked_by","split","formData","FormData","self","assertThisInitialized","append","$","ajax","url","data","processData","contentType","type","success","res","setState","error","err","console","log","handleChange","e","commentText","target","value","addLike","actions","document","getElementById","pointerEvents","preventDefault","fetch","singleNewsId","then","response","json","setTimeout","removeLike","stopPropagation","submitComment","commentsLoading","toJSON","replace","toLocaleTimeString","fetchComments","enqueueSnackbar","deleteComment","news_id","currentUser","thisComments","loadedComments","_this2","fetchUserInfo","_this3","_this4","_this5","_this$props","closeNews","_this$state","userAvatar","length","author_id","Single","core_index_es","placement","title","Icon","Clear_default","onClick","PostHeader","Avatar","DefaultAvatar","importance","createImportantBar","PostContent","text","PostLikes","likes","getNoun","map","i","key","PostActions","getCommentsNoun","index_es","icon","marginLeft","_","some","Fragment","NewComment","TextArea","label","multiline","onChange","required","disabled","comment","Comments","marginTop","who","DelIcon","Delete_default","SingleNews_Wrapper","SingleNews_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","withSnackbar","SideNews","goToSingleNews","singleNews","reloadComponent","changeImportance","number","Math","abs","news","singleNewsData","comments","bind","getNews","records","NEWS_COUNTER","store","SideNews_Wrapper","SideNews_News","NewsSwitch","item","author","Warning_default","NoNews","handleChangeSection","scrollTo","components_SingleNews","SideNews_templateObject","SideNews_templateObject2","News","SideNews_templateObject3","SideNews_templateObject4","connect","dispatch","payload","Cookie","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","cookie","ca","c","charAt","substring","indexOf","getCookie","alert","prompt","setCookie","Friend","friend","ListItem_default","button","TouchRippleProps","classes","child","ListItemAvatar_default","Avatar_default","height","width","alt","src","ListItemText_default","inset","primary","secondary","SearchWrapper","Search_templateObject","Search","TextField_default","margin","searchValue","handleSearch","InputProps","endAdornment","InputAdornment_default","IconButton_default","aria-label","SearchIcon","opacity","FriendList","friends","initial","documentTitle","toLowerCase","filter","componentWillUnmount","user_id","toString","Paper_default","FriendWrapper","FriendsList_Search","List_default","Link","to","handleChangeUserId","FriendsList_Friend","FriendsList_templateObject","PersonalInfo","handleDateChange","selectedDate","removeInput","newChildInput","createInput","user_logged_id","fullWidth","InputLabelProps","shrink","Naked","InputBase_default","htmlFor","userInfo","nameError","yearError","childName","childBirthyear","loadingChild","handleSubmit","deleteChild","prepareChild","handleChild","addChild","action","birthday","catch","event","objectSpread","_this$setState","defineProperty","modal","val","sex","result","_this$props2","childrens","childs","JSON","parse","Form","method","onSubmit","react_input_mask_default","mask","phone","padding","material_ui_pickers_esm","aria-describedby","select","status","Childrens","keys","Children","child_name","child_birthyear","NewChild","Done_default","ChildBtns","city","district","adress","vuz","fakultet","army_country","army_type","Btn","form","PersonalInfo_templateObject","PersonalInfo_templateObject2","PersonalInfo_templateObject3","PersonalInfo_templateObject4","PersonalInfo_templateObject5","PersonalInfo_templateObject6","PersonalInfo_templateObject7","withStyles","theme","fixed","bottom","spacing","unit","right","Tooltip_default","Add_default","ModalWindow","Modal_default","open","onClose","handleClose","component","inputComponent","_ref","inputRef","objectWithoutProperties","assign","ref","components","Control","inputProps","selectProps","input","innerRef","children","innerProps","textFieldProps","Menu","square","paper","MultiValue","tabIndex","classNames","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","noOptionsMessage","Option","buttonRef","selected","fontWeight","isSelected","Placeholder","placeholder","SingleValue","singleValue","ValueContainer","valueContainer","IntegrationReactSelect","users","selectStyles","base","palette","& input","font","root","react_select_esm","styles","options","multi","isMulti","control","React","flexGrow","display","flexDirection","justifyContent","flexWrap","flex","alignItems","overflow","backgroundColor","emphasize","grey","fontSize","left","zIndex","withTheme","MaterialUIPickers","Grid_default","container","justify","paddingBottom","ampm","selectedTime","locale","handleTimeChange","TextInput","TextInput_TextArea","handleTextChange","TextInput_templateObject","VerticalLinearStepper","activeStep","handleNext","handleBack","handleReset","checkDisabled","step","time","steps","Stepper_default","orientation","index","Step_default","StepLabel_default","StepContent_default","Typography_default","getStepContent","actionsContainer","Autocomplete","Pickers","elevation","resetContainer","resetAll","marginRight","marginBottom","NewTask","componentDidMount","Number","forWho","forEach","push","toLocaleDateString","join","getHours","getMinutes","tasks","onAddNewTask","_this$state2","NewTask_Wrapper","Close_default","Tasks_Stepper","NewTask_templateObject","task","Task","getUserNames","usersId","find","getAdresant","from","now","moment","end","until_date","difference","duration","diff","_milliseconds","expandIcon","ExpandMore_default","Task_Icon","TaskStatus","task-completed","task-doing","task-late","DeleteIcon","handleConfirm","details","Footer","for","reverse","until_time","leaveDelay","handleCompleted","Task_templateObject","span","Task_templateObject2","Task_templateObject3","Task_templateObject4","ConfirmDelete","ConfirmDelete_Wrapper","ConfirmDelete_Icon","ButtonContainer","handleDelete","ConfirmDelete_templateObject","ConfirmDelete_templateObject2","ConfirmDelete_templateObject3","Tasks","confirm","preparedToDelete","disabledButton","getTasks","handleOpen","done_date","done_time","markAsCompleted","handleFilter","filtered","onFilter","onDeleteTask","Tasks_Wrapper","Filters","Task_Task","Fab_Fab","Tasks_NewTask","Tasks_templateObject","Tasks_templateObject2","NewNews","Container","NewNews_Header","NewNews_Icon","Body","submitNews","Topic","newNewsTopic","invalidTopic","NewNews_TextArea","invalidText","newNewsText","NewNews_Footer","checked","newNewsImportance","NewNews_Wrapper","NewNews_templateObject","NewNews_templateObject2","NewNews_templateObject3","NewNews_templateObject4","NewNews_templateObject5","NewNews_templateObject6","NewNews_templateObject7","NewNews_templateObject8","News_ConfirmDelete_Wrapper","News_ConfirmDelete_Icon","ConfirmDelete_ButtonContainer","removeNews","Dialogue","News_ConfirmDelete_templateObject","section","News_ConfirmDelete_templateObject2","News_ConfirmDelete_templateObject3","ConfirmDelete_templateObject4","newNews","editing","preparedNewsId","confirmDelete","prepareNews","editNews","addNews","Important","News_templateObject","prepareDelete","handleAvatarRoute","showNews","onAddNews","NewsContainer","UserAvatar","NewsInfo","News_Icon","News_Body","News_TextArea","Actions","News_NoNews","ConfirmDelete_ConfirmDelete","News_templateObject2","News_templateObject3","News_templateObject4","News_templateObject5","News_templateObject6","News_templateObject7","News_templateObject8","News_templateObject9","sections","img","Person_default","Message_default","NewReleases_default","ListAlt_default","People_default","PATH","pathname","urlValue","Navigation","countTask","counter","Navigation_Wrapper","AppBar_default","Tabs_default","indicatorColor","centered","Tab_default","BadgeWrapper","Badge_default","badgeContent","Navigation_templateObject","Navigation_templateObject2","Time","ChatItem_templateObject","MessageHeader","ChatItem_templateObject2","string","openRoom","hasOwnProperty","message","chat","readed","fromDayStart","startOf","dateFromNow","DoneAll_default","isSame","calendar","body","NoMessages","NoMessages_Container","NoMessages_templateObject","Message_templateObject","Message_templateObject2","Message_templateObject3","_props$store","room","Message_Container","Message_Avatar","Message_Body","Edit_default","editMessage","isToday","edited","Messages_templateObject","messages","messageContainer","scrollTop","scrollHeight","Messages_Container","Chat_Message","SendMessageInput","SendMessageInput_Container","sendMessage","autoFocus","handleNewMessage","Send_default","SendMessageInput_templateObject","EditMessageInput","EditMessageInput_Container","submitEdit","handleEdit","startAdornment","closeEditing","EditMessageInput_templateObject","DeleteModal","DeleteModal_Container","closeDelete","submitDelete","Overlay","DeleteModal_templateObject","DeleteModal_templateObject2","ChatRoom","editText","deleting","newMessage","deleteID","editID","interval","getMessages","setInterval","clearInterval","chat_id","_this$props$store","localStorage","setItem","message_id","getItem","chats","createChat","addMessage","getMessageId","user1","user2","messageId","assignChat","deleteMessage","deleteChat","_success","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","apply","arguments","Room","RoomHeader","ChatRoom_Icon","ArrowBack_default","Chat_Messages","ChatRoom_templateObject","ChatRoom_templateObject2","ChatRoom_templateObject3","messageID","messageBody","rebuildList","completed","initialAnimation","openChat","closeChat","direction","pages","renderprops","Chat_ChatRoom","ChatItem","getDirection","Dialogues_FriendWrapper","reset","unique","native","items","transform","enter","leave","Dialogues_templateObject","NoChats","NoChats_Container","NoChats_templateObject","Chat","trim","getChats","userStore","fetchChats","Dialogues","MainPage","initialUser","handleChangeUrl","switchComponent","cookie_id","parseInt","current_id","getUser","components_PersonalInfo","components_Chat_Chat","components_News","components_Tasks_Tasks","FriendsList_FriendList","components_MainpageHeader","components_Header","components_Navigation_Navigation","MainSection","components_SideNews","MainPage_templateObject","ForgetPassword","credentials","forgetPassword","ForgetPassword_Wrapper","ForgetPassword_Icon","credential","username","ForgetPassword_templateObject","ForgetPassword_templateObject2","SignupForm","isForget","handleClickShowPassword","isPassHidden","login","password","invalidPass","VisibilityOff_default","Visibility_default","FormHelperText_default","Buttons","components_ForgetPassword","SignupForm_templateObject","global","RegisterForm","email","confirmed","isEmailValid","entered","validateEmail","showPassword","test","lentgh","BtnWrapper","RegisterForm_templateObject","BgBubbles","LoginForm","whichForm","changeForm","components_RegisterForm","components_SignupForm","components_BgBubbles","Approved","goToMain","closeWindow","close","Restore","pw","vars","m","getUrlVars","InputWrapper","BtnContainer","Restore_templateObject","Restore_templateObject2","Page404","css","cursor","top","borderRadius","textAlign","genders","Settings","fileSelect","files","size","selectedFile","uploadAvatar","file","fd","encType","Icon_default","accept","helperText","option","MenuItem_default","gutterBottom","library","add","faComments","faHeart","faEnvelope","faEdit","App","BrowserRouter","Switch","Route","path","combineReducers","undefined","toConsumableArray","nextState","newState","currentChat","editedState","editedMessage","createMuiTheme","main","typography","useNextVariants","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","core_styles","es","utils","MomentUtils","build","maxSnack","src_App"],"mappings":"mGAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iMCAxCH,EAAAC,QAAA,otFCoBeG,2LAdX,IAAMC,EAAO,IAAIC,KACjB,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAf,mFACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,0DACAF,EAAAC,EAAAC,cAACE,EAAAH,EAAD,CAAQI,QAAQ,OAAOC,OAAO,cAAcR,GAC5CE,EAAAC,EAAAC,cAAA,QAAMK,GAAG,mBAAmBT,EAAKU,eAAe,KAAM,CAACC,QAAS,mBATrDC,iQCArB,IAMMC,EAAeC,IAAOC,IAAVC,KAOHC,EAbA,SAAAC,GAAK,OAClBhB,EAAAC,EAAAC,cAACS,EAAD,CAAcM,MAAO,CAAEC,UAAWF,EAAME,YACtClB,EAAAC,EAAAC,cAACiB,EAAAlB,EAAD,CAAkBmB,MAAOJ,EAAMI,mIC6CnC,IAAMC,EAAUT,IAAOC,IAAVS,IACQC,KAGNC,EA/Cf,SAAwBR,GAAO,IACrBS,EAAST,EAATS,KACFC,EAAgB,CAAEC,gBAAe,OAAAC,OAASC,IAAT,MACnCC,EAAiB,GAQrB,OALEA,EADEC,OAAOC,SAASC,KAAKC,SAAS,cAAgBT,EAAKU,OACpC,CAAER,gBAAe,OAAAC,OAASH,EAAKU,OAAOC,MAAM,IAA3B,MAEjB,CAAET,gBAAe,OAAAC,OAASH,EAAKU,OAAd,MAIlCnC,EAAAC,EAAAC,cAACmB,EAAD,KACErB,EAAAC,EAAAC,cAAA,UAAQC,UAAU,UAChBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACZa,EAAMqB,QAELrC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAec,MAAO,CAAEqB,WAAY,0BACjDtC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,aAGhCpB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAec,MAAuB,KAAhBQ,EAAKU,OAAgBT,EAAgBI,IAE5E9B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACXa,EAAMqB,QAONrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,GAAIE,MAAM,YAL5BpB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACCxC,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBAAb,GAAAyB,OAAqCH,EAAKgB,KAA1C,KAAAb,OAAkDH,EAAKiB,UACvD1C,EAAAC,EAAAC,cAAA,KAAGC,UAAU,yBAAyBsB,EAAKkB,YAKjD3C,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CAAQ4C,QAAQ,YAAYC,KAAK,aAAa1B,MAAM,WAApD,oCAGJpB,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CAAQ4C,QAAQ,YAAYC,KAAK,YAAY1B,MAAM,WAAnD,+HCrCO2B,EANXhB,OAAOC,SAASC,KAAKC,SAAS,aAC1B,wBAEAH,OAAOC,SAASgB,kuKCQlBC,eACJ,SAAAA,EAAYjC,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACjBC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,KAAMrC,KAoCRyC,WAAa,WACX,IAAMC,EAAUR,EAAKS,MAAMC,YAAYC,SAASC,MAAM,MAAM1B,MAAM,GAC5D2B,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACVa,EAASI,OAAO,UAAWT,GAE3BU,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,4BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAAC,GAAG,OAAIX,EAAKY,SAAS,CAAEnB,QAASkB,KACzCE,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,OAlDX7B,EAqDnBgC,aAAe,SAAAC,GAAC,OAAIjC,EAAK2B,SAAS,CAAEO,YAAaD,EAAEE,OAAOC,SArDvCpC,EAwDnBqC,QAAU,SAAChF,EAAI4E,GACb,IAAMK,EAAUC,SAASC,eAAe,gBACxCF,EAAQvE,MAAM0E,cAAgB,OAC9B,IAAI1B,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACRiC,EAAES,iBACF,IAAM7B,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAM5D,GACtBwD,EAASI,OAAO,WAAYjB,EAAKlC,MAAMS,KAAKlB,IAE5C6D,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUQ,EAAGP,GACpBI,QAAQC,IAAIL,GACZiB,MAAK,GAAAjE,OAAImB,EAAJ,8BAAAnB,OAAoCqC,EAAKjD,MAAM8E,eACjDC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAnC,GAAW,OAAIK,EAAKY,SAAS,CAAEjB,kBACpCmC,KAAK,kBAAM9B,EAAKR,WAAWQ,EAAKjD,MAAM8E,gBAEzCI,WAAW,kBAAMV,EAAQvE,MAAM0E,cAAgB,OAAO,MAExDb,MAAO,SAAUC,GACfC,QAAQC,IAAIF,OAjFC7B,EAuFnBiD,WAAa,SAAC5F,EAAI4E,GAChB,IAAMK,EAAUC,SAASC,eAAe,gBACxCF,EAAQvE,MAAM0E,cAAgB,OAC9B,IAAM1B,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACViC,EAAES,iBACFT,EAAEiB,kBACF,IAAMrC,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAM5D,GACtBwD,EAASI,OAAO,WAAYjB,EAAKlC,MAAMS,KAAKlB,IAE5C6D,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,4BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBI,QAAQC,IAAIL,GACZiB,MAAK,GAAAjE,OAAImB,EAAJ,8BAAAnB,OAAoCqC,EAAKjD,MAAM8E,eACjDC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAnC,GAAW,OAAIK,EAAKY,SAAS,CAAEjB,kBACpCmC,KAAK,kBAAM9B,EAAKR,WAAWQ,EAAKjD,MAAM8E,gBAEzCI,WAAW,kBAAMV,EAAQvE,MAAM0E,cAAgB,OAAO,MAExDb,MAAO,SAAUC,GACfC,QAAQC,IAAIF,OAjHC7B,EAsHnBmD,cAAgB,SAAAlB,GACdjC,EAAK2B,SAAS,CAAEyB,iBAAiB,IACjC,IAAIrC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACRiC,EAAES,iBACF,IAAM7B,EAAW,IAAIC,SACrBD,EAASI,OAAO,UAAWjB,EAAKlC,MAAM8E,cACtC/B,EAASI,OAAO,MAAhB,GAAAvC,OAA0BsB,EAAKlC,MAAMS,KAAKgB,KAA1C,KAAAb,OAAkDsB,EAAKlC,MAAMS,KAAKiB,UAClEqB,EAASI,OAAO,QAAQ,IAAIpE,MAAOwG,SAASnE,MAAM,EAAG,IAAIoE,QAAQ,KAAM,MACvEzC,EAASI,OAAO,UAAW,GAC3BJ,EAASI,OAAO,QAAQ,IAAIpE,MAAO0G,qBAAqBrE,MAAM,GAAI,IAClE2B,EAASI,OAAO,OAAQjB,EAAKS,MAAMyB,aAEnChB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,4BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,WACPV,EAAKY,SAAS,CAAEO,YAAa,KAC7BnB,EAAKyC,gBACLzC,EAAKjD,MAAM2F,gBAAgB,yIAA4B,CAAE9D,QAAS,YAClEqD,WAAW,kBAAMjC,EAAKY,SAAS,CAAEyB,iBAAiB,KAAU,MAE9DxB,MAAO,SAAUC,GACfC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,8KAAmC,CAAE9D,QAAS,cAhJ5DK,EA4JnB0D,cAAgB,SAACzB,EAAG5E,EAAIsG,GACtB3D,EAAK2B,SAAS,CAAEyB,iBAAiB,IACjC,IAAIrC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACRiC,EAAES,iBAEFxB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,+BACHwB,KAAM,CAAEhE,KAAIsG,WACZnC,KAAM,OACNC,QAAS,WACPV,EAAKjD,MAAM2F,gBAAgB,6HAA0B,CAAE9D,QAAS,SAChEoB,EAAKyC,gBACLR,WAAW,kBAAMjC,EAAKY,SAAS,CAAEyB,iBAAiB,KAAU,MAE9DxB,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,wKAAkC,CAAE9D,QAAS,cAzK5EK,EAAKS,MAAQ,CACXmD,YAAa,GACbC,aAAc,GACdC,gBAAgB,EAChB5B,YAAa,GACbxB,YAAa,GACbF,QAAS,GACTrB,SAAS,EACTiE,iBAAiB,GAVFpD,sNAeX2C,MAAK,GAAAjE,OAAImB,EAAJ,8BAAAnB,OAAoCyB,KAAKrC,MAAM8E,eACvDC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAnC,GAAW,OAAIqD,EAAKpC,SAAS,CAAEjB,yCACjCP,KAAK6D,cAAc7D,KAAKrC,MAAMS,KAAKlB,2BACnC8C,KAAKqD,cAAcrD,KAAKrC,MAAM8E,qCAC9BzC,KAAKI,WAAWJ,KAAKrC,MAAM8E,sCAC3BzC,KAAKwB,SAAS,CAAExC,SAAS,6IAGnB9B,GAAI,IAAA4G,EAAA9D,KAChBwC,MAAK,GAAAjE,OAAImB,EAAJ,0BAAAnB,OAAgCrB,IAClCwF,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAe,GAAW,OAAIK,EAAKtC,SAAS,CAAEiC,wDAG3BvG,GAAI,IAAA6G,EAAA/D,KAChBwC,MAAK,GAAAjE,OAAImB,EAAJ,qCAAAnB,OAA2CrB,IAC7CwF,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAgB,GAAY,OAAIK,EAAKvC,SAAS,CAAEkC,eAAcC,gBAAiBI,EAAKzD,MAAMqD,oDAiJ3E,IAAAK,EAAAhE,KAAAiE,EACmCjE,KAAKrC,MAAvCuG,EADDD,EACCC,UAAWzB,EADZwB,EACYxB,aAAcrE,EAD1B6F,EAC0B7F,KAD1B+F,EAE4GnE,KAAKM,MAAhHmD,EAFDU,EAECV,YAAaC,EAFdS,EAEcT,aAAcC,EAF5BQ,EAE4BR,eAAgB5B,EAF5CoC,EAE4CpC,YAAaxB,EAFzD4D,EAEyD5D,YAAaF,EAFtE8D,EAEsE9D,QAASrB,EAF/EmF,EAE+EnF,QAASiE,EAFxFkB,EAEwFlB,gBAE3FnE,EAAS,KAEXA,EADEJ,OAAOC,SAASC,KAAKC,SAAS,cAAgB4E,EAAY3E,OACnD2E,EAAY3E,OAAOC,MAAM,IAEzB0E,EAAY3E,OAEvB,IAAIsF,EAAa,KAUjB,OAREA,EADE1F,OAAOC,SAASC,KAAKC,SAAS,cAAgBT,EAAKU,OACxCV,EAAKU,OAAOC,MAAM,IAElBX,EAAKU,OAGO,IAAvB2E,EAAYY,QAAcrE,KAAK6D,cAActD,EAAY+D,WACxDX,GAAgB3D,KAAKqD,cAAcZ,GAGtC9F,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KAEExC,EAAAC,EAAAC,cAAC0H,GAAD,KACGvF,EAAUrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YACvCpB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,OAAOC,MAAM,8CAC9B/H,EAAAC,EAAAC,cAAC8H,GAAD,KAAMhI,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,CAAWiI,QAASX,MAG5BvH,EAAAC,EAAAC,cAACiI,GAAD,KACEnI,EAAAC,EAAAC,cAACkI,GAAD,CAAQnH,MAAO,CAAEqB,WAAU,OAAAV,OAASkF,EAAY3E,OAASA,EAASkG,IAAvC,+BAC3BrI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAaiE,EAAYrE,KAA7C,IAAoDqE,EAAYpE,UAGtC,MAA3BkB,EAAY0E,WAAqBjF,KAAKrC,MAAMuH,mBAAmB,IAAM,KAEtEvI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,MAAMe,EAAYmE,MAAMvB,QAAQ,UAA1B,MAE1BxG,EAAAC,EAAAC,cAACsI,GAAD,KACExI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAASe,EAAY6E,KAAKjC,QAAQ,UAAzB,MAC7BxG,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAAWe,EAAY9D,OAG7CE,EAAAC,EAAAC,cAACwI,GAAD,KACE1I,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAae,EAAY+E,MAA7C,IAAqDtF,KAAKrC,MAAM4H,QAAQhF,EAAY+E,OAApF,uDAECjF,EAAQmF,IAAI,SAACpH,EAAMqH,GAElB,KAAOA,EAAI,GACT,OACE9I,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASkB,IAAKD,EAAGf,MAAK,GAAAnG,OAAKH,EAAKgB,KAAV,KAAAb,OAAkBH,EAAKiB,SAAWoF,UAAU,OAChE9H,EAAAC,EAAAC,cAACkI,GAAD,CAAQnH,MAAO,CAAEqB,WAAU,OAAAV,OAASH,EAAKU,OAASV,EAAKU,OAASkG,IAArC,mCAOrCrI,EAAAC,EAAAC,cAAC8I,GAAD,CAAazI,GAAG,gBACbwG,EAAaW,OACd1H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,MAAMC,MAAK,GAAAnG,OAAKmF,EAAaW,OAAlB,KAAA9F,OAA4ByB,KAAKrC,MAAMiI,gBAAgBlC,EAAaW,UAChG1H,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBC,KAAK,WAAWlI,MAAO,CAAEmI,WAAY,OAGtDC,IAAEC,KAAK5F,EAAS,CAAC,KAAMjC,EAAKlB,KAS5BP,EAAAC,EAAAC,cAACF,EAAAC,EAAMsJ,SAAP,KACEvJ,EAAAC,EAAAC,cAAA,YAAO0D,EAAY+E,OACnB3I,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,MAAMC,MAAK,GAAAnG,OAAKgC,EAAY+E,MAAjB,KAAA/G,OAA0ByB,KAAKrC,MAAM4H,QAAQhF,EAAY+E,OAAzD,wDAC5B3I,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBhB,QAAS,SAAA/C,GAAC,OAAIkC,EAAKlB,WAAWvC,EAAYrD,GAAI4E,IAAIgE,KAAK,QAAQlI,MAAO,CAAEG,MAAO,UAAWgI,WAAY,QAV3HpJ,EAAAC,EAAAC,cAACF,EAAAC,EAAMsJ,SAAP,KACEvJ,EAAAC,EAAAC,cAAA,YAAO0D,EAAY+E,OACnB3I,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,MAAMC,MAAK,GAAAnG,OAAKgC,EAAY+E,MAAjB,KAAA/G,OAA0ByB,KAAKrC,MAAM4H,QAAQhF,EAAY+E,OAAzD,wDAC5B3I,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBhB,QAAS,SAAA/C,GAAC,OAAIkC,EAAK9B,QAAQ3B,EAAYrD,GAAI4E,IAAIgE,KAAK,QAAQlI,MAAO,CAAEmI,WAAY,SAiB1GpJ,EAAAC,EAAAC,cAACsJ,GAAD,KACExJ,EAAAC,EAAAC,cAAA,KAAGC,UAAU,oBAAb,yCAAwCH,EAAAC,EAAAC,cAAA,KAAG4C,KAAI,GAAAlB,OAAKG,OAAOC,SAASgB,OAArB,OAAApB,OAAiCkF,EAAYvG,KAAOuG,EAAYrE,KAAvE,IAA8EqE,EAAYpE,UAClI1C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAACkI,GAAD,CAAQnH,MAAO,CAAEqB,WAAU,OAAAV,OAASH,EAAKU,OAASsF,EAAaY,IAApC,+BAC3BrI,EAAAC,EAAAC,cAACuJ,GAAD,KACEzJ,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,qEACNC,WAAS,EACT9G,QAAQ,WACRJ,KAAK,cACL6C,MAAOF,EACPwE,SAAUvG,KAAK6B,aACf2E,UAAQ,MAId7J,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,UAAU8G,QAAS7E,KAAKgD,cAAeyD,UAAW1E,GAApF,2DAGDkB,EAAkBtG,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YAC/C2F,EAAa8B,IAAI,SAACkB,EAASjB,GACzB,OACE9I,EAAAC,EAAAC,cAAC8J,GAAD,CAAUjB,IAAKD,GACb9I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAACkI,GAAD,CAAQnH,MAAO,CAAEqB,WAAU,OAAAV,OAASH,EAAKU,OAASsF,EAAaY,IAApC,4BAA6E4B,UAAW,MACnHjK,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAakH,EAAQG,KACzClK,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,UAAU1C,UAAU,gBAAgB4J,EAAQjK,OAElEE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgB4J,EAAQtB,MAEvCzI,EAAAC,EAAAC,cAACiK,GAAD,KACEnK,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,OAAOC,MAAM,8CAC9B/H,EAAAC,EAAAC,cAACkK,EAAAnK,EAAD,CAAYiI,QAAS,SAAC/C,GAAD,OAAOkC,EAAKT,cAAczB,EAAG4E,EAAQxJ,GAAIwJ,EAAQlD,mBASxF7G,EAAAC,EAAAC,cAACmK,GAAD,CAASnC,QAASX,YAnTD7G,aA0TnBkH,GAAShH,IAAOC,IAAVyJ,MAyBNjJ,GAAUT,IAAOC,IAAV0J,MAUPpC,GAAavH,IAAOC,IAAV2J,MAeVhC,GAAc5H,IAAOC,IAAV4J,MAWX/B,GAAY9H,IAAOC,IAAV6J,MAwBT1B,GAAcpI,IAAOC,IAAV8J,MAmBXX,GAAWpJ,IAAOC,IAAV+J,MA0CRpB,GAAa5I,IAAOC,IAAVgK,MAyCVzC,GAASxH,IAAOC,IAAViK,KAMNrB,GAAW7I,IAAOC,IAAVkK,KAmCR/C,GAAOpH,IAAOC,IAAVmK,KAUJb,GAAUvJ,IAAOC,IAAVoK,KAaEC,0BAAajI,8vCCxjBtBkI,eACJ,SAAAA,EAAYnK,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8H,IACjBjI,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgI,GAAA3H,KAAAH,KAAMrC,KA6BRoK,eAAiB,SAAA7K,GAAE,OAAI2C,EAAK2B,SAAS,CAAEwG,YAAY,EAAMvF,aAAcvF,KA9BpD2C,EAiCnBqE,UAAY,WACVrE,EAAK2B,SAAS,CAAEwG,YAAY,EAAOvF,aAAc,KACjD5C,EAAKoI,mBAnCYpI,EAsCnBqI,iBAAmB,kBAAMrI,EAAK2B,SAAS,CAAEyD,YAAapF,EAAKS,MAAM2E,cAtC9CpF,EA6CnB0F,QAAU,SAAA4C,GAGR,OAFAA,EAASC,KAAKC,IAAIF,IAClBA,GAAU,MACI,GAAKA,GAAU,GAAW,6CAEzB,KADfA,GAAU,IACe,6CACrBA,GAAU,GAAKA,GAAU,EAAU,6CAChC,8CApDUtI,EA4DnB+F,gBAAkB,SAAAuC,GAGhB,OAFAA,EAASC,KAAKC,IAAIF,IAClBA,GAAU,MACI,GAAKA,GAAU,GAAW,2EAEzB,KADfA,GAAU,IACe,qEACrBA,GAAU,GAAKA,GAAU,EAAU,qEAChC,4EAjEPtI,EAAKS,MAAQ,CACXgI,KAAM,GACNrD,YAAY,EACZ+C,YAAY,EACZO,eAAgB,GAChB9F,aAAc,GACd+F,SAAU,GACVxJ,SAAS,GAEXa,EAAKoI,gBAAkBpI,EAAKoI,gBAAgBQ,KAArB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAXNA,mFAejBG,KAAKiI,+LAICjI,KAAKwB,SAAS,CAAExC,SAAS,2BACzBwD,MAAK,2CACRE,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA4F,GAAI,OAAI1E,EAAKjG,MAAM+K,QAAQJ,EAAKK,SAAW,6BAC7CnG,MAAK,kDACRE,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8F,GAAQ,OAAI5E,EAAKpC,SAAS,CAAEgH,SAAUA,EAASG,mCACjD3I,KAAKwB,SAAS,CAAExC,SAAS,uIA4CxB,IAAA8E,EAAA9D,KAAAmE,EACmEnE,KAAKM,MAAvEgI,EADDnE,EACCmE,KAAMrD,EADPd,EACOc,WAAY+C,EADnB7D,EACmB6D,WAAYvF,EAD/B0B,EAC+B1B,aAAc+F,EAD7CrE,EAC6CqE,SAAUxJ,EADvDmF,EACuDnF,QAC1D4J,EAAe,EAMnB,OAJ+B,IAA3B5I,KAAKM,MAAMgI,KAAKjE,QAClBxB,WAAW,kBAAMiB,EAAKtC,SAAS,CAAE8G,KAAMxE,EAAKnG,MAAMkL,MAAMP,QAAS,GAIjE3L,EAAAC,EAAAC,cAACiM,GAAD,KACEnM,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACGxF,EAAUrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YACvCpB,EAAAC,EAAAC,cAACkM,GAAD,KACEpM,EAAAC,EAAAC,cAACmM,GAAD,KACErM,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAApB,8EACA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQzG,MAAM,UAAU8G,QAAS7E,KAAKkI,iBAAiBO,KAAKzI,SAG7DsI,EAAKjE,OAAS,EAAIrE,KAAKrC,MAAMkL,MAAMP,KAAK9C,IAAI,SAACyD,EAAMxD,GAElD,GAAIR,GACF,GAAwB,MAApBgE,EAAKhE,YAAsB2D,EAAe,EAE5C,OADAA,IAEEjM,EAAAC,EAAAC,cAAA,OAAK6I,IAAKD,EAAG3I,UAAU,aACrBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAayJ,EAAKC,QACtCvM,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAAWyJ,EAAKxM,OAEtCE,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAAS1C,UAAU,eAAe+H,QAAS,kBAAMf,EAAKiE,eAAekB,EAAK/L,MACvE,MAApB+L,EAAKhE,WAAqBtI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,wCAAUD,UAAU,QAAO9H,EAAAC,EAAAC,cAACsM,GAAAvM,EAAD,OAA4B,KAChGqM,EAAKvE,OAER/H,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAASyJ,EAAK7D,OAEpCzI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6HAAyBD,UAAU,aAChD9H,EAAAC,EAAAC,cAAA,OACEgI,QAAS,kBAAMf,EAAKiE,eAAekB,EAAK/L,KACxCJ,UAAU,qBAEVH,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBC,KAAK,aACrBmD,EAAKT,SALR,IAKmB1E,EAAK8B,gBAAgBqD,EAAKT,kBAOrD,KAAO/C,EAAI,GACT,OACE9I,EAAAC,EAAAC,cAAA,OAAK6I,IAAKD,EAAG3I,UAAU,aACrBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAayJ,EAAKC,QACtCvM,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAAWyJ,EAAKxM,OAEtCE,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAAS1C,UAAU,eAAe+H,QAAS,kBAAMf,EAAKiE,eAAekB,EAAK/L,MACvE,MAApB+L,EAAKhE,WAAqBtI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,wCAAUD,UAAU,aAAY9H,EAAAC,EAAAC,cAACsM,GAAAvM,EAAD,OAA4B,KACrGqM,EAAKvE,MAAMvB,QAAQ,UAAnB,MAEHxG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAASyJ,EAAK7D,KAAKjC,QAAQ,UAAlB,OAE/BxG,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6HAAyBD,UAAU,aAChD9H,EAAAC,EAAAC,cAAA,OACEgI,QAAS,kBAAMf,EAAKiE,eAAekB,EAAK/L,KACxCJ,UAAU,qBAEVH,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBC,KAAK,aACrBmD,EAAKT,SALR,IAKmB1E,EAAK8B,gBAAgBqD,EAAKT,eAQvD7L,EAAAC,EAAAC,cAACuM,GAAD,KAAQzM,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,MAApB,wEAEV7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEhF,QAAQ,YACRzB,MAAM,UACN8G,QAAS,WAAQf,EAAKnG,MAAM0L,oBAAoB,QAAS3K,OAAO4K,SAAS,EAAG,KAH9E,0FAQCtB,EAECrL,EAAAC,EAAAC,cAAC0M,GAAD,CACErF,UAAWlE,KAAKkE,UAAUuE,KAAKzI,MAC/ByC,aAAcA,EACd6F,KAAMA,EACNlK,KAAM4B,KAAKrC,MAAMS,KACjBoK,SAAUA,EACVjD,QAASvF,KAAKuF,QACdK,gBAAiB5F,KAAK4F,gBACtBqC,gBAAiBjI,KAAKiI,kBAEtB,eA1KK5K,aAmLjBW,GAAUT,IAAOC,IAAVgM,MAGPR,GAAazL,IAAOC,IAAViM,MAKVC,GAAOnM,IAAOC,IAAVmM,MAyCJP,GAAS7L,IAAOC,IAAVoM,MAQGC,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACXpB,QAAS,SAACJ,GACRwB,EAAS,CAAEzI,KAAM,aAAc0I,QAASzB,OAN/BuB,CASb/B,IC3NakC,qGAnCHC,EAAOC,EAAQC,GACvB,IAAIC,EAAI,IAAI1N,KACZ0N,EAAEC,QAAQD,EAAEE,UAAsB,GAATH,EAAc,GAAK,GAAK,KACjD,IAAII,EAAU,WAAWH,EAAEI,cAC3BpI,SAASqI,OAASR,EAAQ,IAAMC,EAAS,IAAMK,EAAU,4CAGjDN,GAGR,IAFA,IAAI7K,EAAO6K,EAAQ,IACfS,EAAKtI,SAASqI,OAAOhK,MAAM,KACvBgF,EAAI,EAAGA,EAAIiF,EAAGrG,OAAQoB,IAAK,CAEjC,IADA,IAAIkF,EAAID,EAAGjF,GACY,MAAhBkF,EAAEC,OAAO,IACdD,EAAIA,EAAEE,UAAU,GAElB,GAAwB,IAApBF,EAAEG,QAAQ1L,GACZ,OAAOuL,EAAEE,UAAUzL,EAAKiF,OAAQsG,EAAEtG,QAGtC,MAAO,yCAIP,IAAIjG,EAAO4B,KAAK+K,UAAU,YACb,KAAT3M,EACF4M,MAAM,iBAAmB5M,GAGZ,MADbA,EAAO6M,OAAO,0BAA2B,MACb,OAAT7M,GACjB4B,KAAKkL,UAAU,WAAY9M,EAAM,kHCI1B+M,OA3Bf,SAAgBxN,GACd,IAAImB,EAAS,GAQb,OALEA,EADEJ,OAAOC,SAASC,KAAKC,SAAS,cAAgBlB,EAAMyN,OAAOtM,OACpDnB,EAAMyN,OAAOtM,OAAOC,MAAM,IAE1BpB,EAAMyN,OAAOtM,OAItBnC,EAAAC,EAAAC,cAACwO,GAAAzO,EAAD,CAAU0O,QAAM,EAACC,iBAAkB,CAAEC,QAAS,CAAEC,MAAO,kBACrD9O,EAAAC,EAAAC,cAAC6O,GAAA9O,EAAD,KACED,EAAAC,EAAAC,cAAC8O,GAAA/O,EAAD,CACEgB,MAAO,CAAEgO,OAAQ,IAAKC,MAAO,KAC7BC,IAAG,GAAAvN,OAAKZ,EAAMyN,OAAOhM,KAAlB,KAAAb,OAA0BZ,EAAMyN,OAAO/L,SAC1C0M,IAA6B,KAAxBpO,EAAMyN,OAAOtM,OAAgBA,EAAST,OAG/C1B,EAAAC,EAAAC,cAACmP,GAAApP,EAAD,CACEqP,OAAK,EACLC,QAAO,GAAA3N,OAAKZ,EAAMyN,OAAOhM,KAAlB,KAAAb,OAA0BZ,EAAMyN,OAAO/L,SAC9C8M,UAAWxO,EAAMyN,OAAO9L,4NCMhC,IAAM8M,GAAgB7O,IAAOC,IAAV6O,MAOJC,GAlCf,SAAgB3O,GACd,OACEhB,EAAAC,EAAAC,cAACuP,GAAD,KACEzP,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEM,GAAG,8BACHsC,QAAQ,WACR6B,KAAK,OACLgF,MAAM,iCACNmG,OAAO,QACPvK,MAAOtE,EAAM8O,YACblG,SAAU5I,EAAM+O,aAChBC,WAAY,CACVC,aACEjQ,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,yHAEXpQ,EAAAC,EAAAC,cAAA,OAAKiP,IAAI,iCAAQC,IAAKiB,KAAYpP,MAAO,CAAEqP,QAAS,4NCd/CC,8MACnB5M,MAAQ,CACN6M,QAAS,GACTC,QAAS,GACTX,YAAa,GACbzN,SAAS,EACTqO,cAAejL,SAASsC,SAa1BgI,aAAe,SAAC5K,GACdjC,EAAK2B,SAAS,CAAEiL,YAAa3K,EAAEE,OAAOC,QACtC,IAAMwK,EAAc3K,EAAEE,OAAOC,MAAMqL,cAEnClL,SAASsC,MAAQ5C,EAAEE,OAAOC,OAASpC,EAAKS,MAAM+M,cAE9C,IAAIF,EAAUtN,EAAKS,MAAM8M,QACzBD,EAAUA,EAAQI,OAAO,SAAAnC,GAAM,OAC7BA,EAAOhM,KAAKkO,cAAczO,SAAS4N,IACnCrB,EAAO/L,QAAQiO,cAAczO,SAAS4N,IACtCrB,EAAO9L,SAASgO,cAAczO,SAAS4N,KAEzC5M,EAAK2B,SAAS,CAAE2L,eAGlBK,qBAAuB,WACrBpL,SAASsC,MAAQ7E,EAAKS,MAAM+M,kGA1BV,IAAAzJ,EAAA5D,KAClBwC,MAAK,GAAAjE,OAAImB,EAAJ,uBACFgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAyK,GAAO,OAAIvJ,EAAKpC,SAAS,CAC7B2L,QAASA,EAAQjM,KAAKqM,OAAO,SAAAnC,GAAM,OAAIA,EAAOlO,KAAO0G,EAAKjG,MAAM8P,QAAQC,aACxEN,QAASD,EAAQjM,KAAKqM,OAAO,SAAAnC,GAAM,OAAIA,EAAOlO,KAAO0G,EAAKjG,MAAM8P,QAAQC,iBAEzEhL,KAAK,kBAAMkB,EAAKpC,SAAS,CAAExC,SAAS,uCAsBhC,IAAA8E,EAAA9D,KACP,OACErD,EAAAC,EAAAC,cAAC8Q,GAAA/Q,EAAD,KAEIoD,KAAKM,MAAMtB,QACTrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YAE9BpB,EAAAC,EAAAC,cAAC+Q,GAAD,KACAjR,EAAAC,EAAAC,cAACgR,GAAD,CACEnB,aAAc1M,KAAK0M,aACnBD,YAAazM,KAAKyM,cAEpB9P,EAAAC,EAAAC,cAACiR,GAAAlR,EAAD,KACGoD,KAAKM,MAAM6M,QAAQ3H,IAAI,SAAA4F,GAAM,OAC5BzO,EAAAC,EAAAC,cAACkR,GAAA,EAAD,CACErI,IAAK0F,EAAOlO,GACZ8Q,GAAE,KAAAzP,OAAO6M,EAAOlO,IAChB2H,QAAS,kBAAMf,EAAKnG,MAAMsQ,mBAAmB7C,EAAOlO,MAEpDP,EAAAC,EAAAC,cAACqR,GAAD,CACE9C,OAAQA,iBA1DY/N,aAsElCuQ,GAAgBrQ,IAAOC,IAAV2Q,0nECjEbC,eACJ,SAAAA,EAAYzQ,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAoO,IACjBvO,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsO,GAAAjO,KAAAH,KAAMrC,KAuCR0Q,iBAAmB,SAAA5R,GAAI,OAAIoD,EAAK2B,SAAS,CAAE8M,aAAc7R,EAAKQ,YAxC3C4C,EAuHnB0O,YAAc,kBAAM1O,EAAK2B,SAAS,CAAEgN,eAAe,KAvHhC3O,EAyKnB4O,YAAc,SAACpI,EAAOpE,EAAO7C,GAAS,IAAA6E,EACApE,EAAKlC,MAEzC,OAHoCsG,EAC5BwJ,UAD4BxJ,EACnByK,eAIb/R,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAOA,EACPpE,MAAOA,EACP0M,WAAW,EACXvP,KAAMA,EACNoN,OAAO,QACPoC,gBAAiB,CAAEC,QAAQ,GAC3BtI,SAAU1G,EAAKgC,aACfrC,QAAQ,aAKV7C,EAAAC,EAAAC,cAACiS,GAAD,KACY,SAAT1P,GAA4B,YAATA,GAA+B,aAATA,EACxCzC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAWqF,MAAOA,KAGlBtF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYwK,QAAS5P,GAAOiH,GAC5B1J,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAWM,GAAIkC,EAAM6C,MAAOA,OAjMxCpC,EAAKS,MAAQ,CACX2O,SAAU,GACVT,eAAe,EACfU,WAAW,EACXC,WAAW,EACXC,UAAW,GACXC,eAAgB,GAChBrQ,SAAS,EACTsP,aAAc,GACdgB,cAAc,GAEhBzP,EAAK0P,aAAe1P,EAAK0P,aAAa9G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAKgC,aAAehC,EAAKgC,aAAa4G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAKgE,cAAgBhE,EAAKgE,cAAc4E,KAAnB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACrBA,EAAK2P,YAAc3P,EAAK2P,YAAY/G,KAAjB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACnBA,EAAK4P,aAAe5P,EAAK4P,aAAahH,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAK6P,YAAc7P,EAAK6P,YAAYjH,KAAjB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACnBA,EAAK8P,SAAW9P,EAAK8P,SAASlH,KAAd3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAChBA,EAAK0O,YAAc1O,EAAK0O,YAAY9F,KAAjB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KApBFA,6EAuBL+P,GAAQ,IAAAhM,EAAA5D,KACf4P,GAAQ5P,KAAKwB,SAAS,CAAExC,SAAS,IAEvB,UAAX4Q,GAAoB5P,KAAKwB,SAAS,CAAE8N,cAAc,IAEtD9M,MAAK,GAAAjE,OAAImB,EAAJ,0BAAAnB,OAAgCyB,KAAKrC,MAAM8P,UAC7C/K,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAuM,GAAQ,OAAIrL,EAAKpC,SAAS,CAAEyN,WAAUX,aAAcW,EAASY,aAClEnN,KAAK,kBAAMkB,EAAKpC,SAAS,CAAExC,SAAS,EAAOsQ,cAAc,MACzDQ,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,iDAK5B1B,KAAK6D,qDAMMkM,GAEX,IAAId,EAAQnP,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAQE,KAAKM,MAAM2O,UAC/BA,EAASc,EAAM/N,OAAO5C,MAAQ2Q,EAAM/N,OAAOC,MAC3CjC,KAAKwB,SAAS,CAAEyN,oDAIhBjP,KAAKwB,SAAS,CAAEgN,eAAe,wCAGrBuB,GAAO,IAAAE,EACjBjQ,KAAKwB,UAALyO,EAAA,GAAAnQ,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EACGF,EAAM/N,OAAO5C,KAAO2Q,EAAM/N,OAAOC,OADpCnC,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EAAA,aAEa,GAFbnQ,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EAAA,aAGa,GAHbA,qCAOOnO,GAEP,GADAA,EAAES,iBACEvC,KAAKM,MAAM8O,WAAapP,KAAKM,MAAM+O,eAAgB,CACrD,IAAIzO,EAAOZ,KACLU,EAAW,IAAIC,SACrBD,EAASI,OAAO,OAAQd,KAAKM,MAAM8O,WACnC1O,EAASI,OAAO,OAAQd,KAAKM,MAAM+O,gBACnC3O,EAASI,OAAO,SAAUF,EAAKjD,MAAM+Q,gBAErC3N,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,sBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBX,EAAKiD,cAAc,SACnBjD,EAAKY,SAAS,CAAEgN,eAAe,EAAOa,eAAgB,GAAID,UAAW,KACrExO,EAAKjD,MAAM2F,gBAAgB,gMAAsC,CAAE9D,QAAS,YAC5EmC,QAAQC,IAAIL,IAEdE,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,kBAI3FQ,KAAKM,MAAMkO,gBACbxO,KAAKrC,MAAM2F,gBAAgB,oIAA4B,CAAE9D,QAAS,YAC7DQ,KAAKM,MAAM+O,gBAAgBrP,KAAKwB,SAAS,CAAE2N,WAAW,IACtDnP,KAAKM,MAAM8O,WAAWpP,KAAKwB,SAAS,CAAE0N,WAAW,yCAKhDhS,GACV,IAAI0D,EAAOZ,KACXY,EAAKY,SAAS,CAAE2O,OAAO,IACvB,IAAMzP,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAM5D,GAEtB6D,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBX,EAAKiD,cAAc,SACnBjD,EAAKjD,MAAM2F,gBAAgB,gMAAsC,CAAE9D,QAAS,YAC5EmC,QAAQC,IAAIL,IAEdE,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,kDAOpFsC,GACX,IAAIlB,EAAOZ,KACX8B,EAAES,iBAEF,IAAM7B,EAAW,IAAIC,SAErBD,EAASI,OAAO,KAAMd,KAAKrC,MAAM+Q,gBACjChO,EAASI,OAAO,SAAUC,IAAE,wBAAwBqP,OACpD1P,EAASI,OAAO,eAAgBC,IAAE,8BAA8BqP,OAChE1P,EAASI,OAAO,YAAaC,IAAE,2BAA2BqP,OAC1D1P,EAASI,OAAO,WAAYd,KAAKM,MAAMgO,aAAavP,MAAM,EAAG,KAC7D2B,EAASI,OAAO,WAAYC,IAAE,0BAA0BqP,OACxD1P,EAASI,OAAO,WAAYC,IAAE,0BAA0BqP,OACxD1P,EAASI,OAAO,OAAQC,IAAE,sBAAsBqP,OAChD1P,EAASI,OAAO,QAASC,IAAE,uBAAuBqP,OAClD1P,EAASI,OAAO,WAAYC,IAAE,0BAA0BqP,OACxD1P,EAASI,OAAO,SAAUC,IAAE,wBAAwBqP,OACpD1P,EAASI,OAAO,UAAWC,IAAE,yBAAyBqP,OACtD1P,EAASI,OAAO,MAAOC,IAAE,qBAAqBqP,OAC9C1P,EAASI,OAAO,OAAQC,IAAE,sBAAsBqP,OAChD1P,EAASI,OAAO,MAAOd,KAAKM,MAAM2O,SAASoB,KAE3CtP,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,wBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GAEjB,OADeA,EAAI+O,QAEjB,KAAK,EACH1P,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,UAC3F,MACF,KAAK,EACHoB,EAAKiD,cAAc,UACnBjD,EAAKjD,MAAM2F,gBAAgB,gMAAsC,CAAE9D,QAAS,YAC5EoB,EAAK+O,SAAS7N,KAKpBL,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,8CAuCxF,IAAAsE,EAAA9D,KAAAmE,EACuFnE,KAAKM,MAA3FtB,EADDmF,EACCnF,QAASiQ,EADV9K,EACU8K,SAAUT,EADpBrK,EACoBqK,cAAeY,EADnCjL,EACmCiL,UAAWC,EAD9ClL,EAC8CkL,eAAgBH,EAD9D/K,EAC8D+K,UAAWC,EADzEhL,EACyEgL,UADzEoB,EAEmCvQ,KAAKrC,MAAvC8P,EAFD8C,EAEC9C,QAASiB,EAFV6B,EAEU7B,eAAgBtQ,EAF1BmS,EAE0BnS,KAC7BoS,EAAY,GACZ1R,EAASV,EAAKU,OAKlB,OAHImQ,EAASwB,SAAQD,EAAYE,KAAKC,MAAM1B,EAASwB,OAAOtN,QAAQ,MAAO,MACvEzE,OAAOC,SAASC,KAAKC,SAAS,cAAgBC,IAAQA,EAASA,EAAOC,MAAM,KAG9EpC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAO1H,UAAU,YAEbkC,EA4LQrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YA5L5BpB,EAAAC,EAAAC,cAAC+T,GAAD,CAAM1T,GAAG,gBAAgB0S,OAAO,GAAGiB,OAAO,OAAOC,SAAU9Q,KAAKuP,cAC1E5S,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACbH,EAAAC,EAAAC,cAAA,OAAKe,MAAO,CAAEqB,WAAU,OAAAV,OAASO,GAAkBT,IAA3B,gCAE1B1B,EAAAC,EAAAC,cAAA,OAAKC,UAAW4R,IAAmBjB,EAAU,wBAA0B,MACpEiB,IAAmBjB,EAClB9Q,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACGa,KAAKyO,YAAY,qBAAOQ,EAAS7P,KAAM,QACvCY,KAAKyO,YAAY,6CAAWQ,EAAS5P,QAAS,WAC9CW,KAAKyO,YAAY,yDAAaQ,EAAS3P,SAAU,aAGlD3C,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAWE,UAAU,cAAcmF,MAAOgN,EAAS7P,KAAO,IAAM6P,EAAS5P,UACzE1C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,iBAAiBkD,KAAKyO,YAAY,yDAAaQ,EAAS3P,SAAU,cAIvFoP,IAAmBjB,EAClB9Q,EAAAC,EAAAC,cAACkU,GAAAnU,EAAD,CACEoU,KAAK,qBACL/O,MAAOgN,EAASgC,MAChB1K,SAAUvG,KAAK6B,cAEd,kBAAMlF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACL6B,MAAM,kFACNjH,KAAK,QACLuP,WAAW,EACXnC,OAAO,QACPoC,gBAAiB,CAAEC,QAAQ,GAC3BrP,QAAQ,eAGV7C,EAAAC,EAAAC,cAACiS,GAAD,KACEnS,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAWM,GAAG,QAAQU,MAAO,CAAE0E,cAAe,OAAQ4O,QAAS,GAAKjP,MAAOgN,EAASgC,SAIzFvC,IAAmBjB,EAClB9Q,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACsU,GAAA,EAAD,CACE3R,QAAQ,WACRJ,KAAK,WACLoN,OAAO,QACPnG,MAAM,4EACNpJ,OAAQ,eACRgF,MAAOjC,KAAKM,MAAMgO,aAAetO,KAAKM,MAAMgO,aAAeW,EAASY,SACpElB,WAAW,EACXC,gBAAiB,CAAEC,QAAQ,GAC3BtI,SAAUvG,KAAKqO,iBACf+C,mBAAiB,0BAEnBzU,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAgBtH,GAAG,yBAAnB,+OAEA,OAGRP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,KAAKzB,MAAM,WAA/B,kCACApB,EAAAC,EAAAC,cAAA,YAGD6R,IAAmBjB,EAClB9Q,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6M,QAAM,EACNhL,MAAM,0GACNjH,KAAK,SACL6C,MAAOgN,EAASqC,QAAU,GAC1B/K,SAAUvG,KAAK6B,aACf2K,OAAO,QACPhN,QAAQ,WACRmP,WAAW,EACXC,gBAAiB,CAAEC,QAAQ,IAET,+CAAjBI,EAASoB,IACR1T,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAUvC,MAAM,2DAAhB,2DACAtF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAUvC,MAAM,+CAAhB,+CAEgB,+CAAjBgN,EAASoB,IACR1T,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAUvC,MAAM,8CAAhB,8CACAtF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAUvC,MAAM,kCAAhB,kCAEFtF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAUvC,MAAM,4GAAhB,6GAGAtF,EAAAC,EAAAC,cAACiS,GAAD,KACEnS,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYwK,QAAQ,UAApB,2GACArS,EAAAC,EAAAC,cAACkS,GAAAnS,EAAD,CAAWM,GAAG,SAAS+E,MAAOgN,EAASqC,YAKjD3U,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBAEXH,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,KAAKzB,MAAM,WAA/B,4BACApB,EAAAC,EAAAC,cAAA,YAEDmD,KAAKM,MAAMgP,aAAe3S,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YACzDpB,EAAAC,EAAAC,cAAC0U,GAAD,KACGzR,OAAO0R,KAAKhB,GAAWhL,IAAI,SAAAiG,GAAK,OAC/B9O,EAAAC,EAAAC,cAAC4U,GAAD,CAAU/L,IAAK8K,EAAU/E,GAAOvO,IAC9BP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAApB,uBAAsCgR,EAAU/E,GAAOiG,WAAvD,KACA/U,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAAWgR,EAAU/E,GAAOkG,gBAAhD,mBACAhV,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6CAAUD,UAAU,SAAQ9H,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,CAAOiI,QAAS,kBAAMf,EAAK0L,YAAYgB,EAAU/E,GAAOvO,aAM5GsR,EAAiB7R,EAAAC,EAAAC,cAAC+U,GAAD,KAChBjV,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,qBACNpE,MAAOmN,EACPT,WAAW,EACXvP,KAAK,YACLoN,OAAO,QACP/K,OAAQyN,EACRN,gBAAiB,CAAEC,QAAQ,GAC3BtI,SAAUvG,KAAK0P,YACflQ,QAAQ,aAEV7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,sEACNpE,MAAOoN,EACPV,WAAW,EACXvP,KAAK,iBACLoN,OAAO,QACPnL,KAAK,OACLI,OAAQ0N,EACRP,gBAAiB,CAAEC,QAAQ,GAC3BtI,SAAUvG,KAAK0P,YACflQ,QAAQ,cAGZ7C,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,mDAAWD,UAAU,SAClC9H,EAAAC,EAAAC,cAACgV,GAAAjV,EAAD,CAASiI,QAAS7E,KAAK2P,YAEzBhT,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,mDAAWD,UAAU,SAClC9H,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,CAAOiI,QAAS,kBAAMf,EAAKtC,SAAS,CAAEgN,eAAe,EAAOa,eAAgB,GAAID,UAAW,GAAIF,WAAW,EAAMC,WAAW,UAGlH,KAEdT,IAAmBjB,EAClB9Q,EAAAC,EAAAC,cAACiV,GAAD,KACEnV,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,UAAU8G,QAAS2J,EAAgBxO,KAAK2P,SAAW3P,KAAKyP,cAA1F,qDACc,MAEpB9S,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,KAAKzB,MAAM,WAA/B,oDACApB,EAAAC,EAAAC,cAAA,YAGDmD,KAAKyO,YAAY,sEAAgBQ,EAAS8C,KAAM,QAChD/R,KAAKyO,YAAY,sEAAgBQ,EAAS+C,SAAU,YACpDhS,KAAKyO,YAAY,8FAAoBQ,EAASgD,OAAQ,WAGzDtV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,KAAKzB,MAAM,WAA/B,sEACApB,EAAAC,EAAAC,cAAA,YAGDmD,KAAKyO,YAAY,qBAAOQ,EAASiD,IAAK,OACtClS,KAAKyO,YAAY,yDAAaQ,EAASkD,SAAU,aAGlC,+CAAjBlD,EAASoB,IACR1T,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,KAAKzB,MAAM,WAA/B,wCACApB,EAAAC,EAAAC,cAAA,YAGDmD,KAAKyO,YAAY,uCAAUQ,EAASmD,aAAc,gBAClDpS,KAAKyO,YAAY,oDAAaQ,EAASoD,UAAW,cAC5C,KAEV3D,IAAmBjB,EAAU9Q,EAAAC,EAAAC,cAACyV,GAAD,KAAK3V,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQnD,KAAK,SAAS7B,QAAQ,YAAYzB,MAAM,UAAU8G,QAAS7E,KAAKuP,cAAxE,0FAAuH,cAnZzIlS,aAyZrBuT,GAAOrT,IAAOgV,KAAVC,MAyBJF,GAAM/U,IAAOC,IAAViV,MAIHhB,GAAWlU,IAAOC,IAAVkV,MAuBRnB,GAAYhU,IAAOC,IAAVmV,MAMTf,GAAWrU,IAAOC,IAAVoV,MAiBRd,GAAYvU,IAAOC,IAAVqV,MAOT/D,GAAQvR,IAAOC,IAAVsV,MAuBIjL,0BAAauG,sDCjfb2E,6BAzBA,SAAAC,GAAK,MAAK,CACvBC,MAAO,CACL3T,SAAU,QACV4T,OAA6B,EAArBF,EAAMG,QAAQC,KACtBC,MAA4B,EAArBL,EAAMG,QAAQC,QAqBVL,CAjBf,SAAapV,GAAO,IACV6N,EAAY7N,EAAZ6N,QACR,OACE7O,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyW,GAAA1W,EAAD,CAAS8H,MAAO/G,EAAM+G,MAAOqI,aAAYpP,EAAM+G,OAC7C/H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAUzG,MAAOJ,EAAMwO,UAAY,YAAc,UAAWrP,UAAW0O,EAAQyH,OAC7EtW,EAAAC,EAAAC,cAAC0W,GAAA3W,EAAD,+BClBK,SAAS4W,GAAY7V,GAClC,OACEhB,EAAAC,EAAAC,cAAC4W,GAAA7W,EAAD,CACE8W,KAAM/V,EAAM+V,KACZC,QAAShW,EAAMiW,aAEdjW,EAAMkW,kNC6Db,SAASC,GAATC,GAAgD,IAAtBC,EAAsBD,EAAtBC,SAAarW,EAASmC,OAAAmU,GAAA,EAAAnU,CAAAiU,EAAA,cAC9C,OAAOpX,EAAAC,EAAAC,cAAA,MAAAiD,OAAAoU,OAAA,CAAKC,IAAKH,GAAcrW,IAmFjC,IAAMyW,GAAa,CACjBC,QAjFF,SAAiB1W,GACf,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD1E,OAAAoU,OAAA,CACEvF,WAAS,EACThC,WAAY,CACVmH,kBACAQ,WAAWxU,OAAAkQ,GAAA,EAAAlQ,CAAA,CACThD,UAAWa,EAAM4W,YAAY/I,QAAQgJ,MACrCR,SAAUrW,EAAM8W,SAChBC,SAAU/W,EAAM+W,UACb/W,EAAMgX,cAGThX,EAAM4W,YAAYK,kBAqE1BC,KAVF,SAAclX,GACZ,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD1E,OAAAoU,OAAA,CAAOY,QAAM,EAAChY,UAAWa,EAAM4W,YAAY/I,QAAQuJ,OAAWpX,EAAMgX,YACjEhX,EAAM+W,WAQXM,WAzBF,SAAoBrX,GAClB,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEyQ,UAAW,EACX5O,MAAO1I,EAAM+W,SACb5X,UAAWoY,KAAWvX,EAAM4W,YAAY/I,QAAQ2J,KAA3BrV,OAAAoQ,GAAA,EAAApQ,CAAA,GAClBnC,EAAM4W,YAAY/I,QAAQ4J,YAAczX,EAAM0X,YAEjDC,SAAU3X,EAAM4X,YAAY1Q,QAC5B2Q,WAAY7Y,EAAAC,EAAAC,cAAC4Y,GAAA7Y,EAAee,EAAM4X,gBAiBtCG,iBApGF,SAA0B/X,GACxB,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD1E,OAAAoU,OAAA,CACEnW,MAAM,gBACNjB,UAAWa,EAAM4W,YAAY/I,QAAQmK,kBACjChY,EAAMgX,YAEThX,EAAM+W,WA8FXkB,OAnEF,SAAgBjY,GACd,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD1E,OAAAoU,OAAA,CACE2B,UAAWlY,EAAM8W,SACjBqB,SAAUnY,EAAM0X,UAChBxB,UAAU,MACVjW,MAAO,CACLmY,WAAYpY,EAAMqY,WAAa,IAAM,MAEnCrY,EAAMgX,YAEThX,EAAM+W,WAyDXuB,YApDF,SAAqBtY,GACnB,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD1E,OAAAoU,OAAA,CACEnW,MAAM,gBACNjB,UAAWa,EAAM4W,YAAY/I,QAAQ0K,aACjCvY,EAAMgX,YAEThX,EAAM+W,WA8CXyB,YAzCF,SAAqBxY,GACnB,OACEhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD1E,OAAAoU,OAAA,CAAYpX,UAAWa,EAAM4W,YAAY/I,QAAQ4K,aAAiBzY,EAAMgX,YACrEhX,EAAM+W,WAuCX2B,eAlCF,SAAwB1Y,GACtB,OAAOhB,EAAAC,EAAAC,cAAA,OAAKC,UAAWa,EAAM4W,YAAY/I,QAAQ8K,gBAAiB3Y,EAAM+W,YAoCpE6B,oLAEK,IAAAtS,EACoBjE,KAAKrC,MAAxB6N,EADDvH,EACCuH,QAASwH,EADV/O,EACU+O,MAEXwD,EAAQxW,KAAKrC,MAAM6Y,MAAMhR,IAAI,SAAApH,GAAI,MAAK,CAC1C6D,MAAO7D,EAAKlB,GACZmJ,MAAK,GAAA9H,OAAKH,EAAKgB,KAAV,KAAAb,OAAkBH,EAAKiB,YAGxBoX,EAAe,CACnBjC,MAAO,SAAAkC,GAAI,OAAA5W,OAAAkQ,GAAA,EAAAlQ,CAAA,GACN4W,EADM,CAET3Y,MAAOiV,EAAM2D,QAAQvR,KAAK8G,QAC1B0K,UAAW,CACTC,KAAM,eAKZ,OACEla,EAAAC,EAAAC,cAAA,OAAKC,UAAW0O,EAAQsL,MACtBna,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACka,GAAA,EAAD,CACEvL,QAASA,EACTwL,OAAQP,EACR7B,eAAgB,CACdvO,MAAO,+DACPuI,gBAAiB,CACfC,QAAQ,IAGZoI,QAAST,EACTpC,WAAYA,GACZnS,MAAOjC,KAAKrC,MAAMuZ,MAClB3Q,SAAUvG,KAAKrC,MAAMkE,aAAa,SAClCqU,YAAY,sHACZiB,SAAO,IAETxa,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE4S,QACEza,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE+B,SAAUvG,KAAKrC,MAAMuK,iBACrBnK,MAAM,YAGVsI,MAAM,sHA9CmBgR,IAAMha,WA2D5B0V,yBAvNA,SAAAC,GAAK,MAAK,CACvB8D,KAAM,CACJQ,SAAU,EACV1L,OAAQ,IACRhF,UAAW,GACX2Q,QAAS,OACTC,cAAe,SACfC,eAAgB,iBAElBjD,MAAO,CACL+C,QAAS,OACTrG,QAAS,GAEXoF,eAAgB,CACdiB,QAAS,OACTG,SAAU,OACVC,KAAM,EACNC,WAAY,SACZC,SAAU,UAEZ1C,KAAM,CACJ3I,OAAM,GAAAjO,OAAKyU,EAAMG,QAAQC,KAAO,EAA1B,OAAA7U,OAAiCyU,EAAMG,QAAQC,KAAO,EAAtD,OAERgC,YAAa,CACX0C,gBAAiBC,qBACQ,UAAvB/E,EAAM2D,QAAQtV,KAAmB2R,EAAM2D,QAAQqB,KAAK,KAAOhF,EAAM2D,QAAQqB,KAAK,KAC9E,MAGJrC,iBAAkB,CAChBzE,QAAO,GAAA3S,OAAKyU,EAAMG,QAAQC,KAAnB,OAAA7U,OAAkD,EAArByU,EAAMG,QAAQC,KAA3C,OAETgD,YAAa,CACX6B,SAAU,IAEZ/B,YAAa,CACX5W,SAAU,WACV4Y,KAAM,EACND,SAAU,IAEZlD,MAAO,CACLzV,SAAU,WACV6Y,OAAQ,EACRvR,UAAWoM,EAAMG,QAAQC,KACzB8E,KAAM,EACN7E,MAAO,KA0KuB,CAAE+E,WAAW,GAAhCrF,CAAwCwD,yBCnMxC8B,oLAvBX,OACE1b,EAAAC,EAAAC,cAACyb,GAAA1b,EAAD,CAAM2b,WAAS,EAACC,QAAQ,eAAe5a,MAAO,CAAE6a,cAAe,KAC7D9b,EAAAC,EAAAC,cAACsU,GAAA,EAAD,CACE3E,OAAO,SACPnG,MAAM,4EACNpE,MAAOjC,KAAKrC,MAAM2Q,aAClBK,WAAW,EACXpI,SAAUvG,KAAKrC,MAAM0Q,mBAEvB1R,EAAAC,EAAAC,cAACsU,GAAA,EAAD,CACEuH,MAAM,EACNlM,OAAO,SACPnG,MAAM,kFACNpE,MAAOjC,KAAKrC,MAAMgb,aAClBC,OAAO,KACPjK,WAAW,EACXpI,SAAUvG,KAAKrC,MAAMkb,2BAlBCxB,IAAMha,0nBCAvB,SAASyb,GAAUnb,GAChC,OACEhB,EAAAC,EAAAC,cAACkc,GAAD,KACEpc,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,gHACNC,WAAS,EACT9G,QAAQ,WACRJ,KAAK,OACLmH,SAAU5I,EAAMqb,iBAChB/W,MAAOtE,EAAMyH,KACboB,UAAQ,KAMhB,IAAMJ,GAAW7I,IAAOC,IAAVyb,UC2BRC,8MACJ5Y,MAAQ,CACN6Y,WAAY,KAGdC,WAAa,WACXvZ,EAAK2B,SAAS,SAAAlB,GAAK,MAAK,CACtB6Y,WAAY7Y,EAAM6Y,WAAa,QAInCE,WAAa,WACXxZ,EAAK2B,SAAS,SAAAlB,GAAK,MAAK,CACtB6Y,WAAY7Y,EAAM6Y,WAAa,QAInCG,YAAc,WACZzZ,EAAK2B,SAAS,CACZ2X,WAAY,OAIhBI,cAAgB,SAACC,EAAMtC,EAAOza,EAAMgd,EAAMrU,GACxC,OAAa,IAAToU,GAA+B,IAAjBtC,EAAM7S,WACX,IAATmV,GAA8B,kBAAT/c,GAAqC,kBAATgd,MACxC,IAATD,GAAcpU,EAAKf,OAAS,6EAKzB,IAAAT,EAAA5D,KAAAiE,EAC6DjE,KAAKrC,MAAjE6N,EADDvH,EACCuH,QAASgL,EADVvS,EACUuS,MAAOU,EADjBjT,EACiBiT,MAAOyB,EADxB1U,EACwB0U,aAAcrK,EADtCrK,EACsCqK,aAAclJ,EADpDnB,EACoDmB,KACrDsU,EAjDD,CAAC,wKAAkC,wHAA0B,+FAkD1DP,EAAenZ,KAAKM,MAApB6Y,WAER,OACExc,EAAAC,EAAAC,cAAA,OAAKC,UAAW0O,EAAQsL,MACtBna,EAAAC,EAAAC,cAAC8c,GAAA/c,EAAD,CAASuc,WAAYA,EAAYS,YAAY,YAC1CF,EAAMlU,IAAI,SAACa,EAAOwT,GAAR,OACTld,EAAAC,EAAAC,cAACid,GAAAld,EAAD,CAAM8I,IAAKW,GACT1J,EAAAC,EAAAC,cAACkd,GAAAnd,EAAD,KAAYyJ,GACZ1J,EAAAC,EAAAC,cAACmd,GAAApd,EAAD,KACED,EAAAC,EAAAC,cAACod,GAAArd,EAAD,KAxDhB,SAAwB4c,GACtB,OAAQA,GACN,KAAK,EACH,miBACF,KAAK,EACH,MAAO,oPACT,KAAK,EACH,qVACF,QACE,MAAO,gBA+CgBU,CAAeL,IAC5Bld,EAAAC,EAAAC,cAAA,OAAKC,UAAW0O,EAAQ2O,kBACtBxd,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CACE6J,SAAyB,IAAf0S,EACVtU,QAASjB,EAAKyV,WACdvc,UAAW0O,EAAQF,QAHrB,kCAOA3O,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CACE4C,QAAQ,YACRzB,MAAM,UACN8G,QAASsU,IAAeO,EAAMrV,OAAS,EAAI,WAAOT,EAAKjG,MAAM4R,eAAgB3L,EAAKwV,cAAgBxV,EAAKwV,WACvGtc,UAAW0O,EAAQF,OACnB7E,SAAU7C,EAAK2V,cAAcJ,EAAYjC,EAAO5I,EAAcqK,EAAcvT,IAE3E+T,IAAeO,EAAMrV,OAAS,EAAI,iCAAU,+CAW3C,IAAf8U,EACGxc,EAAAC,EAAAC,cAACud,GAAD,CACE5D,MAAOA,EACPU,MAAOA,EACPrV,aAAc7B,KAAKrC,MAAMkE,aACzBqG,iBAAkBlI,KAAKrC,MAAMuK,mBAEhB,IAAfiR,EACAxc,EAAAC,EAAAC,cAACwd,GAAD,CACE1B,aAAcA,EACdrK,aAAcA,EACdD,iBAAkBrO,KAAKrC,MAAM0Q,iBAC7BwK,iBAAkB7Y,KAAKrC,MAAMkb,mBAEhB,IAAfM,EACAxc,EAAAC,EAAAC,cAACic,GAAD,CACE1T,KAAMA,EACN4T,iBAAkBhZ,KAAKrC,MAAMqb,mBAE/B,KAEHG,IAAeO,EAAMrV,QACpB1H,EAAAC,EAAAC,cAAC8Q,GAAA/Q,EAAD,CAAOkY,QAAM,EAACwF,UAAW,EAAGxd,UAAW0O,EAAQ+O,gBAC7C5d,EAAAC,EAAAC,cAACod,GAAArd,EAAD,sJACAD,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CACEiI,QAAS,WAAOjB,EAAK0V,cAAe1V,EAAKjG,MAAM6c,YAC/Chb,QAAQ,YACRzB,MAAM,UACNjB,UAAW0O,EAAQF,QAJrB,kHAQA3O,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CACEiI,QAAS7E,KAAKrC,MAAMiW,YACpB9W,UAAW0O,EAAQF,QAFrB,uDAvGwB+L,IAAMha,WAwH3B0V,yBAzJA,SAAAC,GAAK,MAAK,CACvB8D,KAAM,CACJjL,MAAO,QAETP,OAAQ,CACN1E,UAAWoM,EAAMG,QAAQC,KACzBqH,YAAazH,EAAMG,QAAQC,MAE7B+G,iBAAkB,CAChBO,aAAmC,EAArB1H,EAAMG,QAAQC,MAE9BmH,eAAgB,CACdrJ,QAA8B,EAArB8B,EAAMG,QAAQC,QA6IZL,CAAmBmG,wgCC7J5ByB,8MACJra,MAAQ,CACNgO,aAAc,IAAI5R,KAClBic,aAAc,IAAIjc,KAClB8Z,MAAO,GACPU,MAAO,GACP9R,KAAM,GACNH,WAAY,KAGd2V,kBAAoB,WAClBpY,MAAK,GAAAjE,OAAImB,EAAJ,uBACFgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8T,GAAK,OAAI3W,EAAK2B,SAAS,CAAEgV,MAAOA,EAAMtV,KAAKqM,OAAO,SAAAnP,GAAI,OAAIyc,OAAOzc,EAAKlB,MAAQ2C,EAAKlC,MAAM+Q,qBAC9FoB,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,QAG9BG,aAAe,SAAAzC,GAAI,OAAI,SAAA6C,GAAK,OAAIpC,EAAK2B,SAAL1B,OAAAoQ,GAAA,EAAApQ,CAAA,GAAiBV,EAAO6C,QACxDoM,iBAAmB,SAAA5R,GAAI,OAAIoD,EAAK2B,SAAS,CAAE8M,aAAc7R,EAAKQ,cAC9D4b,iBAAmB,SAAAY,GAAI,OAAI5Z,EAAK2B,SAAS,CAAEmX,aAAcc,EAAKxc,cAC9D+b,iBAAmB,SAAAlX,GAAC,OAAIjC,EAAK2B,SAAS,CAAE4D,KAAMtD,EAAEE,OAAOC,WACvDiG,iBAAmB,kBAAMrI,EAAK2B,SAAS,CAAEyD,YAAapF,EAAKS,MAAM2E,gBACjEuV,SAAW,WACT3a,EAAK2B,SAAS,CACZ8M,aAAc,IAAI5R,KAClBic,aAAc,IAAIjc,KAClBwa,MAAO,GACP9R,KAAM,GACNH,WAAY,OAIhBsK,aAAe,WAAM,IAAApL,EAC6CtE,EAAKS,MAA7D4W,EADW/S,EACX+S,MAAOyB,EADIxU,EACJwU,aAAcrK,EADVnK,EACUmK,aAAclJ,EADxBjB,EACwBiB,KAAMH,EAD9Bd,EAC8Bc,WAC3CvE,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACNib,EAAS,GACTre,EAAO,IAAIC,KACfwa,EAAM6D,QAAQ,SAAA3c,GAAI,OAAI0c,EAAOE,KAAP,MAAAzc,OAAkBH,EAAK6D,UAE7CvB,EAASI,OAAO,OAAQjB,EAAKlC,MAAM+Q,gBACnChO,EAASI,OAAO,OAAQrE,EAAKwe,sBAC7Bva,EAASI,OAAO,MAAOga,EAAOI,KAAK,MACnCxa,EAASI,OAAO,OAAhB,GAAAvC,OAA2B9B,EAAK0e,WAAa,GAAK,IAAM1e,EAAK0e,WAAa1e,EAAK0e,WAA/E,KAAA5c,OAA6F9B,EAAK2e,aAAe,GAAK,IAAM3e,EAAK2e,aAAe3e,EAAK2e,eACrJ1a,EAASI,OAAO,aAAcwN,EAAavP,MAAM,EAAG,KACpD2B,EAASI,OAAO,OAAQsE,GACxB1E,EAASI,OAAO,aAAc6X,EAAa5Z,MAAM,GAAI,KACrD2B,EAASI,OAAO,aAAcmE,EAAa,IAAM,KAEjDlE,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,sBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAAC,GACPI,QAAQC,IAAIL,GACZiB,MAAK,GAAAjE,OAAImB,EAAJ,2BAAAnB,OAAiCsB,EAAKlC,MAAM+Q,iBAC9ChM,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA2Y,GAAK,OAAIza,EAAKjD,MAAM2d,aAAaD,EAAMna,QAC5CwB,KAAK,kBAAM9B,EAAKjD,MAAM2F,gBAAgB,6HAA0B,CAAE9D,QAAS,cAC3EsQ,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,MAE9BD,MAAO,SAAAC,GACLC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,sFAKxF,IAAA+b,EACoDvb,KAAKM,MAAxDkW,EADD+E,EACC/E,MAAOU,EADRqE,EACQrE,MAAOyB,EADf4C,EACe5C,aAAcrK,EAD7BiN,EAC6BjN,aAAclJ,EAD3CmW,EAC2CnW,KAElD,OACEzI,EAAAC,EAAAC,cAAC2e,GAAD,KACE7e,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAAA,QAAMC,UAAU,eAAe+H,QAAS7E,KAAKrC,MAAMiW,aACjDjX,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6CAAUD,UAAU,QAAO9H,EAAAC,EAAAC,cAAC4e,GAAA7e,EAAD,QAE5CD,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,MAApB,uEACA7C,EAAAC,EAAAC,cAAC6e,GAAD,CACElF,MAAOA,EACPU,MAAOA,EACP9R,KAAMA,EACNuT,aAAcA,EACdrK,aAAcA,EACdzM,aAAc7B,KAAK6B,aACnBmX,iBAAkBhZ,KAAKgZ,iBACvB3K,iBAAkBrO,KAAKqO,iBACvBwK,iBAAkB7Y,KAAK6Y,iBACvB3Q,iBAAkBlI,KAAKkI,iBACvBsS,SAAUxa,KAAKwa,SACf5G,YAAa5T,KAAKrC,MAAMiW,YACxBrE,aAAcvP,KAAKuP,wBA7FTlS,aAqGhBW,GAAUT,IAAOC,IAAVme,MAsDE9R,gBACb,SAAAvJ,GAAK,MAAK,CAAEuI,MAAOvI,IACnB,SAAAwJ,GAAQ,MAAK,CACXwR,aAAc,SAACM,GACb9R,EAAS,CAAEzI,KAAM,WAAY0I,QAAS6R,OAJ7B/R,CAObhC,uBAAa8S,0zBCnKMkB,8MAEnBC,aAAe,SAACtF,GACd,IAAIuF,EAAUvF,EAAM/V,MAAM,KACtB6P,EAAS,uBAMb,OAJAyL,EAAQhB,QAAQ,SAAA7d,GACdoT,GAAM,GAAA/R,OAAOsB,EAAKlC,MAAM6Y,MAAMwF,KAAK,SAAA5d,GAAI,OAAIA,EAAKlB,KAAOA,EAAG6B,MAAM,KAAIK,KAA9D,KACNkR,GAAM,GAAA/R,OAAOsB,EAAKlC,MAAM6Y,MAAMwF,KAAK,SAAA5d,GAAI,OAAIA,EAAKlB,KAAOA,EAAG6B,MAAM,KAAIM,QAA9D,QAEDiR,KAGT2L,YAAc,SAAC/e,GACb,IAAIkQ,EAAU,iBAEd,OAASvN,EAAKlC,MAAM+Q,eAAuBtB,EAAW,qBAElDvN,EAAKlC,MAAM6Y,MAAMnS,OAAS,GAC5B+I,GAAWvN,EAAKlC,MAAM6Y,MAAMwF,KAAK,SAAA5d,GAAI,OAAIA,EAAKlB,KAAO2C,EAAKlC,MAAMie,KAAKM,OAAM9c,KAC3EgO,GAAO,IAAA7O,OAAQsB,EAAKlC,MAAM6Y,MAAMwF,KAAK,SAAA5d,GAAI,OAAIA,EAAKlB,KAAO2C,EAAKlC,MAAMie,KAAKM,OAAM7c,eAFjF,2EAOO,IAAAuE,EAAA5D,KACDmc,EAAMC,KAAO,IAAI1f,MACjB2f,EAAMD,KAAOpc,KAAKrC,MAAMie,KAAKU,YAC7BC,EAAaH,KAAOI,SAASH,EAAII,KAAKN,IAAMO,cAElD,OACE/f,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAuBmY,WAAYhgB,EAAAC,EAAAC,cAAC+f,GAAAhgB,EAAD,OACjCD,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAClB7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,YAAY5B,MAAOoZ,GAAOW,MAA9C,qDACa3X,KAAKrC,MAAMie,KAAKnf,KAD7B,cAAA8B,OACyCyB,KAAKrC,MAAMie,KAAKnC,KADzD,KAEkC,MAA/BzZ,KAAKrC,MAAMie,KAAK3W,WAAqBtI,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6GAAwBD,UAAU,aAAY9H,EAAAC,EAAAC,cAACggB,GAAD,KAAMlgB,EAAAC,EAAAC,cAACsM,GAAAvM,EAAD,QAAmC,MAE7IoD,KAAKic,YAAYjc,KAAKrC,MAAMie,KAAKM,MAClCvf,EAAAC,EAAAC,cAACigB,GAAD,KACEngB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,UAAU1C,UAAWoY,KAAW,CAClD6H,iBAA6C,MAA3B/c,KAAKrC,MAAMie,KAAKtK,OAClC0L,aAAyC,MAA3Bhd,KAAKrC,MAAMie,KAAKtK,OAC9B2L,YAAaV,EAAa,KAEE,MAA3Bvc,KAAKrC,MAAMie,KAAKtK,QAAkBiL,EAAa,EAAI,yDACvB,MAA3Bvc,KAAKrC,MAAMie,KAAKtK,QAAkBiL,EAAa,EAAI,qEACjD,kEAKV5f,EAAAC,EAAAC,cAACqgB,GAAD,CAAYrY,QAAS,kBAAMjB,EAAKjG,MAAMwf,cAAcvZ,EAAKjG,MAAMie,KAAK1e,MAClEP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6CAAUD,UAAU,QACjC9H,EAAAC,EAAAC,cAACkK,EAAAnK,EAAD,SAIND,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAuB5G,MAAOoZ,GAAOoG,SACnCzgB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,MAApB,yCAAkCQ,KAAKrC,MAAMie,KAAKxW,KAAlD,MACAzI,EAAAC,EAAAC,cAACwgB,GAAD,KACE1gB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAAWQ,KAAKrC,MAAM6Y,MAAMnS,OAAS,EAAIrE,KAAK8b,aAAa9b,KAAKrC,MAAMie,KAAK0B,KAAKve,MAAM,GAAI,GAAK,MACnHpC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAApB,wEAA+CQ,KAAKrC,MAAMie,KAAKU,WAAW7b,MAAM,KAAK8c,UAAUrC,KAAK,KAApG,KAA4Glb,KAAKrC,MAAMie,KAAK4B,aAElG,MAA3Bxd,KAAKrC,MAAMie,KAAKtK,QAAkBtR,KAAKrC,MAAMie,KAAKM,KAAKrd,SAArB,MAAAN,OAAoCyB,KAAKrC,MAAM+Q,iBAChF6N,EAAa,EACX5f,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,4MAAuCD,UAAU,YAAYgZ,WAAY,KACtF9gB,EAAAC,EAAAC,cAAA,YAAMF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQiC,UAAU,EAAMjH,QAAQ,YAAYzB,MAAM,WAAlD,4DAERpB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEK,QAAS,kBAAMjB,EAAKjG,MAAM+f,gBAAgB9Z,EAAKjG,MAAMie,KAAK1e,KAC1DsC,QAAQ,YACRzB,MAAM,WAHR,0DAMA,eA5EkBsZ,IAAMha,WAmFlC2Z,GAAS,CACbW,KAAM,CACJJ,QAAS,OACTK,WAAY,UAEdwF,QAAS,CACP5F,cAAe,WAGb7S,GAAOpH,IAAOC,IAAVmgB,MAOJT,GAAa3f,IAAOqgB,KAAVC,MAYVR,GAAS9f,IAAOC,IAAVsgB,MAKNhB,GAAavf,IAAOqgB,KAAVG,2vBCxHD,SAASC,GAAcrgB,GACpC,OACEhB,EAAAC,EAAAC,cAACohB,GAAD,KACEthB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACqhB,GAAD,CAAMrZ,QAASlH,EAAMiW,aACnBjX,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,OAEFD,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,qMACA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAApB,yRACA7C,EAAAC,EAAAC,cAACshB,GAAD,KACExhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,YAAY8G,QAASlH,EAAMygB,cAA7D,8CACAzhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,OAAOzB,MAAM,UAAU8G,QAASlH,EAAMiW,aAAtD,2CAMV,IAAM5V,GAAUT,IAAOC,IAAV6gB,MAmBPF,GAAkB5gB,IAAOC,IAAV8gB,MAQf3Z,GAAOpH,IAAOC,IAAV+gB,kaCnCJC,8MACJle,MAAQ,CACNoT,MAAM,EACN+K,SAAS,EACTC,iBAAkB,KAClBrD,MAAO,GACPjO,QAAS,GACToJ,MAAO,GACPmI,eAAgB,EAChB3f,SAAS,KAEX4b,kBAAoB,WAClBpY,MAAK,GAAAjE,OAAImB,EAAJ,2BAAAnB,OAAiCsB,EAAKlC,MAAM+Q,iBAC9ChM,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA2Y,GAAK,OAAIxb,EAAKlC,MAAMihB,SAASvD,EAAMna,QACxC4O,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,KAE5Bc,MAAK,GAAAjE,OAAImB,EAAJ,uBACFgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8T,GAAK,OAAI3W,EAAK2B,SAAS,CAAEgV,MAAOA,EAAMtV,SAC3CwB,KAAK,kBAAM7C,EAAK2B,SAAS,CAAExC,SAAS,MACpC8Q,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,QAG9Bmd,WAAa,kBAAMhf,EAAK2B,SAAS,CAAEkS,MAAM,OACzCyJ,cAAgB,SAAAjgB,GAAE,OAAI2C,EAAK2B,SAAS,CAAEid,SAAS,EAAMC,iBAAkBxhB,OACvE0W,YAAc,kBAAM/T,EAAK2B,SAAS,CAAEkS,MAAM,EAAO+K,SAAS,EAAOC,iBAAkB,UAEnFhB,gBAAkB,SAACxgB,GACjB,IAAMwD,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACNpD,EAAO,IAAIC,KACfmD,EAAK2B,SAAS,CAAExC,SAAS,IACzB,IAAM8f,EAAYriB,EAAKwe,qBACjB8D,EAAS,GAAAxgB,OAAM9B,EAAK0e,WAAa,GAAK,IAAM1e,EAAK0e,WAAa1e,EAAK0e,WAA1D,KAAA5c,OAAwE9B,EAAK2e,aAAe,GAAK,IAAM3e,EAAK2e,aAAe3e,EAAK2e,cAE/I1a,EAASI,OAAO,KAAM5D,GACtBwD,EAASI,OAAO,YAAage,GAC7Bpe,EAASI,OAAO,YAAaie,GAE7Bhe,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,2BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAAC,GACPI,QAAQC,IAAIL,GACZiB,MAAK,GAAAjE,OAAImB,EAAJ,2BAAAnB,OAAiCqC,EAAKjD,MAAM+Q,iBAC9ChM,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA2Y,GAAK,OAAIza,EAAKY,SAAS,CAAE6Z,MAAOA,EAAMna,KAAMkM,QAASiO,EAAMna,SAChEwB,KAAK,kBAAM9B,EAAKjD,MAAM2F,gBAAgB,gLAAqC,CAAE9D,QAAS,cACtFkD,KAAK,kBAAM9B,EAAKjD,MAAMqhB,gBAAgBpe,EAAKN,MAAM+a,SACjD3Y,KAAK,kBAAM7C,EAAK2B,SAAS,CAAExC,SAAS,MACpC8Q,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,MAE9BD,MAAO,SAAAC,GACLC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,8LAAyC,CAAE9D,QAAS,gBAKrFyf,aAAe,SAAC/hB,EAAIqQ,GAClB1N,EAAK2B,SAAS,CAAEmd,eAAgBzhB,IAChC,IAAIgiB,EAAWrf,EAAKS,MAAM8M,QAEX,YAAXG,GAAsB1N,EAAKlC,MAAMwhB,SAAStf,EAAKS,MAAM8M,SAC1C,eAAXG,IACF2R,EAAWA,EAAS3R,OAAO,SAAAtE,GAAI,OAAI4R,OAAO5R,EAAKiT,QAAUrc,EAAKlC,MAAM+Q,iBACpE7O,EAAKlC,MAAMwhB,SAASD,IAEP,cAAX3R,IACF2R,EAAWA,EAAS3R,OAAO,SAAAtE,GAAI,MAAoB,MAAhBA,EAAKqI,SACxCzR,EAAKlC,MAAMwhB,SAASD,OAIxBd,aAAe,WACb,IAAM1d,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACVA,EAAK2B,SAAS,CAAExC,SAAS,IACzB0B,EAASI,OAAO,KAAMjB,EAAKS,MAAMoe,kBAEjC3d,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAAC,GACPI,QAAQC,IAAIL,GACZiB,MAAK,GAAAjE,OAAImB,EAAJ,2BAAAnB,OAAiCqC,EAAKjD,MAAM+Q,iBAC9ChM,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA2Y,GAAK,OAAIza,EAAKY,SAAS,CAAE6Z,MAAOA,EAAMna,MAAQ,GAAIkM,QAASiO,EAAMna,MAAQ,OAC9EwB,KAAK,kBAAM9B,EAAKjD,MAAM2F,gBAAgB,sJAA+B,CAAE9D,QAAS,WAChFkD,KAAK,kBAAM9B,EAAKjD,MAAMyhB,aAAaxe,EAAKN,MAAMoe,oBAC9Chc,KAAK,kBAAM9B,EAAKgT,gBAChBlR,KAAK,kBAAM7C,EAAK2B,SAAS,CAAExC,SAAS,MACpC8Q,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,MAE9BD,MAAO,SAAAC,GACLC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,8LAAyC,CAAE9D,QAAS,sFAK5E,IAAAoE,EAAA5D,KAAAmE,EACiCnE,KAAKM,MAArCoT,EADDvP,EACCuP,KAAM8C,EADPrS,EACOqS,MAAOmI,EADdxa,EACcwa,eAMrB,OAJkC,IAA9B3e,KAAKM,MAAM8M,QAAQ/I,QACrBxB,WAAW,kBAAMe,EAAKpC,SAAS,CAAE4L,QAASxJ,EAAKjG,MAAMkL,MAAMwS,MAAOA,MAAOzX,EAAKjG,MAAMkL,MAAMwS,SAAU,GAIpG1e,EAAAC,EAAAC,cAACwiB,GAAD,KACE1iB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACIxE,KAAKM,MAAMtB,QAqCTrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YApChCpB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAACyiB,GAAD,KACE3iB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEK,QAAS,kBAAMjB,EAAKqb,aAAa,EAAG,YACpCzf,QAA4B,IAAnBmf,EAAuB,YAAc,OAC9ClY,SAA6B,IAAnBkY,GAHZ,2DAIAhiB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEzG,MAAM,UACN8G,QAAS,kBAAMjB,EAAKqb,aAAa,EAAG,eACpCzf,QAA4B,IAAnBmf,EAAuB,YAAc,OAC9ClY,SAA6B,IAAnBkY,GAJZ,gEAQAhiB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEK,QAAS,kBAAMjB,EAAKqb,aAAa,EAAG,cACpCzf,QAA4B,IAAnBmf,EAAuB,YAAc,OAC9ClY,SAA6B,IAAnBkY,EACV5gB,MAAM,aAJR,uEAQDiC,KAAKrC,MAAMkL,MAAMwS,MAAMhX,OAAS,EAE/BrE,KAAKrC,MAAMkL,MAAMwS,MAAM7V,IAAI,SAAAoW,GAAI,OAC7Bjf,EAAAC,EAAAC,cAAC0iB,GAAD,CACE7Z,IAAKkW,EAAK1e,GACV0e,KAAMA,EACNpF,MAAOA,EACP9H,eAAgB9K,EAAKjG,MAAM+Q,eAC3BgP,gBAAiB9Z,EAAK8Z,gBACtBP,cAAevZ,EAAKuZ,cAAc1U,KAAK7E,OAG3CjH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAY1H,UAAU,WAAW0C,QAAQ,WAAzC,uDAOR7C,EAAAC,EAAAC,cAAA,QAAMgI,QAAS7E,KAAK6e,YAAYliB,EAAAC,EAAAC,cAAC2iB,GAAD,CAAK9a,MAAM,2FAG3C/H,EAAAC,EAAAC,cAAC2W,GAAD,CACEE,KAAMA,EACNE,YAAa5T,KAAK4T,YAAYnL,KAAKzI,MACnC6T,UACElX,EAAAC,EAAAC,cAAC4iB,GAAD,CACE7L,YAAa5T,KAAK4T,YAAYnL,KAAKzI,MACnC0O,eAAgB1O,KAAKrC,MAAM+Q,mBAKjC/R,EAAAC,EAAAC,cAAC2W,GAAD,CACEE,KAAM1T,KAAKM,MAAMme,QACjB7K,YAAa5T,KAAK4T,YAAYnL,KAAKzI,MACnC6T,UAAWlX,EAAAC,EAAAC,cAACmhB,GAAD,CACTI,aAAcpe,KAAKoe,aACnBxK,YAAa5T,KAAK4T,YAAYnL,KAAKzI,kBAnL3B3C,aA0LdW,GAAUT,IAAOC,IAAVkiB,MAUPJ,GAAU/hB,IAAOC,IAAVmiB,MASE9V,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACXkV,gBAAiB,SAAC3D,GAChBvR,EAAS,CAAEzI,KAAM,iBAAkB0I,QAASsR,KAE9C+D,aAAc,SAACxD,GACb9R,EAAS,CAAEzI,KAAM,cAAe0I,QAAS6R,KAE3CuD,SAAU,SAAC9D,GACTvR,EAAS,CAAEzI,KAAM,eAAgB0I,QAASsR,KAE5CuD,SAAU,SAACvD,GACTvR,EAAS,CAAEzI,KAAM,cAAe0I,QAASsR,OAfhCxR,CAkBbhC,uBAAa2W,0jECvOA,SAASoB,GAAQjiB,GAC9B,IAAImB,EAAS,GAOb,OALEA,GADGJ,OAAOC,SAASC,KAAKC,SAAS,cAAgBlB,EAAMS,KAAKU,OACnDnB,EAAMS,KAAKU,OAEXnB,EAAMS,KAAKU,OAAOC,MAAM,IAIjCpC,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAACgjB,GAAD,KACEljB,EAAAC,EAAAC,cAACijB,GAAD,KACEnjB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,UAApB,6EAEA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,OAAOC,MAAM,8CAC9B/H,EAAAC,EAAAC,cAACkjB,GAAD,KAAMpjB,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,CAAWiI,QAASlH,EAAMuG,eAIpCvH,EAAAC,EAAAC,cAACmjB,GAAD,KACErjB,EAAAC,EAAAC,cAAA,QAAM+S,OAAO,GAAGiB,OAAO,OAAOC,SAAUnT,EAAMsiB,YAC5CtjB,EAAAC,EAAAC,cAACqjB,GAAD,KACyB,KAAtBviB,EAAMS,KAAKU,OACRnC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQgP,IAAG,GAAAvN,OAAKZ,EAAMS,KAAKgB,KAAhB,KAAAb,OAAwBZ,EAAMS,KAAKiB,SAAWzB,MAAO,CAAEqB,WAAU,OAAAV,OAASF,IAAT,+BAC3F1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQgP,IAAG,GAAAvN,OAAKZ,EAAMS,KAAKgB,KAAhB,KAAAb,OAAwBZ,EAAMS,KAAKiB,SAAWzB,MAAO,CAAEqB,WAAU,OAAAV,OAASO,EAAT,+BAE/FnC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,yDACNpE,MAAOtE,EAAMwiB,aACb5Z,SAAU5I,EAAMkE,aAChBJ,MAAO9D,EAAMyiB,aACb5gB,QAAQ,WACRJ,KAAK,eACLiC,KAAK,OACLmF,UAAQ,KAGZ7J,EAAAC,EAAAC,cAACwjB,GAAD,KACE1jB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,4EACNC,WAAS,EACT9G,QAAQ,WACRJ,KAAK,cACLqC,MAAO9D,EAAM2iB,YACb/Z,SAAU5I,EAAMkE,aAChBI,MAAOtE,EAAM4iB,YACb/Z,UAAQ,KAGZ7J,EAAAC,EAAAC,cAAC2jB,GAAD,KACE7jB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE4S,QACEza,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACEic,QAAS9iB,EAAM+iB,kBACfna,SAAU5I,EAAMuK,iBAChBnK,MAAM,YAGVsI,MAAM,6GAER1J,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQK,QAASlH,EAAMsiB,WAAYzgB,QAAQ,YAAYzB,MAAM,WAA7D,mGAKRpB,EAAAC,EAAAC,cAAC8jB,GAAD,CAAS9b,QAASlH,EAAMuG,aAK9B,IAAMlG,GAAUT,IAAOC,IAAVojB,MASPf,GAAYtiB,IAAOC,IAAVqjB,MAgBTrkB,GAASe,IAAOC,IAAVsjB,MAMNd,GAAOziB,IAAOC,IAAVujB,MASJ1D,GAAS9f,IAAOC,IAAVwjB,MAQNd,GAAQ3iB,IAAOC,IAAVyjB,MAUL7a,GAAW7I,IAAOC,IAAV0jB,MAgCRvc,GAAOpH,IAAOC,IAAV2jB,qgCCjKK,SAASnD,GAAcrgB,GACpC,OACEhB,EAAAC,EAAAC,cAACukB,GAAD,KACEzkB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACwkB,GAAD,CAAMxc,QAASlH,EAAMuG,WACnBvH,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,OAEFD,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,2MACA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAApB,+RACA7C,EAAAC,EAAAC,cAACykB,GAAD,KACE3kB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,YAAY8G,QAASlH,EAAM4jB,YAA7D,8CACA5kB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,OAAOzB,MAAM,UAAU8G,QAASlH,EAAMuG,WAAtD,0CAGJvH,EAAAC,EAAAC,cAAC2kB,GAAD,OAIN,IAAMxjB,GAAUT,IAAOC,IAAVikB,MAoBPD,GAAWjkB,IAAOmkB,QAAVC,MAWRxD,GAAkB5gB,IAAOC,IAAVokB,MAQfjd,GAAOpH,IAAOC,IAAVqkB,irFC7CJnY,eACJ,SAAAA,EAAY/L,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0J,IACjB7J,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4J,GAAAvJ,KAAAH,KAAMrC,KA2CRkE,aAAe,SAAAC,GACbjC,EAAK2B,SAAL1B,OAAAoQ,GAAA,EAAApQ,CAAA,GAAiBgC,EAAEE,OAAO5C,KAAO0C,EAAEE,OAAOC,QAC1CpC,EAAK2B,SAAS,CAAE8e,aAAa,EAAOF,cAAc,KA9CjCvgB,EAkDnBqC,QAAU,SAAChF,EAAI4E,GACb,IAAIlB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACRiC,EAAES,iBACF,IAAM7B,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAM5D,GACtBwD,EAASI,OAAO,WAAYjB,EAAKlC,MAAMS,KAAKlB,IAC5C,IAAMiF,EAAUC,SAASC,eAAe,WACxCF,EAAQvE,MAAM0E,cAAgB,OAE9BvB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,WACPV,EAAKqH,gBAAgB,QACrBpF,WAAW,kBAAMV,EAAQvE,MAAM0E,cAAgB,OAAO,MAExDb,MAAO,SAAUC,GACfC,QAAQC,IAAIF,OAtEC7B,EA4EnBiD,WAAa,SAAC5F,EAAI4E,GAChB,IAAMlB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACViC,EAAES,iBACF,IAAMJ,EAAUC,SAASC,eAAe,WACxCF,EAAQvE,MAAM0E,cAAgB,OAE9B,IAAM5B,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAM5D,GACtBwD,EAASI,OAAO,WAAYjB,EAAKlC,MAAMS,KAAKlB,IAE5C6D,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,4BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBX,EAAKqH,gBAAgB,QACrBrH,EAAKY,SAAS,CAAEsgB,SAAS,IACzBjf,WAAW,kBAAMV,EAAQvE,MAAM0E,cAAgB,OAAO,MAExDb,MAAO,SAAUC,GACfC,QAAQC,IAAIF,OAlGC7B,EAuGnBogB,WAAa,SAACne,GACZ,IAAIlB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IAER,GADAiC,EAAES,iBAC8B,KAA5B1C,EAAKS,MAAM6f,cAAkD,KAA3BtgB,EAAKS,MAAMigB,YAAoB,CACnE,IAAM7f,EAAW,IAAIC,SAErBD,EAASI,OAAO,SAAhB,GAAAvC,OAA6BsB,EAAKlC,MAAMS,KAAKgB,KAA7C,KAAAb,OAAqDsB,EAAKlC,MAAMS,KAAKiB,UACrEqB,EAASI,OAAO,QAASjB,EAAKS,MAAM6f,cACpCzf,EAASI,OAAO,OAAQjB,EAAKS,MAAMigB,aACnC7f,EAASI,OAAO,QAAQ,IAAIpE,MAAOwG,SAASnE,MAAM,EAAG,IAAIoE,QAAQ,KAAM,MACvEzC,EAASI,OAAO,WAAW,IAAIpE,MAAO4N,WACtC5J,EAASI,OAAO,aAAcjB,EAAKS,MAAMogB,kBAAoB,EAAI,GACjEhgB,EAASI,OAAO,YAAajB,EAAKlC,MAAMS,KAAKlB,IAE7C6D,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,4BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBI,QAAQC,IAAIL,GACZX,EAAKqH,kBACLrH,EAAKY,SAAS,CACZsgB,SAAUlhB,EAAKN,MAAMwhB,QACrBvB,YAAa,GACbJ,aAAc,KAEhBvf,EAAKjD,MAAM2F,gBAAgB,mIAA2B,CAAE9D,QAAS,aAEnEiC,MAAO,SAAUC,GACfC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,sJAA+B,CAAE9D,QAAS,kBAKzEoB,EAAKjD,MAAM2F,gBAAgB,kKAAiC,CAAE9D,QAAS,YACvC,KAA5BoB,EAAKN,MAAM6f,cAAqBtgB,EAAK2B,SAAS,CAAE4e,cAAc,IACnC,KAA3Bxf,EAAKN,MAAMigB,aAAoB1gB,EAAK2B,SAAS,CAAE8e,aAAa,KA9IjDzgB,EAkJnBqI,iBAAmB,kBAAMrI,EAAK2B,SAAS,CAAEkf,mBAAoB7gB,EAAKS,MAAMogB,qBAlJrD7gB,EAoJnB0hB,WAAa,WACX1hB,EAAK2B,SAAS,CAAEugB,SAAS,IACzB,IAAInhB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACFa,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAMjB,EAAKS,MAAM0hB,gBAEjCjhB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,wBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,WACPV,EAAKqH,kBACLrH,EAAKY,SAAS,CAAEugB,QAAS,GAAIC,eAAgB,GAAIC,eAAe,IAChErhB,EAAKjD,MAAM2F,gBAAgB,iHAAwB,CAAE9D,QAAS,UAEhEiC,MAAO,SAASC,GACdC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,gJAA8B,CAAE9D,QAAS,cAvKvDK,EA4KnBqiB,YAAc,SAAAhlB,GACZ,IAAIwH,EAAQ7E,EAAKlC,MAAMkL,MAAMP,KAAK0T,KAAK,SAAA1T,GAAI,OAAIA,EAAKpL,KAAOA,IAAIwH,MAC3DU,EAAOvF,EAAKlC,MAAMkL,MAAMP,KAAK0T,KAAK,SAAA1T,GAAI,OAAIA,EAAKpL,KAAOA,IAAIkI,KAC9DvF,EAAK2B,SAAS,CAAEugB,QAAS7kB,EAAIijB,aAAczb,EAAO6b,YAAanb,KA/K9CvF,EAkLnBsiB,SAAW,SAACrgB,EAAG5E,GACb4E,EAAES,iBACF,IAAI3B,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IAER,GAAgC,KAA5BA,EAAKS,MAAM6f,cAAkD,KAA3BtgB,EAAKS,MAAMigB,YAAoB,CACnE,IAAM7f,EAAW,IAAIC,SACrBD,EAASI,OAAO,KAAM5D,GACtBwD,EAASI,OAAO,QAASjB,EAAKS,MAAM6f,cACpCzf,EAASI,OAAO,OAAQjB,EAAKS,MAAMigB,aAEnCxf,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,sBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,WACPV,EAAKqH,kBACLpF,WAAW,kBAAMjC,EAAKY,SAAS,CAAEugB,QAAS,MAAO,KACjDnhB,EAAKjD,MAAM2F,gBAAgB,uHAAyB,CAAE9D,QAAS,UAEjEiC,MAAO,SAAUC,GACfC,QAAQC,IAAIF,GACZd,EAAKjD,MAAM2F,gBAAgB,sJAA+B,CAAE9D,QAAS,kBAIzEoB,EAAKjD,MAAM2F,gBAAgB,oIAA4B,CAAE9D,QAAS,YAClC,KAA5BoB,EAAKN,MAAM6f,cAAqBtgB,EAAK2B,SAAS,CAAE4e,cAAc,IACnC,KAA3Bxf,EAAKN,MAAMigB,aAAoB1gB,EAAK2B,SAAS,CAAE8e,aAAa,KA/MjDzgB,EAmNnBuiB,QAAU,kBAAMviB,EAAK2B,SAAS,CAAEugB,QAAS,GAAID,SAAUjiB,EAAKS,MAAMwhB,QAASvB,YAAa,GAAIJ,aAAc,MAnNvFtgB,EA4NnBqE,UAAY,WACVrE,EAAK2B,SAAS,CACZwG,YAAY,EACZvF,aAAc,GACdqf,SAAS,EACTzhB,QAAS,GACT2hB,eAAgB,GAChBC,eAAe,IAEjBpiB,EAAKoI,gBAAgB,UArOJpI,EA6OpB0F,QAAU,SAAA4C,GAGP,OAFAA,EAASC,KAAKC,IAAIF,IAClBA,GAAU,MACI,GAAKA,GAAU,GAAW,6CAEzB,KADfA,GAAU,IACe,6CACrBA,GAAU,GAAKA,GAAU,EAAU,6CAChC,8CApPUtI,EA4PnB+F,gBAAkB,SAAAuC,GAGhB,OAFAA,EAASC,KAAKC,IAAIF,IAClBA,GAAU,MACI,GAAKA,GAAU,GAAW,2EAEzB,KADfA,GAAU,IACe,qEACrBA,GAAU,GAAKA,GAAU,EAAU,qEAChC,4EAnQUtI,EA2QnBqF,mBAAqB,SAACsH,GACpB,IAAM6V,EAAY9kB,IAAOC,IAAV8kB,KAIC9V,GAMhB,OACE7P,EAAAC,EAAAC,cAACwlB,EAAD,KACE1lB,EAAAC,EAAAC,cAACsM,GAAAvM,EAAD,MACAD,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAApB,gHAzRaK,EAmSnB0iB,cAAgB,SAACrlB,GACf2C,EAAK2B,SAAS,CAAEygB,eAAe,EAAMD,eAAgB9kB,KApSpC2C,EAuSnB2iB,kBAAoB,SAAA1jB,GAClB,OAAOJ,OAAOC,SAASC,KAAKC,SAAS,aAAeC,EAAOC,MAAM,IAAMD,GAtSvEe,EAAKS,MAAQ,CACXgI,KAAM,GACNwZ,SAAS,EACT3B,aAAc,GACdI,YAAa,GACbG,mBAAmB,EACnBqB,QAAS,GACT/Z,YAAY,EACZO,eAAgB,GAChB9F,aAAc,GACd6d,aAAa,EACbF,cAAc,EACdphB,SAAS,EACTijB,eAAe,EACfD,eAAgB,IAGlBniB,EAAKqC,QAAUrC,EAAKqC,QAAQuG,KAAb3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACfA,EAAKoI,gBAAkBpI,EAAKoI,gBAAgBQ,KAArB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACvBA,EAAKiD,WAAajD,EAAKiD,WAAW2F,KAAhB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAClBA,EAAKuiB,QAAUviB,EAAKuiB,QAAQ3Z,KAAb3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACfA,EAAKgC,aAAehC,EAAKgC,aAAa4G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAKogB,WAAapgB,EAAKogB,WAAWxX,KAAhB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAClBA,EAAK0hB,WAAa1hB,EAAK0hB,WAAW9Y,KAAhB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAClBA,EAAKsiB,SAAWtiB,EAAKsiB,SAAS1Z,KAAd3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAChBA,EAAKqiB,YAAcriB,EAAKqiB,YAAYzZ,KAAjB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACnBA,EAAK4iB,SAAW5iB,EAAK4iB,SAASha,KAAd3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAChBA,EAAKqI,iBAAmBrI,EAAKqI,iBAAiBO,KAAtB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KA7BPA,mFAiCjBG,KAAKiI,kGAGe2H,iFACfA,kCAAc5P,KAAKwB,SAAS,CAAExC,SAAS,2BACtCwD,MAAK,GAAAjE,OAAImB,EAAJ,uBACRgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA4F,GAAI,OAAI1E,EAAKjG,MAAM+kB,UAAUpa,EAAKK,SAAW,6BAC/C3I,KAAKwB,SAAS,CAAExC,SAAS,wIA4KxB9B,GAAI,IAAA4G,EAAA9D,KACX6C,WAAW,WACkB,KAAvBiB,EAAKxD,MAAMyhB,SAAgBje,EAAKtC,SAAS,CAAEwG,YAAY,EAAMvF,aAAcvF,KAC9E,sCAmFI,IAAA6G,EAAA/D,KAAAmE,EACwInE,KAAKM,MAA5IgI,EADDnE,EACCmE,KAAMgY,EADPnc,EACOmc,YAAaF,EADpBjc,EACoBic,aAAc0B,EADlC3d,EACkC2d,QAAS9iB,EAD3CmF,EAC2CnF,QAASuhB,EADpDpc,EACoDoc,YAAaJ,EADjEhc,EACiEgc,aAAc4B,EAD/E5d,EAC+E4d,QAAS/Z,EADxF7D,EACwF6D,WAAYvF,EADpG0B,EACoG1B,aAAcie,EADlHvc,EACkHuc,kBACjHtiB,EAAS4B,KAAKrC,MAAdS,KASR,OAPAM,OAAOC,SAASC,KAAKC,SAAS,cAAgBT,EAAKU,OAAkBV,EAAKU,OAAOC,MAAM,IAAeX,EAAKU,OAG5E,IAA3BkB,KAAKM,MAAMgI,KAAKjE,QAClBxB,WAAW,kBAAMkB,EAAKvC,SAAS,CAAE8G,KAAMvE,EAAKpG,MAAMkL,MAAMP,QAAS,GAIjE3L,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACGxF,EAAUrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YACvCiC,KAAKrC,MAAMkL,MAAMP,KAAKjE,OAAS,GAAKrE,KAAKrC,MAAMkL,MAAMP,KAAOtI,KAAKrC,MAAMkL,MAAMP,KAAK9C,IAAI,SAACyD,EAAMxD,GAC3F,OACE9I,EAAAC,EAAAC,cAAC8lB,GAAD,CAAejd,IAAKD,GAClB9I,EAAAC,EAAAC,cAAC+lB,GAAD,CAAYhlB,MAAO,CAAEqB,WAAU,OAAAV,OAAiD,KAAxCwF,EAAKye,kBAAkBvZ,EAAKnK,QAAiBT,IAAgB0F,EAAKye,kBAAkBvZ,EAAKnK,QAAlG,+BAC/BnC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgmB,GAAD,KACGzkB,EAAKlB,KAAO+L,EAAK3E,UAEhB3H,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAClB7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAApB,gBACCyJ,EAAKxM,MAERE,EAAAC,EAAAC,cAACimB,GAAD,KACEnmB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASC,UAAU,OAAOC,MAAM,8CAC9B/H,EAAAC,EAAAC,cAACkK,EAAAnK,EAAD,CAAYiI,QAAS,kBAAMd,EAAKwe,cAActZ,EAAK/L,UAKzDP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAClB7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAayJ,EAAKC,QACrCD,EAAKxM,OAIS,MAApBwM,EAAKhE,WAAqBlB,EAAKmB,mBAAmB,GAAK,KAEvD6c,IAAY9Y,EAAK/L,GAChBP,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,UAAUyJ,EAAKvE,MAAMvB,QAAQ,UAAnB,MAC9BxG,EAAAC,EAAAC,cAACkmB,GAAD,KAAMpmB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAASyJ,EAAK7D,KAAKjC,QAAQ,UAAlB,QAGrCxG,EAAAC,EAAAC,cAAA,QAAMK,GAAG,YAAY0S,OAAM,GAAArR,OAAKmB,EAAL,sBAA8BmR,OAAO,OAAOC,SAAU,SAAChP,GAAD,OAAOiC,EAAKoe,SAASrgB,EAAGmH,EAAK/L,MAC5GP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,yDACNpE,MAAOke,EACP5Z,SAAUxC,EAAKlC,aACfrC,QAAQ,WACRJ,KAAK,eACLiC,KAAK,OACLI,MAAOsC,EAAKzD,MAAM8f,eAEpBzjB,EAAAC,EAAAC,cAACmmB,GAAD,KACErmB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,4EACNC,WAAS,EACT9G,QAAQ,WACRJ,KAAK,cACLmH,SAAUxC,EAAKlC,aACfI,MAAOse,EACP9e,MAAOsC,EAAKzD,MAAMggB,eAGtB3jB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQK,QAAS,SAAC/C,GAAD,OAAOiC,EAAKoe,SAASrgB,EAAGmH,EAAK/L,KAAKsC,QAAQ,YAAYzB,MAAM,WAA7E,sDAINpB,EAAAC,EAAAC,cAAComB,GAAD,CAAS/lB,GAAG,WACVP,EAAAC,EAAAC,cAAA,SAAIoM,EAAKT,UACT7L,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAK,GAAAnG,OAAK0K,EAAKT,SAAV,KAAAjK,OAAsBwF,EAAK6B,gBAAgBqD,EAAKT,WAAa/D,UAAU,OACnF9H,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBhB,QAAqB,KAAZkd,EAAiB,kBAAMhe,EAAK0e,SAASxZ,EAAK/L,KAAM,KAAM4I,KAAK,cAGrFnJ,EAAAC,EAAAC,cAAA,SAAIoM,EAAK3D,OAET2D,EAAKzI,SAAS3B,SAAd,IAAAN,OAA2BH,EAAKlB,KAMhCP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAK,GAAAnG,OAAK0K,EAAK3D,MAAV,KAAA/G,OAAmBwF,EAAKwB,QAAQ0D,EAAK3D,OAArC,uDAA0Db,UAAU,OAChF9H,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBhB,QAAS,SAAA/C,GAAC,OAAIiC,EAAKjB,WAAWmG,EAAK/L,GAAI4E,IAAIgE,KAAK,QAAQlI,MAAO,CAAEG,MAAO,cAL3FpB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAK,GAAAnG,OAAK0K,EAAK3D,MAAV,KAAA/G,OAAmBwF,EAAKwB,QAAQ0D,EAAK3D,OAArC,uDAA0Db,UAAU,OAChF9H,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBhB,QAAS,SAAA/C,GAAC,OAAIiC,EAAK7B,QAAQ+G,EAAK/L,GAAI4E,IAAIgE,KAAK,WAWjE1H,EAAKlB,KAAO+L,EAAK3E,UAEhB3H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,iFAAgBD,UAAU,OACzC9H,EAAAC,EAAAC,cAACgJ,EAAA,EAAD,CAAiBhB,QAAS,kBAAMd,EAAKme,YAAYjZ,EAAK/L,KAAK4I,KAAK,OAAOlI,MAAO,CAAEmI,WAAY,WAG5F,KAEFpJ,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQK,QAAS,kBAAMd,EAAK0e,SAASxZ,EAAK/L,KAAKsC,QAAQ,YAAYzB,MAAM,UAAUH,MAAO,CAAE0B,SAAU,WAAY+T,MAAO,KAAzH,4CAMJ1W,EAAAC,EAAAC,cAACqmB,GAAD,KAAQvmB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,MAApB,wEAEd7C,EAAAC,EAAAC,cAAA,OAAKgI,QAAS7E,KAAKoiB,SAASzlB,EAAAC,EAAAC,cAAC2iB,GAAD,CAAK9a,MAAM,iGAEtCod,EACCnlB,EAAAC,EAAAC,cAAC+iB,GAAD,CACExhB,KAAMA,EACN+hB,aAAcA,EACdI,YAAaA,EACbD,YAAaA,EACbF,aAAcA,EACdH,WAAYjgB,KAAKigB,WACjBpe,aAAc7B,KAAK6B,aACnBqG,iBAAkBlI,KAAKkI,iBACvBwY,kBAAmBA,EACnBxc,UAAWlE,KAAKkE,UAAUuE,KAAKzI,QAC5B,KAENgI,EAECrL,EAAAC,EAAAC,cAAC0M,GAAD,CACEkZ,SAAUziB,KAAKyiB,SACfve,UAAWlE,KAAKkE,UAAUuE,KAAKzI,MAC/ByC,aAAcA,EACd6F,KAAMA,EACNlK,KAAMA,EACNmH,QAASvF,KAAKuF,QACdK,gBAAiB5F,KAAK4F,gBACtBqC,gBAAiBjI,KAAKiI,gBACtB/C,mBAAoBlF,KAAKkF,qBAE3B,KAGDlF,KAAKM,MAAM2hB,cACZtlB,EAAAC,EAAAC,cAACsmB,GAAD,CACEjf,UAAWlE,KAAKkE,UAAUuE,KAAKzI,MAC/BuhB,WAAYvhB,KAAKuhB,WAAW9Y,KAAKzI,QAC9B,aA/bM3C,aAscbslB,GAAgBplB,IAAOC,IAAV4lB,MAYbpD,GAAOziB,IAAOC,IAAV6lB,MAKJR,GAAWtlB,IAAOC,IAAV8lB,MAmBRV,GAAarlB,IAAOC,IAAV+lB,MASVN,GAAU1lB,IAAOC,IAAVgmB,MAUPpd,GAAW7I,IAAOC,IAAVimB,MAgCRra,GAAS7L,IAAOC,IAAVkmB,MAQN/e,GAAOpH,IAAOC,IAAVmmB,MAOK9Z,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACX4Y,UAAW,SAACpa,GACVwB,EAAS,CAAEzI,KAAM,WAAY0I,QAASzB,OAN7BuB,CASbhC,uBAAa6B,gMC/gBAka,GAhDE,CACf,CACE3hB,MAAO,EACPyf,QAAS,KACTrb,MAAO,sEACPwd,IAAKlnB,EAAAC,EAAAC,cAACinB,GAAAlnB,EAAD,OAEP,CACEqF,MAAO,EACPyf,QAAS,WACTrb,MAAO,yDACPwd,IAAKlnB,EAAAC,EAAAC,cAACknB,GAAAnnB,EAAD,OAEP,CACEqF,MAAO,EACPyf,QAAS,OACTrb,MAAO,8FACPwd,IAAKlnB,EAAAC,EAAAC,cAACmnB,GAAApnB,EAAD,OAEP,CACEqF,MAAO,EACPyf,QAAS,QACTrb,MAAO,wFACPwd,IAAKlnB,EAAAC,EAAAC,cAAConB,GAAArnB,EAAD,OAEP,CACEqF,MAAO,EACPyf,QAAS,aACTrb,MAAO,6CACPwd,IAAKlnB,EAAAC,EAAAC,cAACqnB,GAAAtnB,EAAD,+WCvBT,IAAMunB,GAAOzlB,OAAOC,SAASylB,SACzBC,GAAWre,IAAEgW,KAAK4H,GAAU,CAAC,UAAWO,GAAKtlB,SAAS,MAAQ,KAAOslB,GAAKplB,MAAM,KAChFslB,KAAUA,GAAWA,GAASpiB,WAE5BqiB,8MACJhkB,MAAQ,CACN2B,MAAOoiB,MAGTzJ,kBAAoB,WAClBpY,MAAK,GAAAjE,OAAImB,EAAJ,2BAAAnB,OAAiCsB,EAAKlC,MAAM+Q,iBAC9ChM,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA2Y,GAAK,OAAIxb,EAAKlC,MAAMihB,SAASvD,EAAMna,QACxC4O,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,QAG9BG,aAAe,SAACkO,EAAO9N,GAAR,OAAkBpC,EAAK2B,SAAS,CAAES,aAEjDsiB,UAAY,WACV,IAAIC,EAAU,EACRrI,EAAMC,KAAO,IAAI1f,MAOvB,OANiBmD,EAAKlC,MAAMkL,MAAMwS,MAAM9N,OAAO,SAAAqO,GAAI,OAAIf,OAAOe,EAAKM,QAAUrc,EAAKlC,MAAM+Q,iBAC/EqM,QAAQ,SAAAa,GACf,IAAMS,EAAMD,KAAOR,EAAKU,YAClBC,EAAaH,KAAOI,SAASH,EAAII,KAAKN,IAAMO,cAC9B,MAAhBd,EAAKtK,QAAkBiL,EAAa,GAAGiI,MAEtCA,2EAEA,IAAA5gB,EAAA5D,KACCiC,EAAUjC,KAAKM,MAAf2B,MACF7D,EAAO4B,KAAKrC,MAElB,OACEhB,EAAAC,EAAAC,cAAC4nB,GAAD,KACE9nB,EAAAC,EAAAC,cAAC6nB,GAAA9nB,EAAD,CAAQ0C,SAAS,SAASvB,MAAM,WAC9BpB,EAAAC,EAAAC,cAAC8nB,GAAA/nB,EAAD,CACEqF,MAAOA,EACPsE,SAAUvG,KAAK6B,aACf+iB,eAAe,UACfC,UAAQ,GAEPjB,GAASpe,IAAI,SAACkc,EAASjc,GAAV,OACZ9I,EAAAC,EAAAC,cAACioB,GAAAloB,EAAD,CACE8I,IAAKD,EACLY,MAA2B,UAApBqb,EAAQA,SAAuB9d,EAAK2gB,YAAc,EACvD5nB,EAAAC,EAAAC,cAACkoB,GAAD,KAAcpoB,EAAAC,EAAAC,cAACmoB,GAAApoB,EAAD,CAAOmB,MAAM,YAAYknB,aAAcrhB,EAAK2gB,aACvD7C,EAAQrb,QAETqb,EAAQrb,MAEZxB,QAAS,kBAAMzG,EAAKiL,oBAAwC,OAApBqY,EAAQA,QAAmBA,EAAQA,QAAnC,KAAAnjB,OAAkDH,EAAKsQ,kBAC/FmF,UAAW9F,KACXC,GAAwB,OAApB0T,EAAQA,QAAmBA,EAAQA,QAAnC,KAAAnjB,OAAkDH,EAAKsQ,gBAC3D5I,KAAM4b,EAAQmC,kBAlDLxM,IAAMha,WA2DzBW,GAAUT,IAAOC,IAAV0nB,KAOA,IAAMtB,GAASvf,QAMtB0gB,GAAexnB,IAAOC,IAAV2nB,MAMHtb,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACX8U,SAAU,SAACvD,GACTvR,EAAS,CAAEzI,KAAM,cAAe0I,QAASsR,OANhCxR,CASbya,oYCtBF,IAAMc,GAAO7nB,IAAOC,IAAV6nB,MAUJC,GAAgB/nB,IAAOC,IAAV+nB,MAKJpa,GArFf,SAAgBxN,GACd,IAQmB6nB,EARf1mB,EAAS,GAoCb,OAjCEA,EADEJ,OAAOC,SAASC,KAAKC,SAAS,cAAgBlB,EAAMyN,OAAOtM,OACpDnB,EAAMyN,OAAOtM,OAAOC,MAAM,IAE1BpB,EAAMyN,OAAOtM,OAgCtBnC,EAAAC,EAAAC,cAACwO,GAAAzO,EAAD,CACEiI,QAAS,kBAAMlH,EAAM8nB,SAAS9nB,EAAMyN,OAAOsa,eAAe,YAAc/nB,EAAMyN,OAAOua,QAAUhoB,EAAMyN,OAAOua,QAAQC,KAAO,EAAGjoB,EAAMyN,SACpIE,QAAM,EACNC,iBAAkB,CAAEC,QAAS,CAAEC,MAAO,kBAEtC9O,EAAAC,EAAAC,cAAC6O,GAAA9O,EAAD,KACED,EAAAC,EAAAC,cAAC8O,GAAA/O,EAAD,CACEgB,MAAO,CAAEgO,OAAQ,GAAIC,MAAO,IAC5BC,IAAG,GAAAvN,OAAKZ,EAAMyN,OAAOhM,KAAlB,KAAAb,OAA0BZ,EAAMyN,OAAO/L,SAC1C0M,IAA6B,KAAxBpO,EAAMyN,OAAOtM,OAAgBA,EAAST,OAG/C1B,EAAAC,EAAAC,cAACmP,GAAApP,EAAD,CACEqP,OAAK,EACLC,QAASvP,EAAAC,EAAAC,cAACyoB,GAAD,KACP3oB,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,aAApB,GAAAjB,OAAoCZ,EAAMyN,OAAOhM,KAAjD,KAAAb,OAAyDZ,EAAMyN,OAAO/L,UACrE1B,EAAMyN,OAAOua,QAxCN,SAAClM,EAAMhd,EAAMopB,GAC3B,IAAMC,EAAe1J,OAAS2J,QAAQ,OAAO9oB,SACvC+oB,EAAc5J,KAAO3f,EAAM,cAAcQ,SAW/C,MARW,MAAX4oB,EAAwBlpB,EAAAC,EAAAC,cAACopB,GAAArpB,EAAD,MAAoBD,EAAAC,EAAAC,cAACgV,GAAAjV,EAAD,MAQvCwf,KAAO0J,GAAcI,OAAOF,EAAa,OAM5CrpB,EAAAC,EAAAC,cAACuoB,GAAD,KAAyEzoB,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,YAAYzB,MAAM,WAAWJ,EAAMyN,OAAOua,QAAQlM,OALxI9c,EAAAC,EAAAC,cAACuoB,GAAD,KAAyEzoB,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,YAAYzB,MAAM,WAAWqe,KAAO3f,EAAM,cAAc0pB,WAAWpnB,MAAM,GAAG,GAAhG,IAAqG0a,IA2B/KnP,CAAQ3M,EAAMyN,OAAOua,QAAQlM,KAAM9b,EAAMyN,OAAOua,QAAQlpB,KAAMkB,EAAMyN,OAAOua,QAAQE,QACnF,MAEJ1Z,UAAWxO,EAAMyN,OAAOua,QACtBhpB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAYiX,UAAU,OAAOjW,MAAO,CAAE2Z,QAAS,UAAYxZ,MAAM,WAC9DJ,EAAMyN,OAAOlO,KAAOS,EAAMyN,OAAOua,QAAQvnB,KAAzC,GAAAG,OAAmDZ,EAAMyN,OAAOhM,KAAhE,KAAAb,OAAwEZ,EAAMyN,OAAO/L,QAArF,KAAkG,iBAFvG,WAAAd,QAlDWinB,EAsDS7nB,EAAMyN,OAAOua,QAAQS,KArD3CZ,EAAOnhB,OAAS,IAAYmhB,EAChC,GAAAjnB,OAAUinB,EAAO3a,UAAU,EAAE,KAA7B,QAgDM,MAMA,2QCzEK,SAASwb,KACtB,OACE1pB,EAAAC,EAAAC,cAACypB,GAAD,KACE3pB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,QAAQ5B,MAAO,CAAE8c,aAAc,KAAnD,qRAGA/d,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,udAON,IAAMqgB,GAAYtiB,IAAOC,IAAV+oB,i4BC4Cf,IAAM1G,GAAYtiB,IAAOC,IAAVgpB,MAITzhB,GAASxH,IAAOC,IAAVipB,MAMNzG,GAAOziB,IAAOC,IAAVkpB,MA6BK7c,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAFIuJ,CAzFf,SAAiBlM,GAAO,IAAAgpB,EAiBChpB,EAAMkL,MAArB+d,EAjBcD,EAiBdC,KAAMxoB,EAjBQuoB,EAiBRvoB,KAEd,OACEzB,EAAAC,EAAAC,cAACgqB,GAAD,CAAWjpB,MAAQgpB,EAAKxoB,KAAKlB,KAAOS,EAAMgoB,QAAQvnB,KAAO,CAAEoZ,cAAe,eAAiB,IACzF7a,EAAAC,EAAAC,cAACiqB,GAAD,CACElpB,MAAQgpB,EAAKxoB,KAAKlB,KAAOS,EAAMgoB,QAAQvnB,KACnC,CAAEa,WAAU,OAAAV,OAtBR,IAsBQA,OAAmBH,EAAK,GAAGU,OAASV,EAAK,GAAGU,OAAST,IAArD,6BACZ,CAAEY,WAAU,OAAAV,OAvBR,IAuBQA,OAAmBqoB,EAAKxoB,KAAKU,OAAQ8nB,EAAKxoB,KAAKU,OAAST,IAAxD,+BAGlB1B,EAAAC,EAAAC,cAACkqB,GAAD,KACEpqB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAY1H,UAAU,eAAe0C,QAAQ,YAAYzB,MAAM,aAC5D6oB,EAAKxoB,KAAKlB,KAAOS,EAAMgoB,QAAQvnB,KAA/B,kBAAAG,OAEMqoB,EAAKxoB,KAAKgB,KAFhB,KAAAb,OAEwBqoB,EAAKxoB,KAAKiB,SAElCunB,EAAKxoB,KAAKlB,KAAOS,EAAMgoB,QAAQvnB,KAC5BzB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,iFAAgBD,UAAU,OAAM9H,EAAAC,EAAAC,cAACmqB,GAAApqB,EAAD,CAAMiI,QAAS,kBAAMlH,EAAMspB,YAAYtpB,EAAMgoB,QAAQS,KAAMzoB,EAAMgoB,QAAQzoB,QACxHP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAASE,MAAM,6CAAUD,UAAU,OAAM9H,EAAAC,EAAAC,cAACkK,EAAAnK,EAAD,CAAQiI,QAASlH,EAAMygB,iBAElE,MAENzhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAAS7B,EAAMgoB,QAAQS,MAC3CzpB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAY1H,UAAU,eAAe0C,QAAQ,YAAYzB,MAAM,WAnCrE,SAAiBtB,GACf,IAAMqpB,EAAe1J,OAAS2J,QAAQ,OAAO9oB,SACvC+oB,EAAc5J,KAAO3f,EAAM,cAAcQ,SAE/C,OAAKmf,KAAO0J,GAAcI,OAAOF,EAAa,OAGrC,KAFA5J,KAAO3f,EAAM,cAAc0pB,WAAWpnB,MAAM,GAAG,GA+BjDmoB,CAAQvpB,EAAMgoB,QAAQlpB,MADzB,IACiCkB,EAAMgoB,QAAQlM,KACnB,MAAzB9b,EAAMgoB,QAAQwB,OAAiB,8FAAqB,sUCtB/D,IAAMtH,GAAYtiB,IAAOC,IAAV4pB,MAeAvd,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAFIuJ,CAzCf,SAAkBlM,GAAO,IACf0pB,EAAa1pB,EAAMkL,MAAnBwe,SAOR,OALAxkB,WAAW,WACT,IAAMykB,EAAmBllB,SAASC,eAAe,YACzB,IAApBglB,EAAShjB,QAAgBijB,IAAkBA,EAAiBC,UAAYD,EAAiBE,eAC5F,GAGD7qB,EAAAC,EAAAC,cAAC4qB,GAAD,CAAWvqB,GAAG,YACS,IAApBmqB,EAAShjB,OACRgjB,EAAS7hB,IAAI,SAAAmgB,GAAO,OAClBhpB,EAAAC,EAAAC,cAAC6qB,GAAD,CACEhiB,IAAKigB,EAAQzoB,GACbyoB,QAASA,EACTsB,YAAatpB,EAAMspB,YACnB7I,aAAc,kBAAMzgB,EAAMygB,aAAauH,EAAQzoB,SAGnDP,EAAAC,EAAAC,cAACwpB,GAAD,2bCjBO,SAASsB,GAAiBhqB,GACvC,OACEhB,EAAAC,EAAAC,cAAC+qB,GAAD,CAAW9W,SAAUnT,EAAMkqB,aACzBlrB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEsZ,YAAY,6GACZvH,WAAS,EACTmZ,WAAS,EACTtb,OAAO,QACPhN,QAAQ,SACR+G,SAAU5I,EAAMoqB,iBAChB9lB,MAAOtE,EAAMgoB,QACbhZ,WAAY,CACVC,aACEjQ,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACyW,GAAA1W,EAAD,CAAS8H,MAAM,gHAAsBpF,SAAS,OAC5C3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,gHACXlI,QAASlH,EAAMkqB,aAEflrB,EAAAC,EAAAC,cAACmrB,GAAAprB,EAAD,aAWlB,IAAMijB,GAAYtiB,IAAOgV,KAAV0V,mbC7BA,SAASC,GAAiBvqB,GACvC,OACEhB,EAAAC,EAAAC,cAACsrB,GAAD,CAAWrX,SAAUnT,EAAMyqB,YACzBzrB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEsZ,YAAY,iJACZvH,WAAS,EACTmZ,WAAS,EACTtb,OAAO,QACPhN,QAAQ,SACR+G,SAAU5I,EAAM0qB,WAChBpmB,MAAOtE,EAAMgoB,QACbhZ,WAAY,CACV2b,eACE3rB,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACyW,GAAA1W,EAAD,CAAS8H,MAAM,iFAAgBpF,SAAS,OACtC3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,iFACXlI,QAASlH,EAAMyqB,YAEfzrB,EAAAC,EAAAC,cAACmqB,GAAApqB,EAAD,SAKRgQ,aACEjQ,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACyW,GAAA1W,EAAD,CAAS8H,MAAM,6CAAUpF,SAAS,OAChC3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,6CACXlI,QAASlH,EAAM4qB,cAEf5rB,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,aAWlB,IAAMijB,GAAYtiB,IAAOgV,KAAViW,uvBC/CA,SAASC,GAAY9qB,GAClC,OACEhB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAC6rB,GAAD,KACE/rB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,uNACA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,kQACA7C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,OAAOzB,MAAM,UAAU8G,QAASlH,EAAMgrB,aAAtD,wCACAhsB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,OAAOzB,MAAM,UAAU8G,QAASlH,EAAMirB,cAAtD,gDAGJjsB,EAAAC,EAAAC,cAACgsB,GAAD,CAAShkB,QAASlH,EAAMgrB,eAK9B,IAAM9I,GAAYtiB,IAAOC,IAAVsrB,MAsBTD,GAAUtrB,IAAOC,IAAVurB,g/BC3BPC,8MACJ1oB,MAAQ,CACNtB,SAAS,EACT+iB,SAAS,EACTkH,SAAU,GACVC,UAAU,EACVC,WAAY,GACZC,SAAU,KACVC,OAAQ,QAEVC,SAAW,OAEX1O,kBAAoB,WAClB/a,EAAK0pB,cACL1pB,EAAKypB,SAAWE,YAAY,kBAAM3pB,EAAK0pB,eAAe,QAGxD/b,qBAAuB,WACrBic,cAAc5pB,EAAKypB,aAGrBC,YAAc,WACZ,IAAM7oB,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACVa,EAASI,OAAO,OAAQjB,EAAKlC,MAAMkL,MAAM+d,KAAK8C,SAE9C3oB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBX,EAAKY,SAAS,CAAExC,SAAS,IACrBuC,EAAI8lB,UAAUzmB,EAAKjD,MAAM4rB,YAAYhoB,EAAI8lB,WAE/C5lB,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAK9B2mB,WAAa,SAACvmB,GAAD,OAAOjC,EAAK2B,SAAS,CAAEynB,SAAUnnB,EAAEE,OAAOC,WACvDglB,YAAc,SAACtB,EAASzoB,GAAa2C,EAAKS,MAAMyhB,SAASliB,EAAK2B,SAAS,CAAEugB,SAAUliB,EAAKS,MAAMyhB,QAASkH,SAAUtD,EAAS0D,OAAQnsB,OAClIqrB,aAAe,kBAAO1oB,EAAK2B,SAAS,CAAEugB,SAAS,EAAOkH,SAAU,GAAII,OAAQ,UAE5EjL,aAAe,SAAAlhB,GAAE,OAAI2C,EAAK2B,SAAS,CAAE0nB,UAAU,EAAME,SAAUlsB,OAC/DyrB,YAAc,kBAAO9oB,EAAK2B,SAAS,CAAE0nB,UAAU,EAAOE,SAAU,UAEhErB,iBAAmB,SAACjmB,GAAD,OAAOjC,EAAK2B,SAAS,CAAE2nB,WAAYrnB,EAAEE,OAAOC,WAO/D4lB,YAAc,SAAC/lB,GACTA,GAAGA,EAAES,iBADU,IAAAonB,EAGI9pB,EAAKlC,MAAMkL,MAA1B+d,EAHW+C,EAGX/C,KAAMxoB,EAHKurB,EAGLvrB,KAGd,GAAKwoB,EAAKlB,eAAe,WAAzB,CAIEljB,MAAK,GAAAjE,OAAImB,EAAJ,4BACFgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAijB,GAAO,OAAIiE,aAAaC,QAAQ,aAAclE,EAAQmE,cAC3Dha,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,KAG9B,IAAMhB,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACJ8lB,EAAU,CACdvnB,KAAMA,EAAK,GAAGlB,GACd0oB,KAAMgB,EAAKlB,eAAe,WAAakB,EAAK8C,QAAUE,aAAaG,QAAQ,WAC3E3D,KAAMvmB,EAAKS,MAAM6oB,WACjB1sB,KAAM2f,OAASnf,OAAO,KACtBwc,KAAM2C,OAASnf,OAAO,OAGxByD,EAASI,OAAO,OAAQ6kB,EAAQC,MAChCllB,EAASI,OAAO,OAAQ6kB,EAAQvnB,MAChCsC,EAASI,OAAO,OAAQ6kB,EAAQS,MAChC1lB,EAASI,OAAO,OAAQ6kB,EAAQlpB,MAChCiE,EAASI,OAAO,OAAQ6kB,EAAQlM,MAEhC1Y,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAASC,GACXX,EAAKjD,MAAMkL,MAAMmhB,MAAMhO,KAAK,SAAA4J,GAAI,OAAIA,EAAK1oB,KAAOyoB,EAAQC,QAC3DhlB,EAAKjD,MAAMssB,WAAWL,aAAaG,QAAQ,SAAUpE,EAAQC,KAAMD,GAErE/kB,EAAKjD,MAAMusB,WAAWvE,GACtB/kB,EAAKY,SAAS,CAAE2nB,WAAY,KAC5BvoB,EAAK2oB,eAEP9nB,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,WAvC1B7B,EAAKsqB,aAAa/rB,EAAK,GAAGlB,GAAI0pB,EAAKxoB,KAAKlB,OAgD5CitB,aAAe,SAACC,EAAOC,GACrB7nB,MAAK,GAAAjE,OAAImB,EAAJ,4BACFgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAijB,GAAO,OAAI9lB,EAAKoqB,WAAWG,EAAOC,EAAO1E,EAAQmE,cACtDha,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,QAQ9BuoB,WAAa,SAACG,EAAOC,EAAOP,GAC1B,IAAMppB,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACJ2W,EAAK,KAAAjY,OAAQ6rB,EAAR,QAAA7rB,OAAoB8rB,GACzBC,GAAazP,OAAOiP,GAAc,GAAGpc,WAC3ChN,EAASI,OAAO,QAAS0V,GACzB9V,EAASI,OAAO,WAAYwpB,GAE5BvpB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,wBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBX,EAAKjD,MAAM4sB,WAAWhpB,EAAImoB,SAC1BE,aAAaC,QAAQ,aAAcS,GACnCV,aAAaC,QAAQ,UAAWtoB,EAAImoB,SACpCE,aAAaC,QAAQ,QAArB,KAAAtrB,OAAmC8rB,IACnCzpB,EAAKinB,aAAY,IAEnBpmB,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAS9BknB,aAAe,WACb,IAAMloB,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACVa,EAASI,OAAO,KAAMjB,EAAKS,MAAM8oB,UAEjCroB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,2BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAASC,GAChBX,EAAKjD,MAAM6sB,cAAc5pB,EAAKN,MAAM8oB,UACK,IAArCxoB,EAAKjD,MAAMkL,MAAMwe,SAAShjB,QAAczD,EAAKjD,MAAM8sB,WAAW7pB,EAAKjD,MAAMkL,MAAM+d,KAAK8C,SACxF9oB,EAAK+nB,cACL/nB,EAAK2oB,eAEP9nB,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAS9B0mB,WAAa,SAACtmB,GACZA,EAAES,iBACF,IAAM7B,EAAW,IAAIC,SACfC,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACVa,EAASI,OAAO,KAAMjB,EAAKS,MAAM+oB,QACjC3oB,EAASI,OAAO,OAAQjB,EAAKS,MAAM2oB,UAEnCloB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAO,eAAAopB,EAAA5qB,OAAA6qB,EAAA,EAAA7qB,CAAA8qB,EAAAhuB,EAAAiuB,KAAE,SAAAC,IAAA,OAAAF,EAAAhuB,EAAAmuB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACPtqB,EAAK2nB,eADEyC,EAAAE,KAAA,EAEDtqB,EAAK2oB,cAFJ,cAAAyB,EAAAE,KAAA,EAGDtqB,EAAKjD,MAAMspB,YAAYrmB,EAAKN,MAAM+oB,OAAQzoB,EAAKN,MAAM2oB,UAHpD,wBAAA+B,EAAAG,SAAAL,EAAA9qB,SAAF,yBAAA0qB,EAAAU,MAAAprB,KAAAqrB,YAAA,GAKP5pB,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,+EAIrB,IAAAkC,EAAA5D,KAAAmE,EACgCnE,KAAKM,MAApCtB,EADDmF,EACCnF,QAAS+iB,EADV5d,EACU4d,QAASmH,EADnB/kB,EACmB+kB,SAClBtC,EAAS5mB,KAAKrC,MAAMkL,MAApB+d,KAEJ9nB,EAAS,KAOb,OANI8nB,EAAKlB,eAAe,SAAWhnB,OAAOC,SAASC,KAAKC,SAAS,aAC/DC,EAAS8nB,EAAKxoB,KAAKU,OAAOC,MAAM,IACvB6nB,EAAKlB,eAAe,UAC7B5mB,EAAS8nB,EAAKxoB,KAAKU,QAInBnC,EAAAC,EAAAC,cAACyuB,GAAD,KACE3uB,EAAAC,EAAAC,cAAC0uB,GAAD,KACE5uB,EAAAC,EAAAC,cAAC2uB,GAAD,CAAM3mB,QAAS,kBAAMjB,EAAKjG,MAAM8nB,SAAS,EAAGmB,EAAKxoB,QAC/CzB,EAAAC,EAAAC,cAAC4uB,GAAA7uB,EAAD,OAEDgqB,EAAKlB,eAAe,QACrB/oB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBAAsBc,MAAO,CAAEqB,WAAU,OAAAV,OAA8B,KAArBqoB,EAAKxoB,KAAKU,OAAgBA,EAAST,IAA5C,+BACxD1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAAaonB,EAAKxoB,KAAKgB,KAA3C,IAAkDwnB,EAAKxoB,KAAKiB,SAC5D1C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAAWonB,EAAKxoB,KAAKkB,YAEpC,MAGVN,EAAUrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YAAepB,EAAAC,EAAAC,cAAC6uB,GAAD,CACtDzE,YAAajnB,KAAKinB,YAAYxe,KAAKzI,MACnCoe,aAAcpe,KAAKoe,aAAa3V,KAAKzI,QAGtC+hB,EAAUplB,EAAAC,EAAAC,cAACqrB,GAAD,CACTK,aAAcvoB,KAAKuoB,aAAa9f,KAAKzI,MACrC2lB,QAAS3lB,KAAKM,MAAM2oB,SACpBZ,WAAYroB,KAAKqoB,WAAW5f,KAAKzI,MACjCooB,WAAYpoB,KAAKooB,WAAW3f,KAAKzI,QAC9B,KAELrD,EAAAC,EAAAC,cAAC8qB,GAAD,CACEhC,QAAS3lB,KAAKM,MAAM6oB,WACpBtB,YAAa7nB,KAAK6nB,YAClBE,iBAAkB/nB,KAAK+nB,mBAGxBmB,EAAWvsB,EAAAC,EAAAC,cAAC4rB,GAAD,CACVE,YAAa3oB,KAAK2oB,YAAYlgB,KAAKzI,MACnC4oB,aAAc5oB,KAAK4oB,aAAangB,KAAKzI,QAClC,aAxPU3C,aA6PjBiuB,GAAO/tB,IAAOC,IAAVmuB,MAIJJ,GAAahuB,IAAOC,IAAVouB,MA+BVjnB,GAAOpH,IAAOC,IAAVquB,MAQKhiB,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACXyf,YAAa,SAAClC,GACZvd,EAAS,CAAEzI,KAAM,iBAAkB0I,QAASsd,KAE9C4C,WAAY,SAACzT,EAAOkT,EAAS/D,GAC3B7b,EAAS,CAAEzI,KAAM,cAAe0I,QAAS,CAAEyM,MAAOA,EAAOtZ,GAAIwsB,EAAS/D,QAASA,MAEjF4E,WAAY,SAACb,GACX5f,EAAS,CAAEzI,KAAM,cAAe0I,QAAS2f,KAE3CQ,WAAY,SAACvE,GACX7b,EAAS,CAAEzI,KAAM,cAAe0I,QAAS4b,KAE3C6E,cAAe,SAACsB,GACdhiB,EAAS,CAAEzI,KAAM,iBAAkB0I,QAAS+hB,KAE9C7E,YAAa,SAAC6E,EAAWC,GACvBjiB,EAAS,CAAEzI,KAAM,eAAgB0I,QAAS,CAAC+hB,EAAWC,MAExDtB,WAAY,SAACf,GACX5f,EAAS,CAAEzI,KAAM,cAAe0I,QAAS2f,OAxBhC7f,CA2Bbmf,6bCtUI9b,eACJ,SAAAA,EAAYvP,GAAM,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkN,IAChBrN,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoN,GAAA/M,KAAAH,KAAMrC,KA2BR+O,aAAe,SAAC5K,GACdjC,EAAK2B,SAAS,CAAEiL,YAAa3K,EAAEE,OAAOC,QACtC,IAAMwK,EAAc3K,EAAEE,OAAOC,MAAMqL,cAEnClL,SAASsC,MAAQ5C,EAAEE,OAAOC,OAASpC,EAAKS,MAAM+M,cAE9C,IAAIF,EAAUtN,EAAKS,MAAM8M,QACzBD,EAAUA,EAAQI,OAAO,SAAAnC,GAAM,OAC7BA,EAAOhM,KAAKkO,cAAczO,SAAS4N,IACnCrB,EAAO/L,QAAQiO,cAAczO,SAAS4N,IACtCrB,EAAO9L,SAASgO,cAAczO,SAAS4N,KAEzC5M,EAAK2B,SAAS,CAAE2L,aAxCAtN,EA2ClB2N,qBAAuB,WACrBpL,SAASsC,MAAQ7E,EAAKS,MAAM+M,eA5CZxN,EAoDlBmsB,YAAc,SAAChC,GACb,IAAI7c,EAAUtN,EAAKS,MAAM6M,QACzB6c,EAAMjP,QAAQ,SAAA6K,GACZzY,EAAQ6O,KAAK,SAAA5Q,GAAM,MAAI,KAAA7M,OAAK6M,EAAOlO,MAAS0oB,EAAKpP,QAAOmP,QAAUC,EAAKD,UAEzE9lB,EAAK2B,SAAS,CAAEyqB,WAAW,KAzDXpsB,EAiElB4lB,SAAW,SAACG,EAAMxa,GACXvL,EAAKS,MAAM4rB,kBAAkBrsB,EAAK2B,SAAS,CAAE0qB,kBAAkB,IAEhEtG,EACF/lB,EAAKlC,MAAMwuB,SAASvG,EAAMxa,IAE1BvL,EAAKmsB,YAAYnsB,EAAKlC,MAAMkL,MAAMmhB,OAClCnnB,WAAW,kBAAMhD,EAAKlC,MAAMyuB,UAAUhhB,IAAS,MAGjDvL,EAAK2B,SAAS,CAAE6qB,WAAYxsB,EAAKS,MAAM+rB,YAEvCxpB,WAAW,kBAAMhD,EAAK2B,SAAS,SAAAlB,GAAK,MAAK,CACvCuZ,MAAuB,IAAhBvZ,EAAMuZ,MAAc,EAAI,MAC5B,MA/EWha,EAuFlBysB,MAAQ,CACN,SAAA1uB,GAAK,OACHjB,EAAAC,EAAAC,cAAC0vB,GAAA,SAAS/uB,IAAV,CAAcI,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOlC,EAAP,CAAc0B,SAAU,WAAYuM,MAAO,UAC5DlP,EAAAC,EAAAC,cAAC2vB,GAAD,CACE/G,SAAU5lB,EAAK4lB,SAAShd,KAAd3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,SAIhB,SAAAjC,GAAK,OACHjB,EAAAC,EAAAC,cAAC0vB,GAAA,SAAS/uB,IAAV,CAAcI,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOlC,EAAP,CAAc0B,SAAU,WAAYuM,MAAO,UAC5DlP,EAAAC,EAAAC,cAACgR,GAAD,CACEnB,aAAc7M,EAAK6M,aACnBD,YAAa5M,EAAK4M,cAEpB9P,EAAAC,EAAAC,cAACiR,GAAAlR,EAAD,KACGiD,EAAKS,MAAM6M,QAAQ3H,IAAI,SAAA4F,GAAM,OAC5BzO,EAAAC,EAAAC,cAAC4vB,GAAD,CACEhH,SAAU5lB,EAAK4lB,SAAShd,KAAd3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACV6F,IAAK0F,EAAOlO,GACZkO,OAAQA,UA1GFvL,EAkHlB6sB,aAAe,SAAAL,GACb,OAAIA,EACK,mBAEA,qBApHTxsB,EAAKS,MAAQ,CACX6M,QAAS,GACTC,QAAS,GACTX,YAAa,GACbzN,SAAS,EACTqO,cAAejL,SAASsC,MACxBunB,WAAW,EACXxG,UAAU,EACV5L,MAAO,EACPqS,kBAAkB,EAClBG,WAAW,GAGbxsB,EAAKmsB,YAAcnsB,EAAKmsB,YAAYvjB,KAAjB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAfHA,mFAkBE,IAAA+D,EAAA5D,KAClBwC,MAAK,GAAAjE,OAAImB,EAAJ,uBACFgD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAyK,GACJ,IAAMjM,EAAOiM,EAAQjM,KAAKqM,OAAO,SAAAnC,GAAM,OAAIA,EAAOlO,KAAO0G,EAAKjG,MAAM8P,UACpE7J,EAAKpC,SAAS,CAAE2L,QAASjM,EAAMkM,QAASlM,EAAMlC,SAAS,MAExD8Q,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,sCAiGrB,IAAAoC,EAAA9D,KACCgqB,EAAUhqB,KAAKrC,MAAMkL,MAArBmhB,MADD7lB,EAE0CnE,KAAKM,MAA9C2rB,EAFD9nB,EAEC8nB,UAAW9e,EAFZhJ,EAEYgJ,QAAS0M,EAFrB1V,EAEqB0V,MAAOwS,EAF5BloB,EAE4BkoB,UAMnC,OAJIrC,EAAM3lB,OAAS,GAAK8I,EAAQ9I,OAAS,IAAM4nB,GAC7CjsB,KAAKgsB,YAAYhC,GAIjBrtB,EAAAC,EAAAC,cAAC8Q,GAAA/Q,EAAD,KACGoD,KAAKM,MAAMtB,QACVrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YAE9BpB,EAAAC,EAAAC,cAAC8vB,GAAD,KACEhwB,EAAAC,EAAAC,cAAC0vB,GAAA,WAAD,CACEK,OAAK,EACLC,QAAM,EACNC,QAAM,EACNC,MAAOlT,EACPqC,KAAMlc,KAAKM,MAAM4rB,iBAAmB,CAAEc,UAAWhtB,KAAK0sB,aAAaL,IAAe,CAAElU,OAAQ,GAC5F8U,MAAO,CAAED,UAAW,kBACpBE,MAAO,CAAEF,UAAWhtB,KAAK0sB,cAAcL,KAEtC,SAAAxS,GAAK,OAAI/V,EAAKwoB,MAAMzS,cAlJVxc,aA2JnBuQ,GAAgBrQ,IAAOC,IAAV2vB,MAwBJtjB,gBACb,SAAAvJ,GAAK,MAAK,CAAEuI,MAAOvI,IACnB,SAAAwJ,GAAQ,MAAK,CACXqiB,SAAU,SAACvG,EAAMxa,GACftB,EAAS,CAAEzI,KAAM,YAAa0I,QAAS,CAAC6b,EAAMxa,MAEhDghB,UAAW,SAAChhB,GACVtB,EAAS,CAAEzI,KAAM,aAAc0I,QAAS,CAAC,KAAMqB,QAPtCvB,CAUbqD,qMCrMa,SAASkgB,KACtB,OACEzwB,EAAAC,EAAAC,cAACwwB,GAAD,KACE1wB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,uKAGA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,SAApB,ivBAON,IAAMqgB,GAAYtiB,IAAOC,IAAV8vB,MCRTC,8MACJjtB,MAAQ,CACNtB,SAAS,EACTZ,KAAM,8EAGGlB,GACT,IAAMwD,EAAW,IAAIC,SACfC,EAAOZ,KACbU,EAASI,OAAO,KAAM5D,GAEtB6D,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,sBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,IACjBX,EAAKY,SAAS,CAAExC,SAAS,IAErBuC,EAAIyoB,SACOzoB,EAAIyoB,MACVjP,QAAQ,SAAA9R,GACbA,EAAKuN,MAAQvN,EAAKuN,MAAMrT,QAAQjG,EAAI,IAAIiG,QAAQ,IAAK,IAAIqqB,SAE3D5sB,EAAKjD,MAAM8vB,SAASlsB,EAAIyoB,SAG5BvoB,MAAO,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,uCAIrB,IAAAyC,EACmBnE,KAAKM,MAAvBtB,EADDmF,EACCnF,QAASZ,EADV+F,EACU/F,KACX4rB,EAAQhqB,KAAKrC,MAAMkL,MAAMmhB,MACzB0D,EAAY1tB,KAAKrC,MAAMkL,MAAMzK,KAOnC,OALIsvB,EAAUrpB,OAAS,GAAqB,IAAhBjG,EAAKiG,SAC/BrE,KAAKwB,SAAS,CAAEpD,KAAMsvB,IACtB1tB,KAAK2tB,WAAL,KAAApvB,OAAqBmvB,EAAU,GAAGxwB,MAIlCP,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KAEoB,IAAjBwlB,EAAM3lB,OAAe1H,EAAAC,EAAAC,cAACuwB,GAAD,MAAc,KAElCpuB,EAIErC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,IAAKE,MAAM,YAHhCpB,EAAAC,EAAAC,cAAC+wB,GAAD,CACEngB,QAASzN,KAAKrC,MAAMS,KAAKlB,aAjDlBG,aA0DJwM,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACX2jB,SAAU,SAACzD,GACTlgB,EAAS,CAAEzI,KAAM,cAAe0I,QAASigB,OANhCngB,CASb0jB,sIC7DIM,eACJ,SAAAA,EAAYlwB,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6tB,IACjBhuB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+tB,GAAA1tB,KAAAH,KAAMrC,KACD2C,MAAQ,CACXmN,QAAS,EACTiB,eAAgB,EAChBtQ,KAAM,GACN0vB,YAAa,GACbpM,QAAShjB,OAAOC,SAASylB,SAASrlB,MAAM,GACxCC,SAAS,GAEXa,EAAKkuB,gBAAuBluB,EAAKkuB,gBAAgBtlB,KAArB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAC5BA,EAAKwJ,oBAAuBxJ,EAAKwJ,oBAAoBZ,KAAzB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAC5BA,EAAKoO,mBAAuBpO,EAAKoO,mBAAmBxF,KAAxB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAC5BA,EAAKmuB,gBAAuBnuB,EAAKmuB,gBAAgBvlB,KAArB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAbXA,iFAgBD,IAAA+D,EAAA5D,KAChBA,KAAKwB,SAAS,CAAEiM,QAASzN,KAAKM,MAAMoO,iBAEpClM,MAAK,kDAAAjE,OAAmDyB,KAAKM,MAAMoO,iBAChEhM,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAtE,GAAI,OAAIwF,EAAKpC,SAAS,CAAEpD,WAC7B0R,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,iDAGVggB,GAClB1hB,KAAKwB,SAAS,CAAEkgB,YAChB1hB,KAAK+tB,6DAGY7wB,GAAI,IAAA4G,EAAA9D,KACrBA,KAAKwB,SAAS,CAAEiM,QAASvQ,EAAIwkB,QAAO,KAAAnjB,OAAOrB,KAC3CsF,MAAK,kDAAAjE,OAAmDrB,IACrDwF,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAtE,GAAI,OAAI0F,EAAKtC,SAAS,CAAEpD,wDAIhC,IACM6vB,GADS,IAAIjkB,IACMe,UAAU,WAGnC,GAFA/K,KAAKwB,SAAS,CAAEiM,QAASygB,SAASD,GAAYvf,eAAgBwf,SAASD,KAEnEvvB,OAAOC,SAASylB,SAASvlB,SAAS,MAAO,CAC3C,IAAMsvB,EAAazvB,OAAOC,SAASylB,SAASrlB,MAAM,GAClDiB,KAAKwB,SAAS,CAAEiM,QAASygB,SAASC,kDAIlB,IAAApqB,EAAA/D,KAClBwC,MAAK,kDAAAjE,OAAmDyB,KAAKM,MAAMmN,UAChE/K,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAtE,GAAI,OAAI2F,EAAKvC,SAAS,CAAEpD,KAAMA,EAAM0vB,YAAa1vB,EAAMY,SAAS,MACrE0D,KAAK,kBAAMqB,EAAKpG,MAAMywB,QAAQrqB,EAAKzD,MAAMwtB,eACzChe,MAAM,SAAApO,GAAG,OAAIC,QAAQC,IAAIF,+CAI5B,OAAO1B,KAAKM,MAAMohB,SAChB,SAAAnjB,OAAUyB,KAAKM,MAAMmN,SACnB,OAAO9Q,EAAAC,EAAAC,cAACwxB,GAAD,CAAc5gB,QAASzN,KAAKM,MAAMmN,QAASiB,eAAgB1O,KAAKM,MAAMoO,eAAgBtQ,KAAM4B,KAAKM,MAAMlC,OAChH,IAAK,WACH,OAAOzB,EAAAC,EAAAC,cAACyxB,GAAD,CAAMlwB,KAAM4B,KAAKM,MAAMlC,OAChC,IAAK,OACH,OAAOzB,EAAAC,EAAAC,cAAC0xB,GAAD,CAAMnwB,KAAM4B,KAAKM,MAAMlC,OAChC,IAAK,QACH,OAAOzB,EAAAC,EAAAC,cAAC2xB,GAAD,CAAO9f,eAAgB1O,KAAKM,MAAMoO,iBAC3C,IAAK,aACH,OACI/R,EAAAC,EAAAC,cAAC4xB,GAAD,CACExgB,mBAAoBjO,KAAKiO,mBACzBR,QAASzN,KAAKM,MAAMoO,iBAS5B,QAAS,OAAO,uCAIX,IAAAvK,EACyDnE,KAAKM,MAA7DmN,EADDtJ,EACCsJ,QAASiB,EADVvK,EACUuK,eAAgBtQ,EAD1B+F,EAC0B/F,KAAM0vB,EADhC3pB,EACgC2pB,YAAa9uB,EAD7CmF,EAC6CnF,QAIpD,OAFmB,IAAfZ,EAAKqD,QAAe/C,OAAOC,SAASc,KAAO,QAG7C9C,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAC6xB,EAAD,CACEtwB,KAAM0vB,EAAa9uB,QAASA,IAE9BrC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAC8xB,EAAD,MACAhyB,EAAAC,EAAAC,cAAC+xB,GAAD,CACEnhB,QAASA,EACTiB,eAAgBA,EAChBqf,gBAAiB/tB,KAAK+tB,gBACtB1kB,oBAAqBrJ,KAAKqJ,sBAE5B1M,EAAAC,EAAAC,cAACgyB,GAAD,KACElyB,EAAAC,EAAAC,cAACiyB,GAAD,CACEzlB,oBAAqBrJ,KAAKqJ,oBAC1BjL,KAAMA,IAERzB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACZkD,KAAKguB,6BA5GG3wB,aAqHjBwxB,GAActxB,IAAOC,IAAVuxB,MAKFllB,gBACb,SAAAvJ,GAAK,MAAK,CACRuI,MAAOvI,IAET,SAAAwJ,GAAQ,MAAK,CACXskB,QAAS,SAAAhwB,GACP0L,EAAS,CAAEzI,KAAM,YAAa0I,QAAS3L,OAN9ByL,CASbgkB,smBC1IImB,8MACJ1uB,MAAQ,CACN2uB,YAAa,MAGf1f,aAAe,SAACzN,GACd,IAAIlB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IAGR,GAFAiC,EAAES,iBAEE1C,EAAKS,MAAM2uB,YAAa,CAC1B,IAAMvuB,EAAW,IAAIC,SACrBD,EAASI,OAAO,cAAejB,EAAKS,MAAM2uB,aAE1CluB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,wBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBI,QAAQC,IAAIL,GAGK,IAFFA,EAAI+O,QAGjB1P,EAAKjD,MAAM2F,gBAAgB,meAAmG,CAAE9D,QAAS,SACzIoB,EAAKjD,MAAMuxB,kBAEXtuB,EAAKjD,MAAM2F,gBAAgB,6cAAiG,CAAE9D,QAAS,UAG3IiC,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,0GAAsB,CAAE9D,QAAS,kBAKhEoB,EAAKjD,MAAM2F,gBAAgB,mMAAyC,CAAE9D,QAAS,qFAI1E,IAAAoE,EAAA5D,KACP,OACErD,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAACsyB,GAAD,KACExyB,EAAAC,EAAAC,cAACuyB,GAAD,KACEzyB,EAAAC,EAAAC,cAAC+H,EAAAhI,EAAD,CAAWiI,QAAS7E,KAAKrC,MAAMuxB,kBAEjCvyB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,aAApB,8HACA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CACE6B,MAAM,2DACN7G,QAAQ,WACRJ,KAAK,QACLuP,WAAS,EACTnC,OAAO,QACP/K,MAAOzB,KAAKM,MAAM+uB,WAClB9oB,SAAU,SAAAzE,GAAC,OAAI8B,EAAKpC,SAAS,CAAEytB,YAAantB,EAAEE,OAAOC,SACrDA,MAAOjC,KAAKM,MAAMgvB,WAEpB3yB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,UAAU8G,QAAS7E,KAAKuP,cAA1D,2DAEF5S,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oCAAoC+H,QAAS7E,KAAKrC,MAAMuxB,yBA5DlD7xB,aAiEvBW,GAAUT,IAAOC,IAAV+xB,MAiBP5qB,GAAOpH,IAAOC,IAAVgyB,MASK3nB,0BAAamnB,uNCnFtBS,eACJ,SAAAA,EAAY9xB,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAyvB,IACjB5vB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA2vB,GAAAtvB,KAAAH,KAAMrC,KAsBRuxB,eAAiB,kBAAMrvB,EAAK2B,SAAS,CAAEkuB,UAAW7vB,EAAKS,MAAMovB,YAvB1C7vB,EA0EnB8vB,wBAA0B,WACxB9vB,EAAK2B,SAAS,CAAEouB,cAAe/vB,EAAKS,MAAMsvB,gBAzE1C/vB,EAAKS,MAAQ,CACXuvB,MAAO,GACPC,SAAU,GACVJ,SAAU,GACVE,cAAc,EACdtP,aAAa,EACbyP,aAAa,GAEflwB,EAAKgC,aAAehC,EAAKgC,aAAa4G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAK0P,aAAe1P,EAAK0P,aAAa9G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAXHA,4EAeNkQ,GACX/P,KAAKwB,SAAS,CAAE8e,aAAa,EAAOyP,aAAa,IAEjD/vB,KAAKwB,SAAL1B,OAAAoQ,GAAA,EAAApQ,CAAA,GACGiQ,EAAM/N,OAAO5C,KAAO2Q,EAAM/N,OAAOC,6CAMzBH,GACX,IAAIlB,EAAOZ,KAGX,GAFA8B,EAAES,iBAEuB,KAArBvC,KAAKM,MAAMuvB,OAAgB7vB,KAAKM,MAAMwvB,SAASzrB,QAAU,EAAG,CAC9D,IAAM3D,EAAW,IAAIC,SAErBD,EAASI,OAAO,QAASd,KAAKM,MAAMuvB,OACpCnvB,EAASI,OAAO,WAAYd,KAAKM,MAAMwvB,UAEvC/uB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,wBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GACjBI,QAAQC,IAAIL,GACZ,IAAIoB,EAAWpB,EAAI+O,OACf7C,EAAUlM,EAAIkM,QACdhD,EAAS,IAAIT,GAEjB,OAAQrH,GACN,KAAK,EACH/B,EAAKjD,MAAM2F,gBAAgB,sTAA6D,CAAE9D,QAAS,YACnG,MACF,IAAK,GACHoB,EAAKjD,MAAM2F,gBAAgB,+YAAgF,CAAE9D,QAAS,SACtH,MACF,KAAK,EACHiL,EAAOS,UAAU,UAAWuC,EAAS,IACrCmc,aAAaC,QAAQ,UAAWpc,GAChC/O,OAAOC,SAASc,KAAhB,MAKNgC,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,0GAAsB,CAAE9D,QAAS,kBAKhEoB,EAAKjD,MAAM2F,gBAAgB,mKAAkC,CAAE9D,QAAS,YACpEQ,KAAKM,MAAMwvB,SAASzrB,OAAS,GAAGrE,KAAKwB,SAAS,CAAEuuB,aAAa,IAC5D/vB,KAAKM,MAAMuvB,OAAO7vB,KAAKwB,SAAS,CAAE8e,aAAa,qCAStD,OACE3jB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAiBc,MAAO,CAAE6a,cAAiB,SACxD9b,EAAAC,EAAAC,cAAA,QAAMC,UAAU,eAAeI,GAAG,WAAW0S,OAAO,GAAGiB,OAAO,OAAOC,SAAU9Q,KAAKuP,cAElF5S,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEyJ,MAAM,0DACN7G,QAAQ,WACRJ,KAAK,QACLuP,WAAS,EACTnC,OAAO,QACPjG,SAAUvG,KAAK6B,aACfI,MAAOjC,KAAKM,MAAMgvB,SAClB7tB,MAAOzB,KAAKM,MAAMggB,cAGpB3jB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACE+R,WAAS,EACTnP,QAAQ,WACR6B,KAAMrB,KAAKM,MAAMsvB,aAAe,OAAS,WACzCvpB,MAAM,uCACNmG,OAAO,QACPpN,KAAK,WACLqC,MAAOzB,KAAKM,MAAMyvB,YAClB9tB,MAAOjC,KAAKM,MAAMwvB,SAClBvpB,SAAUvG,KAAK6B,aACf8K,WAAY,CACVC,aACEjQ,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,6BACXlI,QAAS7E,KAAK2vB,yBAEb3vB,KAAKM,MAAMsvB,aAAejzB,EAAAC,EAAAC,cAACmzB,GAAApzB,EAAD,MAAoBD,EAAAC,EAAAC,cAACozB,GAAArzB,EAAD,WAMxDoD,KAAKM,MAAMyvB,YAAcpzB,EAAAC,EAAAC,cAACqzB,GAAAtzB,EAAD,CAAgBgB,MAAO,CAAEG,MAAO,YAAhC,qMAAuG,GAEjIpB,EAAAC,EAAAC,cAACszB,GAAD,KACExzB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,OAAOzB,MAAM,UAAU8G,QAAS7E,KAAKkvB,gBAArD,8EACAvyB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,UAAUsD,KAAK,UAAjD,mCAEDrB,KAAKM,MAAMovB,SAAW/yB,EAAAC,EAAAC,cAACuzB,GAAD,CAAgBlB,eAAgBlvB,KAAKkvB,iBAAqB,eA7HpE7xB,aAqInB8yB,GAAU5yB,IAAOC,IAAV6yB,MAMExmB,gBACb,SAAAvJ,GAAK,MAAK,CACRgwB,OAAQhwB,IAEV,SAAAwJ,GAAQ,MAAK,CACX+lB,MAAO,SAACzxB,GACN0L,EAAS,CAAEzI,KAAM,YAAa0I,QAAS3L,OAN9ByL,CASbhC,uBAAa4nB,sXCtJTc,eACJ,SAAAA,EAAY5yB,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAuwB,IACjB1wB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAywB,GAAApwB,KAAAH,KAAMrC,KAiGRgyB,wBAA0B,WACxB9vB,EAAK2B,SAAS,CAAEouB,cAAe/vB,EAAKS,MAAMsvB,gBAjG1C/vB,EAAKS,MAAQ,CACXkwB,MAAO,GACPX,MAAO,GACPC,SAAU,GACVW,UAAW,GACXC,aAAc,GACdd,cAAc,EACde,SAAS,EACT3xB,SAAS,GAEXa,EAAKgC,aAAehC,EAAKgC,aAAa4G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAK+wB,cAAgB/wB,EAAK+wB,cAAcnoB,KAAnB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACrBA,EAAK0P,aAAe1P,EAAK0P,aAAa9G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAKgxB,aAAehxB,EAAKgxB,aAAapoB,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAfHA,4EAmBNkQ,GAAO,IAAAE,EAElBjQ,KAAKwB,UAALyO,EAAA,GAAAnQ,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EACGF,EAAM/N,OAAO5C,KAAO2Q,EAAM/N,OAAOC,OADpCnC,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EAAA,WAEW,GAFXA,IAK0B,UAAtBF,EAAM/N,OAAO5C,OACfY,KAAK4wB,cAAc7gB,EAAM/N,OAAOC,OAEL,KAAvB8N,EAAM/N,OAAOC,OACfjC,KAAKwB,SAAS,CAAEkvB,aAAc,4CAKtBF,GAEG,4JACRM,KAAKN,GAASxwB,KAAKwB,SAAS,CAAEkvB,cAAc,IAAU1wB,KAAKwB,SAAS,CAAEkvB,cAAc,yCAGhF5uB,GACX,IAAIlB,EAAOZ,KAIX,GAHA8B,EAAES,iBACFvC,KAAKwB,SAAS,CAAEmvB,SAAS,EAAM3xB,SAAS,IAEpCgB,KAAKM,MAAMuvB,OAAS7vB,KAAKM,MAAMowB,cAAgB1wB,KAAKM,MAAMwvB,SAAU,CACtE,IAAMpvB,EAAW,IAAIC,SAErBD,EAASI,OAAO,QAASd,KAAKM,MAAMuvB,OACpCnvB,EAASI,OAAO,QAASd,KAAKM,MAAMkwB,OACpC9vB,EAASI,OAAO,WAAYd,KAAKM,MAAMwvB,UAEvC/uB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,0BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GAGjB,OAFiBA,EAAI+O,QAGnB,KAAK,EACH1P,EAAKjD,MAAM2F,gBAAgB,mKAAkC,CAAE9D,QAAS,UACxE,MACF,KAAK,EACHoB,EAAKjD,MAAM2F,gBAAgB,25BAAmL,CAAE9D,QAAS,YACzNoB,EAAKY,SAAS,CACZgvB,MAAO,GACPX,MAAO,GACPC,SAAU,GACVW,UAAW,GACXC,aAAc,GACdd,cAAc,EACde,SAAS,EACT3xB,SAAS,IAEX,MACF,KAAK,EACH4B,EAAKjD,MAAM2F,gBAAgB,qQAAyD,CAAE9D,QAAS,YAC/F,MACF,QAAS,OAAO,OAGpBiC,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,0GAAsB,CAAE9D,QAAS,kBAIhEoB,EAAKjD,MAAM2F,gBAAgB,mKAAkC,CAAE9D,QAAS,mDAK1EQ,KAAKwB,SAAS,CAAEouB,cAAe5vB,KAAKM,MAAMsvB,gDAS1C,OACEjzB,EAAAC,EAAAC,cAACsC,EAAA,SAAD,KACExC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,QAAMK,GAAG,WAAW0S,OAAO,GAAGiB,OAAO,OAAOC,SAAU9Q,KAAKuP,cACzD5S,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEyJ,MAAM,0DACN7G,QAAQ,WACRJ,KAAK,QACLuP,WAAS,EACTlN,MAAOzB,KAAKM,MAAMqwB,UAAY3wB,KAAKM,MAAMuvB,MACzCrjB,OAAO,QACPjG,SAAUvG,KAAK6B,aACfI,MAAOjC,KAAKM,MAAMuvB,QAGpBlzB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACE+R,WAAS,EACTnP,QAAQ,WACR6B,KAAMrB,KAAKM,MAAMsvB,aAAe,OAAS,WACzCvpB,MAAM,uCACNmG,OAAO,QACPpN,KAAK,WACL6C,MAAOjC,KAAKM,MAAMwvB,SAClBvpB,SAAUvG,KAAK6B,aACfJ,MAAOzB,KAAKM,MAAMqwB,SAAW3wB,KAAKM,MAAMwvB,SAASzrB,OAAS,EAC1DsI,WAAY,CACVC,aACEjQ,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,6BACXlI,QAAS7E,KAAK2vB,yBAEb3vB,KAAKM,MAAMsvB,aAAejzB,EAAAC,EAAAC,cAACmzB,GAAApzB,EAAD,MAAoBD,EAAAC,EAAAC,cAACozB,GAAArzB,EAAD,WAMxDoD,KAAKM,MAAMwvB,SAASzrB,OAAS,GAAKrE,KAAKM,MAAMwvB,SAASzrB,OAAS,EAAI1H,EAAAC,EAAAC,cAACqzB,GAAAtzB,EAAD,CAAgBgB,MAAO,CAAEG,MAAO,YAAhC,qMAAuG,GAE3KpB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEyJ,MAAM,8FACN7G,QAAQ,WACRJ,KAAK,YACLuP,WAAS,EACTnC,OAAO,QACPnL,KAAK,WACLI,MAAOzB,KAAKM,MAAMqwB,SAAW3wB,KAAKM,MAAMmwB,UAAUpsB,OAAS,EAC3DkC,SAAUvG,KAAK6B,aACfI,MAAOjC,KAAKM,MAAMmwB,YAGnBzwB,KAAKM,MAAMwvB,WAAa9vB,KAAKM,MAAMmwB,WAAsC,KAAzBzwB,KAAKM,MAAMmwB,UAAmB9zB,EAAAC,EAAAC,cAACqzB,GAAAtzB,EAAD,CAAgBgB,MAAO,CAAEG,MAAO,YAAhC,oIAAwF,KAEvKpB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEyJ,MAAM,oGACN7G,QAAQ,WACRJ,KAAK,QACLuP,WAAS,EACTlN,MAAOzB,KAAKM,MAAMqwB,UAAY3wB,KAAKM,MAAMowB,eAAiB1wB,KAAKM,MAAMkwB,MAAMO,OAC3EvkB,OAAO,QACPjG,SAAUvG,KAAK6B,aACfI,MAAOjC,KAAKM,MAAMkwB,SAElBxwB,KAAKM,MAAMowB,cAAgB1wB,KAAKM,MAAMkwB,MAAQ7zB,EAAAC,EAAAC,cAACqzB,GAAAtzB,EAAD,CAAgBgB,MAAO,CAAEG,MAAO,YAAhC,wMAA0G,GAE1JpB,EAAAC,EAAAC,cAACm0B,GAAD,KACEr0B,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,UAAUsD,KAAK,SAASoF,SAAUzG,KAAKM,MAAMtB,SAC5EgB,KAAKM,MAAMtB,QAAUrC,EAAAC,EAAAC,cAACqC,EAAD,CAAQrB,UAAW,GAAIE,MAAM,cAAiB,2HA7KzDV,aAuLrB2zB,GAAazzB,IAAOC,IAAVyzB,MAgBDppB,0BAAa0oB,ICjMbW,WAjBG,WAChB,OACEv0B,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACZH,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,cC4BSs0B,uBAlCb,SAAAA,EAAYxzB,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmxB,IACjBtxB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAqxB,GAAAhxB,KAAAH,KAAMrC,KACD2C,MAAQ,CACX8wB,WAAW,GAEbvxB,EAAKwxB,WAAaxxB,EAAKwxB,WAAW5oB,KAAhB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KALDA,4EASjBG,KAAKwB,SAAS,CAAC4vB,WAAYpxB,KAAKM,MAAM8wB,6CAItC,OACEz0B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAC8xB,EAAD,MACAhyB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACbH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,0BAAb,4EACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACbH,EAAAC,EAAAC,cAAA,UAAQC,UAAWkD,KAAKM,MAAM8wB,UAAY,kDAAoD,sBAAuBvsB,QAAS7E,KAAKqxB,YACjI10B,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,UAApB,mCAEF7C,EAAAC,EAAAC,cAAA,UAAQC,UAAWkD,KAAKM,MAAM8wB,UAAY,sBAAwB,kDAAmDvsB,QAAS7E,KAAKqxB,YACjI10B,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,UAApB,kHAGHQ,KAAKM,MAAM8wB,UAAYz0B,EAAAC,EAAAC,cAACy0B,GAAD,MAAmB30B,EAAAC,EAAAC,cAAC00B,GAAD,OAE7C50B,EAAAC,EAAAC,cAAC20B,GAAD,cA7BgBn0B,cCiBTo0B,sNAlBbC,SAAW,kBAAMhzB,OAAOC,SAASc,KAAO,OACxCkyB,YAAc,kBAAMjzB,OAAOkzB,iFAG1B,OACGj1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAC8xB,EAAD,MACAhyB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,4PACAF,EAAAC,EAAAC,cAAA,UAAQgI,QAAS7E,KAAK0xB,UAAtB,4DAEF/0B,EAAAC,EAAAC,cAAC20B,GAAD,cAZen0B,sUCWjBw0B,eACJ,SAAAA,EAAYl0B,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6xB,IACjBhyB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+xB,GAAA1xB,KAAAH,KAAMrC,KAURkE,aAAe,SAACkO,GAAU,IAAAE,EAExBpQ,EAAK2B,UAALyO,EAAA,GAAAnQ,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EACGF,EAAM/N,OAAO5C,KAAO2Q,EAAM/N,OAAOC,OADpCnC,OAAAoQ,GAAA,EAAApQ,CAAAmQ,EAAA,WAEW,GAFXA,KAbiBpQ,EAoEnB8vB,wBAA0B,WACxB9vB,EAAK2B,SAAS,CAAEouB,cAAe/vB,EAAKS,MAAMsvB,gBAnE1C/vB,EAAKS,MAAQ,CACXwxB,GAAI,GACJrB,UAAW,GACXb,cAAc,EACde,SAAS,GAEX9wB,EAAK0P,aAAe1P,EAAK0P,aAAa9G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KARHA,4EAmBNiC,GACX,IAAIlB,EAAOZ,KAGX,GAFAA,KAAKwB,SAAS,CAAEmvB,SAAS,IAErB/vB,EAAKN,MAAMwxB,KAAOlxB,EAAKN,MAAMmwB,WAAa7vB,EAAKN,MAAMwxB,IAAMlxB,EAAKN,MAAMmwB,UAAW,CACnF7vB,EAAKY,SAAS,CAAE2O,OAAO,IACvBrO,EAAES,iBACF,IAAM7B,EAAW,IAAIC,SAWrBD,EAASI,OAAO,WAAYC,IAAE,oBAAoBqP,OAClD1P,EAASI,OAAO,OAVhB,WACE,IAAIixB,EAAO,GAECrzB,OAAOC,SAASc,KAAK0D,QAAQ,0BAA2B,SAAU6uB,EAAGtsB,EAAKzD,GACpF8vB,EAAKrsB,GAAOzD,IAEd,OAAO8vB,EAIeE,GAAU,MAElClxB,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,yBACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GAIjB,OAHAI,QAAQC,IAAIL,GACGA,EAAI+O,QAGjB,KAAK,EACH1P,EAAKjD,MAAM2F,gBAAgB,gJAA8B,CAAE9D,QAAS,UACpE,MACF,KAAK,EACHoB,EAAKjD,MAAM2F,gBAAgB,sZAAkF,CAAE9D,QAAS,YACxHqD,WAAW,kBAAMnE,OAAOC,SAASc,KAAO,SAAS,KACjD,MACF,QAAS,OAAO,OAGpBgC,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,0GAAsB,CAAE9D,QAAS,+CAWlE,OACE7C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAC8xB,EAAD,MACAhyB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oCACbH,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,MAApB,mHACA7C,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAYhF,QAAQ,WAApB,ybAEA7C,EAAAC,EAAAC,cAACq1B,GAAD,KACEv1B,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACE+R,WAAS,EACTnP,QAAQ,WACR6B,KAAMrB,KAAKM,MAAMsvB,aAAe,OAAS,WACzCvpB,MAAM,uCACNmG,OAAO,QACPpN,KAAK,KACL6C,MAAOjC,KAAKM,MAAMwxB,GAClBvrB,SAAUvG,KAAK6B,aACfJ,MAAOzB,KAAKM,MAAMwxB,GAAGztB,OAAS,GAAKrE,KAAKM,MAAMwxB,GAAGztB,OAAS,EAC1DsI,WAAY,CACVC,aACEjQ,EAAAC,EAAAC,cAACgQ,GAAAjQ,EAAD,CAAgB0C,SAAS,OACvB3C,EAAAC,EAAAC,cAACiQ,GAAAlQ,EAAD,CACEmQ,aAAW,6BACXlI,QAAS7E,KAAK2vB,yBAEb3vB,KAAKM,MAAMsvB,aAAejzB,EAAAC,EAAAC,cAACmzB,GAAApzB,EAAD,MAAoBD,EAAAC,EAAAC,cAACozB,GAAArzB,EAAD,WAMxDoD,KAAKM,MAAMwxB,GAAGztB,OAAS,GAAKrE,KAAKM,MAAMwxB,GAAGztB,OAAS,EAAI1H,EAAAC,EAAAC,cAACqzB,GAAAtzB,EAAD,CAAgBgB,MAAO,CAAEG,MAAO,YAAhC,qMAAuG,GAE/JpB,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEyJ,MAAM,8FACN7G,QAAQ,WACRJ,KAAK,YACLuP,WAAS,EACTnC,OAAO,QACPnL,KAAK,WACLI,MAAOzB,KAAKM,MAAMqwB,SAAW3wB,KAAKM,MAAMmwB,UAAUpsB,OAAS,GAAKrE,KAAKM,MAAMmwB,UAAUpsB,OAAS,EAC9FkC,SAAUvG,KAAK6B,aACfI,MAAOjC,KAAKM,MAAMmwB,YAEnBzwB,KAAKM,MAAMwxB,KAAO9xB,KAAKM,MAAMmwB,WAAazwB,KAAKM,MAAMmwB,UAAY9zB,EAAAC,EAAAC,cAACqzB,GAAAtzB,EAAD,CAAgBgB,MAAO,CAAEG,MAAO,YAAhC,oIAAwF,MAG5JpB,EAAAC,EAAAC,cAACs1B,GAAD,KACEx1B,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,CAAQhF,QAAQ,YAAYzB,MAAM,UAAU8G,QAAS7E,KAAKuP,cAA1D,qFAGJ5S,EAAAC,EAAAC,cAAC20B,GAAD,cA7Hcn0B,aAkIhB80B,GAAe50B,IAAOC,IAAV40B,MAUZF,GAAe30B,IAAOC,IAAV60B,MAGHxqB,0BAAagqB,IC1IbS,sNAjBbZ,SAAW,kBAAMhzB,OAAOC,SAASc,KAAO,6EAGtC,OACE9C,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAf,OAGAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAAf,4GAGFH,EAAAC,EAAAC,cAAA,UAAQgI,QAAS7E,KAAK0xB,UAAtB,8GAbgBr0B,wDCWW,cAA7BqB,OAAOC,SAASylB,UAClBrjB,IAAEqB,SAASgkB,MAAMmM,IAAI,CACnBtzB,WAAY,6DAIhB,IAAM+X,GACK,CACPnL,MAAO,QACPW,OAAQ,SACRlN,SAAU,WACV4R,QAAS,iBACTiH,OAAQ,IANNnB,GAQG,CACLnL,MAAO,QATLmL,GAWI,CACN1X,SAAU,WACV4Y,KAAM,EACN7E,MAAO,EACPxH,MAAO,IACPqH,OAAQ,GACR1G,OAAQ,QAjBNwK,GAmBI,CACN/X,WAAY,UACZlB,MAAO,QACPyO,OAAQ,OACRgmB,OAAQ,UACRlzB,SAAU,YAxBR0X,GA0BS,CACX/J,QAAS,EACT3N,SAAU,WACVkzB,OAAQ,UACRta,KAAM,EAAG7E,MAAO,EAAGH,OAAQ,EAAGuf,IAAK,GA9BjCzb,GAgCI,CACNnL,MAAO,IACPD,OAAQ,IACR8O,aAAc,GACdgY,aAAc,OApCZ1b,GAsCI,CACNpQ,UAAW,IACX8T,aAAc,GACd3c,MAAO,OACP40B,UAAW,SACX5c,WAAY,KAIV6c,GAAU,CACd,CACE3wB,MAAO,6CACPoE,MAAO,8CAET,CACEpE,MAAO,6CACPoE,MAAO,+CAILwsB,eACJ,SAAAA,EAAYl1B,GAAO,IAAAkC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6yB,IACjBhzB,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+yB,GAAA1yB,KAAAH,KAAMrC,KAYRm1B,WAAa,SAAA/iB,GACPA,EAAM/N,OAAO+wB,MAAM,GAAGC,KAAO,SAC/BnzB,EAAK2B,SAAS,CAAEyxB,aAAcljB,EAAM/N,OAAO+wB,MAAM,KACjDlzB,EAAKqzB,aAAanjB,EAAM/N,OAAO+wB,MAAM,KAErClzB,EAAKlC,MAAM2F,gBAAgB,8QAAwD,CAAE9D,QAAS,aAlB/EK,EAsBnBqzB,aAAe,SAACC,GACd,IAAIC,EAAK,IAAIzyB,SACToyB,EAAQI,EACRvyB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACRuzB,EAAGtyB,OAAO,OAAQiyB,GAClBK,EAAGtyB,OAAO,KAAMjB,EAAKS,MAAMmN,SAE3B1M,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,wBACH2B,KAAM,OACNH,KAAMkyB,EACNhyB,aAAa,EACbD,aAAa,EACbG,QAAS,SAAUC,GACb7C,OAAOC,SAASC,KAAKC,SAAS,aAChC+B,EAAKY,SAAS,CAAE/C,eAAgB8C,EAAI5C,SAASI,MAAM,MAEnD6B,EAAKY,SAAS,CAAE/C,eAAgB8C,EAAI5C,SAASI,MAAM,KAErD4C,QAAQC,IAAIL,OAzCC1B,EA8CnB+a,kBAAoB,WAClB,IAAM1d,EAAK0sB,aAAaG,QAAQ,WAChClqB,EAAK2B,SAAS,CAAEiM,QAASvQ,IACzBsF,MAAK,GAAAjE,OAAImB,EAAJ,0BAAAnB,OAAgCrB,IAClCwF,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAtE,GAAI,OAAIyB,EAAK2B,SAAS,CAAEpD,YAnDfyB,EAuDnBgC,aAAe,SAAAkO,GAEb,IAAI3R,EAAI0B,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAQD,EAAKS,MAAMlC,MAC3BA,EAAK2R,EAAM/N,OAAO5C,MAAQ2Q,EAAM/N,OAAOC,MACvCpC,EAAK2B,SAAS,CAAEpD,UA3DCyB,EA8DnB0P,aAAe,SAAAzN,GACb,IAAIlB,EAAId,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,IACRe,EAAKY,SAAS,CAAE2O,OAAO,IACvBrO,EAAES,iBAEF,IAAM7B,EAAW,IAAIC,SAErBD,EAASI,OAAO,KAAMF,EAAKN,MAAMlC,KAAKlB,IACtCwD,EAASI,OAAO,UAAWC,IAAE,yBAAyBqP,OACtD1P,EAASI,OAAO,OAAQC,IAAE,sBAAsBqP,OAChD1P,EAASI,OAAO,WAAYF,EAAKN,MAAMgO,aAAavP,MAAM,EAAG,KAAOc,EAAKS,MAAMlC,KAAKyR,UACpFnP,EAASI,OAAO,MAAOC,IAAE,qBAAqBqP,OAC9C1P,EAASI,OAAO,WAAYC,IAAE,0BAA0BqP,OACxD1P,EAASI,OAAO,SAAUF,EAAKN,MAAM7B,gBAErCsC,IAAEC,KAAK,CACLC,IAAG,GAAA1C,OAAKmB,EAAL,0BACHwB,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,KAAM,OACNC,QAAS,SAAUC,GAGjB,OAFAI,QAAQC,IAAIL,GACGA,EAAI+O,QAEjB,KAAK,EACH1P,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,UAC3F,MACF,KAAK,EACHoB,EAAKjD,MAAM2F,gBAAgB,iKAAgC,CAAE9D,QAAS,YACtEd,OAAOC,SAASc,KAAhB,KAAAlB,OAA4BqC,EAAKN,MAAMlC,KAAKlB,MAKlDuE,MAAO,WACLb,EAAKjD,MAAM2F,gBAAgB,iQAAqD,CAAE9D,QAAS,cAlG9EK,EA4GnBwO,iBAAmB,SAAA5R,GAAI,OAAIoD,EAAK2B,SAAS,CAAE8M,aAAc7R,EAAKQ,YA1G5D4C,EAAKS,MAAQ,CACXlC,KAAM,GACN60B,aAAc,KACdxlB,QAAS,GACThP,eAAgB,GAChB6P,aAAc,IAEhBzO,EAAK0P,aAAe1P,EAAK0P,aAAa9G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KACpBA,EAAKgC,aAAehC,EAAKgC,aAAa4G,KAAlB3I,OAAAe,EAAA,EAAAf,QAAAe,EAAA,EAAAf,CAAAD,KAVHA,wEA8GV,IAAAsE,EAC0BnE,KAAKM,MAA9BlC,EADD+F,EACC/F,KAAMK,EADP0F,EACO1F,eAEVK,EAAS,KAOb,OALEA,EADEJ,OAAOC,SAASC,KAAKC,SAAS,cAAgBT,EAAKU,OAC5CV,EAAKU,OAAOC,MAAM,IAElBX,EAAKU,OAIdnC,EAAAC,EAAAC,cAACF,EAAAC,EAAMsJ,SAAP,KAEEvJ,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,KAAK5B,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,KAArC,mNAEAra,EAAAC,EAAAC,cAAC8Q,GAAA/Q,EAAD,CAAOgB,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,IAAkBsD,UAAW,GAE9C3d,EAAAC,EAAAC,cAAA,QAAMK,GAAG,gBAAgB0S,OAAO,GAAGiB,OAAO,OAAOwiB,QAAQ,uBACtD50B,EACC9B,EAAAC,EAAAC,cAAA,OAAKe,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,GAAP,CAAsB/X,WAAU,OAAAV,OAASE,GAAkCuG,IAA3C,gCAC1CrI,EAAAC,EAAAC,cAAA,OAAKe,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,GAAP,CAAsB/X,WAAU,OAAAV,OAASO,EAAT,gCAC5CnC,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CAAQ4C,QAAQ,YAAY5B,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,KAAxC,6HAEAra,EAAAC,EAAAC,cAACy2B,GAAA12B,EAAD,CAAMgB,MAAO,CAAEmI,WAAY,KAA3B,gBACEpJ,EAAAC,EAAAC,cAAA,SACEK,GAAG,SACHq2B,OAAO,UACP31B,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,IACZ3V,KAAK,OACLjC,KAAK,SACLmH,SAAUvG,KAAK8yB,cAInBn2B,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACE4J,UAAQ,EACRH,MAAM,8CACNjH,KAAK,OACLwP,gBAAiB,CAAEC,QAAQ,GAC3BrC,OAAO,SACPjG,SAAUvG,KAAK6B,aACfI,MAAO7D,EAAKgB,KACZxB,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,MAGdra,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACE4J,UAAQ,EACRH,MAAM,6CACNjH,KAAK,UACLwP,gBAAiB,CAAEC,QAAQ,GAC3BrC,OAAO,SACPjG,SAAUvG,KAAK6B,aACfI,MAAO7D,EAAKiB,QACZzB,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,MAGdra,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACEyU,QAAM,EACN7K,UAAQ,EACRH,MAAM,qBACNuI,gBAAiB,CAAEC,QAAQ,GAC3B5M,MAAO7D,EAAKiS,IACZ9J,SAAUvG,KAAK6B,aACf2xB,WAAW,oIACXhnB,OAAO,SACPpN,KAAK,MACLxB,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,KAEX4b,GAAQptB,IAAI,SAAAiuB,GAAM,OACjB92B,EAAAC,EAAAC,cAAC62B,GAAA92B,EAAD,CAAUwC,KAAK,MAAMsG,IAAK+tB,EAAOxxB,MAAOA,MAAOwxB,EAAOxxB,OACnDwxB,EAAOptB,UAKd1J,EAAAC,EAAAC,cAAC0P,GAAA3P,EAAD,CACE4J,UAAQ,EACRH,MAAM,yDACNjH,KAAK,WACLwP,gBAAiB,CAAEC,QAAQ,GAC3BrC,OAAO,SACPjG,SAAUvG,KAAK6B,aACfI,MAAO7D,EAAKkB,SACZ1B,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,MAGdra,EAAAC,EAAAC,cAACsU,GAAA,EAAD,CACE/R,KAAK,WACLoN,OAAO,SACPnG,MAAM,4EACNpJ,OAAQ,eACRgF,MAAOjC,KAAKM,MAAMgO,aAAetO,KAAKM,MAAMgO,aAAelQ,EAAKyR,SAChElB,WAAW,EACXC,gBAAiB,CAAEC,QAAQ,GAC3BtI,SAAUvG,KAAKqO,iBACf+C,mBAAiB,wBACjBxT,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,IACZxQ,UAAQ,IAGV7J,EAAAC,EAAAC,cAACod,GAAArd,EAAD,CAAY4C,QAAQ,UAAUm0B,cAAY,GAA1C,oPAIAh3B,EAAAC,EAAAC,cAAC0C,EAAA3C,EAAD,CAAQ4C,QAAQ,YAAYzB,MAAM,UAAUH,MAAKkC,OAAAkQ,GAAA,EAAAlQ,CAAA,GAAOkX,IAAiBnS,QAAS7E,KAAKuP,cAAvF,2CAOJ5S,EAAAC,EAAAC,cAAC20B,GAAD,cA9Nen0B,aAqORwK,0BAAagrB,sBCxS5Be,KAAQC,IAAIC,KAAYC,KAASC,KAAYC,UA4B9BC,oLAxBX,OACEv3B,EAAAC,EAAAC,cAACs3B,EAAA,EAAD,KACEx3B,EAAAC,EAAAC,cAACu3B,EAAA,EAAD,KACIz3B,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,cAAczgB,UAAWga,KACrClxB,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,WAAczgB,UAAWga,KACrClxB,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,cAAczgB,UAAWga,KAGrClxB,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,SAAczgB,UAAWga,KAErClxB,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,YAAczgB,UAAWga,KACrClxB,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,QAAczgB,UAAWga,KACrClxB,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,YAAczgB,UAAWgf,KACrCl2B,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,SAAczgB,UAAWsd,KACrCx0B,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,YAAczgB,UAAW4d,KACrC90B,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,WAAczgB,UAAWge,KACrCl1B,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,OAAczgB,UAAWye,KACrC31B,EAAAC,EAAAC,cAACw3B,EAAA,EAAD,CAAOC,KAAK,QAAczgB,UAAWye,cAnB/Bj1B,mCCLHk3B,oBAAgB,CAC7Bn2B,KCTa,WAAsC,IAApBkC,EAAoB+qB,UAAAhnB,OAAA,QAAAmwB,IAAAnJ,UAAA,GAAAA,UAAA,GAAZ,GAAIzb,EAAQyb,UAAAhnB,OAAA,EAAAgnB,UAAA,QAAAmJ,EACnD,OAAQ5kB,EAAOvO,MACb,IAAK,YACH,MAAO,CAACuO,EAAO7F,SACjB,QACE,OAAOzJ,IDKXgI,KEVa,WAAsC,IAApBhI,EAAoB+qB,UAAAhnB,OAAA,QAAAmwB,IAAAnJ,UAAA,GAAAA,UAAA,GAAZ,GAAIzb,EAAQyb,UAAAhnB,OAAA,EAAAgnB,UAAA,QAAAmJ,EACnD,OAAQ5kB,EAAOvO,MACb,IAAK,aACH,OAAOvB,OAAA20B,GAAA,EAAA30B,CAAI8P,EAAO7F,SACpB,IAAK,cACH,IAAI2qB,EAAYp0B,EAAMiN,OAAO,SAAAtE,GAAI,OAAIA,EAAK/L,KAAO0S,EAAO7F,UACxD,OAAOjK,OAAA20B,GAAA,EAAA30B,CAAI40B,GACb,IAAK,WACH,OAAO50B,OAAA20B,GAAA,EAAA30B,CAAI8P,EAAO7F,SACpB,QACE,OAAOzJ,IFCX+a,MGXa,WAAsC,IAApB/a,EAAoB+qB,UAAAhnB,OAAA,QAAAmwB,IAAAnJ,UAAA,GAAAA,UAAA,GAAZ,GAAIzb,EAAQyb,UAAAhnB,OAAA,EAAAgnB,UAAA,QAAAmJ,EACnD,OAAQ5kB,EAAOvO,MACb,IAAK,cAEL,IAAK,iBAEL,IAAK,WAEL,IAAK,eACH,OAAOvB,OAAA20B,GAAA,EAAA30B,CAAI8P,EAAO7F,SACpB,IAAK,cACH,IAAI2qB,EAAYp0B,EAAMiN,OAAO,SAAAtE,GAAI,OAAIA,EAAK/L,KAAO0S,EAAO7F,UACxD,OAAOjK,OAAA20B,GAAA,EAAA30B,CAAI40B,GACb,QACE,OAAOp0B,IHFX0pB,MIVa,WAAsC,IAApB1pB,EAAoB+qB,UAAAhnB,OAAA,QAAAmwB,IAAAnJ,UAAA,GAAAA,UAAA,GAAZ,GAAIzb,EAAQyb,UAAAhnB,OAAA,EAAAgnB,UAAA,QAAAmJ,EACnD,OAAQ5kB,EAAOvO,MACb,IAAK,cACH,OAAOvB,OAAA20B,GAAA,EAAA30B,CAAI8P,EAAO7F,SACpB,IAAK,cACH,SAAAxL,OAAAuB,OAAA20B,GAAA,EAAA30B,CAAWQ,GAAX,CAAkBsP,EAAO7F,UAC3B,IAAK,cAEH,OADczJ,EAAMiN,OAAO,SAAAqY,GAAI,OAAIA,EAAK1oB,KAAO0S,EAAO7F,UAExD,IAAK,cACH,IAAI4qB,EAAWr0B,EAAMiN,OAAO,SAAAqY,GAAI,OAAIA,EAAK1oB,KAAO0S,EAAO7F,QAAQ6b,OAC3DgP,EAAct0B,EAAM0b,KAAK,SAAA4J,GAAI,OAAIA,EAAK1oB,KAAO0S,EAAO7F,QAAQ6b,OAGhE,OAFAgP,EAAYjP,QAAU/V,EAAO7F,QAC7B4qB,EAAW3uB,IAAEzH,OAAOo2B,EAAUC,GAEhC,IAAK,eACH,IAAIC,EAAcv0B,EAAMiN,OAAO,SAAAqY,GAAI,OAAIA,EAAKD,QAAQzoB,KAAO0S,EAAO7F,QAAQ,KACtE+qB,EAAgBx0B,EAAM0b,KAAK,SAAA4J,GAAI,OAAIA,EAAKD,QAAQzoB,KAAO0S,EAAO7F,QAAQ,KAO1E,OALI+qB,IACFA,EAAcnP,QAAQS,KAAOxW,EAAO7F,QAAQ,GAC5C8qB,EAAc7uB,IAAEzH,OAAOs2B,EAAaC,IAG/BD,EACT,QACE,OAAOv0B,IJfXsmB,KKba,WAAsC,IAApBtmB,EAAoB+qB,UAAAhnB,OAAA,QAAAmwB,IAAAnJ,UAAA,GAAAA,UAAA,GAAZ,GAAIzb,EAAQyb,UAAAhnB,OAAA,EAAAgnB,UAAA,QAAAmJ,EACnD,OAAQ5kB,EAAOvO,MACb,IAAK,YACH,MAAO,CAACqoB,QAAS9Z,EAAO7F,QAAQ,GAAI3L,KAAMwR,EAAO7F,QAAQ,IAC3D,IAAK,aACH,MAAO,CAAC3L,KAAMwR,EAAO7F,QAAQ,IAC/B,IAAK,cACH,IAAIqD,EAAU9M,EAGd,cAFO8M,EAAQsc,QACftc,EAAQhP,KAAKunB,QAAU,KAChBvY,EACT,IAAK,cACH,IAAIunB,EAAWr0B,EAEf,OADAq0B,EAASjL,QAAU9Z,EAAO7F,QACnB4qB,EACT,QACE,OAAOr0B,ILFX+mB,SMda,WAAsC,IAApB/mB,EAAoB+qB,UAAAhnB,OAAA,QAAAmwB,IAAAnJ,UAAA,GAAAA,UAAA,GAAZ,GAAIzb,EAAQyb,UAAAhnB,OAAA,EAAAgnB,UAAA,QAAAmJ,EACnD,OAAQ5kB,EAAOvO,MACb,IAAK,iBACH,OAAOvB,OAAA20B,GAAA,EAAA30B,CAAI8P,EAAO7F,SACpB,IAAK,cACH,IAAIof,EAAavZ,EAAO7F,QAMxB,OALAof,EAAWjsB,IAAM2d,OAAO+O,aAAaG,QAAQ,eAAiB,GAAGrc,WACpDpN,EAAM0b,KAAK,SAAA2J,GAAO,OAAIA,EAAQzoB,KAAOisB,EAAWjsB,OAE3DisB,EAAWjsB,IAAM2d,OAAOsO,EAAWjsB,IAAM,GAAGwQ,YAE9C,GAAAnP,OAAAuB,OAAA20B,GAAA,EAAA30B,CAAWQ,GAAX,CAAkB6oB,IACpB,IAAK,iBAEH,OADe7oB,EAAMiN,OAAO,SAAAoY,GAAO,OAAIA,EAAQzoB,KAAO0S,EAAO7F,UAE/D,IAAK,aACH,MAAO,GACT,QACE,OAAOzJ,uBCHb8b,KAAOxD,OAAO,MAEd,IAAM5F,GAAQ+hB,0BAAe,CAC3Bpe,QAAS,CACPzK,QAAS,CAAE8oB,KAAM,WACjB7oB,UAAW,CAAE6oB,KAAM,YAErBC,WAAY,CAAEC,iBAAiB,KAiBjC,IAAIrsB,GAAQssB,aAAYC,GAAS12B,OAAO22B,8BAAgC32B,OAAO22B,gCAG/EC,IAASC,OAAO54B,EAAAC,EAAAC,cAjBhB,WACE,OACEF,EAAAC,EAAAC,cAAC24B,GAAA,iBAAD,CAAkBxiB,MAAOA,IACvBrW,EAAAC,EAAAC,cAAC44B,GAAA,EAAD,CAAU5sB,MAAOA,IACflM,EAAAC,EAAAC,cAACsU,GAAA,EAAD,CAAyBukB,MAAOC,KAAavZ,OAAQA,MACnDzf,EAAAC,EAAAC,cAAC+4B,EAAA,iBAAD,CAAkBC,SAAU,GAC1Bl5B,EAAAC,EAAAC,cAACi5B,GAAD,WAWI,MAAU1zB,SAASC,eAAe","file":"static/js/main.a0ed094a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Water image_Dreamstime.b2e60f28.jpg\";","module.exports = __webpack_public_path__ + \"static/media/baseline-search-24px.a87eca9e.svg\";","module.exports = \"data:image/png;base64,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\"","import React, { Component } from 'react';\r\nimport Moment from 'react-moment';\r\nimport './css/Header.css';\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const date = new Date();\r\n    return (\r\n      <div className=\"absolute-header\">\r\n        <div className=\"header-team\">#ЕдинаяКоманда</div>\r\n        <div className=\"header-date\">\r\n          <span>сегодня</span>\r\n          <Moment element=\"span\" format=\"DD.MM.YYYY\">{date}</Moment>\r\n          <span id=\"header-date-day\">{date.toLocaleString('ru', {weekday: 'long'})}</span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport styled from 'styled-components';\r\n\r\nconst Loader = props => (\r\n  <StyledLoader style={{ minHeight: props.minHeight }}>\r\n    <CircularProgress color={props.color} />\r\n  </StyledLoader>\r\n)\r\n\r\nconst StyledLoader = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default Loader;","import React, { Fragment } from 'react';\r\nimport './css/MainpageHeader.css';\r\nimport image from './img/photos/images.png';\r\nimport Button from '@material-ui/core/Button';\r\nimport styled from 'styled-components';\r\nimport defaultBackground from './img/photos/Water image_Dreamstime.jpg';\r\nimport Loader from './Loader/Loader';\r\n\r\nfunction MainpageHeader(props) {\r\n  const { user } = props;\r\n  const defaultAvatar = { backgroundImage: `url(${image})` };\r\n  let uploadedAvatar = '';\r\n\r\n  if (window.location.host.includes('localhost') && user.avatar) {\r\n    uploadedAvatar = { backgroundImage: `url(${user.avatar.slice(16)})` };\r\n  } else {\r\n    uploadedAvatar = { backgroundImage: `url(${user.avatar})` };\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <header className=\"header\">\r\n        <div className=\"person\">\r\n          {props.loading\r\n            ?\r\n            <div className=\"person-image\" style={{ background: 'rgba(255,255,255,0.5)' }}>\r\n              <Loader minHeight={125} color='primary' />\r\n            </div>\r\n            :\r\n            <div className=\"person-image\" style={user.avatar === '' ? defaultAvatar : uploadedAvatar}></div>\r\n          }\r\n          <div className=\"person-info\">\r\n            <div className=\"person-info__container\">\r\n              {!props.loading\r\n                ?\r\n                (<Fragment>\r\n                  <p className=\"person-info__name\">{`${user.name} ${user.surname}`}</p>\r\n                  <p className=\"person-info__position\">{user.position}</p>\r\n                </Fragment>)\r\n                :\r\n                <Loader minHeight={70} color='primary' />}\r\n            </div>\r\n            <Button variant=\"contained\" href=\"logout.php\" color=\"primary\">Выйти</Button>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"contained\" href=\"/settings\" color=\"primary\">Настройки</Button>\r\n      </header>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  background: url('${defaultBackground}') no-repeat center/cover;\r\n`;\r\n\r\nexport default MainpageHeader;","let API = '';\r\n\r\nif (window.location.host.includes('localhost')) {\r\n  API = 'http://akvatory.local';\r\n} else {\r\n  API = window.location.origin;\r\n}\r\n\r\nexport default API;","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport $ from 'jquery';\r\nimport DefaultAvatar from './img/photos/images.png';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\r\nimport API from './functions/API';\r\nimport _ from 'lodash';\r\nimport Loader from './Loader/Loader';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass SingleNews extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentUser: [],\r\n      thisComments: [],\r\n      loadedComments: false,\r\n      commentText: '',\r\n      currentNews: [],\r\n      likedBy: [],\r\n      loading: true,\r\n      commentsLoading: false\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(`${API}/api/news/read_one.php?id=${this.props.singleNewsId}`)\r\n      .then(response => response.json())\r\n      .then(currentNews => this.setState({ currentNews }))\r\n    await this.fetchUserInfo(this.props.user.id);\r\n    await this.fetchComments(this.props.singleNewsId);\r\n    await this.getAvatars(this.props.singleNewsId);\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  fetchUserInfo(id) {\r\n    fetch(`${API}/api/user/info.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(currentUser => this.setState({ currentUser }))\r\n  }\r\n\r\n  fetchComments(id) {\r\n    fetch(`${API}/api/news/single_comments.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(thisComments => this.setState({ thisComments, loadedComments: !this.state.loadedComments }))\r\n  }\r\n\r\n  // получаем аватарки лайкнувших пост\r\n  getAvatars = () => {\r\n    const likedBy = this.state.currentNews.liked_by.split(', ').slice(1);\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('likedBy', likedBy);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/getAvatars.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => self.setState({ likedBy: res }),\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n  handleChange = e => this.setState({ commentText: e.target.value });\r\n\r\n  // добавляем лайк\r\n  addLike = (id, e) => {\r\n    const actions = document.getElementById('actions-news');\r\n    actions.style.pointerEvents = 'none';\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    \r\n    $.ajax({\r\n      url: `${API}/api/news/addlike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (e, res) {\r\n        console.log(res);\r\n        fetch(`${API}/api/news/read_one.php?id=${self.props.singleNewsId}`)\r\n          .then(response => response.json())\r\n          .then(currentNews => self.setState({ currentNews }))\r\n          .then(() => self.getAvatars(self.props.singleNewsId))\r\n\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 1000)  \r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // убираем лайк\r\n  removeLike = (id, e) => {\r\n    const actions = document.getElementById('actions-news');\r\n    actions.style.pointerEvents = 'none';\r\n    const self = this;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/removelike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        console.log(res);\r\n        fetch(`${API}/api/news/read_one.php?id=${self.props.singleNewsId}`)\r\n          .then(response => response.json())\r\n          .then(currentNews => self.setState({ currentNews }))\r\n          .then(() => self.getAvatars(self.props.singleNewsId))\r\n\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 1000)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  submitComment = e => {\r\n    this.setState({ commentsLoading: true });\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('news_id', this.props.singleNewsId);\r\n    formData.append('who', `${this.props.user.name} ${this.props.user.surname}`);\r\n    formData.append('date', new Date().toJSON().slice(0, 10).replace(/-/g, '.'));\r\n    formData.append('visible', 1);\r\n    formData.append('time', new Date().toLocaleTimeString().slice(0, -3));\r\n    formData.append('text', this.state.commentText);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addcomment.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function() {\r\n        self.setState({ commentText: '' });\r\n        self.fetchComments();\r\n        self.props.enqueueSnackbar('Комментарий был добавлен', { variant: 'success' });\r\n        setTimeout(() => self.setState({ commentsLoading: false }), 250);\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Не удалось оставить комментарий', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Удаление комментария \r\n  | arguments: @id \r\n  | type: @int\r\n  |--------------------------------------------------\r\n  */\r\n  deleteComment = (e, id, news_id) => {\r\n    this.setState({ commentsLoading: true });\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/deletecomment.php`,\r\n      data: { id, news_id },\r\n      type: 'POST',\r\n      success: function() {\r\n        self.props.enqueueSnackbar('Комментарий был удален', { variant: 'info' });\r\n        self.fetchComments();\r\n        setTimeout(() => self.setState({ commentsLoading: false }), 250);\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Не удалось удалить комментарий', { variant: 'error' });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    const { closeNews, singleNewsId, user } = this.props;\r\n    const { currentUser, thisComments, loadedComments, commentText, currentNews, likedBy, loading, commentsLoading } = this.state;\r\n\r\n    let avatar = null;\r\n    if (window.location.host.includes('localhost') && currentUser.avatar) {\r\n      avatar = currentUser.avatar.slice(16);\r\n    } else {\r\n      avatar = currentUser.avatar;\r\n    }\r\n    let userAvatar = null;\r\n    if (window.location.host.includes('localhost') && user.avatar) {\r\n      userAvatar = user.avatar.slice(16);\r\n    } else {\r\n      userAvatar = user.avatar;\r\n    }\r\n\r\n    if (currentUser.length === 0) this.fetchUserInfo(currentNews.author_id);\r\n    if (!loadedComments) this.fetchComments(singleNewsId);\r\n\r\n    return (\r\n      <Fragment>\r\n\r\n        <Single>\r\n          {loading ? <Loader minHeight={500} color='primary' /> :\r\n            <Fragment>\r\n              <Tooltip placement='left' title='Закрыть'>\r\n                <Icon><CloseIcon onClick={closeNews} /></Icon>\r\n              </Tooltip>\r\n\r\n              <PostHeader>\r\n                <Avatar style={{ background: `url(${currentUser.avatar ? avatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                <Typography variant='subtitle2'>{currentUser.name} {currentUser.surname}</Typography>            \r\n              </PostHeader>\r\n\r\n              {currentNews.importance === '1' ? this.props.createImportantBar(10) : null}\r\n\r\n              <Typography variant='h5'>{currentNews.title.replace(/&quot;/g, `\"`)}</Typography>\r\n\r\n              <PostContent>\r\n                <Typography variant='body1'>{currentNews.text.replace(/&quot;/g, `\"`)}</Typography>\r\n                <Typography variant='caption'>{currentNews.date}</Typography>\r\n              </PostContent>\r\n\r\n              <PostLikes>\r\n                <Typography variant='subtitle2'>{currentNews.likes} {this.props.getNoun(currentNews.likes)} \"Нравится\"</Typography>\r\n                {/* eslint-disable-next-line*/}\r\n                {likedBy.map((user, i) => {\r\n\r\n                  while (i < 7) {\r\n                    return (\r\n                      <Tooltip key={i} title={`${user.name} ${user.surname}`} placement=\"top\">\r\n                        <Avatar style={{ background: `url(${user.avatar ? user.avatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                      </Tooltip>\r\n                    )\r\n                  }\r\n                })}\r\n              </PostLikes>\r\n\r\n              <PostActions id='actions-news'>\r\n                {thisComments.length}\r\n                <Tooltip placement='top' title={`${thisComments.length} ${this.props.getCommentsNoun(thisComments.length)}`}>\r\n                  <FontAwesomeIcon icon='comments' style={{ marginLeft: 10 }} />\r\n                </Tooltip>\r\n\r\n                {!_.some(likedBy, ['id', user.id])\r\n                  ?\r\n                  <React.Fragment>\r\n                    <span>{currentNews.likes}</span>\r\n                    <Tooltip placement='top' title={`${currentNews.likes} ${this.props.getNoun(currentNews.likes)} \"Нравится\"`}>\r\n                      <FontAwesomeIcon onClick={e => this.addLike(currentNews.id, e)} icon='heart' style={{ marginLeft: 10 }} />\r\n                    </Tooltip>\r\n                  </React.Fragment>\r\n                  :\r\n                  <React.Fragment>\r\n                    <span>{currentNews.likes}</span>\r\n                    <Tooltip placement='top' title={`${currentNews.likes} ${this.props.getNoun(currentNews.likes)} \"Нравится\"`}>\r\n                      <FontAwesomeIcon onClick={e => this.removeLike(currentNews.id, e)} icon='heart' style={{ color: '#1976d2', marginLeft: 10 }} />\r\n                    </Tooltip>  \r\n                  </React.Fragment>\r\n                }\r\n            {/*     <Tooltip placement='top' title='Написать сообщение'>\r\n                  <FontAwesomeIcon icon='envelope' style={{ marginLeft: '25px' }} />\r\n                </Tooltip> */}\r\n                \r\n              </PostActions>\r\n\r\n              <NewComment>\r\n                <p className='newcomment-reply'>В ответ <a href={`${window.location.origin}/id${currentUser.id}`}>{currentUser.name} {currentUser.surname}</a></p>\r\n                <div className='newcomment-input'>\r\n                  <Avatar style={{ background: `url(${user.avatar ? userAvatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                  <TextArea>\r\n                    <TextField\r\n                      label='Комментарий'\r\n                      multiline\r\n                      variant='outlined'\r\n                      name='commentText'\r\n                      value={commentText}\r\n                      onChange={this.handleChange}\r\n                      required\r\n                    />\r\n                  </TextArea>\r\n                </div>\r\n                <Button variant='contained' color='primary' onClick={this.submitComment} disabled={!commentText}>Отправить</Button>\r\n              </NewComment>\r\n\r\n              {commentsLoading ? <Loader minHeight={280} color='primary' /> :\r\n                thisComments.map((comment, i) => {\r\n                  return (\r\n                    <Comments key={i}>\r\n                      <div className='comment-header'>\r\n                        <Avatar style={{ background: `url(${user.avatar ? userAvatar : DefaultAvatar}) no-repeat center/cover`, marginTop: 20 }}></Avatar>\r\n                        <Typography variant='subtitle2'>{comment.who}</Typography>\r\n                        <Typography variant='caption' className='comment-date'>{comment.date}</Typography>\r\n                      </div>\r\n                      <div className='comment-text'>{comment.text}</div>\r\n\r\n                      <DelIcon>\r\n                        <Tooltip placement='left' title=\"Удалить\">\r\n                          <DeleteIcon onClick={(e) => this.deleteComment(e, comment.id, comment.news_id)} />\r\n                        </Tooltip>\r\n                      </DelIcon>\r\n                    </Comments>\r\n                  )\r\n                })}\r\n\r\n            </Fragment>}\r\n        </Single>\r\n        <Wrapper onClick={closeNews}></Wrapper>\r\n\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst Single = styled.div`\r\n  width: 600px;\r\n  min-height: 300px;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  position: fixed;\r\n  z-index: 50;\r\n  background: #fff;\r\n  top: 100px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n  padding: 15px 30px;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  max-height: 80%;\r\n\r\n  .close {\r\n    top: 5px;\r\n  }\r\n  ::-webkit-scrollbar { \r\n    display: none; \r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  background: rgba(0,0,0,.5);\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  z-index: 49;\r\n`;\r\n\r\nconst PostHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 25px;\r\n\r\n  img {\r\n    border-radius: 50%;\r\n    width: 60px;\r\n  }\r\n  p {\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n  }\r\n`;\r\n\r\nconst PostContent = styled.div`\r\n  p {\r\n    margin: 15px 0 5px;\r\n    font-size: 20px;\r\n  }\r\n  span {\r\n    color: #657786;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst PostLikes = styled.div`\r\n  border-top: 1px solid #e6ecf0;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  margin-top: 20px;\r\n  1px solid #e6ecf0;\r\n  align-items: center;\r\n  display: flex;\r\n\r\n  div {\r\n    margin: 0 5px;\r\n  }\r\n\r\n  h6:first-child {\r\n    width: 50%;\r\n    padding: 15px 10px;\r\n    border-right: 1px solid #e6ecf0;\r\n  }\r\n\r\n  span {\r\n    width: 50%;\r\n    padding: 15px 10px 15px;\r\n  }\r\n`;\r\n\r\nconst PostActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n\r\n  img {\r\n    width: 15px;\r\n    margin-right: 40px;\r\n    margin-left: 10px;\r\n    opacity: .7;\r\n    cursor: pointer;\r\n  }\r\n\r\n  img:hover {\r\n    opacity: 1;\r\n    transition: .37s ease;\r\n  }\r\n`;\r\n\r\nconst Comments = styled.div`\r\n  margin-left: -30px;\r\n  width: 600px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  cursor: pointer;\r\n  padding: 15px 30px;\r\n  position: relative;\r\n\r\n  :last-child {\r\n    border-bottom: none;\r\n  }\r\n\r\n  :hover {\r\n    background: #f5f8fa;\r\n    transition: .37s ease;\r\n  }\r\n\r\n  .comment-header {\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n    div {\r\n      border-radius: 50%;\r\n      width: 30px;\r\n      height: 30px;\r\n    }\r\n  }\r\n\r\n  .comment-text {\r\n    padding-left: 45px;\r\n  }\r\n\r\n  .comment-date {\r\n    margin-left: 10px;\r\n    color: #657786;\r\n    :before {\r\n      content: '\\00b7';\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst NewComment = styled.div`\r\n  padding: 15px 30px;\r\n  background: #f5f8fa;\r\n  width: 600px;\r\n  margin-top: 20px;\r\n  margin-left: -30px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  border-top: 1px solid #e6ecf0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  .close {\r\n    top: 5px;\r\n  }\r\n  button {\r\n    width: 150px;\r\n    align-self: flex-end;\r\n    margin-top: 15px;\r\n  }\r\n  \r\n  .newcomment-reply {\r\n    margin: 0 40px;\r\n    color: #657786;\r\n    a {\r\n      color: #0084B4;\r\n      text-decoration: none;\r\n      margin-left: 5px;\r\n      :hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n\r\n  .newcomment-input {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    margin-top: 20px;\r\n    div {\r\n      margin-right: 0;\r\n    }\r\n  }\r\n`;\r\nconst Avatar = styled.div`\r\n  min-width: 30px;\r\n  border-radius: 50%;\r\n  min-height: 30px;\r\n  margin-right: 15px;\r\n`;\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-left: 10px;\r\n  background: #fff;\r\n  height: 110px;\r\n  width: 100%;\r\n\r\n  textarea {\r\n    max-height: 90px;\r\n    background: #fff;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  position: absolute;\r\n  right: 25px;\r\n  top: 10px;\r\n  cursor: pointer;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\n\r\nconst DelIcon = styled.div`\r\n  cursor: pointer;\r\n  right: 25px;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  position: absolute;\r\n  height: fit-content;\r\n  svg {\r\n    color: rgba(0,0,0,.54);\r\n  }\r\n`;\r\n\r\nexport default withSnackbar(SingleNews);","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport './css/SideNews.css';\r\nimport SingleNews from './SingleNews';\r\nimport styled from 'styled-components';\r\nimport { Typography, Paper, Switch, Button, Tooltip } from '@material-ui/core';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { connect } from 'react-redux';\r\nimport Loader from './Loader/Loader';\r\n\r\nclass SideNews extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      news: [],\r\n      importance: false,\r\n      singleNews: false,\r\n      singleNewsData: [],\r\n      singleNewsId: '',\r\n      comments: [],\r\n      loading: true\r\n    }\r\n    this.reloadComponent = this.reloadComponent.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  async reloadComponent() {\r\n    await this.setState({ loading: true })\r\n    await fetch(`http://akvatory.local/api/news/read.php`)\r\n      .then(response => response.json())\r\n      .then(news => this.props.getNews(news.records || []))\r\n    await fetch(`http://akvatory.local/api/news/getcomments.php`)\r\n      .then(response => response.json())\r\n      .then(comments => this.setState({ comments: comments.records }))\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  // переходим к конкретной новости\r\n  goToSingleNews = id => this.setState({ singleNews: true, singleNewsId: id });\r\n\r\n  // закрываем новость \r\n  closeNews = () => {\r\n    this.setState({ singleNews: false, singleNewsId: '' });\r\n    this.reloadComponent();\r\n  }\r\n\r\n  changeImportance = () => this.setState({ importance: !this.state.importance });\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'отметок';\r\n    number %= 10;\r\n    if (number === 1) return 'отметка';\r\n    if (number >= 2 && number <= 4) return 'отметки';\r\n    return 'отметок';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getCommentsNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'комментариев';\r\n    number %= 10;\r\n    if (number === 1) return 'комментарий';\r\n    if (number >= 2 && number <= 4) return 'комментария';\r\n    return 'комментариев';\r\n  }\r\n\r\n  render() {\r\n    const { news, importance, singleNews, singleNewsId, comments, loading } = this.state;\r\n    var NEWS_COUNTER = 0;\r\n\r\n    if (this.state.news.length === 0) {\r\n      setTimeout(() => this.setState({ news: this.props.store.news }), 0);\r\n    }\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          {loading ? <Loader minHeight={250} color='primary' /> :\r\n            <News>\r\n              <NewsSwitch>\r\n                <Typography variant='subtitle2'>Только важное </Typography>\r\n                <Switch color='primary' onClick={this.changeImportance.bind(this)} />\r\n              </NewsSwitch>\r\n              {/* eslint-disable-next-line */}\r\n              {news.length > 0 ? this.props.store.news.map((item, i) => {\r\n\r\n                if (importance) {\r\n                  if (item.importance === '1' && NEWS_COUNTER < 3) {\r\n                    NEWS_COUNTER++;\r\n                    return (\r\n                      <div key={i} className=\"news-item\">\r\n                        <div className=\"news-item-header\">\r\n                          <Typography variant='subtitle2'>{item.author}</Typography>\r\n                          <Typography variant='caption'>{item.date}</Typography>\r\n                        </div>\r\n                        <Typography variant='button' className='news-caption' onClick={() => this.goToSingleNews(item.id)}>\r\n                          {item.importance === '1' ? <Tooltip title='Важное!' placement=\"left\"><WarningIcon /></Tooltip> : null}\r\n                          {item.title}\r\n                        </Typography>\r\n                        <div className=\"news-item-text\">\r\n                          <Typography variant='body2'>{item.text}</Typography>\r\n                        </div>\r\n                        <Tooltip title=\"Перейти к комментариям\" placement=\"top-start\">\r\n                          <div\r\n                            onClick={() => this.goToSingleNews(item.id)}\r\n                            className=\"news-item-comment\"\r\n                          >\r\n                            <FontAwesomeIcon icon='comments' />\r\n                            {item.comments} {this.getCommentsNoun(item.comments)}\r\n                          </div>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )\r\n                  }\r\n                } else {\r\n                  while (i < 3) {\r\n                    return (\r\n                      <div key={i} className=\"news-item\">\r\n                        <div className=\"news-item-header\">\r\n                          <Typography variant='subtitle2'>{item.author}</Typography>\r\n                          <Typography variant='caption'>{item.date}</Typography>\r\n                        </div>\r\n                        <Typography variant='button' className='news-caption' onClick={() => this.goToSingleNews(item.id)}>\r\n                          {item.importance === '1' ? <Tooltip title='Важное!' placement=\"top-start\"><WarningIcon /></Tooltip> : null}\r\n                          {item.title.replace(/&quot;/g, `\"`)}\r\n                        </Typography>\r\n                        <div className=\"news-item-text\">\r\n                          <Typography variant='body2'>{item.text.replace(/&quot;/g, `\"`)}</Typography>\r\n                        </div>\r\n                        <Tooltip title=\"Перейти к комментариям\" placement=\"top-start\">\r\n                          <div\r\n                            onClick={() => this.goToSingleNews(item.id)}\r\n                            className=\"news-item-comment\"\r\n                          >\r\n                            <FontAwesomeIcon icon='comments' />\r\n                            {item.comments} {this.getCommentsNoun(item.comments)}\r\n                          </div>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )\r\n                  }\r\n                }\r\n              }) :\r\n                <NoNews><Typography variant='h6'>нет новостей</Typography></NoNews>\r\n              }\r\n              <Button\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={() => { this.props.handleChangeSection('news'); window.scrollTo(0, 0) }}\r\n              >\r\n                КО ВСЕМ НОВОСТЯМ\r\n            </Button>\r\n\r\n              {singleNews\r\n                ?\r\n                <SingleNews\r\n                  closeNews={this.closeNews.bind(this)}\r\n                  singleNewsId={singleNewsId}\r\n                  news={news}\r\n                  user={this.props.user}\r\n                  comments={comments}\r\n                  getNoun={this.getNoun}\r\n                  getCommentsNoun={this.getCommentsNoun}\r\n                  reloadComponent={this.reloadComponent}\r\n                />\r\n                : null}\r\n\r\n            </News>}\r\n        </Paper>\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  width: 30%;\r\n`;\r\nconst NewsSwitch = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\nconst News = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n\r\n  .news-item {\r\n    width: 100%;\r\n    padding-bottom: 0;\r\n  }\r\n  svg {\r\n    margin-left: 0;\r\n  }\r\n  .news-caption {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    width: 111%;\r\n    cursor: pointer;\r\n    margin-left: -15px;\r\n    padding: 10px 15px 8px;\r\n    &:hover {\r\n      background: #1976d2;\r\n      color: #ffffff;\r\n      transition: .37s ease;\r\n    }\r\n    svg {\r\n      color: rgba(0,0,0,.15) !important;\r\n      margin-right: 8px;\r\n      font-size: 22px;\r\n    }\r\n  }\r\n\r\n  .news-item-comment {\r\n    width: 111%;\r\n    cursor: pointer;\r\n    margin-left: -15px;\r\n    padding: 12px 15px;\r\n    &:hover {\r\n      background: rgba(0,0,0,0.015);\r\n    }\r\n  }\r\n`;\r\nconst NoNews = styled.div`\r\n  height: 150px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .37;\r\n  margin-bottom: 20px;\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    getNews: (news) => {\r\n      dispatch({ type: 'FETCH_NEWS', payload: news })\r\n    }\r\n  })\r\n)(SideNews);","class Cookie {\r\n  setCookie(cname, cvalue, exdays) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\"+d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n  }\r\n\r\n  getCookie(cname) {\r\n    var name = cname + \"=\";\r\n    var ca = document.cookie.split(';');\r\n    for(var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') {\r\n        c = c.substring(1);\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length);\r\n      }\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  checkCookie() {\r\n    var user = this.getCookie(\"username\");\r\n    if (user !== \"\") {\r\n      alert(\"Welcome again \" + user);\r\n    } else {\r\n      user = prompt(\"Please enter your name:\", \"\");\r\n      if (user !== \"\" && user !== null) {\r\n        this.setCookie(\"username\", user, 365);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cookie;","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport defaultAvatar from '../img/photos/images.png';\r\n\r\nfunction Friend(props) {\r\n  let avatar = '';\r\n\r\n  if (window.location.host.includes('localhost') && props.friend.avatar) {\r\n    avatar = props.friend.avatar.slice(16);\r\n  } else {\r\n    avatar = props.friend.avatar;\r\n  }\r\n\r\n  return (\r\n    <ListItem button TouchRippleProps={{ classes: { child: 'touch-ripple' }}} >\r\n      <ListItemAvatar>\r\n        <Avatar\r\n          style={{ height: 100, width: 100 }}\r\n          alt={`${props.friend.name} ${props.friend.surname}`}\r\n          src={props.friend.avatar !== '' ? avatar : defaultAvatar}\r\n        />\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        inset\r\n        primary={`${props.friend.name} ${props.friend.surname}`}\r\n        secondary={props.friend.position}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default Friend;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchIcon from '../img/icons/baseline-search-24px.svg';\r\nimport styled from 'styled-components';\r\n\r\nfunction Search(props) {\r\n  return (\r\n    <SearchWrapper>\r\n      <TextField\r\n        id=\"outlined-adornment-password\"\r\n        variant=\"outlined\"\r\n        type='text'\r\n        label=\"Поиск\"\r\n        margin='dense'\r\n        value={props.searchValue}\r\n        onChange={props.handleSearch}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"Искать в списке коллег\"\r\n              >\r\n                <img alt='Поиск' src={SearchIcon} style={{ opacity: '.37' }} />\r\n              </IconButton>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </SearchWrapper>\r\n  )\r\n}\r\n\r\nconst SearchWrapper = styled.div`\r\n  padding: 20px\r\n  & > div {\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nexport default Search;","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport Friend from './Friend';\r\nimport API from '../functions/API';\r\nimport styled from 'styled-components';\r\nimport Search from './Search';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Loader from '../Loader/Loader';\r\n\r\nexport default class FriendList extends Component {\r\n  state = { \r\n    friends: [], \r\n    initial: [],\r\n    searchValue: '',\r\n    loading: true,\r\n    documentTitle: document.title\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(friends => this.setState({ \r\n        friends: friends.data.filter(friend => friend.id !== this.props.user_id.toString()), \r\n        initial: friends.data.filter(friend => friend.id !== this.props.user_id.toString()), \r\n      })) \r\n      .then(() => this.setState({ loading: false }))   \r\n  }\r\n\r\n  handleSearch = (e) => {\r\n    this.setState({ searchValue: e.target.value });\r\n    const searchValue = e.target.value.toLowerCase();\r\n\r\n    document.title = e.target.value || this.state.documentTitle;\r\n\r\n    let friends = this.state.initial;\r\n    friends = friends.filter(friend => \r\n      friend.name.toLowerCase().includes(searchValue) || \r\n      friend.surname.toLowerCase().includes(searchValue) ||\r\n      friend.position.toLowerCase().includes(searchValue)\r\n    );\r\n    this.setState({ friends });\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.title = this.state.documentTitle;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Paper>\r\n        {\r\n          this.state.loading ? \r\n            <Loader minHeight={370} color='primary' /> \r\n          :\r\n            <FriendWrapper>\r\n            <Search \r\n              handleSearch={this.handleSearch} \r\n              searchValue={this.searchValue}\r\n            />\r\n            <List>\r\n              {this.state.friends.map(friend  => \r\n                <Link \r\n                  key={friend.id} \r\n                  to={`id${friend.id}`}\r\n                  onClick={() => this.props.handleChangeUserId(friend.id)}\r\n                >\r\n                  <Friend\r\n                    friend={friend} \r\n                  />\r\n                </Link>\r\n              )} \r\n            </List>\r\n          </FriendWrapper>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst FriendWrapper = styled.div`\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n  ul {\r\n    padding: 0;\r\n    padding-bottom: 50px;\r\n  }\r\n`;","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport API from './functions/API';\r\nimport InputMask from 'react-input-mask';\r\nimport './css/PersonalInfo.css';\r\nimport defaultAvatar from './img/photos/images.png';\r\nimport { Typography, TextField, Tooltip, Paper, FormControl, FormHelperText, Button, MenuItem, InputLabel } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Done';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Loader from './Loader/Loader';\r\nimport { DatePicker } from 'material-ui-pickers';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass PersonalInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userInfo: {},\r\n      newChildInput: false,\r\n      nameError: true,\r\n      yearError: true,\r\n      childName: '',\r\n      childBirthyear: '',\r\n      loading: true,\r\n      selectedDate: '',\r\n      loadingChild: false\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.fetchUserInfo = this.fetchUserInfo.bind(this);\r\n    this.deleteChild = this.deleteChild.bind(this);\r\n    this.prepareChild = this.prepareChild.bind(this);\r\n    this.handleChild = this.handleChild.bind(this);\r\n    this.addChild = this.addChild.bind(this);\r\n    this.removeInput = this.removeInput.bind(this);\r\n  }\r\n\r\n  fetchUserInfo(action) {\r\n    if (!action) this.setState({ loading: true });\r\n      \r\n    if (action === 'child') this.setState({ loadingChild: true });\r\n\r\n    fetch(`${API}/api/user/info.php?id=${this.props.user_id}`)\r\n      .then(response => response.json())\r\n      .then(userInfo => this.setState({ userInfo, selectedDate: userInfo.birthday }))\r\n      .then(() => this.setState({ loading: false, loadingChild: false }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  // делаем запрос перед рендером\r\n  componentDidMount() {\r\n    this.fetchUserInfo();\r\n  }\r\n\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    let userInfo = { ...this.state.userInfo };\r\n    userInfo[event.target.name] = event.target.value;\r\n    this.setState({ userInfo });\r\n  }\r\n\r\n  prepareChild() {\r\n    this.setState({ newChildInput: true })\r\n  }\r\n\r\n  handleChild(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      nameError: true,\r\n      yearError: true\r\n    })\r\n  }\r\n\r\n  addChild(e) {\r\n    e.preventDefault();\r\n    if (this.state.childName && this.state.childBirthyear) {\r\n      var self = this;\r\n      const formData = new FormData();\r\n      formData.append('name', this.state.childName);\r\n      formData.append('year', this.state.childBirthyear);\r\n      formData.append('parent', self.props.user_logged_id);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/child/add.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          self.fetchUserInfo('child');\r\n          self.setState({ newChildInput: false, childBirthyear: '', childName: '' });\r\n          self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n          console.log(res);\r\n        },\r\n        error: function() {\r\n          self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      if (this.state.newChildInput) {\r\n        this.props.enqueueSnackbar('Нужно заполнить все поля', { variant: 'warning' });\r\n        if (!this.state.childBirthyear) this.setState({ yearError: false })\r\n        if (!this.state.childName) this.setState({ nameError: false })\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteChild(id) {\r\n    var self = this;\r\n    self.setState({ modal: false });\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/child/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.fetchUserInfo('child');\r\n        self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n        console.log(res);\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  removeInput = () => this.setState({ newChildInput: false });\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append('id', this.props.user_logged_id);\r\n    formData.append('adress', $('input[name=\"adress\"]').val());\r\n    formData.append('army_country', $('input[name=\"army_country\"]').val());\r\n    formData.append('army_type', $('input[name=\"army_type\"]').val());\r\n    formData.append('birthday', this.state.selectedDate.slice(0, 10));\r\n    formData.append('district', $('input[name=\"district\"]').val());\r\n    formData.append('fakultet', $('input[name=\"fakultet\"]').val());\r\n    formData.append('name', $('input[name=\"name\"]').val());\r\n    formData.append('phone', $('input[name=\"phone\"]').val());\r\n    formData.append('position', $('input[name=\"position\"]').val());\r\n    formData.append('status', $('input[name=\"status\"]').val());\r\n    formData.append('surname', $('input[name=\"surname\"]').val());\r\n    formData.append('vuz', $('input[name=\"vuz\"]').val());\r\n    formData.append('city', $('input[name=\"city\"]').val());\r\n    formData.append('sex', this.state.userInfo.sex);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/update.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        let response = res.result;\r\n        switch (response) {\r\n          case 0:\r\n            self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n            break;\r\n          case 1:\r\n            self.fetchUserInfo('update');\r\n            self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n            self.addChild(e);\r\n            break;\r\n          default: break;\r\n        }\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  createInput = (label, value, name) => {\r\n    const { user_id, user_logged_id } = this.props;\r\n\r\n    if (user_id === user_logged_id) {\r\n      return (\r\n        <TextField\r\n          label={label}\r\n          value={value}\r\n          fullWidth={true}\r\n          name={name}\r\n          margin='dense'\r\n          InputLabelProps={{ shrink: true }}\r\n          onChange={this.handleChange}\r\n          variant=\"outlined\"\r\n        />\r\n      )\r\n    } else {\r\n      return (\r\n        <Naked>\r\n          {name === 'name' || name === 'surname' || name === 'position' ? (\r\n            <FormControl>\r\n              <InputBase value={value} />\r\n            </FormControl>\r\n          ) : (\r\n              <FormControl>\r\n                <InputLabel htmlFor={name}>{label}</InputLabel>\r\n                <InputBase id={name} value={value} />\r\n              </FormControl>\r\n            )}\r\n        </Naked>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loading, userInfo, newChildInput, childName, childBirthyear, nameError, yearError } = this.state;\r\n    const { user_id, user_logged_id, user } = this.props;\r\n    let childrens = {};\r\n    let avatar = user.avatar;\r\n\r\n    if (userInfo.childs) childrens = JSON.parse(userInfo.childs.replace(/\\//g, ''));\r\n    if (window.location.host.includes('localhost') && avatar) avatar = avatar.slice(16);\r\n\r\n    return (\r\n      <Paper className=\"personal\">\r\n\r\n        {!loading ? <Form id=\"personal-info\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n          <div className=\"personal-header\">\r\n            <div className=\"personal-header__photo\">\r\n              <div style={{ background: `url(${avatar ? avatar : defaultAvatar}) no-repeat center/cover` }}></div>\r\n            </div>\r\n            <div className={user_logged_id === user_id ? 'personal-header__info' : null}>\r\n              {user_logged_id === user_id ? (\r\n                <Fragment>\r\n                  {this.createInput('Имя', userInfo.name, 'name')}\r\n                  {this.createInput('Фамилия', userInfo.surname, 'surname')}\r\n                  {this.createInput('Должность', userInfo.position, 'position')}\r\n                </Fragment>\r\n              ) : (\r\n                  <Fragment>\r\n                    <InputBase className='user-header' value={userInfo.name + ' ' + userInfo.surname} />\r\n                    <span className='user-position'>{this.createInput('Должность', userInfo.position, 'position')}</span>\r\n                  </Fragment>\r\n                )}\r\n\r\n              {user_logged_id === user_id ? (\r\n                <InputMask\r\n                  mask=\"+7 (999) 99-99-999\"\r\n                  value={userInfo.phone}\r\n                  onChange={this.handleChange}\r\n                >\r\n                  {() => <TextField\r\n                    label='Номер телефона'\r\n                    name='phone'\r\n                    fullWidth={true}\r\n                    margin='dense'\r\n                    InputLabelProps={{ shrink: true }}\r\n                    variant=\"outlined\"\r\n                  />}\r\n                </InputMask>) : (\r\n                  <Naked>\r\n                    <InputBase id='phone' style={{ pointerEvents: 'none', padding: 0 }} value={userInfo.phone} />\r\n                  </Naked>\r\n                )}\r\n\r\n              {user_logged_id === user_id ? (\r\n                <FormControl >\r\n                  <DatePicker\r\n                    variant='outlined'\r\n                    name=\"birthday\"\r\n                    margin='dense'\r\n                    label='Дата рождения'\r\n                    format={'Do MMMM YYYY'}\r\n                    value={this.state.selectedDate ? this.state.selectedDate : userInfo.birthday}\r\n                    fullWidth={true}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    onChange={this.handleDateChange}\r\n                    aria-describedby=\"component-helper-text\"\r\n                  />\r\n                  <FormHelperText id=\"component-helper-text\">*Год рождения будет виден только руководству</FormHelperText>\r\n                </FormControl>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Семья</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {user_logged_id === user_id ? (\r\n              <TextField\r\n                select\r\n                label=\"Семейное положение\"\r\n                name=\"status\"\r\n                value={userInfo.status || ''}\r\n                onChange={this.handleChange}\r\n                margin=\"dense\"\r\n                variant='outlined'\r\n                fullWidth={true}\r\n                InputLabelProps={{ shrink: true }}\r\n              >\r\n                {userInfo.sex === 'женский' ?\r\n                  <MenuItem value=\"Не замужем\">Не замужем</MenuItem> :\r\n                  <MenuItem value=\"Не женат\">Не женат</MenuItem>\r\n                }\r\n                {userInfo.sex === 'женский' ?\r\n                  <MenuItem value=\"Замужем\">Замужем</MenuItem> :\r\n                  <MenuItem value=\"Женат\">Женат</MenuItem>\r\n                }\r\n                <MenuItem value=\"В гражданском браке\">В гражданском браке</MenuItem>\r\n              </TextField>\r\n            ) : (\r\n                <Naked>\r\n                  <FormControl>\r\n                    <InputLabel htmlFor='status'>Семейное положение</InputLabel>\r\n                    <InputBase id='status' value={userInfo.status} />\r\n                  </FormControl>\r\n                </Naked>\r\n              )}\r\n          </div>\r\n          <div className=\"personal-section\">\r\n          \r\n              <Fragment>\r\n                <div className=\"personal-section__header\">\r\n                  <Typography variant='h6' color='primary'>Дети</Typography>\r\n                  <hr />\r\n                </div>\r\n                {this.state.loadingChild ? <Loader minHeight={120} color='primary' /> :\r\n                <Childrens>\r\n                  {Object.keys(childrens).map(child =>\r\n                    <Children key={childrens[child].id}>\r\n                      <Typography variant='subtitle2'>Имя: {childrens[child].child_name} </Typography>\r\n                      <Typography variant='caption'>{childrens[child].child_birthyear} г.р.</Typography>\r\n                      <Tooltip title=\"Удалить\" placement=\"right\"><Clear onClick={() => this.deleteChild(childrens[child].id)} /></Tooltip>\r\n                    </Children>\r\n                  )}\r\n                </Childrens>}\r\n              </Fragment>\r\n\r\n            {newChildInput ? (<NewChild>\r\n              <div>\r\n                <TextField\r\n                  label='Имя'\r\n                  value={childName}\r\n                  fullWidth={true}\r\n                  name='childName'\r\n                  margin='dense'\r\n                  error={!nameError}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  onChange={this.handleChild}\r\n                  variant=\"outlined\"\r\n                />\r\n                <TextField\r\n                  label='Год рождения'\r\n                  value={childBirthyear}\r\n                  fullWidth={true}\r\n                  name='childBirthyear'\r\n                  margin='dense'\r\n                  type='date'\r\n                  error={!yearError}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  onChange={this.handleChild}\r\n                  variant=\"outlined\"\r\n                />\r\n              </div>\r\n              <span>\r\n                <Tooltip title=\"Добавить\" placement=\"right\">\r\n                  <AddIcon onClick={this.addChild} />\r\n                </Tooltip>\r\n                <Tooltip title=\"Отменить\" placement=\"right\">\r\n                  <Clear onClick={() => this.setState({ newChildInput: false, childBirthyear: '', childName: '', nameError: true, yearError: true })} />\r\n                </Tooltip>\r\n              </span>\r\n            </NewChild>) : null}\r\n\r\n            {user_logged_id === user_id ? (\r\n              <ChildBtns>\r\n                <Button variant='contained' color='primary' onClick={newChildInput ? this.addChild : this.prepareChild}>Добавить</Button>\r\n              </ChildBtns>) : null}\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Контакты</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {this.createInput('Родной город', userInfo.city, 'city')}\r\n            {this.createInput('Области/края', userInfo.district, 'district')}\r\n            {this.createInput('Актуальный адрес', userInfo.adress, 'adress')}\r\n\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Образование</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {this.createInput('ВУЗ', userInfo.vuz, 'vuz')}\r\n            {this.createInput('Факультет', userInfo.fakultet, 'fakultet')}\r\n\r\n          </div>\r\n          {userInfo.sex === 'мужской' ?\r\n            <div className=\"personal-section\">\r\n              <div className=\"personal-section__header\">\r\n                <Typography variant='h6' color='primary'>Служба</Typography>\r\n                <hr />\r\n              </div>\r\n\r\n              {this.createInput('Страна', userInfo.army_country, 'army_country')}\r\n              {this.createInput('Род войск', userInfo.army_type, 'army_type')}\r\n            </div> : null}\r\n\r\n          {user_logged_id === user_id ? <Btn><Button type='submit' variant='contained' color='primary' onClick={this.handleSubmit}>Обновить данные</Button></Btn> : null}\r\n        </Form> : <Loader minHeight={400} color='primary' />}\r\n      </Paper >\r\n    )\r\n  }\r\n}\r\nconst Form = styled.form`\r\n  padding-bottom: 30px;\r\n  label {\r\n    text-transform: lowercase;\r\n  }\r\n  .user-header {\r\n    color: #1976d2;\r\n    font-size: 20px;\r\n  }\r\n  .user-position {\r\n    display: block;\r\n    margin-top: -10px;\r\n    & > div > div {\r\n      margin: 0;\r\n      padding: 0;\r\n      & > div > input {\r\n        color: rgba(0,0,0,.54);\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  fieldset {\r\n    border: none;\r\n  }\r\n`;\r\nconst Btn = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\nconst Children = styled.div`\r\n  width: 30%;\r\n  position: relative;\r\n  margin-bottom: 15px;\r\n  margin-right: 3%;\r\n\r\n  &:hover > svg {\r\n    display: block;\r\n  } \r\n\r\n  svg {\r\n    display: none;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    opacity: .5;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    &:hover {\r\n      opacity: .8;\r\n    }\r\n  }\r\n`;\r\nconst Childrens = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 20px 0 5px;\r\n  padding-left: 15px;\r\n`;\r\nconst NewChild = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  & > div {\r\n    width: 90%;\r\n  }\r\n\r\n  svg {\r\n    opacity: .5;\r\n    cursor: pointer;\r\n    font-size: 24px;\r\n    &:hover {\r\n      opacity: .8;\r\n    }\r\n  }\r\n`;\r\nconst ChildBtns = styled.div`\r\n  margin-top: 15px;\r\n  button {\r\n    margin-right: 15px;\r\n  }\r\n  padding-left: 15px;\r\n`;\r\nconst Naked = styled.div`\r\n  width: 100%;\r\n  display: inline-block;\r\n  & > div {\r\n    display: block;\r\n    margin-bottom: 10px;\r\n    padding-left: 37px;\r\n  }\r\n  & > div > div {\r\n    display: block;\r\n    pointer-events: none;\r\n    margin-top: -5px;\r\n  }\r\n  label {\r\n    font-size: 12px;\r\n    position: relative;\r\n    text-transform: lowercase;\r\n  }\r\n  .inline-input {\r\n    display: inline-flex;\r\n    margin-left: 10px;\r\n  }\r\n`;\r\nexport default withSnackbar(PersonalInfo);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { Fab as Fabulous } from '@material-ui/core';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst styles = theme => ({\r\n  fixed: {\r\n    position: 'fixed',\r\n    bottom: theme.spacing.unit * 2,\r\n    right: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nfunction Fab(props) {\r\n  const { classes } = props;\r\n  return (\r\n    <div>\r\n      <Tooltip title={props.title} aria-label={props.title}>\r\n        <Fabulous color={props.secondary ? 'secondary' : 'primary'} className={classes.fixed}>\r\n          <AddIcon />\r\n        </Fabulous>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n}\r\n\r\nFab.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Fab);","import React from 'react';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\nexport default function ModalWindow(props) {\r\n  return (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={props.handleClose}\r\n    >\r\n      {props.component}\r\n    </Modal>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport Select from 'react-select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography, FormControlLabel, Checkbox, NoSsr, TextField, Paper, Chip, MenuItem } from '@material-ui/core';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    height: 120,\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n      0.08,\r\n    ),\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n  },\r\n  singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  }\r\n});\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Menu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass IntegrationReactSelect extends React.Component {\r\n\r\n  render() {\r\n    const { classes, theme } = this.props;\r\n    \r\n    const users = this.props.users.map(user => ({\r\n      value: user.id,\r\n      label: `${user.name} ${user.surname}`,\r\n    }));\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <NoSsr>\r\n          <Select\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            textFieldProps={{\r\n              label: 'Сотрудники',\r\n              InputLabelProps: {\r\n                shrink: true,\r\n              },\r\n            }}\r\n            options={users}\r\n            components={components}\r\n            value={this.props.multi}\r\n            onChange={this.props.handleChange('multi')}\r\n            placeholder=\"Выберите сотрудников\"\r\n            isMulti\r\n          />\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                onChange={this.props.changeImportance}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Отметить как важную\"\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nIntegrationReactSelect.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(IntegrationReactSelect);","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { TimePicker, DatePicker } from 'material-ui-pickers';\r\n\r\nclass MaterialUIPickers extends React.Component {\r\n  render() {\r\n    return (\r\n      <Grid container justify=\"space-around\" style={{ paddingBottom: 30 }}>\r\n        <DatePicker\r\n          margin=\"normal\"\r\n          label=\"Выберите дату\"\r\n          value={this.props.selectedDate}\r\n          fullWidth={true}\r\n          onChange={this.props.handleDateChange}\r\n        />\r\n        <TimePicker\r\n          ampm={false}\r\n          margin=\"normal\"\r\n          label=\"Выберите время\"\r\n          value={this.props.selectedTime}\r\n          locale='ru'\r\n          fullWidth={true}\r\n          onChange={this.props.handleTimeChange}\r\n        />\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MaterialUIPickers;","import React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function TextInput(props) {\r\n  return (\r\n    <TextArea>\r\n      <TextField\r\n        label=\"Поставленная задача\"\r\n        multiline\r\n        variant=\"outlined\"\r\n        name='text'\r\n        onChange={props.handleTextChange}\r\n        value={props.text}\r\n        required\r\n      />\r\n    </TextArea>\r\n  )\r\n}\r\n\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n  height: 150px;\r\n\r\n  textarea {\r\n    max-height: 130px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Autocomplete from './Autocomplete';\r\nimport Pickers from './Pickers';\r\nimport TextInput from './TextInput';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  actionsContainer: {\r\n    marginBottom: theme.spacing.unit * 2,\r\n  },\r\n  resetContainer: {\r\n    padding: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nfunction getSteps() {\r\n  return ['Выберите сотрудника и важность', 'Назначьте дату и время', 'Поставьте задачу'];\r\n}\r\n\r\nfunction getStepContent(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return `Вы можете выбрать одного или более сотрудников. К тому же можете установить повышенную важность задачи.`;\r\n    case 1:\r\n      return 'Выберите дату и время в соответствующих полях.';\r\n    case 2:\r\n      return `Сотрудник сможет найти поставленные ему задачи в уведомлениях.`;\r\n    default:\r\n      return 'Unknown step';\r\n  }\r\n}\r\n\r\nclass VerticalLinearStepper extends React.Component {\r\n  state = {\r\n    activeStep: 0,\r\n  };\r\n\r\n  handleNext = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep + 1,\r\n    }));\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep - 1,\r\n    }));\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      activeStep: 0,\r\n    });\r\n  };\r\n\r\n  checkDisabled = (step, multi, date, time, text) => {\r\n    if (step === 0 && multi.length !== 0) return false;\r\n    if (step === 1 && typeof date === 'string' && typeof time === 'string') return false;\r\n    if (step === 2 && text.length > 0) return false;\r\n    \r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const { classes, users, multi, selectedTime, selectedDate, text } = this.props;\r\n    const steps = getSteps();\r\n    const { activeStep } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n          {steps.map((label, index) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n              <StepContent>\r\n                <Typography>{getStepContent(index)}</Typography>\r\n                <div className={classes.actionsContainer}>\r\n                  <div>\r\n                    <Button\r\n                      disabled={activeStep === 0}\r\n                      onClick={this.handleBack}\r\n                      className={classes.button}\r\n                    >\r\n                      Назад\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      onClick={activeStep === steps.length - 1 ? () => {this.props.handleSubmit(); this.handleNext()} : this.handleNext}\r\n                      className={classes.button}\r\n                      disabled={this.checkDisabled(activeStep, multi, selectedDate, selectedTime, text)} \r\n                    >\r\n                      {activeStep === steps.length - 1 ? 'Финиш' : 'Дальше'}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </StepContent>\r\n            </Step>\r\n          ))}\r\n                        \r\n        </Stepper>\r\n\r\n        {/* Контент */}\r\n        {activeStep === 0 \r\n          ? <Autocomplete \r\n              users={users} \r\n              multi={multi}\r\n              handleChange={this.props.handleChange}\r\n              changeImportance={this.props.changeImportance}\r\n            />\r\n          : activeStep === 1\r\n          ? <Pickers \r\n              selectedTime={selectedTime} \r\n              selectedDate={selectedDate}\r\n              handleDateChange={this.props.handleDateChange}\r\n              handleTimeChange={this.props.handleTimeChange}\r\n            />\r\n          : activeStep === 2\r\n          ? <TextInput\r\n              text={text}\r\n              handleTextChange={this.props.handleTextChange}\r\n            />\r\n          : null } \r\n\r\n        {activeStep === steps.length && (\r\n          <Paper square elevation={0} className={classes.resetContainer}>\r\n            <Typography>Задача успешно поставлена.</Typography>\r\n            <Button \r\n              onClick={() => {this.handleReset(); this.props.resetAll()}}\r\n              variant=\"contained\"               \r\n              color=\"primary\"\r\n              className={classes.button}\r\n            >\r\n              Поставить ещё задачу\r\n            </Button>\r\n            <Button \r\n              onClick={this.props.handleClose} \r\n              className={classes.button}\r\n            >\r\n              Закрыть\r\n            </Button>\r\n          </Paper>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVerticalLinearStepper.propTypes = {\r\n  classes: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(VerticalLinearStepper);","import React, { Component } from 'react';\r\nimport { Paper, Typography, Tooltip } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport API from '../functions/API';\r\nimport Stepper from './Stepper';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass NewTask extends Component {\r\n  state = {\r\n    selectedDate: new Date(),\r\n    selectedTime: new Date(),\r\n    users: [],\r\n    multi: [],\r\n    text: '',\r\n    importance: 0\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(users => this.setState({ users: users.data.filter(user => Number(user.id) !== this.props.user_logged_id) }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChange = name => value => this.setState({ [name]: value });\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n  handleTimeChange = time => this.setState({ selectedTime: time.format() });\r\n  handleTextChange = e => this.setState({ text: e.target.value })\r\n  changeImportance = () => this.setState({ importance: !this.state.importance });\r\n  resetAll = () => {\r\n    this.setState({\r\n      selectedDate: new Date(),\r\n      selectedTime: new Date(),\r\n      multi: [],\r\n      text: '',\r\n      importance: 0\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const { multi, selectedTime, selectedDate, text, importance } = this.state;\r\n    const formData = new FormData();\r\n    const self = this;\r\n    let forWho = [];\r\n    let date = new Date();\r\n    multi.forEach(user => forWho.push(`for${user.value}`));\r\n\r\n    formData.append('from', this.props.user_logged_id);\r\n    formData.append('date', date.toLocaleDateString());\r\n    formData.append('for', forWho.join(','));\r\n    formData.append('time', `${date.getHours() < 10 ? '0' + date.getHours() : date.getHours()}:${date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()}`);\r\n    formData.append('until_date', selectedDate.slice(0, 10));\r\n    formData.append('text', text);\r\n    formData.append('until_time', selectedTime.slice(11, 16));\r\n    formData.append('importance', importance ? '1' : '0');\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/add.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.props.onAddNewTask(tasks.data))\r\n          .then(() => self.props.enqueueSnackbar('Задача была поставлена', { variant: 'success' }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n  \r\n  render() {\r\n    const { users, multi, selectedTime, selectedDate, text } = this.state;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          <span className='closeNewTask' onClick={this.props.handleClose}>\r\n            <Tooltip title=\"Закрыть\" placement=\"left\"><CloseIcon /></Tooltip>\r\n          </span>\r\n          <Typography variant='h5'>Новая Задача</Typography>\r\n          <Stepper\r\n            users={users}\r\n            multi={multi}\r\n            text={text}\r\n            selectedTime={selectedTime}\r\n            selectedDate={selectedDate}\r\n            handleChange={this.handleChange}\r\n            handleTextChange={this.handleTextChange}\r\n            handleDateChange={this.handleDateChange}\r\n            handleTimeChange={this.handleTimeChange}\r\n            changeImportance={this.changeImportance}\r\n            resetAll={this.resetAll}\r\n            handleClose={this.props.handleClose}\r\n            handleSubmit={this.handleSubmit}\r\n          />\r\n        </Paper>\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  max-width: 600px;\r\n  min-height: 300px;\r\n  height: fit-content;\r\n  margin: auto;\r\n  background: #ffffff;\r\n  border-radius: 10px;\r\n  outline: none;\r\n\r\n  .listFor {\r\n    max-height: 220px;\r\n    margin-top: 20px;\r\n    overflow: auto;\r\n  }\r\n  .listFor::-webkit-scrollbar {\r\n    width: 10px;\r\n  }\r\n  .listFor::-webkit-scrollbar-track {\r\n    background-color: #ebebeb;\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n  }\r\n  .listFor::-webkit-scrollbar-thumb {\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n    background: #1976d2; \r\n  }\r\n\r\n  & > div {\r\n    height: fit-content;\r\n    padding: 20px 30px;\r\n  }\r\n   \r\n  .closeNewTask svg {\r\n    font-size: 30px;\r\n    color: #1976d2;\r\n    opacity: .6;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: 20px;\r\n    top: 20px;\r\n\r\n    :hover {\r\n      opacity: .8;\r\n      transition: .37s ease;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({ store: state }),\r\n  dispatch => ({\r\n    onAddNewTask: (task) => {\r\n      dispatch({ type: 'ADD_TASK', payload: task })\r\n    }\r\n  })\r\n)(withSnackbar(NewTask));","import React from 'react';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport { Typography, ExpansionPanelDetails, ExpansionPanelSummary, ExpansionPanel, Tooltip, Button } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\n\r\nexport default class Task extends React.Component {\r\n\r\n  getUserNames = (users) => {\r\n    let usersId = users.split(',');\r\n    let result = 'Для: ';\r\n\r\n    usersId.forEach(id => {\r\n      result += `${this.props.users.find(user => user.id === id.slice(3)).name} `;\r\n      result += `${this.props.users.find(user => user.id === id.slice(3)).surname}, `;\r\n    })\r\n    return result;\r\n  }\r\n\r\n  getAdresant = (id) => {\r\n    let initial = \"От: \";\r\n    // eslint-disable-next-line\r\n    if (id = this.props.user_logged_id) return initial += 'Вас';\r\n\r\n    if (this.props.users.length > 0) {\r\n      initial += this.props.users.find(user => user.id === this.props.task.from).name;\r\n      initial += ` ${this.props.users.find(user => user.id === this.props.task.from).surname}`;\r\n      return initial;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const now = moment(new Date()); //todays date\r\n    const end = moment(this.props.task.until_date); // another date\r\n    const difference = moment.duration(end.diff(now))._milliseconds;\r\n\r\n    return (\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <Typography variant='caption'>\r\n            <Typography variant='subtitle2' style={styles.flex}>\r\n              Получено: {this.props.task.date} в {`${this.props.task.time} `}\r\n              {this.props.task.importance === '1' ? <Tooltip title=\"Отмечено как 'Важное'\" placement=\"top-start\"><Icon><WarningIcon /></Icon></Tooltip> : null}\r\n            </Typography>\r\n            {this.getAdresant(this.props.task.from)}\r\n            <TaskStatus>\r\n              <Typography variant='caption' className={classNames({\r\n                'task-completed': this.props.task.status === '1',\r\n                'task-doing': this.props.task.status === '0',\r\n                'task-late': difference < 0\r\n              })}>\r\n                {this.props.task.status === '1' && difference > 0 ? \"Выполнена\" :\r\n                  this.props.task.status === '0' && difference > 0 ? \"Выполняется\" :\r\n                    \"Просрочена\"}\r\n              </Typography>\r\n            </TaskStatus>\r\n          </Typography>\r\n\r\n          <DeleteIcon onClick={() => this.props.handleConfirm(this.props.task.id)}>\r\n            <Tooltip title=\"Удалить\" placement=\"left\">\r\n              <Delete />\r\n            </Tooltip>\r\n          </DeleteIcon>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={styles.details}>\r\n          <Typography variant='h6'>Задача: {this.props.task.text}  </Typography>\r\n          <Footer>\r\n            <div>\r\n              <Typography variant='caption'>{this.props.users.length > 0 ? this.getUserNames(this.props.task.for).slice(0, -2) : null}</Typography>\r\n              <Typography variant='subtitle2'>Выполнить до: {this.props.task.until_date.split('-').reverse().join('.')}, {this.props.task.until_time}</Typography>\r\n            </div>\r\n            {this.props.task.status === '0' && this.props.task.from.includes(`for${this.props.user_logged_id}`) ?\r\n              difference < 0 ?\r\n                <Tooltip title=\"Нельзя выполнить просроченную задачу\" placement=\"top-start\" leaveDelay={200}>\r\n                  <span><Button disabled={true} variant='contained' color='primary'>Выполнить</Button></span>\r\n                </Tooltip> :\r\n                <Button\r\n                  onClick={() => this.props.handleCompleted(this.props.task.id)}\r\n                  variant='contained'\r\n                  color='primary'\r\n                >\r\n                  Выполнить</Button>\r\n              : null}\r\n          </Footer>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    )\r\n  }\r\n}\r\nconst styles = {\r\n  flex: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  details: {\r\n    flexDirection: 'column'\r\n  }\r\n}\r\nconst Icon = styled.div`\r\n  svg {\r\n    color: rgba(0,0,0,.15) !important;\r\n    margin-left: 8px;\r\n    font-size: 22px;\r\n  }\r\n`;\r\nconst DeleteIcon = styled.span`\r\n  svg {\r\n    font-size: 26px;\r\n    color: rgba(0,0,0,0.54);\r\n    right: 55px;\r\n    padding: 5px;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    position: absolute;\r\n  }\r\n`;\r\nconst Footer = styled.div`\r\n  margin-top: 30px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\nconst TaskStatus = styled.span`\r\n  .task-completed {\r\n    color: darkgreen;\r\n  }\r\n  .task-doing {\r\n    color: darkblue;\r\n  }\r\n  .task-late {\r\n    color: darkred;\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ConfirmDelete(props) {\r\n  return (\r\n    <Wrapper>\r\n      <Paper>\r\n        <Icon onClick={props.handleClose}>\r\n          <CloseIcon />\r\n        </Icon>\r\n        <Typography variant='body1'>Вы уверены, что хотите удалить задачу?</Typography>\r\n        <Typography variant='caption'>Вся информация по задаче будет удалена безвозвратно.</Typography>\r\n        <ButtonContainer>\r\n          <Button variant='contained' color='secondary' onClick={props.handleDelete}>Удалить</Button>\r\n          <Button variant='text' color='default' onClick={props.handleClose}>Отмена</Button>\r\n        </ButtonContainer>\r\n      </Paper>\r\n    </Wrapper>\r\n  )\r\n}\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  height: 200px;\r\n  width: 400px;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  outline: none;\r\n  & > div {\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    padding: 30px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n  }\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 30px;\r\n  button {\r\n    margin-right: 25px;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  svg {\r\n    cursor: pointer;\r\n    color: rgba(0,0,0,.54);\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n  }\r\n`","import React, { Component, Fragment } from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport Fab from '../Fab/Fab';\r\nimport Modal from '../Modal/Modal';\r\nimport NewTask from './NewTask';\r\nimport styled from 'styled-components';\r\nimport API from '../functions/API';\r\nimport Task from './Task';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport ConfirmDelete from './ConfirmDelete';\r\nimport Loader from '../Loader/Loader';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass Tasks extends Component {\r\n  state = {\r\n    open: false,\r\n    confirm: false,\r\n    preparedToDelete: null,\r\n    tasks: [],\r\n    initial: [],\r\n    users: [],\r\n    disabledButton: 1,\r\n    loading: true\r\n  }\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(tasks => this.props.getTasks(tasks.data))\r\n      .catch(err => console.log(err))\r\n\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(users => this.setState({ users: users.data }))\r\n      .then(() => this.setState({ loading: false }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleOpen = () => this.setState({ open: true });\r\n  handleConfirm = id => this.setState({ confirm: true, preparedToDelete: id });\r\n  handleClose = () => this.setState({ open: false, confirm: false, preparedToDelete: null });\r\n\r\n  handleCompleted = (id) => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    let date = new Date();\r\n    this.setState({ loading: true })\r\n    const done_date = date.toLocaleDateString();\r\n    const done_time = `${date.getHours() < 10 ? '0' + date.getHours() : date.getHours()}:${date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()}`;\r\n\r\n    formData.append('id', id);\r\n    formData.append('done_date', done_date);\r\n    formData.append('done_time', done_time);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/complete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${self.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.setState({ tasks: tasks.data, initial: tasks.data }))\r\n          .then(() => self.props.enqueueSnackbar('Задача отмечена как \"Выполненная\"', { variant: 'success' }))\r\n          .then(() => self.props.markAsCompleted(self.state.tasks))\r\n          .then(() => this.setState({ loading: false }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте снова', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n\r\n  handleFilter = (id, filter) => {\r\n    this.setState({ disabledButton: id });\r\n    let filtered = this.state.initial;\r\n\r\n    if (filter === 'initial') this.props.onFilter(this.state.initial);\r\n    if (filter === 'transfered') {\r\n      filtered = filtered.filter(item => Number(item.from) === this.props.user_logged_id);\r\n      this.props.onFilter(filtered);\r\n    }\r\n    if (filter === 'completed') {\r\n      filtered = filtered.filter(item => item.status === '1');\r\n      this.props.onFilter(filtered);\r\n    }\r\n  }\r\n\r\n  handleDelete = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    this.setState({ loading: true })\r\n    formData.append('id', this.state.preparedToDelete);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${self.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.setState({ tasks: tasks.data || [], initial: tasks.data || [] }))\r\n          .then(() => self.props.enqueueSnackbar('Задача успешно была удалена', { variant: 'info' }))\r\n          .then(() => self.props.onDeleteTask(self.state.preparedToDelete))\r\n          .then(() => self.handleClose())\r\n          .then(() => this.setState({ loading: false }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте снова', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { open, users, disabledButton } = this.state;\r\n\r\n    if (this.state.initial.length === 0) {\r\n      setTimeout(() => this.setState({ initial: this.props.store.tasks, tasks: this.props.store.tasks }), 0);\r\n    }\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          {!this.state.loading ?\r\n            <Fragment>\r\n              <Filters>\r\n                <Button\r\n                  onClick={() => this.handleFilter(1, 'initial')}\r\n                  variant={disabledButton === 1 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 1 ? true : false}>Все задачи</Button>\r\n                <Button\r\n                  color=\"primary\"\r\n                  onClick={() => this.handleFilter(2, 'transfered')}\r\n                  variant={disabledButton === 2 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 2 ? true : false}\r\n                >\r\n                  Переданные\r\n            </Button>\r\n                <Button\r\n                  onClick={() => this.handleFilter(3, 'completed')}\r\n                  variant={disabledButton === 3 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 3 ? true : false}\r\n                  color=\"secondary\">\r\n                  Выполненные\r\n            </Button>\r\n              </Filters>\r\n              {this.props.store.tasks.length > 0\r\n                ?\r\n                this.props.store.tasks.map(task =>\r\n                  <Task\r\n                    key={task.id}\r\n                    task={task}\r\n                    users={users}\r\n                    user_logged_id={this.props.user_logged_id}\r\n                    handleCompleted={this.handleCompleted}\r\n                    handleConfirm={this.handleConfirm.bind(this)}\r\n                  />)\r\n                :\r\n                <Typography className='no-tasks' variant='caption'>нет задач</Typography>}\r\n            </Fragment>\r\n            : <Loader minHeight={300} color='primary' />}\r\n        </Paper>\r\n\r\n\r\n        {/* Button to add task */}\r\n        <span onClick={this.handleOpen}><Fab title='Добавить задачу' /></span>\r\n\r\n        {/* Add new task modal */}\r\n        <Modal\r\n          open={open}\r\n          handleClose={this.handleClose.bind(this)}\r\n          component={\r\n            <NewTask\r\n              handleClose={this.handleClose.bind(this)}\r\n              user_logged_id={this.props.user_logged_id}\r\n            />}\r\n        />\r\n\r\n        {/* Confirm delete modal */}\r\n        <Modal\r\n          open={this.state.confirm}\r\n          handleClose={this.handleClose.bind(this)}\r\n          component={<ConfirmDelete\r\n            handleDelete={this.handleDelete}\r\n            handleClose={this.handleClose.bind(this)}\r\n          />}\r\n        />\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  .no-tasks {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    opacity: .37;\r\n    height: 300px;\r\n    font-size: 20px;\r\n  }\r\n`;\r\nconst Filters = styled.div`\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  button {\r\n    width: 33.3%;\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    markAsCompleted: (tasks) => {\r\n      dispatch({ type: 'MARK_COMPLETED', payload: tasks })\r\n    },\r\n    onDeleteTask: (task) => {\r\n      dispatch({ type: 'DELETE_TASK', payload: task })\r\n    },\r\n    onFilter: (tasks) => {\r\n      dispatch({ type: 'FILTER_TASKS', payload: tasks })\r\n    },\r\n    getTasks: (tasks) => {\r\n      dispatch({ type: 'FETCH_TASKS', payload: tasks })\r\n    }\r\n  })\r\n)(withSnackbar(Tasks));","import React, { Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Checkbox, Button, FormControlLabel, Typography, TextField, Tooltip } from '@material-ui/core';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function NewNews(props) {\r\n  let avatar = '';\r\n  if (!window.location.host.includes('localhost') && props.user.avatar) {\r\n    avatar = props.user.avatar;\r\n  } else {\r\n    avatar = props.user.avatar.slice(16);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n        <Header>\r\n          <Typography variant='button'>Новая новость</Typography> \r\n\r\n          <Tooltip placement='left' title='Закрыть'>\r\n            <Icon><CloseIcon onClick={props.closeNews} /></Icon>\r\n          </Tooltip>\r\n\r\n        </Header>\r\n        <Body>\r\n          <form action=\"\" method=\"POST\" onSubmit={props.submitNews}>\r\n            <Topic>\r\n              {props.user.avatar === ''\r\n                ? <div className='image' alt={`${props.user.name} ${props.user.surname}`} style={{ background: `url(${defaultAvatar}) no-repeat center/cover` }} />\r\n                : <div className='image' alt={`${props.user.name} ${props.user.surname}`} style={{ background: `url(${avatar}) no-repeat center/cover` }} />\r\n              }\r\n              <TextField\r\n                label=\"Заголовок\"\r\n                value={props.newNewsTopic}\r\n                onChange={props.handleChange}\r\n                error={props.invalidTopic}\r\n                variant=\"outlined\"\r\n                name='newNewsTopic'\r\n                type='text'\r\n                required\r\n              />\r\n            </Topic>\r\n            <TextArea>\r\n              <TextField\r\n                label=\"Текст новости\"\r\n                multiline\r\n                variant=\"outlined\"\r\n                name='newNewsText'\r\n                error={props.invalidText}\r\n                onChange={props.handleChange}\r\n                value={props.newNewsText}\r\n                required\r\n              />\r\n            </TextArea>\r\n            <Footer>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={props.newNewsImportance}\r\n                    onChange={props.changeImportance}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label=\"Отметить как важное\"\r\n              />\r\n              <Button onClick={props.submitNews} variant='contained' color='primary'>Добавить новость</Button>\r\n            </Footer>\r\n          </form>\r\n        </Body>\r\n      </Container>\r\n      <Wrapper onClick={props.closeNews}></Wrapper>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  background: rgba(0,0,0, .5);\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  z-index: 30;\r\n`;\r\nconst Container = styled.div`\r\n  background: #ffffff;\r\n  width: 600px;\r\n  position: fixed;\r\n  top: 150px;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  border-radius: 10px;\r\n  z-index: 37;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n\r\n  .close {\r\n    top: -5px;\r\n  }\r\n`;\r\nconst Header = styled.div`\r\n  display: flex;\r\n  height: 50px;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\nconst Body = styled.div`\r\n  .image {\r\n    width: 56px;\r\n    height: 56px;\r\n    border-radius: 50%;\r\n    display: inline-block;\r\n  }\r\n  padding: 0 25px;\r\n`;\r\nconst Footer = styled.div`\r\n  display: flex;\r\n  height: 90px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 85%;\r\n  margin-left: 15%;\r\n`;\r\nconst Topic = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 5px;\r\n\r\n  & > div {\r\n    width: 85%;\r\n  }\r\n`;\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n  height: 150px;\r\n\r\n  textarea {\r\n    max-height: 130px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 85%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 20px;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;","import React from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ConfirmDelete(props) {\r\n  return (\r\n    <Wrapper>\r\n      <Paper>\r\n        <Icon onClick={props.closeNews}>\r\n          <CloseIcon />\r\n        </Icon>\r\n        <Typography variant='body1'>Вы уверены, что хотите удалить новость?</Typography>\r\n        <Typography variant='caption'>Вся информация по новости будет удалена безвозвратно.</Typography>\r\n        <ButtonContainer>\r\n          <Button variant='contained' color='secondary' onClick={props.removeNews}>Удалить</Button>\r\n          <Button variant='text' color='default' onClick={props.closeNews}>Отмена</Button>\r\n        </ButtonContainer>\r\n      </Paper>\r\n      <Dialogue />\r\n    </Wrapper>\r\n  )\r\n}\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  height: 200px;\r\n  width: 400px;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  outline: none;\r\n  & > div {\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    padding: 30px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    z-index: 10;\r\n  }\r\n`;\r\nconst Dialogue = styled.section`\r\n  position: fixed !important;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: rgba(0,0,0,0.54);\r\n  width: 100vw;\r\n  height: 100vh !important;\r\n  z-index: 5;\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 30px;\r\n  button {\r\n    margin-right: 25px;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  svg {\r\n    cursor: pointer;\r\n    color: rgba(0,0,0,.54);\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n  }\r\n`","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport $ from 'jquery';\r\nimport SingleNews from './SingleNews';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Fab from './Fab/Fab';\r\nimport NewNews from './News/NewNews';\r\nimport API from './functions/API';\r\nimport { Paper, Button, Typography, TextField, Tooltip } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport defaultAvatar from './img/photos/images.png';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Loader from './Loader/Loader';\r\nimport ConfirmDelete from './News/ConfirmDelete';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass News extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      news: [],\r\n      newNews: false,\r\n      newNewsTopic: '',\r\n      newNewsText: '',\r\n      newNewsImportance: false,\r\n      editing: '',\r\n      singleNews: false,\r\n      singleNewsData: [],\r\n      singleNewsId: '',\r\n      invalidText: false,\r\n      invalidTopic: false,\r\n      loading: true,\r\n      confirmDelete: false,\r\n      preparedNewsId: ''\r\n    }\r\n\r\n    this.addLike = this.addLike.bind(this);\r\n    this.reloadComponent = this.reloadComponent.bind(this);\r\n    this.removeLike = this.removeLike.bind(this);\r\n    this.addNews = this.addNews.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.submitNews = this.submitNews.bind(this);\r\n    this.removeNews = this.removeNews.bind(this);\r\n    this.editNews = this.editNews.bind(this);\r\n    this.prepareNews = this.prepareNews.bind(this);\r\n    this.showNews = this.showNews.bind(this);\r\n    this.changeImportance = this.changeImportance.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  async reloadComponent(action) {\r\n    if (!action) await this.setState({ loading: true })\r\n    await fetch(`${API}/api/news/read.php`)\r\n      .then(response => response.json())\r\n      .then(news => this.props.onAddNews(news.records || []))\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n    this.setState({ invalidText: false, invalidTopic: false });\r\n  }\r\n\r\n  // добавляем лайк\r\n  addLike = (id, e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addlike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function () {\r\n        self.reloadComponent('like');\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // убираем лайк\r\n  removeLike = (id, e) => {\r\n    const self = this;\r\n    e.preventDefault();\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/removelike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.reloadComponent('like');\r\n        self.setState({ newNews: false });\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  submitNews = (e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    if (this.state.newNewsTopic !== '' && this.state.newNewsText !== '') {\r\n      const formData = new FormData();\r\n\r\n      formData.append('author', `${this.props.user.name} ${this.props.user.surname}`);\r\n      formData.append('title', this.state.newNewsTopic);\r\n      formData.append('text', this.state.newNewsText);\r\n      formData.append('date', new Date().toJSON().slice(0, 10).replace(/-/g, '.'));\r\n      formData.append('created', new Date().getTime());\r\n      formData.append('importance', this.state.newNewsImportance ? 1 : 0);\r\n      formData.append('author_id', this.props.user.id);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/news/submitnews.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          self.reloadComponent();\r\n          self.setState({ \r\n            newNews: !self.state.newNews, \r\n            newNewsText: '', \r\n            newNewsTopic: ''\r\n          });\r\n          self.props.enqueueSnackbar('Добавлена новая новость', { variant: 'success' })\r\n        },\r\n        error: function (err) {\r\n          console.log(err);\r\n          self.props.enqueueSnackbar('Не удалось добавить новость', { variant: 'error' })\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Необходимо заполнить все поля', { variant: 'warning' })\r\n      if (self.state.newNewsTopic === '') this.setState({ invalidTopic: true });\r\n      if (self.state.newNewsText === '') this.setState({ invalidText: true });\r\n    }\r\n  }\r\n\r\n  changeImportance = () => this.setState({ newNewsImportance: !this.state.newNewsImportance });\r\n\r\n  removeNews = () => {\r\n    this.setState({ editing: true });\r\n    var self = this;\r\n    const formData = new FormData();\r\n    formData.append('id', this.state.preparedNewsId);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function() {\r\n        self.reloadComponent();\r\n        self.setState({ editing: '', preparedNewsId: '', confirmDelete: false  });\r\n        self.props.enqueueSnackbar('Новость была удалена', { variant: 'info' });\r\n      },\r\n      error: function(err) {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Не удалось удалить новость', { variant: 'error' });\r\n      }\r\n    });\r\n  };\r\n\r\n  prepareNews = id => {\r\n    let title = this.props.store.news.find(news => news.id === id).title;\r\n    let text = this.props.store.news.find(news => news.id === id).text;\r\n    this.setState({ editing: id, newNewsTopic: title, newNewsText: text });\r\n  }\r\n\r\n  editNews = (e, id) => {\r\n    e.preventDefault();\r\n    var self = this;\r\n\r\n    if (this.state.newNewsTopic !== '' && this.state.newNewsText !== '') {\r\n      const formData = new FormData();\r\n      formData.append('id', id);\r\n      formData.append('title', this.state.newNewsTopic);\r\n      formData.append('text', this.state.newNewsText);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/news/edit.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function() {\r\n          self.reloadComponent();\r\n          setTimeout(() => self.setState({ editing: '' }), 200);\r\n          self.props.enqueueSnackbar('Новость была изменена', { variant: 'info' });\r\n        },\r\n        error: function (err) {\r\n          console.log(err);\r\n          self.props.enqueueSnackbar('Не удалось изменить новость', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      self.props.enqueueSnackbar('Нужно заполнить всё поля', { variant: 'warning' });\r\n      if (self.state.newNewsTopic === '') this.setState({ invalidTopic: true });\r\n      if (self.state.newNewsText === '') this.setState({ invalidText: true });\r\n    }\r\n  }\r\n\r\n  addNews = () => this.setState({ editing: '', newNews: !this.state.newNews, newNewsText: '', newNewsTopic: '' });\r\n\r\n  showNews(id) {\r\n    setTimeout(() => {\r\n      if (this.state.editing === '') this.setState({ singleNews: true, singleNewsId: id });\r\n    }, 100)\r\n  }\r\n\r\n  // закрываем новость \r\n  closeNews = () => {\r\n    this.setState({ \r\n      singleNews: false, \r\n      singleNewsId: '', \r\n      newNews: false, \r\n      likedBy: [], \r\n      preparedNewsId: '',\r\n      confirmDelete: false\r\n    });\r\n    this.reloadComponent('close');\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | находим правильную форму склонения лайков \r\n  |--------------------------------------------------\r\n  */\r\n getNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'отметок';\r\n    number %= 10;\r\n    if (number === 1) return 'отметка';\r\n    if (number >= 2 && number <= 4) return 'отметки';\r\n    return 'отметок';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getCommentsNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'комментариев';\r\n    number %= 10;\r\n    if (number === 1) return 'комментарий';\r\n    if (number >= 2 && number <= 4) return 'комментария';\r\n    return 'комментариев';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | создаёт надпись \"Помечено как важное\"\r\n  |--------------------------------------------------\r\n  */\r\n  createImportantBar = (margin) => {\r\n    const Important = styled.div`\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 0;\r\n      margin-top: ${margin}px;\r\n      svg {\r\n        color: rgba(0,0,0,.15);\r\n        margin-right: 5px;  \r\n      }\r\n    `;\r\n    return (\r\n      <Important>\r\n        <WarningIcon />\r\n        <Typography variant='caption'>Отмечено как \"Важное\"</Typography>            \r\n      </Important>\r\n    )\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Спрашиваем об удалении новости\r\n  |--------------------------------------------------\r\n  */\r\n  prepareDelete = (id) => {\r\n    this.setState({ confirmDelete: true, preparedNewsId: id })\r\n  }\r\n\r\n  handleAvatarRoute = avatar => {\r\n    return window.location.host.includes('localhost') ? avatar.slice(16) : avatar;\r\n  }\r\n\r\n  render() {\r\n    const { news, invalidText, invalidTopic, newNews, loading, newNewsText, newNewsTopic, editing, singleNews, singleNewsId, newNewsImportance } = this.state;\r\n    const { user } = this.props;\r\n    let avatar = null;\r\n    window.location.host.includes('localhost') && user.avatar ? avatar = user.avatar.slice(16) : avatar = user.avatar;\r\n    \r\n\r\n    if (this.state.news.length === 0) {\r\n      setTimeout(() => this.setState({ news: this.props.store.news }), 0);\r\n    }\r\n\r\n    return (\r\n      <Paper>\r\n        {loading ? <Loader minHeight={300} color='primary' /> :\r\n          this.props.store.news.length > 0 && this.props.store.news ? this.props.store.news.map((item, i) => {\r\n            return (\r\n              <NewsContainer key={i}>\r\n                <UserAvatar style={{ background: `url(${this.handleAvatarRoute(item.avatar) === '' ? defaultAvatar : this.handleAvatarRoute(item.avatar)}) no-repeat center/cover` }} />\r\n                <div>\r\n                  <NewsInfo>\r\n                    {user.id === item.author_id\r\n                      ?\r\n                      <Fragment>\r\n                        <Typography variant='caption'>\r\n                          <Typography variant='subtitle2'>Вы</Typography>\r\n                          {item.date}\r\n                        </Typography>\r\n                        <Icon>\r\n                          <Tooltip placement='left' title=\"Удалить\">\r\n                            <DeleteIcon onClick={() => this.prepareDelete(item.id)} />\r\n                          </Tooltip>\r\n                        </Icon>\r\n                      </Fragment>\r\n                      :\r\n                      <Typography variant='caption'>\r\n                        <Typography variant='subtitle2'>{item.author}</Typography>\r\n                        {item.date}\r\n                      </Typography>}\r\n                  </NewsInfo>\r\n\r\n                  {item.importance === '1' ? this.createImportantBar(0) : null}\r\n\r\n                  {editing !== item.id ?\r\n                    <Fragment>\r\n                      <Typography variant='button'>{item.title.replace(/&quot;/g, `\"`)}</Typography>\r\n                      <Body><Typography variant='body2'>{item.text.replace(/&quot;/g, `\"`)}</Typography></Body>\r\n                    </Fragment>\r\n                    :\r\n                    <form id='edit-news' action={`${API}/api/news/edit.php`} method=\"POST\" onSubmit={(e) => this.editNews(e, item.id)} >\r\n                      <TextField\r\n                        label=\"Заголовок\"\r\n                        value={newNewsTopic}\r\n                        onChange={this.handleChange}\r\n                        variant=\"outlined\"\r\n                        name='newNewsTopic'\r\n                        type='text'\r\n                        error={this.state.invalidTopic}\r\n                      />\r\n                      <TextArea>\r\n                        <TextField\r\n                          label=\"Текст новости\"\r\n                          multiline\r\n                          variant=\"outlined\"\r\n                          name='newNewsText'\r\n                          onChange={this.handleChange}\r\n                          value={newNewsText}\r\n                          error={this.state.invalidText}\r\n                        />\r\n                      </TextArea>\r\n                      <Button onClick={(e) => this.editNews(e, item.id)} variant='contained' color='primary'>Изменить</Button>\r\n                    </form>}\r\n                </div>\r\n\r\n                <Actions id='actions'>\r\n                  <p>{item.comments}</p>\r\n                  <Tooltip title={`${item.comments} ${this.getCommentsNoun(item.comments)}`} placement='top'>\r\n                    <FontAwesomeIcon onClick={editing === '' ? () => this.showNews(item.id) : null} icon=\"comments\" />\r\n                  </Tooltip>\r\n                  \r\n                    <p>{item.likes}</p>\r\n\r\n                  {!item.liked_by.includes(` ${user.id}`)\r\n                    ?\r\n                    <Tooltip title={`${item.likes} ${this.getNoun(item.likes)} \"Нравится\"`} placement='top'>\r\n                      <FontAwesomeIcon onClick={e => this.addLike(item.id, e)} icon=\"heart\" />\r\n                    </Tooltip>  \r\n                    :\r\n                    <Tooltip title={`${item.likes} ${this.getNoun(item.likes)} \"Нравится\"`} placement='top'>\r\n                      <FontAwesomeIcon onClick={e => this.removeLike(item.id, e)} icon=\"heart\" style={{ color: '#1976d2' }} />\r\n                    </Tooltip>  \r\n                  }\r\n                 {/*  <Tooltip title='Отправить сообщение' placement='top'>\r\n                    <FontAwesomeIcon data-id={item.id} onClick={this.addLike} icon=\"envelope\" style={{ marginLeft: '25px' }} />\r\n                  </Tooltip> */}\r\n\r\n                  {user.id === item.author_id\r\n                    ?\r\n                    <Tooltip title='Редактировать' placement='top'>\r\n                    <FontAwesomeIcon onClick={() => this.prepareNews(item.id)} icon=\"edit\" style={{ marginLeft: '25px' }} />\r\n                    </Tooltip>\r\n                    :\r\n                    null\r\n                  }\r\n                  <Button onClick={() => this.showNews(item.id)} variant='contained' color='primary' style={{ position: 'absolute', right: 40 }}>Читать</Button>\r\n                </Actions>\r\n\r\n              </NewsContainer>\r\n            )\r\n          }\r\n          ) : <NoNews><Typography variant='h6'>нет новостей</Typography></NoNews>}\r\n\r\n        <div onClick={this.addNews}><Fab title='Добавить новость' /></div>\r\n\r\n        {newNews ?\r\n          <NewNews\r\n            user={user}\r\n            newNewsTopic={newNewsTopic}\r\n            newNewsText={newNewsText}\r\n            invalidText={invalidText}\r\n            invalidTopic={invalidTopic}\r\n            submitNews={this.submitNews}\r\n            handleChange={this.handleChange}\r\n            changeImportance={this.changeImportance}\r\n            newNewsImportance={newNewsImportance}\r\n            closeNews={this.closeNews.bind(this)}\r\n          /> : null}\r\n\r\n        {singleNews\r\n          ?\r\n          <SingleNews\r\n            showNews={this.showNews}\r\n            closeNews={this.closeNews.bind(this)}\r\n            singleNewsId={singleNewsId}\r\n            news={news}\r\n            user={user}\r\n            getNoun={this.getNoun}\r\n            getCommentsNoun={this.getCommentsNoun}\r\n            reloadComponent={this.reloadComponent}\r\n            createImportantBar={this.createImportantBar} />\r\n          :\r\n          null}\r\n\r\n        {/* Подтверить удаление новости */}\r\n        {this.state.confirmDelete ?\r\n        <ConfirmDelete\r\n          closeNews={this.closeNews.bind(this)}\r\n          removeNews={this.removeNews.bind(this)}\r\n        /> : null}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst NewsContainer = styled.div`\r\n  position: relative;\r\n  padding: 20px 40px 20px 120px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  input {\r\n    padding: 10px 15px;\r\n  }\r\n  :hover {\r\n    background: rgba(0,0,0,0.015);\r\n    transition: .37s ease;\r\n  }\r\n`;\r\nconst Body = styled.div`\r\n  padding: 10px 15px;\r\n  margin-top: 10px;\r\n  background: rgba(0,0,0,0.015);\r\n`;\r\nconst NewsInfo = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n\r\n  span {\r\n    display: flex;\r\n    align-items: baseline;\r\n    h6 {\r\n      margin-right: 10px;\r\n      :after {\r\n        content: '\\00b7';\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n`;\r\nconst UserAvatar = styled.div`\r\n  position: absolute;\r\n  left: 20px;\r\n  top: 30px;\r\n  border-radius: 50%;\r\n  width: 80px;\r\n  height: 80px;\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  p {\r\n    margin-right: 5px;\r\n    color: #657786;\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin: 15px 0 10px;\r\n  height: 120px;\r\n\r\n  textarea {\r\n    max-height: 100px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst NoNews = styled.div`\r\n  height: 254px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .37;\r\n  margin-bottom: 20px;\r\n`;\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  svg {\r\n    color: rgba(0,0,0,0.54);\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    onAddNews: (news) => {\r\n      dispatch({ type: 'ADD_NEWS', payload: news })\r\n    }\r\n  })\r\n)(withSnackbar(News));","import React from 'react';\r\nimport Person from '@material-ui/icons/Person';\r\nimport Message from '@material-ui/icons/Message';\r\nimport Task from '@material-ui/icons/ListAlt';\r\nimport News from '@material-ui/icons/NewReleases';\r\nimport People from '@material-ui/icons/People';\r\n\r\nconst sections = [\r\n  {\r\n    value: 0,\r\n    section: 'id',\r\n    label: 'Моя страница',\r\n    img: <Person />,\r\n  },\r\n  { \r\n    value: 1,\r\n    section: 'messages',\r\n    label: 'Сообщения',\r\n    img: <Message />,\r\n  },\r\n  {\r\n    value: 2,\r\n    section: 'news',\r\n    label: 'Новости компании',\r\n    img: <News />,\r\n  },\r\n  {\r\n    value: 3,\r\n    section: 'tasks',\r\n    label: 'Входящие задачи',\r\n    img: <Task />,\r\n  },\r\n  {\r\n    value: 4,\r\n    section: 'colleagues',\r\n    label: 'Коллеги',\r\n    img: <People />,\r\n  }/* ,\r\n  {\r\n    section: 'learnings',\r\n    label: 'Обучение',\r\n    img: 'learning.png',\r\n  },\r\n  {\r\n    section: 'gallery',\r\n    label: 'Галерея',\r\n    img: 'gallery.png',\r\n  },\r\n  {\r\n    section: 'favourites',\r\n    label: 'Избранное',\r\n    img: 'favourites.png',\r\n  }, */\r\n];\r\n\r\nexport default sections;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport sections from './sections';\r\nimport styled from 'styled-components';\r\nimport _ from 'lodash';\r\nimport API from '../functions/API';\r\nimport { connect } from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nconst PATH = window.location.pathname;\r\nlet urlValue = _.find(sections, ['section', PATH.includes('id') ? 'id' : PATH.slice(1)]);\r\nif (urlValue) urlValue = urlValue.value;\r\n\r\nclass Navigation extends React.Component {\r\n  state = {\r\n    value: urlValue\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(tasks => this.props.getTasks(tasks.data))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChange = (event, value) => this.setState({ value });\r\n\r\n  countTask = () => {\r\n    let counter = 0;\r\n    const now = moment(new Date()); //todays date\r\n    const filtered = this.props.store.tasks.filter(task => Number(task.from) !== this.props.user_logged_id);\r\n    filtered.forEach(task => {\r\n      const end = moment(task.until_date); // another date\r\n      const difference = moment.duration(end.diff(now))._milliseconds;\r\n      if (task.status === '0' && difference > 0) counter++;\r\n    })\r\n    return counter;\r\n  }\r\n  render() {\r\n    const { value } = this.state;\r\n    const user = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <AppBar position=\"static\" color=\"default\">\r\n          <Tabs\r\n            value={value}\r\n            onChange={this.handleChange}\r\n            indicatorColor=\"primary\"\r\n            centered\r\n          >\r\n            {sections.map((section, i) =>\r\n              <Tab\r\n                key={i}\r\n                label={section.section === 'tasks' && this.countTask() > 0 ?\r\n                  <BadgeWrapper><Badge color=\"secondary\" badgeContent={this.countTask()}>\r\n                    {section.label}\r\n                  </Badge></BadgeWrapper>\r\n                  : section.label\r\n                }\r\n                onClick={() => user.handleChangeSection(section.section !== 'id' ? section.section : `id${user.user_logged_id}`)}\r\n                component={Link}\r\n                to={section.section !== 'id' ? section.section : `id${user.user_logged_id}`}\r\n                icon={section.img}\r\n              />\r\n            )}\r\n          </Tabs>\r\n        </AppBar>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  background-color: #ffffff;\r\n  margin-bottom: 4px;\r\n\r\n  a {\r\n    width: ${100 / sections.length}%\r\n  }\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\nconst BadgeWrapper = styled.div`\r\n  & > span > span {\r\n    top: -19px;\r\n    right: -5px;\r\n  }\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getTasks: (tasks) => {\r\n      dispatch({ type: 'FETCH_TASKS', payload: tasks})\r\n    }     \r\n  })\r\n)(Navigation);","import React, { Fragment } from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport styled from 'styled-components';\r\nimport moment from 'moment';\r\nimport NotReaded from '@material-ui/icons/Done';\r\nimport Readed from '@material-ui/icons/DoneAll';\r\n\r\nfunction Friend(props) {\r\n  let avatar = '';\r\n\r\n  if (window.location.host.includes('localhost') && props.friend.avatar) {\r\n    avatar = props.friend.avatar.slice(16);\r\n  } else {\r\n    avatar = props.friend.avatar;\r\n  }\r\n\r\n  const cropString = string => {\r\n    if (string.length < 137) return string;\r\n    return `${string.substring(0,137)}...`;\r\n  }\r\n\r\n  const getTime = (time, date, readed) => {\r\n    const fromDayStart = moment().startOf('day').format();\r\n    const dateFromNow = moment(date, \"DD.MM.YYYY\").format();\r\n    let icon = null;\r\n\r\n    readed === '1' ? icon = <Readed /> : icon = <NotReaded />;   \r\n    \r\n    /**\r\n    |--------------------------------------------------\r\n    | здесь проблема с моментом, считает почему с ошибкой на день\r\n    | внизу заккоментирован правильный ретурн по логике\r\n    |--------------------------------------------------\r\n    */\r\n    if (!moment(fromDayStart).isSame(dateFromNow, 'day')) {\r\n      return <Time>{/* props.friend.id === props.friend.message.user ? icon : null */}<Typography variant=\"subtitle2\" color='primary'>{moment(date, \"DD.MM.YYYY\").calendar().slice(0,-4)} {time}</Typography></Time>\r\n      /* return <Time>{icon}<Typography variant=\"subtitle2\" color='primary'>{moment(date).fromNow()}</Typography></Time> */\r\n    }\r\n\r\n    return (\r\n      <Time>{/* props.friend.id === props.friend.message.user ? icon : null */}<Typography variant=\"subtitle2\" color='primary'>{props.friend.message.time}</Typography></Time>\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <ListItem \r\n      onClick={() => props.openRoom(props.friend.hasOwnProperty('message') && props.friend.message ? props.friend.message.chat : 0, props.friend)}\r\n      button \r\n      TouchRippleProps={{ classes: { child: 'touch-ripple' }}} \r\n    >\r\n      <ListItemAvatar>\r\n        <Avatar\r\n          style={{ height: 50, width: 50 }}\r\n          alt={`${props.friend.name} ${props.friend.surname}`}\r\n          src={props.friend.avatar !== '' ? avatar : defaultAvatar}\r\n        />\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        inset\r\n        primary={<MessageHeader>\r\n          <Typography variant=\"subtitle1\">{`${props.friend.name} ${props.friend.surname}`}</Typography>\r\n          {props.friend.message ? \r\n            getTime(props.friend.message.time, props.friend.message.date, props.friend.message.readed)     \r\n          : null}\r\n        </MessageHeader>}\r\n        secondary={props.friend.message ?\r\n          <Fragment>\r\n            <Typography component=\"span\" style={{ display: 'inline' }} color=\"primary\">\r\n              {props.friend.id === props.friend.message.user ? `${props.friend.name} ${props.friend.surname}:` : 'Вы:'}\r\n            </Typography>\r\n            {` — ${cropString(props.friend.message.body)} `} \r\n          </Fragment>\r\n        : null}    \r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst Time = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  opacity: .87;\r\n  svg {\r\n    margin-right: 6px;\r\n    font-size: 17px;\r\n    color: #1976d2;\r\n  }\r\n`;\r\nconst MessageHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\nexport default Friend;","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function NoMessages() {\r\n  return (\r\n    <Container>\r\n      <Typography variant='body1' style={{ marginBottom: 12 }}>\r\n        Будьте первым, кто отправит сообщение в этом диалоге.\r\n      </Typography>\r\n      <Typography variant='body2'>\r\n        Чтобы написать коллеге, просто введите текст сообщения в строке снизу и нажмите клавишу \"Enter\".\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 30px 80px;\r\n  height: 250px;\r\n  display: flex;\r\n  opacity: .75;\r\n  text-align: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n`;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport styled from 'styled-components';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport { Typography, Tooltip } from '@material-ui/core';\r\nimport NotReaded from '@material-ui/icons/Done';\r\nimport Readed from '@material-ui/icons/DoneAll';\r\nimport moment from 'moment';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport Edit from '@material-ui/icons/Edit';\r\n\r\nfunction Message(props) { \r\n  let prodUrl = '';\r\n  /* if (!window.location.host.includes('localhost')) {\r\n    prodUrl = `frontend/public/`;\r\n  }  */\r\n\r\n  function isToday(date) {\r\n    const fromDayStart = moment().startOf('day').format();\r\n    const dateFromNow = moment(date, \"DD.MM.YYYY\").format();\r\n\r\n    if (!moment(fromDayStart).isSame(dateFromNow, 'day')) {\r\n      return moment(date, \"DD.MM.YYYY\").calendar().slice(0,-4);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const { room, user } = props.store;\r\n\r\n  return (\r\n    <Container style={ room.user.id !== props.message.user ? { flexDirection: 'row-reverse'} : {}}>\r\n      <Avatar \r\n        style={ room.user.id !== props.message.user \r\n          ? { background: `url(${prodUrl}${user[0].avatar ? user[0].avatar : defaultAvatar}) no-repeat center/cover` } \r\n          : { background: `url(${prodUrl}${room.user.avatar? room.user.avatar : defaultAvatar}) no-repeat center/cover` } \r\n        }>\r\n      </Avatar>  \r\n      <Body>\r\n        <Typography className='message-name' variant='subtitle2' color='secondary'>      \r\n          {room.user.id !== props.message.user \r\n            ? `Вы` \r\n            : `${room.user.name} ${room.user.surname}` }\r\n          \r\n          {room.user.id !== props.message.user \r\n            ? <span>\r\n                <Tooltip title='редактировать' placement='top'><Edit onClick={() => props.editMessage(props.message.body, props.message.id)} /></Tooltip>\r\n                <Tooltip title='удалить' placement='top'><Delete onClick={props.handleDelete} /></Tooltip>\r\n              </span> \r\n            : null}\r\n        </Typography>\r\n        <Typography variant='body2'>{props.message.body}</Typography>\r\n        <Typography className='message-time' variant='subtitle2' color='primary'>    \r\n          {isToday(props.message.date)} {props.message.time}\r\n          {props.message.edited === '1' ? ' отредактировано' : null}\r\n          {/* room.user.id !== props.message.user ? props.message.readed === '1' ? <Readed /> : <NotReaded /> : null */}\r\n        </Typography>\r\n      </Body>  \r\n    </Container>\r\n  )\r\n}\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n`;\r\nconst Avatar = styled.div`\r\n  min-width: 35px;\r\n  min-height: 35px;\r\n  border-radius: 50%;\r\n  margin: 0 15px;\r\n`;\r\nconst Body = styled.div`\r\n  max-width: 70%;\r\n  background: #fafafa;\r\n  padding: 10px 15px;\r\n  border-radius: 7px;\r\n  margin: 15px 0 0;\r\n  .message-time {\r\n    font-size: .7rem;\r\n    display: flex;\r\n    align-items: center;\r\n    svg {\r\n      font-size: 18px;\r\n      margin-left: 5px; \r\n    }\r\n  }\r\n  .message-name {\r\n    display: flex;\r\n    align-items: center;\r\n    min-width: 100px;\r\n    justify-content: space-between;\r\n    svg {\r\n      font-size: 16px;\r\n      margin-left: 5px; \r\n      color: rgba(0,0,0,.34);\r\n      cursor: pointer;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  })\r\n)(Message);","import React from 'react';\r\nimport NoMessages from './NoMessages';\r\nimport { connect } from 'react-redux';\r\nimport Message from './Message';\r\nimport styled from 'styled-components';\r\n\r\nfunction Messages(props) {\r\n  const { messages } = props.store;\r\n  \r\n  setTimeout(() => {\r\n    const messageContainer = document.getElementById(\"messages\");\r\n    if (messages.length !== 0 && messageContainer) messageContainer.scrollTop = messageContainer.scrollHeight; \r\n  }, 0);\r\n\r\n  return (\r\n    <Container id='messages'>\r\n      {messages.length !== 0 ? \r\n        messages.map(message => \r\n          <Message \r\n            key={message.id} \r\n            message={message} \r\n            editMessage={props.editMessage}\r\n            handleDelete={() => props.handleDelete(message.id)}\r\n          />\r\n        )\r\n      : <NoMessages />}\r\n    </Container>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst Container = styled.div`\r\n  overflow: auto;\r\n  margin-top: 5px;\r\n  max-height: 310px;\r\n  &::-webkit-scrollbar {\r\n    width: 2px;\r\n  } \r\n  &::-webkit-scrollbar-track {\r\n    background-color: #fafafa;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #1976d2; \r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  })\r\n)(Messages);","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Send from '@material-ui/icons/Send';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport default function SendMessageInput(props) {\r\n  return (\r\n    <Container onSubmit={props.sendMessage}>\r\n      <TextField\r\n        placeholder=\"Напишите сообщение...\"\r\n        fullWidth\r\n        autoFocus\r\n        margin='dense'\r\n        variant=\"filled\"\r\n        onChange={props.handleNewMessage}\r\n        value={props.message}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Отправить сообщение' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Отправить сообщение\"\r\n                  onClick={props.sendMessage}\r\n                >\r\n                  <Send />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.form`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n  & > div {\r\n    margin: 0;\r\n  }\r\n  & > div > div {\r\n    background: #fafafa !important;\r\n    :hover {\r\n      background: #fafafa;\r\n    }\r\n  }\r\n  input {\r\n    background: #fafafa;\r\n    padding: 13px 25px;\r\n    font-size: 14px;\r\n  }\r\n`;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport default function EditMessageInput(props) {\r\n  return (\r\n    <Container onSubmit={props.submitEdit}>\r\n      <TextField\r\n        placeholder=\"Отредактируйте сообщение...\"\r\n        fullWidth\r\n        autoFocus\r\n        margin='dense'\r\n        variant=\"filled\"\r\n        onChange={props.handleEdit}\r\n        value={props.message}\r\n        InputProps={{\r\n          startAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Редактировать' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Редактировать\"\r\n                  onClick={props.submitEdit}\r\n                >\r\n                  <Edit />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Закрыть' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Закрыть\"\r\n                  onClick={props.closeEditing}\r\n                >\r\n                  <Clear />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.form`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n  z-index: 10;\r\n  & > div {\r\n    margin: 0;\r\n  }\r\n  & > div > div {\r\n    background: #fafafa !important;\r\n    :hover {\r\n      background: #fafafa;\r\n    }\r\n  }\r\n  input {\r\n    background: #fafafa;\r\n    padding: 13px 25px;\r\n    font-size: 14px;\r\n  }\r\n`;","import React, { Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Typography, Button } from '@material-ui/core';\r\n\r\nexport default function DeleteModal(props) {\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n        <Typography variant='body2'>Вы уверены, что хотите удалить сообщение?</Typography>\r\n        <Typography variant='body2'>Это действие удалит его для всех участников чата.</Typography>    \r\n        <div>\r\n          <Button variant='text' color='primary' onClick={props.closeDelete} >Отмена</Button>\r\n          <Button variant='text' color='primary' onClick={props.submitDelete}>Удалить</Button>\r\n        </div>       \r\n      </Container>\r\n      <Overlay onClick={props.closeDelete} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 30px 20px 10px;\r\n  width: 320px;\r\n  height: 200px;\r\n  margin: auto;\r\n  z-index: 10;\r\n  background: #fafafa;\r\n  box-shadow: rgba(0,0,0,0.2) 0px 1px 3px 0px, rgba(0,0,0,0.14) 0px 1px 1px 0px, rgba(0,0,0,0.12) 0px 2px 1px -1px;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  & > div {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n`;\r\n\r\nconst Overlay = styled.div`\r\n  position: absolute;\r\n  top: 0; bottom: 0;\r\n  left: 0; right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 5;\r\n  background: rgba(0,0,0,.17);\r\n`;","import React, { Component } from 'react';\r\nimport API from '../functions/API';\r\nimport $ from 'jquery';\r\nimport styled from 'styled-components';\r\nimport { connect } from 'react-redux';\r\nimport Back from '@material-ui/icons/ArrowBack';\r\nimport { Typography } from '@material-ui/core';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport Messages from './Messages';\r\nimport Loader from '../Loader/Loader';\r\nimport SendMessageInput from './SendMessageInput';\r\nimport EditMessageInput from './EditMessageInput';\r\nimport DeleteModal from './DeleteModal';\r\nimport moment from 'moment';\r\n\r\nclass ChatRoom extends Component {\r\n  state = {\r\n    loading: true,\r\n    editing: false,\r\n    editText: '',\r\n    deleting: false,\r\n    newMessage: '',\r\n    deleteID: null,\r\n    editID: null\r\n  }\r\n  interval = null;\r\n\r\n  componentDidMount = () => {\r\n    this.getMessages();\r\n    this.interval = setInterval(() => this.getMessages(), 5000);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    clearInterval(this.interval);\r\n  }\r\n  \r\n  getMessages = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('chat', this.props.store.room.chat_id); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/read.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.setState({ loading: false });\r\n        if (res.messages) self.props.getMessages(res.messages);      \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n\r\n  }\r\n\r\n  handleEdit = (e) => this.setState({ editText: e.target.value });\r\n  editMessage = (message, id) => { if(!this.state.editing) this.setState({ editing: !this.state.editing, editText: message, editID: id })};\r\n  closeEditing = () =>  this.setState({ editing: false, editText: '', editID: null });\r\n\r\n  handleDelete = id => this.setState({ deleting: true, deleteID: id });\r\n  closeDelete = () =>  this.setState({ deleting: false, deleteID: null });\r\n\r\n  handleNewMessage = (e) => this.setState({ newMessage: e.target.value });\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Отправляет сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  sendMessage = (e) => {\r\n    if (e) e.preventDefault();\r\n\r\n    const { room, user } = this.props.store;  \r\n\r\n    // если в комнате нет чат-id то создадим чат\r\n    if (!room.hasOwnProperty('chat_id')) {\r\n      this.getMessageId(user[0].id, room.user.id);\r\n      return;\r\n    } else {\r\n      fetch(`${API}/api/message/get_id.php`)\r\n        .then(response => response.json())\r\n        .then(message => localStorage.setItem('message_id', message.message_id))\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    const formData = new FormData();\r\n    const self = this; \r\n    const message = {\r\n      user: user[0].id,\r\n      chat: room.hasOwnProperty('chat_id') ? room.chat_id : localStorage.getItem('chat_id'),\r\n      body: this.state.newMessage,\r\n      date: moment().format('L'),\r\n      time: moment().format('LT')\r\n    };\r\n\r\n    formData.append('chat', message.chat); \r\n    formData.append('user', message.user);\r\n    formData.append('body', message.body); \r\n    formData.append('date', message.date); \r\n    formData.append('time', message.time); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/send.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function(res) {\r\n        if (!self.props.store.chats.find(chat => chat.id === message.chat)) {\r\n          self.props.createChat(localStorage.getItem('users'), message.chat, message); \r\n        }  \r\n        self.props.addMessage(message);\r\n        self.setState({ newMessage: '' })\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | получаем @ID последнего сообщение в базе\r\n  |--------------------------------------------------\r\n  */\r\n  getMessageId = (user1, user2) => {\r\n    fetch(`${API}/api/message/get_id.php`)\r\n      .then(response => response.json())\r\n      .then(message => this.createChat(user1, user2, message.message_id))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Создаем чат\r\n  |--------------------------------------------------\r\n  */\r\n  createChat = (user1, user2, message_id) => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    const users = `id${user1}, id${user2}`;\r\n    const messageId = (Number(message_id) + 1).toString();\r\n    formData.append('users', users); \r\n    formData.append('last_msg', messageId); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/chat/create.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.props.assignChat(res.chat_id);\r\n        localStorage.setItem('message_id', messageId);\r\n        localStorage.setItem('chat_id', res.chat_id);\r\n        localStorage.setItem('users', `id${user2}`);\r\n        self.sendMessage(false);    \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | удаляем сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  submitDelete = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', this.state.deleteID); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function(res) {\r\n        self.props.deleteMessage(self.state.deleteID);\r\n        if (self.props.store.messages.length === 0) self.props.deleteChat(self.props.store.room.chat_id);\r\n        self.closeDelete();\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | редактируем сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  submitEdit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', this.state.editID); \r\n    formData.append('body', this.state.editText); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/edit.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: async () => {  \r\n        self.closeEditing();  \r\n        await self.getMessages();   \r\n        await self.props.editMessage(self.state.editID, self.state.editText); \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, editing, deleting } = this.state;\r\n    const { room } = this.props.store;\r\n\r\n    let avatar = null;\r\n    if (room.hasOwnProperty('user') && window.location.host.includes('localhost')) {\r\n      avatar = room.user.avatar.slice(16);\r\n    } else if (room.hasOwnProperty('user')) {\r\n      avatar = room.user.avatar;\r\n    }\r\n\r\n    return (\r\n      <Room>\r\n        <RoomHeader>\r\n          <Icon onClick={() => this.props.openRoom(0, room.user)}>\r\n            <Back />\r\n          </Icon>\r\n          {room.hasOwnProperty('user') ?\r\n          <div className='room-header__user'>\r\n            <div className='room-header__avatar' style={{ background: `url(${room.user.avatar !== '' ? avatar : defaultAvatar}) no-repeat center/cover`}}></div>\r\n            <div className='room-header__info'>\r\n              <Typography variant='subtitle2'>{room.user.name} {room.user.surname}</Typography>\r\n              <Typography variant='caption'>{room.user.position}</Typography>\r\n            </div>\r\n          </div> : null}\r\n        </RoomHeader>\r\n\r\n        {loading ? <Loader minHeight={250} color='primary' /> : <Messages \r\n          editMessage={this.editMessage.bind(this)} \r\n          handleDelete={this.handleDelete.bind(this)}\r\n        />}\r\n\r\n        {editing ? <EditMessageInput \r\n          closeEditing={this.closeEditing.bind(this)} \r\n          message={this.state.editText} \r\n          handleEdit={this.handleEdit.bind(this)}\r\n          submitEdit={this.submitEdit.bind(this)}\r\n        /> : null}\r\n\r\n        <SendMessageInput \r\n          message={this.state.newMessage}\r\n          sendMessage={this.sendMessage} \r\n          handleNewMessage={this.handleNewMessage}\r\n        />\r\n\r\n        {deleting ? <DeleteModal \r\n          closeDelete={this.closeDelete.bind(this)}\r\n          submitDelete={this.submitDelete.bind(this)}\r\n        /> : null}\r\n      </Room>\r\n    )\r\n  }\r\n}\r\nconst Room = styled.div`\r\n  overflow: hidden;\r\n  height: 432px;\r\n`;\r\nconst RoomHeader = styled.div`\r\n  background: #1976d2;\r\n  height: 60px;\r\n  color: rgba(255,255,255,.5);\r\n  display: flex;\r\n  align-items: center;\r\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 2px 1px -1px;\r\n\r\n  .room-header__user {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n  }\r\n  .room-header__avatar {\r\n    height: 45px;\r\n    width: 45px;\r\n    border-radius: 50%;\r\n    margin-right: 15px;\r\n  }\r\n  h6 {\r\n    color: #fff;\r\n    opacity: .85;\r\n  }\r\n  span {\r\n    color: rgba(255,255,255,.5);\r\n  }\r\n  :hover {\r\n    color: #fff;\r\n    transition: .37s ease;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  width: 60px;\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getMessages: (messages) => {\r\n      dispatch({ type: 'FETCH_MESSAGES', payload: messages })\r\n    },\r\n    createChat: (users, chat_id, message) => {\r\n      dispatch({ type: 'CREATE_CHAT', payload: { users: users, id: chat_id, message: message }})\r\n    },\r\n    assignChat: (chat_id) => {\r\n      dispatch({ type: 'ASSIGN_CHAT', payload: chat_id })\r\n    },\r\n    addMessage: (message) => {\r\n      dispatch({ type: 'ADD_MESSAGE', payload: message })\r\n    },\r\n    deleteMessage: (messageID) => {\r\n      dispatch({ type: 'DELETE_MESSAGE', payload: messageID })\r\n    },\r\n    editMessage: (messageID, messageBody) => {\r\n      dispatch({ type: 'EDIT_MESSAGE', payload: [messageID, messageBody] })\r\n    },\r\n    deleteChat: (chat_id) => {\r\n      dispatch({ type: 'DELETE_CHAT', payload: chat_id })\r\n    },\r\n  })\r\n)(ChatRoom);","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ChatItem from './ChatItem';\r\nimport API from '../functions/API';\r\nimport styled from 'styled-components';\r\nimport Search from '../FriendsList/Search';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Loader from '../Loader/Loader';\r\nimport { connect } from 'react-redux';\r\nimport { Transition, animated } from 'react-spring/renderprops';\r\nimport ChatRoom from './ChatRoom';\r\n\r\nclass FriendList extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      friends: [],\r\n      initial: [],\r\n      searchValue: '',\r\n      loading: true,\r\n      documentTitle: document.title,\r\n      completed: false,\r\n      openRoom: false,\r\n      index: 1,\r\n      initialAnimation: false,\r\n      direction: true\r\n    }\r\n\r\n    this.rebuildList = this.rebuildList.bind(this);\r\n  }\r\n    \r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(friends => {\r\n        const data = friends.data.filter(friend => friend.id !== this.props.user_id);\r\n        this.setState({ friends: data, initial: data, loading: false })\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleSearch = (e) => {\r\n    this.setState({ searchValue: e.target.value });\r\n    const searchValue = e.target.value.toLowerCase();\r\n\r\n    document.title = e.target.value || this.state.documentTitle;\r\n\r\n    let friends = this.state.initial;\r\n    friends = friends.filter(friend =>\r\n      friend.name.toLowerCase().includes(searchValue) ||\r\n      friend.surname.toLowerCase().includes(searchValue) ||\r\n      friend.position.toLowerCase().includes(searchValue)\r\n    );\r\n    this.setState({ friends });\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.title = this.state.documentTitle;\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | переделываем массив списка друзей исходя из полученных сообщений\r\n  |--------------------------------------------------\r\n  */\r\n  rebuildList = (chats) => {\r\n    let friends = this.state.friends;\r\n    chats.forEach(chat => {\r\n      friends.find(friend => `id${friend.id}` === chat.users).message = chat.message;\r\n    })\r\n    this.setState({ completed: true });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | переключаем и анимируем комнату чата и список\r\n  |--------------------------------------------------\r\n  */\r\n  openRoom = (chat, friend) => {\r\n    if (!this.state.initialAnimation) this.setState({ initialAnimation: true });\r\n\r\n    if (chat) {\r\n      this.props.openChat(chat, friend);\r\n    } else {\r\n      this.rebuildList(this.props.store.chats);\r\n      setTimeout(() => this.props.closeChat(friend), 570);\r\n    }\r\n\r\n    this.setState({ direction: !this.state.direction });\r\n\r\n    setTimeout(() => this.setState(state => ({\r\n      index: state.index === 1 ? 0 : 1,\r\n    })), 300)\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | массив того, что анимируем\r\n  |--------------------------------------------------\r\n  */\r\n  pages = [\r\n    style => (\r\n      <animated.div style={{ ...style, position: 'absolute', width: '100%' }}>\r\n        <ChatRoom\r\n          openRoom={this.openRoom.bind(this)}\r\n        />\r\n      </animated.div>\r\n    ),\r\n    style => (\r\n      <animated.div style={{ ...style, position: 'absolute', width: '100%' }}>\r\n        <Search\r\n          handleSearch={this.handleSearch}\r\n          searchValue={this.searchValue}\r\n        />\r\n        <List>\r\n          {this.state.friends.map(friend =>\r\n            <ChatItem\r\n              openRoom={this.openRoom.bind(this)}\r\n              key={friend.id}\r\n              friend={friend}\r\n            />\r\n          )}\r\n        </List>\r\n      </animated.div>\r\n    )\r\n  ]\r\n\r\n  getDirection = direction => {\r\n    if (direction) {\r\n      return 'translateX(100%)';\r\n    } else {\r\n      return 'translateX(-100%)';\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { chats } = this.props.store;\r\n    const { completed, friends, index, direction } = this.state;\r\n\r\n    if (chats.length > 0 && friends.length > 0 && !completed) {\r\n      this.rebuildList(chats);\r\n    }\r\n\r\n    return (\r\n      <Paper>\r\n        {this.state.loading ?\r\n          <Loader minHeight={370} color='primary' />\r\n          :\r\n          <FriendWrapper>\r\n            <Transition\r\n              reset\r\n              unique\r\n              native\r\n              items={index}\r\n              from={this.state.initialAnimation ? { transform: this.getDirection(direction) } : { zIndex: 1 }}\r\n              enter={{ transform: 'translateX(0%)' }}\r\n              leave={{ transform: this.getDirection(!direction) }}\r\n            >\r\n              {index => this.pages[index]}\r\n            </Transition>\r\n          </FriendWrapper>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst FriendWrapper = styled.div`\r\n  height: 432px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n  position: relative;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 5px;\r\n  } \r\n  &::-webkit-scrollbar-track {\r\n    background-color: #fafafa;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #1976d2; \r\n  }\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n  ul {\r\n    padding: 0;\r\n    padding-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({ store: state }),\r\n  dispatch => ({\r\n    openChat: (chat, friend) => {\r\n      dispatch({ type: 'OPEN_CHAT', payload: [chat, friend] })\r\n    },\r\n    closeChat: (friend) => {\r\n      dispatch({ type: 'CLOSE_CHAT', payload: [null, friend] })\r\n    },\r\n  })\r\n)(FriendList);","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function NoChats() {\r\n  return (\r\n    <Container>\r\n      <Typography variant='body1'>\r\n        Пока у вас нет ни одного диалога.\r\n      </Typography>\r\n      <Typography variant='body2'>\r\n        Выберите коллегу из списка ниже или введите в строке поиска имя, фамилию или занимающую должность коллеги, которому хотите отправить сообщение.\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 30px 40px;\r\n  height: 150px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-direction: column;\r\n`;","import React, { Component } from 'react';\r\nimport Dialogues from './Dialogues';\r\nimport API from '../functions/API';\r\nimport $ from 'jquery';\r\nimport Loader from '../Loader/Loader';\r\nimport { connect } from 'react-redux';\r\nimport { Paper } from '@material-ui/core';\r\nimport NoChats from './NoChats';\r\n\r\nclass Chat extends Component {\r\n  state = {\r\n    loading: true,\r\n    user: []\r\n  }\r\n\r\n  fetchChats(id) {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', id); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/chat/read.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.setState({ loading: false });\r\n\r\n        if (res.chats) {\r\n          let result = res.chats;\r\n          result.forEach(item => {\r\n            item.users = item.users.replace(id, '').replace(',', '').trim();\r\n          }) \r\n          self.props.getChats(res.chats);\r\n        }\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, user } = this.state;\r\n    const chats = this.props.store.chats;\r\n    const userStore = this.props.store.user;\r\n\r\n    if (userStore.length > 0 && user.length === 0) {\r\n      this.setState({ user: userStore });\r\n      this.fetchChats(`id${userStore[0].id}`);\r\n    }\r\n    \r\n    return (\r\n      <Paper>\r\n\r\n        {chats.length === 0 ? <NoChats /> : null}\r\n\r\n        {!loading ?\r\n          <Dialogues\r\n            user_id={this.props.user.id}\r\n          />\r\n          : <Loader minHeight={300} color='primary' />}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getChats: (chats) => {\r\n      dispatch({ type: 'FETCH_CHATS', payload: chats })\r\n    }\r\n  })\r\n)(Chat);\r\n","import React, { Component, Fragment } from 'react';\r\nimport './css/MainPage.css'\r\nimport Header from './Header';\r\nimport MainpageHeader from './MainpageHeader';\r\nimport SideNews from './SideNews';\r\nimport Cookie from './functions/Cookie';\r\nimport FriendsList from './FriendsList/FriendsList';\r\nimport PersonalInfo from './PersonalInfo';\r\nimport Tasks from './Tasks/Tasks';\r\nimport News from './News';\r\nimport Nav from './Navigation/Navigation';\r\nimport styled from 'styled-components';\r\nimport Chat from './Chat/Chat';\r\nimport { connect } from 'react-redux';\r\n\r\nclass MainPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user_id: 0,\r\n      user_logged_id: 0,\r\n      user: [],\r\n      initialUser: [],\r\n      section: window.location.pathname.slice(1),\r\n      loading: true\r\n    }\r\n    this.handleChangeUrl      = this.handleChangeUrl.bind(this);  \r\n    this.handleChangeSection  = this.handleChangeSection.bind(this);  \r\n    this.handleChangeUserId   = this.handleChangeUserId.bind(this);\r\n    this.switchComponent      = this.switchComponent.bind(this);  \r\n  }\r\n\r\n  handleChangeUrl() { \r\n    this.setState({ user_id: this.state.user_logged_id });\r\n    \r\n    fetch(`http://akvatory.local/api/user/read_one.php?id=${this.state.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChangeSection(section) {\r\n    this.setState({ section });\r\n    this.handleChangeUrl();\r\n  }\r\n\r\n  handleChangeUserId(id) {\r\n    this.setState({ user_id: id, section: `id${id}`})\r\n    fetch(`http://akvatory.local/api/user/read_one.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n  }\r\n\r\n  componentWillMount() {\r\n    const cookie = new Cookie();\r\n    const cookie_id = cookie.getCookie('user_id');\r\n    this.setState({ user_id: parseInt(cookie_id), user_logged_id: parseInt(cookie_id) });\r\n    \r\n    if (window.location.pathname.includes('id')) {\r\n      const current_id = window.location.pathname.slice(3);\r\n      this.setState({ user_id: parseInt(current_id)});\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`http://akvatory.local/api/user/read_one.php?id=${this.state.user_id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user: user, initialUser: user, loading: false }))\r\n      .then(() => this.props.getUser(this.state.initialUser))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  switchComponent(){\r\n    switch(this.state.section) {\r\n      case `id${this.state.user_id}`:\r\n        return <PersonalInfo user_id={this.state.user_id} user_logged_id={this.state.user_logged_id} user={this.state.user} />\r\n      case 'messages':\r\n        return <Chat user={this.state.user} />;\r\n      case 'news':\r\n        return <News user={this.state.user} />;\r\n      case 'tasks':\r\n        return <Tasks user_logged_id={this.state.user_logged_id} />;\r\n      case 'colleagues':\r\n        return (\r\n            <FriendsList \r\n              handleChangeUserId={this.handleChangeUserId} \r\n              user_id={this.state.user_logged_id}\r\n            />\r\n        )\r\n /*      case 'learnings':\r\n        return 'learnings';\r\n      case 'gallery':\r\n        return 'gallery';\r\n      case 'favourites':\r\n        return 'favourites'; */\r\n      default: return null;\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    const { user_id, user_logged_id, user, initialUser, loading } = this.state;\r\n    \r\n    if (user.error === 1) { window.location.href = '/404';}\r\n    \r\n    return (\r\n      <Fragment>\r\n        <MainpageHeader \r\n          user={initialUser} loading={loading}\r\n        />\r\n        <div className=\"container\">\r\n          <Header />\r\n          <Nav \r\n            user_id={user_id}\r\n            user_logged_id={user_logged_id} \r\n            handleChangeUrl={this.handleChangeUrl} \r\n            handleChangeSection={this.handleChangeSection}\r\n          />\r\n          <MainSection>\r\n            <SideNews \r\n              handleChangeSection={this.handleChangeSection} \r\n              user={user} \r\n            />\r\n            <div className=\"main-page-container\">\r\n              {this.switchComponent()}\r\n            </div>\r\n          </MainSection>  \r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst MainSection = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    getUser: user => {\r\n      dispatch({ type: 'LOGGED_IN', payload: user })\r\n    }\r\n  })\r\n)(MainPage);","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport { withSnackbar } from 'notistack';\r\nimport API from './functions/API';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport { Button, Typography, TextField } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nclass ForgetPassword extends Component {\r\n  state = {\r\n    credentials: ''\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    if (this.state.credentials) {\r\n      const formData = new FormData();\r\n      formData.append('credentials', this.state.credentials);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/forget.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n\r\n          if (response === 1) {\r\n            self.props.enqueueSnackbar('На указанный вами при регистрации email - были отправлены рекомендации по восстановлению пароля', { variant: 'info' });\r\n            self.props.forgetPassword();\r\n          } else {\r\n            self.props.enqueueSnackbar('К сожалению, такого логина или email - не существует. Проверьте правильность введенных данных', { variant: 'info' });\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, введите, логин или пароль', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Wrapper>\r\n          <Icon>\r\n            <CloseIcon onClick={this.props.forgetPassword} />\r\n          </Icon>\r\n          <Typography variant='subtitle2'>Восстановление пароля.</Typography>\r\n          <TextField\r\n            label=\"E-mail или логин\"\r\n            variant=\"outlined\"\r\n            name='login'\r\n            fullWidth\r\n            margin='dense'\r\n            error={this.state.credential}\r\n            onChange={e => this.setState({ credentials: e.target.value })}\r\n            value={this.state.username}\r\n          />\r\n          <Button variant='contained' color='primary' onClick={this.handleSubmit}>Отправить</Button>\r\n        </Wrapper>\r\n        <div className=\"black-wrapper black-wrapper__this\" onClick={this.props.forgetPassword}></div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  background: #fff;\r\n  z-index: 100;\r\n  width: 500px;\r\n  height: 258px;\r\n  left: 0;\r\n  right: 0;\r\n  position: fixed;\r\n  top: 25%;\r\n  margin: auto;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  justify-content: space-evenly;\r\n  padding: 30px;\r\n`;\r\nconst Icon = styled.div`\r\n  position: absolute;\r\n  right: 25px;\r\n  top: 15px;  \r\n  cursor: pointer;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\nexport default withSnackbar(ForgetPassword);\r\n","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport Cookie from './functions/Cookie';\r\nimport ForgetPassword from './ForgetPassword';\r\nimport { connect } from 'react-redux';\r\nimport API from './functions/API';\r\nimport { Button } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport { withSnackbar } from 'notistack';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nclass SignupForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      login: '',\r\n      password: '',\r\n      isForget: '',\r\n      isPassHidden: false,\r\n      invalidText: false,\r\n      invalidPass: false\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    this.setState({ invalidText: false, invalidPass: false })\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  forgetPassword = () => this.setState({ isForget: !this.state.isForget });\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    if (this.state.login !== '' && this.state.password.length >= 8) {\r\n      const formData = new FormData();\r\n\r\n      formData.append('login', this.state.login);\r\n      formData.append('password', this.state.password);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/signup.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n          let user_id = res.user_id;\r\n          let cookie = new Cookie();\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось войти. Проверьте правильность введенных данных', { variant: 'warning' });\r\n              break;\r\n            case 0.5:\r\n              self.props.enqueueSnackbar('К сожалению, ваша учетная запись ещё не подтверждена, попробуйте войти позже', { variant: 'info' });\r\n              break;\r\n            case 1:\r\n              cookie.setCookie('user_id', user_id, 30);\r\n              localStorage.setItem('user_id', user_id);\r\n              window.location.href = `/`;\r\n              break;\r\n            default: break;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, заполните все поля', { variant: 'warning' });\r\n      if (this.state.password.length < 8) this.setState({ invalidPass: true })\r\n      if (!this.state.login) this.setState({ invalidText: true })\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"form-container\" style={{ 'paddingBottom': '45px' }}>\r\n          <form className=\"registerForm\" id=\"register\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n\r\n            <TextField\r\n              label=\"Логин или email\"\r\n              variant=\"outlined\"\r\n              name='login'\r\n              fullWidth\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.username}\r\n              error={this.state.invalidText}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='password'\r\n              error={this.state.invalidPass}\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.invalidPass ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <Buttons>\r\n              <Button variant='text' color='default' onClick={this.forgetPassword}>Забыли пароль?</Button>\r\n              <Button variant='contained' color='primary' type='submit'>Войти</Button>\r\n            </Buttons>\r\n            {this.state.isForget ? <ForgetPassword forgetPassword={this.forgetPassword} /> : null}\r\n          </form>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst Buttons = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 35px;\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    global: state\r\n  }),\r\n  dispatch => ({\r\n    login: (user) => {\r\n      dispatch({ type: 'LOGGED_IN', payload: user })\r\n    }\r\n  })\r\n)(withSnackbar(SignupForm));","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport { withSnackbar } from 'notistack';\r\nimport API from './functions/API';\r\nimport { Button } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport Loader from './Loader/Loader';\r\n\r\nclass RegisterForm extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      email: '',\r\n      login: '',\r\n      password: '',\r\n      confirmed: '',\r\n      isEmailValid: '',\r\n      isPassHidden: false, \r\n      entered: false,\r\n      loading: false\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.validateEmail = this.validateEmail.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showPassword = this.showPassword.bind(this);\r\n  }\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      entered: false\r\n    })\r\n    // если вводится е-мэйл то прогоняем через функцию\r\n    if (event.target.name === 'email') {\r\n      this.validateEmail(event.target.value);\r\n      // если вводимое значение пустое - то убираем подсказку \r\n      if (event.target.value === '') {\r\n        this.setState({ isEmailValid: '' });\r\n      }\r\n    }\r\n  }\r\n\r\n  validateEmail(email) {\r\n    // eslint-disable-next-line\r\n    const regExp = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    regExp.test(email) ? this.setState({ isEmailValid: true }) : this.setState({ isEmailValid: false });\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n    this.setState({ entered: true, loading: true });\r\n\r\n    if (this.state.login && this.state.isEmailValid && this.state.password) {\r\n      const formData = new FormData();\r\n\r\n      formData.append('login', this.state.login);\r\n      formData.append('email', this.state.email);\r\n      formData.append('password', this.state.password);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/register.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          const response = res.result;\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось зарегистрироватьcя.', { variant: 'error' });\r\n              break;\r\n            case 1:\r\n              self.props.enqueueSnackbar('Вы успешно зарегистрировались, как только вашу учетную запись подтвердят - вы сможете начать пользоваться сервисом. Вы получите уведомление по указанной при регистрации почте.', { variant: 'success' });\r\n              self.setState({ \r\n                email: '',\r\n                login: '',\r\n                password: '',\r\n                confirmed: '',\r\n                isEmailValid: '',\r\n                isPassHidden: false, \r\n                entered: false,\r\n                loading: false\r\n              })\r\n              break;\r\n            case 2:\r\n              self.props.enqueueSnackbar('Пользователь с таким логином или email уже существует', { variant: 'warning' });\r\n              break;\r\n            default: return null;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка регистрации', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, заполните все поля', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  showPassword() {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"form-container\">\r\n          <form id=\"register\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n            <TextField\r\n              label=\"Логин или email\"\r\n              variant=\"outlined\"\r\n              name='login'\r\n              fullWidth\r\n              error={this.state.entered && !this.state.login}\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.login}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='password'\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              error={this.state.entered && this.state.password.length < 8}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.password.length > 0 && this.state.password.length < 8 ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <TextField\r\n              label=\"Повторите пароль\"\r\n              variant=\"outlined\"\r\n              name='confirmed'\r\n              fullWidth\r\n              margin='dense'\r\n              type='password'\r\n              error={this.state.entered && this.state.confirmed.length < 8}\r\n              onChange={this.handleChange}\r\n              value={this.state.confirmed}\r\n            />\r\n\r\n            {this.state.password !== this.state.confirmed && this.state.confirmed !== '' ? <FormHelperText style={{ color: '#f44336' }}>Пароль должны совпадать</FormHelperText> : null}\r\n\r\n            <TextField\r\n              label=\"Электронная почта\"\r\n              variant=\"outlined\"\r\n              name='email'\r\n              fullWidth\r\n              error={this.state.entered && !this.state.isEmailValid && !this.state.email.lentgh}\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            />\r\n            {!this.state.isEmailValid && this.state.email ? <FormHelperText style={{ color: '#f44336' }}>Пожалуйста, введите настоящий email адрес</FormHelperText> : ''}\r\n\r\n            <BtnWrapper>\r\n              <Button variant='contained' color='primary' type='submit' disabled={this.state.loading}> \r\n                {this.state.loading ? <Loader minHeight={30} color='secondary' /> : 'Зарегистрироваться'}  \r\n              </Button>\r\n            </BtnWrapper>\r\n          </form>\r\n\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nconst BtnWrapper = styled.div`\r\n  button {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 30px;\r\n    margin: auto;\r\n    width: fit-content;\r\n    min-width: 199px;\r\n    background: #1976d2 !important;\r\n    & > span > div > div {\r\n      height: 25px !important;\r\n      width: 25px !important;\r\n    }\r\n  }\r\n`;\r\nexport default withSnackbar(RegisterForm);","import React from 'react';\r\nimport './css/BgBubbles.css';\r\n\r\nconst BgBubbles = () => {\r\n  return (\r\n    <ul className=\"bg-bubbles\">\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default BgBubbles;","import React, { Component } from 'react';\nimport SignupForm from './SignupForm';\nimport RegisterForm from './RegisterForm';\nimport Header from './Header';\nimport Typography from '@material-ui/core/Typography';\nimport BgBubbles from './BgBubbles';\nimport './css/LoginForms.css';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      whichForm: false,\n    }\n    this.changeForm = this.changeForm.bind(this);\n  }\n\n  changeForm() {\n    this.setState({whichForm: !this.state.whichForm});\n  }\n\n  render() {\n    return (\n      <div className=\"login-screen\">\n        <Header />\n        <div className=\"login-screen-container\">\n          <p className=\"login-screen-greetings\">Здравствуйте</p>  \n          <div className=\"login-button-container\">\n            <button className={this.state.whichForm ? 'login-screen-button login-screen-button-enabled' : 'login-screen-button'} onClick={this.changeForm}>\n              <Typography variant='button'>Войти</Typography>\n            </button>\n            <button className={this.state.whichForm ? 'login-screen-button' : 'login-screen-button login-screen-button-enabled'} onClick={this.changeForm}>\n              <Typography variant='button'>Зарегистрироваться</Typography>\n            </button>\n          </div>              \n          {this.state.whichForm ? <RegisterForm /> : <SignupForm />}                        \n        </div>\n        <BgBubbles /> \n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React, { Component } from 'react';\r\nimport Header from './Header';\r\nimport BgBubbles from './BgBubbles';\r\nimport './css/LoginForms.css';\r\nimport './css/Approved.css';\r\n\r\nclass Approved extends Component {\r\n  goToMain = () => window.location.href = '/';\r\n  closeWindow = () => window.close();\r\n\r\n  render() {\r\n   return (\r\n      <div className=\"login-screen\">\r\n        <Header />\r\n        <div className=\"approved-container\">\r\n          <h1>Регистрация пользователя была подтверждена.</h1>\r\n          <button onClick={this.goToMain}>На главную</button>                   \r\n        </div>\r\n        <BgBubbles /> \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Approved;","import React, { Component } from 'react';\r\nimport Header from './Header';\r\nimport BgBubbles from './BgBubbles';\r\nimport $ from 'jquery';\r\nimport './css/LoginForms.css';\r\nimport './css/Restore.css';\r\nimport { withSnackbar } from 'notistack';\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport API from './functions/API';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\n\r\nclass Restore extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pw: '',\r\n      confirmed: '',\r\n      isPassHidden: false,\r\n      entered: false\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      entered: false\r\n    })\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    this.setState({ entered: true });\r\n\r\n    if (self.state.pw === self.state.confirmed && self.state.pw && self.state.confirmed) {\r\n      self.setState({ modal: false });\r\n      e.preventDefault();\r\n      const formData = new FormData();\r\n\r\n      function getUrlVars() {\r\n        let vars = {};\r\n        // eslint-disable-next-line\r\n        let parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\r\n          vars[key] = value;\r\n        });\r\n        return vars;\r\n      }\r\n\r\n      formData.append('password', $('input[name=\"pw\"]').val());\r\n      formData.append('auth', getUrlVars()['auth'])\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/restore.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось изменить пароль', { variant: 'error' });\r\n              break;\r\n            case 1:\r\n              self.props.enqueueSnackbar('Поздравляем, успешно удалось сменить пароль - теперь вы можете войти в систему', { variant: 'success' });\r\n              setTimeout(() => window.location.href = 'login', 237);\r\n              break;\r\n            default: return null;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login-screen\">\r\n        <Header />\r\n        <div className=\"form-container restore-container\">\r\n          <Typography variant='h6'>Введите новый пароль.</Typography>\r\n          <Typography variant='caption'> Выбор более безопасного пароля поможет обеспечить защиту вашей личной информации.</Typography>\r\n\r\n          <InputWrapper>\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='pw'\r\n              value={this.state.pw}\r\n              onChange={this.handleChange}\r\n              error={this.state.pw.length > 0 && this.state.pw.length < 8}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.pw.length > 0 && this.state.pw.length < 8 ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <TextField\r\n              label=\"Повторите пароль\"\r\n              variant=\"outlined\"\r\n              name='confirmed'\r\n              fullWidth\r\n              margin='dense'\r\n              type='password'\r\n              error={this.state.entered && this.state.confirmed.length < 8 && this.state.confirmed.length > 0}\r\n              onChange={this.handleChange}\r\n              value={this.state.confirmed}\r\n            />\r\n            {this.state.pw !== this.state.confirmed && this.state.confirmed ? <FormHelperText style={{ color: '#f44336' }}>Пароль должны совпадать</FormHelperText> : null}\r\n          </InputWrapper>\r\n\r\n          <BtnContainer>\r\n            <Button variant='contained' color='primary' onClick={this.handleSubmit}>Сменить пароль</Button>\r\n          </BtnContainer>\r\n        </div>\r\n        <BgBubbles />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst BtnContainer = styled.div`\r\n  button {\r\n    position: absolute;\r\n    bottom: 35px;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    width: fit-content;\r\n  }\r\n`;\r\nconst InputWrapper = styled.div`\r\n  margin-top: 15px;\r\n`;\r\nexport default withSnackbar(Restore);","import React, { Component } from 'react';\r\nimport './css/404.css';\r\n\r\nclass Page404 extends Component {\r\n\r\n  goToMain = () => window.location.href = '/';\r\n\r\n  render() {\r\n    return (\r\n      <main>\r\n        <div className=\"loading wave\">\r\n          404\r\n        </div>\r\n        <div className=\"not-found wave\">\r\n          Страница не найдена\r\n        </div> \r\n      <button onClick={this.goToMain}>перейти на главную</button>\r\n    </main>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Page404;","import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport BgBubbles from './BgBubbles';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport DefaultAvatar from './img/photos/images.png';\r\nimport API from './functions/API';\r\nimport { withSnackbar } from 'notistack';\r\nimport { DatePicker } from 'material-ui-pickers';\r\n\r\nif (window.location.pathname === '/settings') {\r\n  $(document.body).css({\r\n    background: 'linear-gradient(to bottom right,#00c5fe,#9de3dc,#0d11b4)'\r\n  })\r\n}\r\n\r\nconst styles = {\r\n  default: {\r\n    width: '600px',\r\n    margin: '0 auto',\r\n    position: 'relative',\r\n    padding: '20px 40px 80px',\r\n    zIndex: 37\r\n  },\r\n  input: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    width: 120,\r\n    bottom: 25,\r\n    margin: 'auto'\r\n  },\r\n  upload: {\r\n    background: '#ef6c00',\r\n    color: 'white',\r\n    margin: 'auto',\r\n    cursor: 'pointer',\r\n    position: 'relative'\r\n  },\r\n  hiddenInput: {\r\n    opacity: 0,\r\n    position: 'absolute',\r\n    cursor: 'pointer',\r\n    left: 0, right: 0, bottom: 0, top: 0\r\n  },\r\n  avatar: {\r\n    width: 100,\r\n    height: 100,\r\n    marginBottom: 15,\r\n    borderRadius: '50%'\r\n  },\r\n  header: {\r\n    marginTop: 100,\r\n    marginBottom: 12,\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontWeight: 500\r\n  }\r\n};\r\n\r\nconst genders = [\r\n  {\r\n    value: 'мужской',\r\n    label: 'мужской'\r\n  },\r\n  {\r\n    value: 'женский',\r\n    label: 'женский',\r\n  }\r\n];\r\n\r\nclass Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: [],\r\n      selectedFile: null,\r\n      user_id: '',\r\n      uploadedAvatar: '',\r\n      selectedDate: ''\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  fileSelect = event => {\r\n    if (event.target.files[0].size < 2 * 1024 * 1024) {\r\n      this.setState({ selectedFile: event.target.files[0] })\r\n      this.uploadAvatar(event.target.files[0]);\r\n    } else {\r\n      this.props.enqueueSnackbar('Файл слишком большой, размер должен не превышать 2МБ', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  uploadAvatar = (file) => {\r\n    let fd = new FormData();\r\n    let files = file;\r\n    let self = this;\r\n    fd.append('file', files);\r\n    fd.append('id', this.state.user_id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/upload.php`,\r\n      type: 'post',\r\n      data: fd,\r\n      contentType: false,\r\n      processData: false,\r\n      success: function (res) {\r\n        if (window.location.host.includes('localhost')) {\r\n          self.setState({ uploadedAvatar: res.location.slice(22) })\r\n        } else {\r\n          self.setState({ uploadedAvatar: res.location.slice(6) })\r\n        }\r\n        console.log(res);\r\n      },\r\n    });\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const id = localStorage.getItem('user_id');\r\n    this.setState({ user_id: id });\r\n    fetch(`${API}/api/user/info.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n  }\r\n\r\n\r\n  handleChange = event => {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    let user = { ...this.state.user };\r\n    user[event.target.name] = event.target.value;\r\n    this.setState({ user });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    var self = this;\r\n    self.setState({ modal: false });\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append('id', self.state.user.id);\r\n    formData.append('surname', $('input[name=\"surname\"]').val());\r\n    formData.append('name', $('input[name=\"name\"]').val());\r\n    formData.append('birthday', self.state.selectedDate.slice(0, 10) || this.state.user.birthday);\r\n    formData.append('sex', $('input[name=\"sex\"]').val());\r\n    formData.append('position', $('input[name=\"position\"]').val());\r\n    formData.append('avatar', self.state.uploadedAvatar);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/settings.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        console.log(res);\r\n        let response = res.result;\r\n        switch (response) {\r\n          case 0:\r\n            self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n            break;\r\n          case 1:\r\n            self.props.enqueueSnackbar('Персональные данные изменены', { variant: 'success' });\r\n            window.location.href = `id${self.state.user.id}`;\r\n            break;\r\n          default: break;\r\n        }\r\n      },\r\n      error: function () {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | устанавливаем дату из пикера в нужном формате\r\n  |--------------------------------------------------\r\n  */\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n\r\n  render() {\r\n    const { user, uploadedAvatar } = this.state;\r\n\r\n    let avatar = null;\r\n    if (window.location.host.includes('localhost') && user.avatar) {\r\n      avatar = user.avatar.slice(16);\r\n    } else {\r\n      avatar = user.avatar;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <Typography variant=\"h5\" style={{ ...styles.header }}>Начните заполнять персональные данные</Typography>\r\n\r\n        <Paper style={{ ...styles.default }} elevation={1}>\r\n\r\n          <form id=\"personal-info\" action=\"\" method=\"POST\" encType=\"multipart/form-data\">\r\n            {uploadedAvatar ?\r\n              <div style={{ ...styles.avatar, background: `url(${uploadedAvatar ? uploadedAvatar : DefaultAvatar}) no-repeat center/cover` }}></div> :\r\n              <div style={{ ...styles.avatar, background: `url(${avatar}) no-repeat center/cover` }}></div>}\r\n            <Button variant=\"contained\" style={{ ...styles.upload }}>\r\n              Загрузить фото профиля\r\n            <Icon style={{ marginLeft: 10 }}>cloud_upload</Icon>\r\n              <input\r\n                id='avatar'\r\n                accept=\"image/*\"\r\n                style={{ ...styles.hiddenInput }}\r\n                type=\"file\"\r\n                name='avatar'\r\n                onChange={this.fileSelect}\r\n              />\r\n            </Button>\r\n\r\n            <TextField\r\n              required\r\n              label=\"Ваше имя\"\r\n              name='name'\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.name}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <TextField\r\n              required\r\n              label=\"Фамилия\"\r\n              name='surname'\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.surname}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <TextField\r\n              select\r\n              required\r\n              label=\"Пол\"\r\n              InputLabelProps={{ shrink: true }}\r\n              value={user.sex}\r\n              onChange={this.handleChange}\r\n              helperText=\"Пожалуйста, выберите пол\"\r\n              margin=\"normal\"\r\n              name='sex'\r\n              style={{ ...styles.input }}\r\n            >\r\n              {genders.map(option => (\r\n                <MenuItem name='sex' key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n\r\n            <TextField\r\n              required\r\n              label=\"Должность\"\r\n              name=\"position\"\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.position}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <DatePicker\r\n              name=\"birthday\"\r\n              margin=\"normal\"\r\n              label='Дата рождения'\r\n              format={'Do MMMM YYYY'}\r\n              value={this.state.selectedDate ? this.state.selectedDate : user.birthday}\r\n              fullWidth={true}\r\n              InputLabelProps={{ shrink: true }}\r\n              onChange={this.handleDateChange}\r\n              aria-describedby=\"component-helper-text\"\r\n              style={{ ...styles.input }}\r\n              required\r\n            />\r\n\r\n            <Typography variant=\"caption\" gutterBottom>\r\n              *Дата рождения будет видна только руководству\r\n            </Typography>\r\n\r\n            <Button variant=\"contained\" color='primary' style={{ ...styles.button }} onClick={this.handleSubmit}>\r\n              Вперёд!\r\n           </Button>\r\n\r\n          </form>\r\n        </Paper>\r\n\r\n        <BgBubbles />\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Settings);","import React, {Component} from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport MainPage from './components/MainPage';\nimport LoginForm from './components/LoginForm';\nimport Approved from './components/Approved';\nimport Restore from './components/Restore';\nimport Page404 from './components/Page404';\nimport Settings from './components/Settings';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faComments, faHeart, faEnvelope, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nlibrary.add(faComments, faHeart, faEnvelope, faEdit)\n\nclass App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>          \n            <Route path='/id:user_id' component={MainPage}/>\n            <Route path='/friends'    component={MainPage}/>\n            <Route path='/colleagues' component={MainPage}/>\n           {/*  <Route path='/favourites' component={MainPage}/>\n            <Route path='/gallery'    component={MainPage}/> */}\n            <Route path='/tasks'      component={MainPage}/>\n           {/*  <Route path='/learnings'  component={MainPage}/> */}\n            <Route path='/messages'   component={MainPage}/>\n            <Route path='/news'       component={MainPage}/> \n            <Route path='/settings'   component={Settings}/>\n            <Route path=\"/login\"      component={LoginForm}/>\n            <Route path=\"/approved\"   component={Approved}/>\n            <Route path=\"/restore\"    component={Restore}/>\n            <Route path=\"/404\"        component={Page404}/>\n            <Route path=\"/:any\"       component={Page404}/>\n        </Switch> \n      </BrowserRouter> \n    );\n  }\n}\n\nexport default App;\n\n","import { combineReducers } from 'redux';\r\nimport user from './user';\r\nimport tasks from './tasks';\r\nimport news from './news';\r\nimport chats from './chats';\r\nimport room from './room';\r\nimport messages from './messages';\r\n\r\nexport default combineReducers({\r\n  user,\r\n  news,\r\n  tasks,\r\n  chats,\r\n  room,\r\n  messages\r\n})","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'LOGGED_IN':\r\n      return [action.payload]\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_NEWS':\r\n      return [...action.payload]\r\n    case 'DELETE_NEWS':\r\n      let nextState = state.filter(item => item.id !== action.payload);\r\n      return [...nextState]\r\n    case 'ADD_NEWS':\r\n      return [...action.payload]  \r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_TASKS':\r\n      return [...action.payload]\r\n    case 'MARK_COMPLETED':\r\n      return [...action.payload]\r\n    case 'ADD_TASK':\r\n      return [...action.payload]\r\n    case 'FILTER_TASKS':\r\n      return [...action.payload]\r\n    case 'DELETE_TASK':\r\n      let nextState = state.filter(item => item.id !== action.payload);\r\n      return [...nextState]\r\n    default:\r\n      return state\r\n  }\r\n}","import _ from 'lodash';\r\n\r\nexport default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_CHATS':\r\n      return [...action.payload]\r\n    case 'CREATE_CHAT':\r\n      return [...state, action.payload]\r\n    case 'DELETE_CHAT':\r\n      let cleared = state.filter(chat => chat.id !== action.payload);\r\n      return cleared\r\n    case 'ADD_MESSAGE':\r\n      let newState = state.filter(chat => chat.id !== action.payload.chat);\r\n      let currentChat = state.find(chat => chat.id === action.payload.chat);\r\n      currentChat.message = action.payload;\r\n      newState = _.concat(newState, currentChat)\r\n      return newState\r\n    case 'EDIT_MESSAGE':\r\n      let editedState = state.filter(chat => chat.message.id !== action.payload[0]);\r\n      let editedMessage = state.find(chat => chat.message.id === action.payload[0]);\r\n      \r\n      if (editedMessage) {\r\n        editedMessage.message.body = action.payload[1];\r\n        editedState = _.concat(editedState, editedMessage)\r\n      }\r\n      \r\n      return editedState\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'OPEN_CHAT':\r\n      return {chat_id: action.payload[0], user: action.payload[1]}\r\n    case 'CLOSE_CHAT':\r\n      return {user: action.payload[1]}\r\n    case 'DELETE_CHAT':\r\n      let initial = state;\r\n      delete initial.chat_id;\r\n      initial.user.message = null;\r\n      return initial\r\n    case 'ASSIGN_CHAT':\r\n      let newState = state;\r\n      newState.chat_id = action.payload;\r\n      return newState;\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_MESSAGES':\r\n      return [...action.payload]\r\n    case 'ADD_MESSAGE':\r\n      let newMessage = action.payload;\r\n      newMessage.id = (Number(localStorage.getItem('message_id')) + 1).toString();\r\n      let finder = state.find(message => message.id === newMessage.id);\r\n      if (finder) {\r\n        newMessage.id = (Number(newMessage.id) + 1).toString();\r\n      }\r\n      return [...state, newMessage]\r\n    case 'DELETE_MESSAGE':\r\n      let newState = state.filter(message => message.id !== action.payload);\r\n      return newState\r\n    case 'CLOSE_CHAT':\r\n      return []\r\n    default:\r\n      return state\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducer from './reducers';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n/* eslint-disable */\nimport { MuiPickersUtilsProvider } from 'material-ui-pickers';\nimport MomentUtils from '@date-io/moment';\nimport moment from 'moment';\nimport 'moment/locale/ru';\nimport { SnackbarProvider } from 'notistack';\n\nmoment.locale('ru');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: '#1976d2' }, \n    secondary: { main: '#ff4800' },\n  },\n  typography: { useNextVariants: true }\n});\n\nfunction Root() {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <Provider store={store}>\n        <MuiPickersUtilsProvider utils={MomentUtils} moment={moment}>\n          <SnackbarProvider maxSnack={3}>\n            <App />\n          </SnackbarProvider>\n        </MuiPickersUtilsProvider>\n      </Provider>\n    </MuiThemeProvider>\n  );\n}\n\nlet store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n/* store.subscribe(() => console.log('subscribe', store.getState())); */\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}