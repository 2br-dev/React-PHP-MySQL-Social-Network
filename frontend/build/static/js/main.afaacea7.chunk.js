(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,n){e.exports=n.p+"static/media/baseline-search-24px.a87eca9e.svg"},198:function(e,t,n){},282:function(e,t,n){e.exports=n.p+"static/media/Water image_Dreamstime.2355a944.jpg"},308:function(e,t,n){e.exports=n.p+"static/media/sphere.b669c4e0.png"},348:function(e,t,n){e.exports=n(661)},353:function(e,t,n){},355:function(e,t,n){},357:function(e,t,n){},359:function(e,t,n){},45:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///9ccHxZbXjCxslYbXpUandQZ3SAiI3s7e2ytbf39/eYoKRSaHZWbHhkdX/8+/tyf4bm6OnP0dLW2NlebneFkZeMlZry8/OorrFMYm/U1dbc3uCip6rj4+NseoLHy8yBjpZ4gYe3u754h5CTnKGIlZ1qd325wMWttLhxgYrL6+a6AAAGVElEQVR4nO2d65qqOgyGBdqKIiCKCh7QQWer93+DG3XPHpjlAWhC46y8v2d8+pm0Sduk9noMwzAMwzAMwzAMwzAMwzAMwzAMwzAMw/ylhMMC04NAIlxtneNxfSg4HY/OJDI9IFiGg8Mus2wpfSGEL6W0g/PO24amxwXD0E2CdOT7VpVC6Cj9Z+maHp4+Wy+W1iOEyk4r0yPUY3qwHuu7apSZ98Z2XPRT8VTfFZkmC9MjbYmTPbfft8bZ1vRYWzGzahjwhm/lpkfbnGldA95Qs3cLkHnwMzy88tTxxvSYG+HYtT30CzF+p7gxaOShXxLtpelx12ZgtxB4kfguVtyOWgm8OOp7LDeTlvreRqK7b7iKlpFz08OvwazNKvM/in7oT5SOwIKJaQUvWGWNA2EVMaOdhg89LR+9IB3TIp4y1fXRgpT04cZY00evRkxMq3gChAktcSYcFGcAJiyMSDdiTAMIgZbYk11Oc+2F9MaIagbufoA46SUmmpbygEgjIa1im5bygGPbXdMfKKInGlBOSjckAq0zBeJgWstdhimYQn9HMnObgE3DIq0hORFbHbA9ICB57LYGVGiRvMjQ3xp+Y5PcJP5+hZ9g4fBvUCiPptXc4/fb8ACWeFNV+PtXmt8fD0FzGpIn3w5cXmplJM8xXLi9hdjRLGAEVEj0kk33UuYbuTat5T5wi6kiudD0eiuIM/0rqWkpD3Ch3FR8mJbygDABytskyXh/YduujuYPArIVp+EOxIjyZFrIY3KQtCaYmtbxBJAbUqLh/gZEbpoSvgLu9RY77YAhPdMinqO9nIqAtAkL1rp+SjRh+2YYa/mpPJC8k6mw1FlPhU1zY1hFYyqKgOSd00/CU2srBmQT0h/0W6426cD0yOsSeu3y07cRWAR+r42jvpHAImasm0oU6bu1lOZBo7jon8lH+j9o1Nql5tRztd4mT7yC8jg3c1XTjEKty4F+e/mkgUMnNLpTL06VLPClmpfHtT37NTQKu/xP4XR8/Sw5UmmWbAjUYU5PY1lyRxk7JXO4p+Clq8pzXlpiFutS15uQapYbNmU0D2TVTMKq9Eq6nj16bMdCQnwsm2my//GN+H5msks48u7NNJEOymMKnVnmy3t/J+2zV6kMWtybuULKgal0fJk9SF1+di6vHG9sq5JKUczYeH9yqgvow87o6uzujvxxJ7NvJdWvPXSj1bqfxXGapiqOx/N1FP04FHWfdEb7mYFoGfafZi0ycBq5lju458jfRk87r99feK/2D+pQ/9hzOBm/XHMHHSd1p9e7Bz+Y1dQ42NVp3e9271hvkytUkLsvnHW4SZ7FkxJpl3f79c9iVOY9S79Wx7ldN33tsoXW3TfYNxRR7zC4e5k0TT6zOmndF77X1VQcHppdZwsxSuOPfFoEiP+Iosl6rNTT5fMOqqtKqVaHaUWCJuNsfCWzZWN1V2RHF4vN9rZVnVda/3tHNRqg9WsNsbsIGdEZsI60Kf6hgyT8CFhG2pwOns6INGYhACJDVwhZY9kGhW7E2KxA/CviLVhlV0tEhrwbhixXb4eP26iwMRkqbog5asBwgOq6dLAxtxihyXzmC9QnbMDqK3UQfUSFcDWyOmDW11JwUtwaaQpOiruHgus30MHHe1RCqxgIDhuv0zshMQ0xu6IOJKYh4mNZQGXc+qAVghNISm/4WG+6TWAeSQIgQzpVdIg4KV7yfSSylBZZDY5CgBcDoUB67wygDh8KpBd6XIgnA2FA2kBFBPb3X8Q4CslMQ6znziIaefcVnE0wjQ3+DRyFVHYWF3DO9kkpRGlRJKUQ5S2wPplwWCQ1KHX9rLBLWCErZIXmYYWskBWaB0chjcvDGzhXiA6l/SHKceKGkkIMgb2IzKG+ZQUoChczMqf6WMVtUD/uoA9WgeKSipuKMdLdE50b0gSr8WJAZDVFfLFd7+0ZKDCLaB0Sa41C7CsZzglIVKhtJQSKFXzcCtre0nThF36P3tHseio6eK9uW//HqOHxsy66LJfmYobsd9OYv/qo+2gJLCJFXmRK5EGT7lYgfXLf5Y/PrE5ZvQZsMH2jfd7xCyBuPk6l1OgHrS9OSKX6SxMvnAxz7/McBL6NiBVk+8/1xOAjWZvlxMFkO5mSfTaZYRiGYRiGYRiGYRiGYRiGYRiGYRiG6Zp/ATJ+d0E+ds0FAAAAAElFTkSuQmCC"},479:function(e,t,n){},524:function(e,t,n){},596:function(e,t,n){},599:function(e,t,n){},601:function(e,t,n){},603:function(e,t,n){},661:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(29),o=n.n(i),c=(n(353),n(663)),l=n(664),s=n(665),u=n(127),d=n(129),p=n(3),m=(n(355),n(19)),h=n(20),f=n(24),g=n(22),b=n(23),v=n(281),E=n.n(v),y=(n(357),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=new Date;return r.a.createElement("div",{className:"absolute-header"},r.a.createElement("div",{className:"header-team"},"#\u0415\u0434\u0438\u043d\u0430\u044f\u041a\u043e\u043c\u0430\u043d\u0434\u0430"),r.a.createElement("div",{className:"header-date"},r.a.createElement("span",null,"\u0441\u0435\u0433\u043e\u0434\u043d\u044f"),r.a.createElement(E.a,{element:"span",format:"DD.MM.YYYY"},e),r.a.createElement("span",{id:"header-date-day"},e.toLocaleString("ru",{weekday:"long"}))))}}]),t}(a.Component)),x=n(17),w=(n(359),n(45)),j=n.n(w),O=n(4),k=n(282),C=n.n(k),S=n(148),T=n.n(S);function N(){var e=Object(p.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return N=function(){return e},e}var D=O.a.div(N()),_=function(e){return r.a.createElement(D,{style:{minHeight:e.minHeight}},r.a.createElement(T.a,{color:e.color}))},I=n(16),A=n(662),F=n(41),M=n.n(F),P=n(149),q=n.n(P),L=n(60),H=n.n(L),R=n(87),W=n.n(R),z=n(36),B=n(98),U=n.n(B),Y=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},n.handleClick=function(e){e.stopPropagation(),n.setState({anchorEl:e.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,n=Boolean(t),a=this.props.store.user;return r.a.createElement("div",{onClick:function(){return e.setState({anchorEl:null})}},r.a.createElement(M.a,{"aria-label":"More","aria-owns":t?"simple-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},r.a.createElement(W.a,{color:"primary"})),r.a.createElement(q.a,{id:"long-menu",anchorEl:t,open:n,onClose:this.handleClose},r.a.createElement(H.a,{component:A.a,to:"/id".concat(a.id)},"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),r.a.createElement(U.a,null),r.a.createElement(H.a,{component:"a",href:"/settings"},"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(H.a,{component:A.a,to:"/learnings"},"\u041e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"),r.a.createElement(U.a,null),r.a.createElement(H.a,{component:"a",href:"/logout.php"},"\u0412\u044b\u0439\u0442\u0438")))}}]),t}(r.a.Component),V=Object(I.b)(function(e){return{store:e}})(Object(z.withSnackbar)(Y));function G(){var e=Object(p.a)(["\n  > div {\n    display: flex;\n    align-items: center;\n    height: 100%;\n    margin-left: 20px;\n  }\n  button {\n    margin: 0;\n  }\n"]);return G=function(){return e},e}function K(){return r.a.createElement(Q,null,r.a.createElement(V,null))}var Q=O.a.div(G());function X(){var e=Object(p.a)(["\n  display: flex;\n"]);return X=function(){return e},e}function J(){var e=Object(p.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.10);\n  z-index: 1;\n"]);return J=function(){return e},e}function Z(){var e=Object(p.a)(["\n  background: url('","') no-repeat center/cover;\n  background-attachment: fixed;\n  position: relative;\n  box-shadow: 0px -4px 4px 0px inset rgba(0,0,0,0.15)\n"]);return Z=function(){return e},e}var $=O.a.div(Z(),C.a),ee=O.a.div(J()),te=O.a.div(X()),ne=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store.user,n=Object(a.useState)(),i=Object(x.a)(n,2),o=(i[0],i[1]);return r.a.createElement($,null,window.innerWidth<600&&!window.location.pathname.includes("id")?null:r.a.createElement("header",{className:"header",style:{zIndex:2,position:"relative"}},r.a.createElement("div",{className:"person"},0===t.length?r.a.createElement("div",{className:"person-image",style:{background:"rgba(255,255,255,0.5)"}},r.a.createElement(_,{minHeight:125,color:"primary"})):r.a.createElement(A.a,{to:"/id".concat(t.id)},r.a.createElement("div",{className:"person-image",style:{backgroundImage:"url(".concat(""===t.avatar?j.a:t.avatar,")")}})),r.a.createElement("div",{className:"person-info"},r.a.createElement("div",{className:"person-info__container"},t.hasOwnProperty("name")?r.a.createElement(te,null,r.a.createElement("div",null,r.a.createElement("p",{className:"person-info__name"},"".concat(t.name," ").concat(t.surname)),r.a.createElement("p",{className:"person-info__position"},t.position)),r.a.createElement(K,null)):r.a.createElement(_,{minHeight:70,color:"primary"})),r.a.createElement("span",{id:"updateUser",style:{display:"none"},onClick:function(){return o(Math.random())}})))),r.a.createElement(ee,null))}),ae=n(64),re=(n(479),n(26)),ie=n.n(re),oe=n(40),ce=n(8),le=n(15),se=n.n(le),ue=n(1),de=window.location.host.includes("localhost")?"http://akvatory.local":window.location.origin,pe=n(128),me=n.n(pe),he=n(50),fe=n.n(he),ge=n(62),be=n.n(ge);function ve(){var e=Object(p.a)(["\n  cursor: pointer;\n  right: 25px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  position: absolute;\n  height: fit-content;\n  svg {\n    color: rgba(0,0,0,.54);\n  }\n"]);return ve=function(){return e},e}function Ee(){var e=Object(p.a)(["\n  position: absolute;\n  right: 25px;\n  top: 10px;\n  cursor: pointer;\n  svg {\n    color: #1976d2;\n  }\n\n  @media all and (max-width: 600px) {\n    right: 15px;\n    top: 25px;\n    svg {\n      font-size: 32px;\n    }\n  }\n"]);return Ee=function(){return e},e}function ye(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-left: 10px;\n  background: #fff;\n  height: 110px;\n  width: 100%;\n\n  textarea {\n    max-height: 90px;\n    background: #fff;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 100%;\n    & > div {\n      height: 100%;\n    }\n  }\n"]);return ye=function(){return e},e}function xe(){var e=Object(p.a)(["\n  min-width: 30px;\n  border-radius: 50%;\n  min-height: 30px;\n  margin-right: 15px;\n"]);return xe=function(){return e},e}function we(){var e=Object(p.a)(["\n  padding: 15px 30px;\n  background: #f5f8fa;\n  width: calc(100% + 60px);\n  margin-top: 20px;\n  margin-left: -30px;\n  border-bottom: 1px solid #e6ecf0;\n  border-top: 1px solid #e6ecf0;\n  display: flex;\n  flex-direction: column;\n  .close {\n    top: 5px;\n  }\n  button {\n    width: 150px;\n    align-self: flex-end;\n    margin-top: 15px;\n  }\n  \n  .newcomment-reply {\n    margin: 0 40px;\n    color: #657786;\n    a {\n      color: #0084B4;\n      text-decoration: none;\n      margin-left: 5px;\n      :hover {\n        text-decoration: underline;\n      }\n    }\n  }\n\n  .newcomment-input {\n    display: flex;\n    align-items: flex-start;\n    margin-top: 20px;\n    div {\n      margin-right: 0;\n    }\n  }\n\n  @media all and (max-width: 600px) {\n    margin-left: -15px;\n    padding: 15px;\n    width: calc(100% + 30px);\n  }\n"]);return we=function(){return e},e}function je(){var e=Object(p.a)(["\n  margin-left: -30px;\n  width: 600px;\n  border-bottom: 1px solid #e6ecf0;\n  cursor: pointer;\n  padding: 15px 30px;\n  position: relative;\n\n  :last-child {\n    border-bottom: none;\n  }\n\n  :hover {\n    background: #f5f8fa;\n    transition: .37s ease;\n  }\n\n  .comment-header {\n    display: flex;\n    align-items: center;\n    \n    div {\n      border-radius: 50%;\n      width: 30px;\n      height: 30px;\n    }\n  }\n\n  .comment-text {\n    padding-left: 45px;\n  }\n\n  .comment-date {\n    margin-left: 10px;\n    color: #657786;\n    :before {\n      content: '\0b7';\n      margin-right: 10px;\n    }\n  }\n"],["\n  margin-left: -30px;\n  width: 600px;\n  border-bottom: 1px solid #e6ecf0;\n  cursor: pointer;\n  padding: 15px 30px;\n  position: relative;\n\n  :last-child {\n    border-bottom: none;\n  }\n\n  :hover {\n    background: #f5f8fa;\n    transition: .37s ease;\n  }\n\n  .comment-header {\n    display: flex;\n    align-items: center;\n    \n    div {\n      border-radius: 50%;\n      width: 30px;\n      height: 30px;\n    }\n  }\n\n  .comment-text {\n    padding-left: 45px;\n  }\n\n  .comment-date {\n    margin-left: 10px;\n    color: #657786;\n    :before {\n      content: '\\00b7';\n      margin-right: 10px;\n    }\n  }\n"]);return je=function(){return e},e}function Oe(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 20px;\n\n  img {\n    width: 15px;\n    margin-right: 40px;\n    margin-left: 10px;\n    opacity: .7;\n    cursor: pointer;\n  }\n\n  img:hover {\n    opacity: 1;\n    transition: .37s ease;\n  }\n"]);return Oe=function(){return e},e}function ke(){var e=Object(p.a)(["\n  border-top: 1px solid #e6ecf0;\n  border-bottom: 1px solid #e6ecf0;\n  margin-top: 20px;\n  1px solid #e6ecf0;\n  align-items: center;\n  display: flex;\n\n  div {\n    margin: 0 5px;\n  }\n\n  h6:first-child {\n    width: 50%;\n    padding: 15px 10px;\n    border-right: 1px solid #e6ecf0;\n  }\n\n  span {\n    width: 50%;\n    padding: 15px 10px 15px;\n  }\n\n  @media all and (max-width: 600px) {\n    h6:first-child {\n      font-size: 12px;\n    }\n  }\n"]);return ke=function(){return e},e}function Ce(){var e=Object(p.a)(["\n  p {\n    margin: 15px 0 5px;\n    font-size: 20px;\n  }\n  span {\n    color: #657786;\n    font-size: 14px;\n  }\n"]);return Ce=function(){return e},e}function Se(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 25px;\n\n  img {\n    border-radius: 50%;\n    width: 60px;\n  }\n  p {\n    font-size: 18px;\n    font-weight: 700;\n  }\n"]);return Se=function(){return e},e}function Te(){var e=Object(p.a)(["\n  position: fixed;\n  background: rgba(0,0,0,.5);\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  z-index: 49;\n"]);return Te=function(){return e},e}function Ne(){var e=Object(p.a)(["\n  width: 600px;\n  min-height: 300px;\n  left: 0;\n  right: 0;\n  margin: auto;\n  position: fixed;\n  z-index: 50;\n  background: #fff;\n  top: 100px;\n  border-radius: 10px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n  padding: 15px 30px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  max-height: 80%;\n\n  .close {\n    top: 5px;\n  }\n  ::-webkit-scrollbar { \n    display: none; \n  }\n\n  @media all and (max-width: 600px) {\n    width: 100%;\n    height: calc(100vh - 50px);\n    top: 0;\n    max-height: unset;\n    border-radius: 0;\n    padding: 30px 15px 15px;\n  }\n"]);return Ne=function(){return e},e}var De=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).getAvatars=function(){var e=n.props.store.news.find(function(e){return e.id===n.props.singleNewsId}).liked_by.split(", ").slice(1),t=new FormData,a=Object(ce.a)(Object(ce.a)(n));t.append("likedBy",e),se.a.ajax({url:"".concat(de,"/api/user/getAvatars.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(e){return a.setState({likedBy:e})}})},n.handleChange=function(e){return n.setState({commentText:e.target.value})},n.addLike=function(e,t){var a=document.getElementById("actions-news");a.style.pointerEvents="none",t.preventDefault();var r=n.props.store.user,i=new FormData,o=Object(ce.a)(Object(ce.a)(n));i.append("id",e),i.append("liked_by",r.id),i.append("created_at",(new Date).getTime()),se.a.ajax({url:"".concat(de,"/api/news/addlike.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(){o.props.onAddLike(e,r.id),fetch("".concat(de,"/api/news/read_one.php?id=").concat(o.props.singleNewsId)).then(function(e){return e.json()}).then(function(){return o.getAvatars()}),setTimeout(function(){return a.style.pointerEvents="all"},1e3)}})},n.removeLike=function(e,t){var a=document.getElementById("actions-news"),r=n.props.store.user;a.style.pointerEvents="none";var i=Object(ce.a)(Object(ce.a)(n));t.preventDefault(),t.stopPropagation();var o=new FormData;o.append("id",e),o.append("liked_by",r.id),se.a.ajax({url:"".concat(de,"/api/news/removelike.php"),data:o,processData:!1,contentType:!1,type:"POST",success:function(){i.props.onRemoveLike(e,r.id),fetch("".concat(de,"/api/news/read_one.php?id=").concat(i.props.singleNewsId)).then(function(e){return e.json()}).then(function(){return i.getAvatars()}),setTimeout(function(){return a.style.pointerEvents="all"},1e3)}})},n.submitComment=function(e){var t=n.props.store.user;n.setState({commentsLoading:!0});var a=Object(ce.a)(Object(ce.a)(n));e.preventDefault();var r=new FormData;r.append("news_id",n.props.singleNewsId),r.append("who","".concat(t.name," ").concat(t.surname)),r.append("date",(new Date).toJSON().slice(0,10).replace(/-/g,".")),r.append("visible",1),r.append("time",(new Date).toLocaleTimeString().slice(0,-3)),r.append("text",n.state.commentText),r.append("author_id",t.id),r.append("created_at",(new Date).getTime()),se.a.ajax({url:"".concat(de,"/api/news/addcomment.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(){a.props.onAddComment(n.props.singleNewsId,t.id),document.getElementById("updateSideNews").click(),a.setState({commentText:""}),a.fetchComments(a.props.singleNewsId),a.props.enqueueSnackbar("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0431\u044b\u043b \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",{variant:"success"}),setTimeout(function(){a.setState({commentsLoading:!1});var e=document.getElementById("single-news");e.scrollTop=e.scrollHeight},250)},error:function(){return a.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",{variant:"error"})}})},n.deleteComment=function(e,t,a){var r=n.props.store.user;n.setState({commentsLoading:!0});var i=Object(ce.a)(Object(ce.a)(n));e.preventDefault(),se.a.ajax({url:"".concat(de,"/api/news/deletecomment.php"),data:{id:t,news_id:a},type:"POST",success:function(){i.props.onRemoveComment(a,r.id),document.getElementById("updateSideNews").click(),i.props.enqueueSnackbar("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"info"}),i.fetchComments(i.props.singleNewsId),setTimeout(function(){return i.setState({commentsLoading:!1})},250)},error:function(){return i.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",{variant:"error"})}})},n.state={thisComments:[],loadedComments:!1,commentText:"",likedBy:[],loading:!0,commentsLoading:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(ie.a.mark(function e(){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchComments(this.props.singleNewsId);case 2:return e.next=4,this.getAvatars();case 4:return e.next=6,this.setState({loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchComments",value:function(e){var t=this;fetch("".concat(de,"/api/news/single_comments.php?id=").concat(e)).then(function(e){return e.json()}).then(function(e){return t.setState({thisComments:e,loadedComments:!t.state.loadedComments})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.closeNews,i=t.singleNewsId,o=this.state,c=o.thisComments,l=o.commentText,s=o.likedBy,u=o.loading,d=o.commentsLoading,p=this.props.store,m=p.user,h=p.news.find(function(e){return e.id===i}),f=h.avatar;return r.a.createElement(a.Fragment,null,r.a.createElement(_e,{id:"single-news"},u?r.a.createElement(_,{minHeight:500,color:"primary"}):r.a.createElement(a.Fragment,null,r.a.createElement(ue.v,{placement:"left",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},r.a.createElement(We,null,r.a.createElement(fe.a,{onClick:n}))),r.a.createElement(Ae,null,r.a.createElement(He,{style:{background:"url(".concat(h.avatar?f:j.a,") no-repeat center/cover")}}),r.a.createElement(ue.w,{variant:"subtitle2"},h.author)),"1"===h.importance?this.props.createImportantBar(10):null,r.a.createElement(ue.w,{variant:"h5"},h.title.replace(/&quot;/g,'"')),r.a.createElement(Fe,null,r.a.createElement(ue.w,{variant:"body1"},h.text.replace(/&quot;/g,'"')),r.a.createElement(ue.w,{variant:"caption"},h.date)),r.a.createElement(Me,null,r.a.createElement(ue.w,{variant:"subtitle2"},h.likes," ",this.props.getNoun(h.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"'),s.map(function(e,t){for(;t<7;)return r.a.createElement(ue.v,{key:t,title:"".concat(e.name," ").concat(e.surname),placement:"top"},r.a.createElement(He,{style:{background:"url(".concat(e.avatar?e.avatar:j.a,") no-repeat center/cover")}}))})),r.a.createElement(Pe,{id:"actions-news"},c.length,r.a.createElement(ue.v,{placement:"top",title:"".concat(c.length," ").concat(this.props.getCommentsNoun(c.length))},r.a.createElement(ae.a,{icon:"comments",style:{marginLeft:10}})),me.a.some(s,["id",m.id])?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,h.likes),r.a.createElement(ue.v,{placement:"top",title:"".concat(h.likes," ").concat(this.props.getNoun(h.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"')},r.a.createElement(ae.a,{onClick:function(t){return e.removeLike(h.id,t)},icon:"heart",style:{color:"#1976d2",marginLeft:10}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,h.likes),r.a.createElement(ue.v,{placement:"top",title:"".concat(h.likes," ").concat(this.props.getNoun(h.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"')},r.a.createElement(ae.a,{onClick:function(t){return e.addLike(h.id,t)},icon:"heart",style:{marginLeft:10}})))),r.a.createElement(Le,null,r.a.createElement("p",{className:"newcomment-reply"},"\u0412 \u043e\u0442\u0432\u0435\u0442 ",r.a.createElement("a",{href:"".concat(window.location.origin,"/id").concat(h.id)},h.author)),r.a.createElement("div",{className:"newcomment-input"},r.a.createElement(He,{style:{background:"url(".concat(m.avatar?m.avatar:j.a,") no-repeat center/cover")}}),r.a.createElement(Re,null,r.a.createElement(ue.u,{label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",multiline:!0,variant:"outlined",name:"commentText",value:l,onChange:this.handleChange,required:!0}))),r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:this.submitComment,disabled:!l},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),d?r.a.createElement(_,{minHeight:280,color:"primary"}):c.map(function(t,n){return r.a.createElement(qe,{key:n},r.a.createElement("div",{className:"comment-header"},r.a.createElement(He,{style:{background:"url(".concat(t.avatar?t.avatar:j.a,") no-repeat center/cover"),marginTop:20}}),r.a.createElement(ue.w,{variant:"subtitle2"},t.who),r.a.createElement(ue.w,{variant:"caption",className:"comment-date"},t.date)),r.a.createElement("div",{className:"comment-text"},t.text),t.author_id===m.id?r.a.createElement(ze,null,r.a.createElement(ue.v,{placement:"left",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(be.a,{onClick:function(n){return e.deleteComment(n,t.id,t.news_id)}}))):null)}))),r.a.createElement(Ie,{onClick:n}))}}]),t}(a.Component),_e=O.a.div(Ne()),Ie=O.a.div(Te()),Ae=O.a.div(Se()),Fe=O.a.div(Ce()),Me=O.a.div(ke()),Pe=O.a.div(Oe()),qe=O.a.div(je()),Le=O.a.div(we()),He=O.a.div(xe()),Re=O.a.div(ye()),We=O.a.div(Ee()),ze=O.a.div(ve()),Be=Object(I.b)(function(e){return{store:e}},function(e){return{onAddLike:function(t,n){return e({type:"ADD_LIKE",payload:t,user_id:n})},onRemoveLike:function(t,n){return e({type:"REMOVE_LIKE",payload:t,user_id:n})},onAddComment:function(t,n){return e({type:"ADD_COMMENT",payload:t,user_id:n})},onRemoveComment:function(t,n){return e({type:"REMOVE_COMMENT",payload:t,user_id:n})}}})(Object(z.withSnackbar)(De)),Ue=n(63),Ye=n.n(Ue);function Ve(){var e=Object(p.a)(["\n  height: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: .37;\n  margin-bottom: 20px;\n"]);return Ve=function(){return e},e}function Ge(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n\n  .news-item {\n    width: 100%;\n    padding-bottom: 0;\n  }\n  svg {\n    margin-left: 0;\n  }\n  .news-caption {\n    display: flex;\n    align-items: flex-start;\n    width: 111%;\n    cursor: pointer;\n    margin-left: -15px;\n    padding: 10px 15px 8px;\n    &:hover {\n      background: #1976d2;\n      color: #ffffff;\n      transition: .37s ease;\n    }\n    svg {\n      color: rgba(0,0,0,.15) !important;\n      margin-right: 8px;\n      font-size: 22px;\n    }\n  }\n\n  .news-item-comment {\n    width: 111%;\n    cursor: pointer;\n    margin-left: -15px;\n    padding: 12px 15px;\n    &:hover {\n      background: rgba(0,0,0,0.015);\n    }\n  }\n"]);return Ge=function(){return e},e}function Ke(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Ke=function(){return e},e}function Qe(){var e=Object(p.a)(["\n  width: 30%;\n  @media all and (max-width: 600px) {\n    display: none;\n  }\n"]);return Qe=function(){return e},e}function Xe(){var e=Object(p.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 0;\n    margin-top: ","px;\n    svg {\n      color: rgba(0,0,0,.15);\n      margin-right: 5px;  \n    }\n  "]);return Xe=function(){return e},e}var Je=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).state={importance:!1,singleNews:!1,singleNewsData:[],singleNewsId:""},n.goToSingleNews=function(e){return n.setState({singleNews:!0,singleNewsId:e})},n.closeNews=function(){n.setState({singleNews:!1,singleNewsId:""})},n.changeImportance=function(){return n.setState({importance:!n.state.importance})},n.getNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043e\u0442\u043c\u0435\u0442\u043e\u043a":1===(e%=10)?"\u043e\u0442\u043c\u0435\u0442\u043a\u0430":e>=2&&e<=4?"\u043e\u0442\u043c\u0435\u0442\u043a\u0438":"\u043e\u0442\u043c\u0435\u0442\u043e\u043a"},n.getCommentsNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432":1===(e%=10)?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439":e>=2&&e<=4?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},n.createImportantBar=function(e){var t=O.a.div(Xe(),e);return r.a.createElement(t,null,r.a.createElement(Ye.a,null),r.a.createElement(ue.w,{variant:"caption"},'\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a "\u0412\u0430\u0436\u043d\u043e\u0435"'))},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.importance,i=t.singleNews,o=t.singleNewsId,c=this.props.store.news,l=0;return r.a.createElement(Ze,null,r.a.createElement(ue.r,null,0===c.length?r.a.createElement(_,{minHeight:250,color:"primary"}):r.a.createElement(et,null,r.a.createElement($e,null,r.a.createElement(ue.w,{variant:"subtitle2"},"\u0422\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u043e\u0435 "),r.a.createElement(ue.t,{color:"primary",onClick:this.changeImportance.bind(this)})),c.length>0?c.map(function(t,a){if(n){if("1"===t.importance&&l<3)return l++,r.a.createElement("div",{key:a,className:"news-item"},r.a.createElement("div",{className:"news-item-header"},r.a.createElement(ue.w,{variant:"subtitle2"},t.author),r.a.createElement(ue.w,{variant:"caption"},t.date)),r.a.createElement(ue.w,{variant:"body1",className:"news-caption",onClick:function(){return e.goToSingleNews(t.id)}},"1"===t.importance?r.a.createElement(ue.v,{title:"\u0412\u0430\u0436\u043d\u043e\u0435!",placement:"left"},r.a.createElement(Ye.a,null)):null,t.title),r.a.createElement("div",{className:"news-item-text"},r.a.createElement(ue.w,{variant:"body2"},t.text)),r.a.createElement(ue.v,{title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c",placement:"top-start"},r.a.createElement("div",{onClick:function(){return e.goToSingleNews(t.id)},className:"news-item-comment"},r.a.createElement(ae.a,{icon:"comments"}),t.comments," ",e.getCommentsNoun(t.comments))))}else for(;a<3;)return r.a.createElement("div",{key:a,className:"news-item"},r.a.createElement("div",{className:"news-item-header"},r.a.createElement(ue.w,{variant:"subtitle2"},t.author),r.a.createElement(ue.w,{variant:"caption"},t.date)),r.a.createElement(ue.w,{variant:"body1",className:"news-caption",onClick:function(){return e.goToSingleNews(t.id)}},"1"===t.importance?r.a.createElement(ue.v,{title:"\u0412\u0430\u0436\u043d\u043e\u0435!",placement:"top-start"},r.a.createElement(Ye.a,null)):null,t.title.replace(/&quot;/g,'"')),r.a.createElement("div",{className:"news-item-text"},r.a.createElement(ue.w,{variant:"body2"},t.text.replace(/&quot;/g,'"'))),r.a.createElement(ue.v,{title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c",placement:"top-start"},r.a.createElement("div",{onClick:function(){return e.goToSingleNews(t.id)},className:"news-item-comment"},r.a.createElement(ae.a,{icon:"comments"}),t.comments," ",e.getCommentsNoun(t.comments))))}):r.a.createElement(tt,null,r.a.createElement(ue.w,{variant:"h6"},"\u043d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439")),r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:function(){return window.scrollTo(0,0)},component:A.a,to:"/news"},"\u043a\u043e \u0432\u0441\u0435\u043c \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u043c"),r.a.createElement("span",{id:"updateSideNews",style:{display:"none"},onClick:function(){return e.forceUpdate()}}))),r.a.createElement(a.Fragment,null,i?r.a.createElement(Be,{closeNews:this.closeNews.bind(this),singleNewsId:o,news:c,getNoun:this.getNoun,getCommentsNoun:this.getCommentsNoun,reloadComponent:this.reloadComponent,createImportantBar:this.createImportantBar.bind(this)}):null))}}]),t}(a.Component),Ze=O.a.div(Qe()),$e=O.a.div(Ke()),et=O.a.div(Ge()),tt=O.a.div(Ve()),nt=Object(I.b)(function(e){return{store:e}})(Je),at=n(66),rt=n.n(at),it=n(67),ot=n.n(it),ct=n(73),lt=n.n(ct),st=n(107),ut=n.n(st),dt=n(108),pt=n.n(dt);var mt=function(e){var t=e.friend.avatar;return r.a.createElement(ot.a,{button:!0,TouchRippleProps:{classes:{child:"touch-ripple"}}},r.a.createElement(ut.a,null,r.a.createElement(pt.a,{style:{height:50,width:50},alt:"".concat(e.friend.name," ").concat(e.friend.surname),src:""!==e.friend.avatar?t:j.a})),r.a.createElement(lt.a,{inset:!0,primary:"".concat(e.friend.name," ").concat(e.friend.surname,", ").concat(e.friend.position),secondary:e.friend.last_activity}))},ht=n(52),ft=n.n(ht),gt=n(37),bt=n.n(gt),vt=n(163),Et=n.n(vt);function yt(){var e=Object(p.a)(["\n  padding: 20px\n  & > div {\n    width: 100%;\n  }\n\n  @media all and (max-width: 600px) {\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    padding: 10px 20px 12px;\n    height: 80px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    label {\n      line-height: .5;\n    }\n    input {\n      padding: 9px 18.5px;\n    }\n    input::placeholder {\n      color: red;\n    }\n  }\n"]);return yt=function(){return e},e}var xt=O.a.div(yt()),wt=function(e){return r.a.createElement(xt,null,r.a.createElement(bt.a,{id:"outlined-adornment-password",variant:"outlined",type:"text",label:"\u041f\u043e\u0438\u0441\u043a",margin:"dense",value:e.searchValue,onChange:e.handleSearch,InputProps:{endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(M.a,{"aria-label":"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043a\u043e\u043b\u043b\u0435\u0433"},r.a.createElement("img",{alt:"\u041f\u043e\u0438\u0441\u043a",src:Et.a,style:{opacity:".37"}})))}}))},jt=n(47),Ot=n.n(jt),kt=n(7),Ct=n.n(kt);function St(){var e=Object(p.a)(["\n  height: 555px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n"]);return St=function(){return e},e}function Tt(){return r.a.createElement(Nt,null,r.a.createElement(ue.w,{variant:"h6",style:{opacity:.3}},"\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))}var Nt=O.a.div(St());function Dt(){var e=Object(p.a)(["\n  a {\n    text-decoration: none;\n  }\n  ul {\n    padding: 0;\n    padding-bottom: 50px !important;\n  }\n\n  @media all and (max-width: 600px) {\n    ul {\n      padding-top: 15px;\n      padding-bottom: 15px;\n    }\n  }\n"]);return Dt=function(){return e},e}var _t=O.a.div(Dt()),It=Object(I.b)(function(e){return{store:e}},function(e){return{onFetchFriends:function(t){e({type:"FETCH_FRIENDS",payload:t})},filterFriends:function(t){e({type:"FILTER_FRIENDS",payload:t})},setOnline:function(t){e({type:"SET_FRIENDS",payload:t})}}})(function(e){var t=e.onFetchFriends,n=e.setOnline,i=e.filterFriends,o=e.store.friends,c=Object(a.useState)(""),l=Object(x.a)(c,2),s=l[0],u=l[1],d=Object(a.useState)(!1),p=Object(x.a)(d,2),m=p[0],h=p[1],f=Object(a.useState)([]),g=Object(x.a)(f,2),b=g[0],v=g[1],E=document.title;return Object(a.useEffect)(function(){return 0===o.length&&(h(!0),fetch("".concat(de,"/api/user/read.php")).then(function(e){return e.json()}).then(function(e){t(e.data),function(e){var t=e,a=[],r=[],i=[];t.forEach(function(e){e.last_activity=function(e){if(!e)return"";var t=Ct()(Number(e)).fromNow();return(t.includes("\u0441\u0435\u043a\u0443\u043d\u0434")||t.includes("\u043c\u0438\u043d\u0443\u0442"))&&(parseInt(t)<15||!parseInt(t))?"Online":"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0432\u0438\u0437\u0438\u0442: ".concat(t)}(e.last_activity),"Online"===e.last_activity?a.push(e):e.last_activity?r.push(e):i.push(e)}),t=a.concat(r.concat(i)),n(t)}(e.data),v(e.data)}).then(function(){return h(!1)})),function(){return document.title=E}},[]),r.a.createElement(Ot.a,null,m?r.a.createElement(_,{minHeight:370,color:"primary"}):r.a.createElement(_t,null,r.a.createElement(wt,{handleSearch:function(e){u(e.target.value);var t=e.target.value.toLowerCase();document.title=e.target.value||E,""!==t?(o=o.filter(function(e){return e.name.toLowerCase().includes(t)||e.surname.toLowerCase().includes(t)||e.position.toLowerCase().includes(t)}),i(o)):i(b)},searchValue:s}),r.a.createElement(rt.a,null,o.map(function(e){return r.a.createElement(A.a,{key:e.id,to:"id".concat(e.id)},r.a.createElement(mt,{friend:e}))})),0===o.length?r.a.createElement(Tt,null):null))}),At=n(46),Ft=n(44),Mt=n(285),Pt=n.n(Mt),qt=(n(524),n(164)),Lt=n.n(qt),Ht=n(68),Rt=n.n(Ht),Wt=n(70),zt=n(82),Bt=n.n(zt);function Ut(e){return r.a.createElement(Bt.a,{open:e.open,onClose:e.handleClose},e.component)}function Yt(){var e=Object(p.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: 100vh;\n  width: 100vw;\n  background: rgba(0,0,0,.37);\n"]);return Yt=function(){return e},e}function Vt(){var e=Object(p.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return Vt=function(){return e},e}function Gt(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return Gt=function(){return e},e}function Kt(){var e=Object(p.a)(["\n  position: fixed;\n  height: 200px;\n  width: 400px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  z-index: 1000;\n  & > div {\n    height: 100%;\n    position: relative;\n    display: flex;\n    padding: 30px;\n    flex-direction: column;\n    justify-content: center;\n  }\n  @media all and (max-width: 600px) {\n    width: 95%;\n  }\n"]);return Kt=function(){return e},e}function Qt(e){return r.a.createElement(a.Fragment,null,r.a.createElement(Xt,null,r.a.createElement(ue.r,null,r.a.createElement(Zt,{onClick:e.handleClose},r.a.createElement(fe.a,null)),r.a.createElement(ue.w,{variant:"body1"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 ".concat(e.message,"?")),r.a.createElement(Jt,null,r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:e.setAdministrator},"\u0414\u0430"),r.a.createElement(ue.a,{variant:"text",color:"default",onClick:e.handleClose},"\u041e\u0442\u043c\u0435\u043d\u0430")))),r.a.createElement($t,{onClick:e.handleClose}))}var Xt=O.a.div(Kt()),Jt=O.a.div(Gt()),Zt=O.a.div(Vt()),$t=O.a.div(Yt()),en=n(286),tn=n.n(en),nn=n(287),an=n.n(nn);function rn(){var e=Object(p.a)(["\n  width: 100%;\n  display: inline-block;\n  & > div {\n    display: block;\n    margin-bottom: 10px;\n    padding-left: 37px;\n  }\n  & > div > div {\n    display: block;\n    pointer-events: none;\n    margin-top: -5px;\n  }\n  label {\n    font-size: 12px;\n    position: relative;\n    text-transform: lowercase;\n  }\n  .inline-input {\n    display: inline-flex;\n    margin-left: 10px;\n  }\n  @media all and (max-width: 600px) {\n    & > div {\n      padding-left: 15px;\n    }\n  }\n"]);return rn=function(){return e},e}function on(){var e=Object(p.a)(["\n  margin-top: 15px;\n  button {\n    margin-right: 15px;\n  }\n  padding-left: 15px;\n"]);return on=function(){return e},e}function cn(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  & > div {\n    width: 90%;\n  }\n\n  svg {\n    opacity: .5;\n    cursor: pointer;\n    font-size: 24px;\n    &:hover {\n      opacity: .8;\n    }\n  }\n"]);return cn=function(){return e},e}function ln(){var e=Object(p.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: 20px 0 5px;\n  padding-left: 15px;\n"]);return ln=function(){return e},e}function sn(){var e=Object(p.a)(["\n  width: 30%;\n  position: relative;\n  margin-bottom: 15px;\n  margin-right: 3%;\n\n  &:hover > svg {\n    display: block;\n  } \n\n  svg {\n    display: none;\n    position: absolute;\n    right: 0;\n    top: 0;\n    opacity: .5;\n    cursor: pointer;\n    font-size: 20px;\n    &:hover {\n      opacity: .8;\n    }\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n    svg {\n      display: block;\n      font-size: 28px;\n    }\n  }\n"]);return sn=function(){return e},e}function un(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n"]);return un=function(){return e},e}function dn(){var e=Object(p.a)(["\n  padding-bottom: 30px;\n  position: relative;\n  label {\n    text-transform: lowercase;\n  }\n  .user-header {\n    color: #1976d2;\n    font-size: 20px;\n  }\n  .user-position {\n    display: block;\n    margin-top: -10px;\n    & > div > div {\n      margin: 0;\n      padding: 0;\n      & > div > input {\n        color: rgba(0,0,0,.54);\n        font-size: 14px;\n      }\n    }\n  }\n  fieldset {\n    border: none;\n  }\n"]);return dn=function(){return e},e}var pn=null,mn=null,hn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).handleDateChange=function(e){return n.setState({selectedDate:e.format()})},n.removeInput=function(){return n.setState({newChildInput:!1})},n.createInput=function(e,t,a){var i=n.props.store.user,o=n.state.userInfo;return i.id===o.id?r.a.createElement(ue.u,{label:e,value:t,fullWidth:!0,name:a,margin:"dense",InputLabelProps:{shrink:!0},onChange:n.handleChange,variant:"outlined"}):r.a.createElement(xn,null,"name"===a||"surname"===a||"position"===a?r.a.createElement(ue.h,null,r.a.createElement(Rt.a,{value:t})):r.a.createElement(ue.h,null,r.a.createElement(ue.n,{htmlFor:a},e),r.a.createElement(Rt.a,{id:a,value:t})))},n.closeSelectOnScroll=function(){return!0},n.listenSelect=function(){return!0},n.closeSelect=function(){return n.setState({isSelectOpened:!1})},n.setAdministrator=function(){var e=new FormData,t=Object(ce.a)(Object(ce.a)(n));e.append("id",n.state.preparedId),se.a.ajax({url:"".concat(de,"/api/user/setAdministrator.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(){t.handleClose(),t.props.enqueueSnackbar("\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0451\u043d",{variant:"success"}),t.fetchUserInfo()},error:function(){return t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",{variant:"error"})}})},n.handleClose=function(){return n.setState({open:!1,preparedId:null})},n.state={userInfo:{},newChildInput:!1,nameError:!0,yearError:!0,childName:"",childBirthyear:"",loading:!0,selectedDate:"",loadingChild:!1,isSelectOpened:!1,lastUser:null,preparedId:null,open:!1},n.handleSubmit=n.handleSubmit.bind(Object(ce.a)(Object(ce.a)(n))),n.handleChange=n.handleChange.bind(Object(ce.a)(Object(ce.a)(n))),n.fetchUserInfo=n.fetchUserInfo.bind(Object(ce.a)(Object(ce.a)(n))),n.deleteChild=n.deleteChild.bind(Object(ce.a)(Object(ce.a)(n))),n.prepareChild=n.prepareChild.bind(Object(ce.a)(Object(ce.a)(n))),n.handleChild=n.handleChild.bind(Object(ce.a)(Object(ce.a)(n))),n.addChild=n.addChild.bind(Object(ce.a)(Object(ce.a)(n))),n.removeInput=n.removeInput.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"fetchUserInfo",value:function(e){var t=this,n=window.location.pathname.slice(3);e||this.setState({loading:!0}),"child"===e&&this.setState({loadingChild:!0}),fetch("".concat(de,"/api/user/info.php?id=").concat(n)).then(function(e){return e.json()}).then(function(e){return t.setState({userInfo:e,selectedDate:e.birthday,lastUser:e})}).then(function(){return t.setState({loading:!1,loadingChild:!1})})}},{key:"componentDidMount",value:function(){var e=this;this.fetchUserInfo();var t=window.location.pathname;mn=setInterval(function(){t!==window.location.pathname&&window.location.pathname.includes("id")&&(e.fetchUserInfo(),window.clearInterval(mn))},250)}},{key:"componentWillUnmount",value:function(){window.clearInterval(mn)}},{key:"handleChange",value:function(e){var t=this;document.getElementById("updateUser").click(),window.clearTimeout(pn);var n=Object(Ft.a)({},this.state.userInfo);n[e.target.name]=e.target.value,this.setState({userInfo:n}),this.props.updateUser(e.target.name,e.target.value),pn=setTimeout(function(){t.handleSubmit(e,!0),t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"})},2500)}},{key:"prepareChild",value:function(){this.setState({newChildInput:!0})}},{key:"handleChild",value:function(e){var t,n=e.target.value;n.length>10&&(n=n.slice(1)),this.setState((t={},Object(At.a)(t,e.target.name,n),Object(At.a)(t,"nameError",!0),Object(At.a)(t,"yearError",!0),t))}},{key:"addChild",value:function(e){if(e.preventDefault(),this.state.childName&&this.state.childBirthyear){var t=this,n=new FormData,a={child_name:this.state.childName,child_birthyear:this.state.childBirthyear};for(var r in a)n.append(r,a[r]);se.a.ajax({url:"".concat(de,"/api/child/add.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){a.id=e["MAX(`id`)"],t.props.onAddChild(a),t.setState({newChildInput:!1,childBirthyear:"",childName:""}),t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"})},error:function(){return t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}else this.state.newChildInput&&(this.props.enqueueSnackbar("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"}),this.state.childBirthyear||this.setState({yearError:!1}),this.state.childName||this.setState({nameError:!1}))}},{key:"deleteChild",value:function(e){var t=this;t.setState({modal:!1});var n=new FormData;n.append("id",e),se.a.ajax({url:"".concat(de,"/api/child/delete.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(){t.props.onRemoveChild(e),t.forceUpdate(),t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"})},error:function(){return t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}},{key:"handleSubmit",value:function(e,t){var n=this.props.store.user,a=this;e.preventDefault();var r=new FormData;r.append("id",n.id),r.append("adress",se()('input[name="adress"]').val()),r.append("army_country",se()('input[name="army_country"]').val()),r.append("army_type",se()('input[name="army_type"]').val()),r.append("birthday",this.state.selectedDate.slice(0,10)),r.append("district",se()('input[name="district"]').val()),r.append("fakultet",se()('input[name="fakultet"]').val()),r.append("name",se()('input[name="name"]').val()),r.append("phone",se()('input[name="phone"]').val()),r.append("position",se()('input[name="position"]').val()),r.append("status",this.state.userInfo.status),r.append("surname",se()('input[name="surname"]').val()),r.append("vuz",se()('input[name="vuz"]').val()),r.append("city",se()('input[name="city"]').val()),r.append("sex",this.state.userInfo.sex),se.a.ajax({url:"".concat(de,"/api/user/update.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(n){switch(n.result){case 0:a.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"});break;case 1:t||(a.fetchUserInfo("update"),a.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b",{variant:"success"}),a.addChild(e))}},error:function(){a.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}},{key:"prepareToUpdate",value:function(e){this.setState({preparedId:e,open:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,i=t.newChildInput,o=t.childName,c=t.childBirthyear,l=t.nameError,s=t.yearError,u=this.props.store.user,d={},p=u;return p.childs&&(d=JSON.parse(p.childs.replace(/\//g,""))),u.hasOwnProperty("name")&&(p=window.location.pathname.slice(3)===p.id?u:this.state.userInfo),r.a.createElement(ue.r,{className:"personal"},n?r.a.createElement(_,{minHeight:400,color:"primary"}):r.a.createElement(fn,{id:"personal-info",action:"",method:"POST",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"personal-header"},"1"===u.admin?"1"===p.admin?r.a.createElement(ue.v,{title:"\u0420\u0430\u0437\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"},r.a.createElement(tn.a,{onClick:function(){return e.prepareToUpdate(p.id)},style:{position:"absolute",right:30,color:"#F9A825",cursor:"pointer"}})):r.a.createElement(ue.v,{title:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c"},r.a.createElement(an.a,{onClick:function(){return e.prepareToUpdate(p.id)},style:{position:"absolute",right:30,color:"F9A825",cursor:"pointer"}})):null,r.a.createElement("div",{className:"personal-header__photo"},r.a.createElement("div",{style:{background:"url(".concat(p.avatar?p.avatar:j.a,") no-repeat center/cover")}})),r.a.createElement("div",{className:u.id===p.id?"personal-header__info":null},u.id===p.id?r.a.createElement(a.Fragment,null,this.createInput("\u0418\u043c\u044f",p.name,"name"),this.createInput("\u0424\u0430\u043c\u0438\u043b\u0438\u044f",p.surname,"surname"),this.createInput("\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",p.position,"position")):r.a.createElement(a.Fragment,null,r.a.createElement(Rt.a,{className:"user-header",value:p.name+" "+p.surname}),r.a.createElement("span",{className:"user-position"},this.createInput("\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",p.position,"position"))),u.id===p.id?r.a.createElement(Pt.a,{mask:"+7 (999) 99-99-999",value:p.phone,onChange:this.handleChange},function(){return r.a.createElement(ue.u,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone",fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},variant:"outlined"})}):r.a.createElement(xn,null,r.a.createElement(Rt.a,{id:"phone",style:{pointerEvents:"none",padding:0},value:p.phone})),u.id===p.id?r.a.createElement(ue.h,null,r.a.createElement(Wt.a,{variant:"outlined",name:"birthday",margin:"dense",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",format:"1"===p.admin?"Do MMMM YYYY":"Do MMMM",value:this.state.selectedDate?this.state.selectedDate:p.birthday,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,"aria-describedby":"component-helper-text",cancelLabel:"\u041e\u0442\u043c\u0435\u043d\u0430"}),r.a.createElement(ue.k,{id:"component-helper-text"},"*\u0413\u043e\u0434 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u0438\u0434\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0443")):null)),r.a.createElement("div",{className:"personal-section"},u.id===p.id||p.status||0!==d.length?r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(ue.w,{vazriant:"h6",color:"primary"},"\u0421\u0435\u043c\u044c\u044f"),r.a.createElement("hr",null)):null,u.id===p.id?r.a.createElement(ue.h,{style:{width:"100%"}},r.a.createElement(ue.n,{htmlFor:"status"},"\u0421\u0435\u043c\u0435\u0439\u043d\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),r.a.createElement(ue.s,{value:p.status||"",onOpen:this.listenSelect,onClose:this.closeSelectOnScroll,open:this.state.isSelectOpened,onChange:this.handleChange,onClick:function(){return e.setState({isSelectOpened:!e.state.isSelectOpened})},input:r.a.createElement(ue.q,{labelWidth:500,name:"status",id:"status"})},"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"===p.sex?r.a.createElement(ue.o,{value:"\u041d\u0435 \u0437\u0430\u043c\u0443\u0436\u0435\u043c"},"\u041d\u0435 \u0437\u0430\u043c\u0443\u0436\u0435\u043c"):r.a.createElement(ue.o,{value:"\u041d\u0435 \u0436\u0435\u043d\u0430\u0442"},"\u041d\u0435 \u0436\u0435\u043d\u0430\u0442"),"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"===p.sex?r.a.createElement(ue.o,{value:"\u0417\u0430\u043c\u0443\u0436\u0435\u043c"},"\u0417\u0430\u043c\u0443\u0436\u0435\u043c"):r.a.createElement(ue.o,{value:"\u0416\u0435\u043d\u0430\u0442"},"\u0416\u0435\u043d\u0430\u0442"),r.a.createElement(ue.o,{value:"\u0412 \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u043e\u043c \u0431\u0440\u0430\u043a\u0435"},"\u0412 \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u043e\u043c \u0431\u0440\u0430\u043a\u0435"))):p.status?r.a.createElement(xn,null,r.a.createElement(ue.h,null,r.a.createElement(ue.n,{htmlFor:"status"},"\u0421\u0435\u043c\u0435\u0439\u043d\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),r.a.createElement(Rt.a,{id:"status",value:p.status}))):null),r.a.createElement("div",{className:"personal-section"},u.id!==p.id?null:r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(ue.w,{variant:"h6",color:"primary"},"\u0414\u0435\u0442\u0438"),r.a.createElement("hr",null)),r.a.createElement(vn,null,Object.keys(d).map(function(t){return r.a.createElement(bn,{key:d[t].id},r.a.createElement(ue.w,{variant:"subtitle2"},"\u0418\u043c\u044f: ",d[t].child_name," "),r.a.createElement(ue.w,{variant:"caption"},d[t].child_birthyear," \u0433.\u0440."),u.id===p.id?r.a.createElement(ue.v,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",placement:"right"},r.a.createElement(fe.a,{onClick:function(){return e.deleteChild(d[t].id)}})):null)}))),i?r.a.createElement(En,null,r.a.createElement("div",null,r.a.createElement(ue.u,{label:"\u0418\u043c\u044f",value:o,fullWidth:!0,name:"childName",margin:"dense",error:!l,InputLabelProps:{shrink:!0},onChange:this.handleChild,variant:"outlined"}),r.a.createElement(ue.u,{label:"\u0413\u043e\u0434 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",value:c||Ct()(Date.now()).format("L").split(".").reverse().join("-"),fullWidth:!0,name:"childBirthyear",margin:"dense",type:"date",error:!s,InputLabelProps:{shrink:!0},onChange:this.handleChild,variant:"outlined"})),r.a.createElement("span",null,r.a.createElement(ue.v,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",placement:"right"},r.a.createElement(Lt.a,{onClick:this.addChild})),r.a.createElement(ue.v,{title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",placement:"right"},r.a.createElement(fe.a,{onClick:function(){return e.setState({newChildInput:!1,childBirthyear:"",childName:"",nameError:!0,yearError:!0})}})))):null,u.id===p.id?r.a.createElement(yn,null,r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:i?this.addChild:this.prepareChild},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")):null),r.a.createElement("div",{className:"personal-section"},u.id===p.id||p.city||p.disctrict||p.adress?r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(ue.w,{variant:"h6",color:"primary"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),r.a.createElement("hr",null)):null,u.id===p.id||p.city||p.disctrict||p.adress?r.a.createElement(a.Fragment,null,this.createInput("\u0420\u043e\u0434\u043d\u043e\u0439 \u0433\u043e\u0440\u043e\u0434",p.city,"city"),this.createInput("\u041e\u0431\u043b\u0430\u0441\u0442\u0438/\u043a\u0440\u0430\u044f",p.district,"district"),this.createInput("\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441",p.adress,"adress")):null),r.a.createElement("div",{className:"personal-section"},u.id===p.id||p.vuz||p.fakultet?r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(ue.w,{variant:"h6",color:"primary"},"\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("hr",null)):null,u.id===p.id||p.vuz||p.fakultet?r.a.createElement(a.Fragment,null,this.createInput("\u0412\u0423\u0417",p.vuz,"vuz"),this.createInput("\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442",p.fakultet,"fakultet")):null),"\u043c\u0443\u0436\u0441\u043a\u043e\u0439"===p.sex?r.a.createElement("div",{className:"personal-section"},u.id===p.id||p.army_country||p.army_type?r.a.createElement("div",{className:"personal-section__header"},r.a.createElement(ue.w,{variant:"h6",color:"primary"},"\u0421\u043b\u0443\u0436\u0431\u0430"),r.a.createElement("hr",null)):null,u.id===p.id||p.army_country||p.army_type?r.a.createElement(a.Fragment,null,this.createInput("\u0421\u0442\u0440\u0430\u043d\u0430",p.army_country,"army_country"),this.createInput("\u0420\u043e\u0434 \u0432\u043e\u0439\u0441\u043a",p.army_type,"army_type")):null):null,u.id===p.id?r.a.createElement(gn,null,r.a.createElement(ue.a,{type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435")):null),r.a.createElement(Ut,{open:this.state.open,handleClose:this.handleClose.bind(this),component:r.a.createElement(Qt,{setAdministrator:this.setAdministrator,handleClose:this.handleClose.bind(this),message:"1"===p.admin?"\u0440\u0430\u0437\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430":"\u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c ".concat(p.name," ").concat(p.surname," \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c")})}))}}]),t}(a.Component),fn=O.a.form(dn()),gn=O.a.div(un()),bn=O.a.div(sn()),vn=O.a.div(ln()),En=O.a.div(cn()),yn=O.a.div(on()),xn=O.a.div(rn()),wn=Object(I.b)(function(e){return{store:e}},function(e){return{updateUser:function(t,n){return e({type:"UPDATE_USER",payload:n,field:t})},onAddChild:function(t){return e({type:"ADD_CHILD",payload:t})},onRemoveChild:function(t){return e({type:"REMOVE_CHILD",payload:t})}}})(Object(z.withSnackbar)(hn)),jn=n(13),On=n(165),kn=n.n(On),Cn=n(69),Sn=n.n(Cn);var Tn=Object(jn.withStyles)(function(e){return{fixed:{position:"fixed",bottom:window.innerWidth>600?2*e.spacing.unit:74,right:3*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(Sn.a,{title:e.title,"aria-label":e.title},r.a.createElement(ue.g,{color:e.secondary?"secondary":"primary",className:t.fixed},r.a.createElement(kn.a,null))))}),Nn=n(114),Dn=n.n(Nn),_n=n(109),In=n.n(_n),An=n(110),Fn=n.n(An),Mn=n(111),Pn=n.n(Mn),qn=n(112),Ln=n.n(qn),Hn=n(39),Rn=n.n(Hn),Wn=n(21),zn=n.n(Wn),Bn=n(75),Un=n(9),Yn=n.n(Un),Vn=n(171),Gn=n(166),Kn=n.n(Gn),Qn=n(42);function Xn(e){var t=e.inputRef,n=Object(Bn.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))}var Jn={Control:function(e){return r.a.createElement(ue.u,Object.assign({fullWidth:!0,InputProps:{inputComponent:Xn,inputProps:Object(Ft.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(ue.r,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ue.c,{tabIndex:-1,label:e.children,className:Yn()(e.selectProps.classes.chip,Object(At.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(Kn.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(ue.w,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(ue.o,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(ue.w,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(ue.w,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},Zn=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,a=this.props.users.map(function(e){return{value:e.id,label:"".concat(e.name," ").concat(e.surname)}}),i={input:function(e){return Object(Ft.a)({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(ue.p,null,r.a.createElement(Vn.a,{classes:t,styles:i,textFieldProps:{label:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",InputLabelProps:{shrink:!0}},options:a,components:Jn,value:this.props.multi,onChange:this.props.handleChange("multi"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432",isMulti:!0}),r.a.createElement(ue.i,{control:r.a.createElement(ue.b,{onChange:this.props.changeImportance,color:"primary"}),label:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u0443\u044e"})))}}]),t}(r.a.Component),$n=Object(jn.withStyles)(function(e){return{root:{flexGrow:1,height:120,marginTop:20,display:"flex",flexDirection:"column",justifyContent:"space-between"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(Qn.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0}}},{withTheme:!0})(Zn),ea=n(49),ta=n.n(ea),na=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(ta.a,{container:!0,justify:"space-around",style:{paddingBottom:30}},r.a.createElement(Wt.a,{margin:"normal",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",value:this.props.selectedDate,minDate:new Date((new Date).getTime()+864e5),fullWidth:!0,onChange:this.props.handleDateChange,cancelLabel:"\u041e\u0442\u043c\u0435\u043d\u0430",emptyLabel:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0434\u0430\u0442\u0430"}),r.a.createElement(Wt.d,{ampm:!1,margin:"normal",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f",value:this.props.selectedTime,locale:"ru",fullWidth:!0,minutesStep:5,onChange:this.props.handleTimeChange,cancelLabel:"\u041e\u0442\u043c\u0435\u043d\u0430",emptyLabel:"\u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e \u0432\u0440\u0435\u043c\u044f"}))}}]),t}(r.a.Component);function aa(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n  height: 150px;\n\n  textarea {\n    max-height: 130px;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 100%;\n    & > div {\n      height: 100%;\n    }\n  }\n"]);return aa=function(){return e},e}function ra(e){return r.a.createElement(ia,null,r.a.createElement(ue.u,{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430",multiline:!0,variant:"outlined",name:"text",onChange:e.handleTextChange,value:e.text,required:!0}))}var ia=O.a.div(aa());var oa=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={activeStep:0},n.handleNext=function(){n.setState(function(e){return{activeStep:e.activeStep+1}})},n.handleBack=function(){n.setState(function(e){return{activeStep:e.activeStep-1}})},n.handleReset=function(){n.setState({activeStep:0})},n.checkDisabled=function(e,t,n,a,r){return(0!==e||0===t.length)&&((1!==e||!n||!a)&&!(2===e&&r.length>0))},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.users,i=t.multi,o=t.selectedTime,c=t.selectedDate,l=t.text,s=["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0438 \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u044c","\u041d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043c\u044f","\u041f\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443"],u=this.state.activeStep;return r.a.createElement("div",{className:n.root},r.a.createElement(In.a,{activeStep:u,orientation:"vertical"},s.map(function(t,a){return r.a.createElement(Fn.a,{key:t},r.a.createElement(Pn.a,null,t),r.a.createElement(Ln.a,null,r.a.createElement(zn.a,null,function(e){switch(e){case 0:return"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432. \u041a \u0442\u043e\u043c\u0443 \u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u0443\u044e \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438.";case 1:return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043c\u044f \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044f\u0445.";case 2:return"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0435\u043c\u0443 \u0437\u0430\u0434\u0430\u0447\u0438 \u0432 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u0445.";default:return"Unknown step"}}(a)),r.a.createElement("div",{className:n.actionsContainer},r.a.createElement("div",null,r.a.createElement(Rn.a,{disabled:0===u,onClick:e.handleBack,className:n.button},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(Rn.a,{variant:"contained",color:"primary",onClick:u===s.length-1?function(){e.props.handleSubmit(),e.handleNext()}:e.handleNext,className:n.button,disabled:e.checkDisabled(u,i,c,o,l)},u===s.length-1?"\u0424\u0438\u043d\u0438\u0448":"\u0414\u0430\u043b\u044c\u0448\u0435")))))})),0===u?r.a.createElement($n,{users:a,multi:i,handleChange:this.props.handleChange,changeImportance:this.props.changeImportance}):1===u?r.a.createElement(na,{selectedTime:o,selectedDate:c,handleDateChange:this.props.handleDateChange,handleTimeChange:this.props.handleTimeChange}):2===u?r.a.createElement(ra,{text:l,handleTextChange:this.props.handleTextChange}):null,u===s.length&&r.a.createElement(Ot.a,{square:!0,elevation:0,className:n.resetContainer},r.a.createElement(zn.a,null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430."),r.a.createElement(Rn.a,{onClick:function(){e.handleReset(),e.props.resetAll()},variant:"contained",color:"primary",className:n.button},"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u0437\u0430\u0434\u0430\u0447\u0443"),r.a.createElement(Rn.a,{onClick:this.props.handleClose,className:n.button},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}}]),t}(r.a.Component),ca=Object(jn.withStyles)(function(e){return{root:{width:"100%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}})(oa);function la(){var e=Object(p.a)(["\n  position: absolute;\n  top: 0; bottom: 0;\n  left: 0; right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5;\n  background: rgba(0,0,0,.17);\n"]);return la=function(){return e},e}function sa(){var e=Object(p.a)(["\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  max-width: 600px;\n  min-height: 300px;\n  height: fit-content;\n  margin: auto;\n  background: #ffffff;\n  border-radius: 10px;\n  outline: none;\n  z-index: 10;\n\n  .listFor {\n    max-height: 220px;\n    margin-top: 20px;\n    overflow: auto;\n  }\n  .listFor::-webkit-scrollbar {\n    width: 10px;\n  }\n  .listFor::-webkit-scrollbar-track {\n    background-color: #ebebeb;\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n  }\n  .listFor::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n    background: #1976d2; \n  }\n\n  & > div {\n    height: fit-content;\n    padding: 20px 30px;\n  }\n   \n  .closeNewTask svg {\n    font-size: 30px;\n    color: #1976d2;\n    opacity: .8;\n    cursor: pointer;\n    position: absolute;\n    right: 20px;\n    top: 20px;\n\n    :hover {\n      opacity: .8;\n      transition: .37s ease;\n    }\n  }\n  @media all and (max-width: 600px) {\n    top: 0;\n    max-width: 100%;\n    border-radius: unset;\n    height: calc(100vh - 55px);\n    margin: unset;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    & > div {\n      padding: 20px 15px;\n      box-shadow: unset;\n      & > div {\n        > div:first-child {\n          padding: 20px 5px;\n        }\n      }\n    }\n    .closeNewTask svg {\n      font-size: 32px;\n      right: 15px;\n    } \n  }\n"]);return sa=function(){return e},e}var ua=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={selectedDate:null,selectedTime:null,multi:[],text:"",importance:0},n.handleChange=function(e){return function(t){return n.setState(Object(At.a)({},e,t))}},n.handleDateChange=function(e){return n.setState({selectedDate:e.format()})},n.handleTimeChange=function(e){return n.setState({selectedTime:e.format()})},n.handleTextChange=function(e){return n.setState({text:e.target.value})},n.changeImportance=function(){return n.setState({importance:!n.state.importance})},n.resetAll=function(){n.setState({selectedDate:new Date,selectedTime:new Date,multi:[],text:"",importance:0})},n.handleSubmit=function(){var e=n.state,t=e.multi,a=e.selectedTime,r=e.selectedDate,i=e.text,o=e.importance,c=n.props.store.user,l=new FormData,s=Object(ce.a)(Object(ce.a)(n)),u=[],d=new Date;t.forEach(function(e){return u.push("for".concat(e.value))}),l.append("from",c.id),l.append("date",d.toLocaleDateString()),l.append("for",u.join(",")),l.append("time","".concat(d.getHours()<10?"0"+d.getHours():d.getHours(),":").concat(d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes())),l.append("until_date",r.slice(0,10)),l.append("text",i),l.append("until_time",a.slice(11,16)),l.append("importance",o?"1":"0"),l.append("created_at",(new Date).getTime()),se.a.ajax({url:"".concat(de,"/api/tasks/add.php"),data:l,processData:!1,contentType:!1,type:"POST",success:function(){fetch("".concat(de,"/api/tasks/read.php?id=").concat(c.id)).then(function(e){return e.json()}).then(function(e){return s.props.onAddNewTask(e.data)}).then(function(){return s.props.enqueueSnackbar("\u0417\u0430\u0434\u0430\u0447\u0430 \u0431\u044b\u043b\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430",{variant:"success"})})},error:function(){return s.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.multi,n=e.selectedTime,i=e.selectedDate,o=e.text;return r.a.createElement(a.Fragment,null,r.a.createElement(da,null,r.a.createElement(ue.r,null,r.a.createElement("span",{className:"closeNewTask",onClick:this.props.handleClose},r.a.createElement(ue.v,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",placement:"left"},r.a.createElement(Dn.a,null))),r.a.createElement(ue.w,{variant:"h5"},"\u041d\u043e\u0432\u0430\u044f \u0417\u0430\u0434\u0430\u0447\u0430"),r.a.createElement(ca,{users:this.props.users,multi:t,text:o,selectedTime:n,selectedDate:i,handleChange:this.handleChange,handleTextChange:this.handleTextChange,handleDateChange:this.handleDateChange,handleTimeChange:this.handleTimeChange,changeImportance:this.changeImportance,resetAll:this.resetAll,handleClose:this.props.handleClose,handleSubmit:this.handleSubmit}))),window.innerWidth>=600?r.a.createElement(pa,{onClick:this.props.handleClose}):null)}}]),t}(a.Component),da=O.a.div(sa()),pa=O.a.div(la()),ma=Object(I.b)(function(e){return{store:e}},function(e){return{onAddNewTask:function(t){return e({type:"ADD_TASK",payload:t})}}})(Object(z.withSnackbar)(ua));function ha(){var e=Object(p.a)(["\n  .task-completed {\n    color: darkgreen;\n  }\n  .task-doing {\n    color: darkblue;\n  }\n  .task-late {\n    color: darkred;\n  }\n"]);return ha=function(){return e},e}function fa(){var e=Object(p.a)(["\n  margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n"]);return fa=function(){return e},e}function ga(){var e=Object(p.a)(["\n  svg {\n    font-size: 32px;\n    color: rgba(0,0,0,0.54);\n    right: 55px;\n    padding: 5px;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    position: absolute;\n  }\n"]);return ga=function(){return e},e}function ba(){var e=Object(p.a)(["\n  svg {\n    color: rgba(0,0,0,.15) !important;\n    margin-left: 8px;\n    font-size: 22px;\n  }\n"]);return ba=function(){return e},e}var va=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).getUserNames=function(e){var t=n.props.store.user,a=e.split(","),r="\u0414\u043b\u044f: ";return a.forEach(function(e){if(e.slice(3)===t.id)return r+="\u0412\u0430\u0441  ";r+="".concat(n.props.users.find(function(t){return t.id===e.slice(3)}).name," "),r+="".concat(n.props.users.find(function(t){return t.id===e.slice(3)}).surname,", ")}),r},n.getAdresant=function(e){var t="\u041e\u0442: ";return e===n.props.store.user.id?t+"\u0412\u0430\u0441":n.props.users.length>0?(t+=n.props.users.find(function(e){return e.id===n.props.task.from}).name,t+=" ".concat(n.props.users.find(function(e){return e.id===n.props.task.from}).surname)):void 0},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"openTask",value:function(e,t,n){var a=this;if(!n){e.stopPropagation();var r=new FormData;r.append("id",t),se.a.ajax({url:"".concat(de,"/api/tasks/mark_as_read.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(e){return a.props.markTask(t)}})}}},{key:"render",value:function(){var e=this,t=Ct()(new Date),n=Ct()(this.props.task.until_date),a=Ct.a.duration(n.diff(t))._milliseconds,i=this.props.store.user;return r.a.createElement(ue.d,{onClick:function(t){return e.openTask(t,e.props.task.id,e.props.task.readed)}},r.a.createElement(ue.f,{expandIcon:r.a.createElement(W.a,null)},r.a.createElement(ue.w,{variant:"caption"},r.a.createElement(ue.w,{variant:"subtitle2",style:Ea.flex},this.props.task.from===i.id?"\u041f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e: ":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e: ",this.props.task.date," \u0432 ","".concat(this.props.task.time," "),"1"===this.props.task.importance?r.a.createElement(ue.v,{title:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a '\u0412\u0430\u0436\u043d\u043e\u0435'",placement:"top-start"},r.a.createElement(ya,null,r.a.createElement(Ye.a,null))):null),this.getAdresant(this.props.task.from),r.a.createElement(ja,null,r.a.createElement(ue.w,{variant:"caption",className:Yn()({"task-completed":"1"===this.props.task.status,"task-doing":"0"===this.props.task.status,"task-late":a<0})},"1"===this.props.task.status&&a>0?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430":"0"===this.props.task.status&&a>0?"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f":"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u0430"))),this.props.task.from===i.id?r.a.createElement(xa,{onClick:function(t){return e.props.handleConfirm(t,e.props.task.id)}},r.a.createElement(ue.v,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",placement:"left"},r.a.createElement(be.a,null))):null),r.a.createElement(ue.e,{style:Ea.details},r.a.createElement(ue.w,{variant:"h6"}," ",this.props.task.text,"  "),r.a.createElement(wa,null,r.a.createElement("div",null,r.a.createElement(ue.w,{variant:"caption"},this.props.users.length>0?this.getUserNames(this.props.task.for).slice(0,-2):null),r.a.createElement(ue.w,{variant:"subtitle2"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e: ",this.props.task.until_date.split("-").reverse().join("."),", ",this.props.task.until_time)),"0"===this.props.task.status&&this.props.task.for.includes("for".concat(i.id))?a<0?r.a.createElement(ue.v,{title:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443",placement:"top-start",leaveDelay:200},r.a.createElement("span",null,r.a.createElement(ue.a,{disabled:!0,variant:"contained",color:"primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"))):r.a.createElement(ue.a,{onClick:function(){return e.props.handleCompleted(e.props.task.id)},variant:"contained",color:"primary"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"):null)))}}]),t}(r.a.Component),Ea={flex:{display:"flex",alignItems:"center"},details:{flexDirection:"column"}},ya=O.a.div(ba()),xa=O.a.span(ga()),wa=O.a.div(fa()),ja=O.a.span(ha()),Oa=Object(I.b)(function(e){return{store:e}},function(e){return{markTask:function(t){return e({type:"READED_TASK",payload:t})}}})(va);function ka(){var e=Object(p.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: 100vh;\n  width: 100vw;\n  background: rgba(0,0,0,.37);\n"]);return ka=function(){return e},e}function Ca(){var e=Object(p.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return Ca=function(){return e},e}function Sa(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return Sa=function(){return e},e}function Ta(){var e=Object(p.a)(["\n  position: fixed;\n  height: 200px;\n  width: 400px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  z-index: 1000;\n  & > div {\n    height: 100%;\n    position: relative;\n    display: flex;\n    padding: 30px;\n    flex-direction: column;\n    justify-content: center;\n  }\n  @media all and (max-width: 600px) {\n    width: 95%;\n  }\n"]);return Ta=function(){return e},e}function Na(e){return r.a.createElement(a.Fragment,null,r.a.createElement(Da,null,r.a.createElement(ue.r,null,r.a.createElement(Ia,{onClick:e.handleClose},r.a.createElement(fe.a,null)),r.a.createElement(ue.w,{variant:"body1"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c ".concat(e.name,"?")),r.a.createElement(ue.w,{variant:"caption"},"\u0412\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e."),r.a.createElement(_a,null,r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:e.handleDelete},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(ue.a,{variant:"text",color:"default",onClick:e.handleClose},"\u041e\u0442\u043c\u0435\u043d\u0430")))),r.a.createElement(Aa,{onClick:e.handleClose}))}var Da=O.a.div(Ta()),_a=O.a.div(Sa()),Ia=O.a.div(Ca()),Aa=O.a.div(ka());function Fa(){var e=Object(p.a)(["\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); \n  height: 80px;\n  padding: 36px 20px 15px;\n  font-size: 24px;\n  background: #fff;\n"]);return Fa=function(){return e},e}function Ma(e){return r.a.createElement(Pa,null,r.a.createElement(zn.a,{variant:"h6"},e.title))}var Pa=O.a.div(Fa()),qa=n(74),La=n.n(qa),Ha=n(58),Ra=n.n(Ha),Wa=n(92),za=n.n(Wa);function Ba(){var e=Object(p.a)(["\n  .no-tasks {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    opacity: .37;\n    height: 300px;\n    font-size: 20px;\n  }\n"]);return Ba=function(){return e},e}var Ua=null,Ya=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,confirm:!1,preparedToDelete:null,initial:[],users:[],value:0},n.componentDidMount=function(){n.props.store.unreaded.tasks>0&&(Ua=setTimeout(function(){document.querySelector(".tasksBadge span").style.display="none",n.props.onReadTasks()},2e3)),fetch("".concat(de,"/api/tasks/read.php")).then(function(e){return e.json()}).then(function(e){n.props.getTasks(e.data),n.setState({initial:e.data||[]})}).then(function(){return n.forceUpdate()}),fetch("".concat(de,"/api/user/read.php")).then(function(e){return e.json()}).then(function(e){return n.setState({users:e.data})})},n.handleChange=function(e,t){return n.setState({value:t})},n.handleOpen=function(e){return n.setState({open:!0})},n.handleClose=function(){return n.setState({open:!1,confirm:!1,preparedToDelete:null})},n.handleConfirm=function(e,t){e.stopPropagation(),n.setState({confirm:!0,preparedToDelete:t})},n.handleCompleted=function(e){var t=new FormData,a=Object(ce.a)(Object(ce.a)(n)),r=new Date,i=r.toLocaleDateString(),o="".concat(r.getHours()<10?"0"+r.getHours():r.getHours(),":").concat(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes());t.append("id",e),t.append("done_date",i),t.append("done_time",o),se.a.ajax({url:"".concat(de,"/api/tasks/complete.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(){a.props.enqueueSnackbar('\u0417\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u0430 \u043a\u0430\u043a "\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f"',{variant:"success"}),a.props.markAsCompleted(a.state.tasks),a.forceUpdate()},error:function(){return a.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",{variant:"error"})}})},n.handleFilter=function(e,t){var a=n.props.store.user;n.setState({disabledButton:e});var r=n.props.store.tasks;"initial"===t&&n.props.onFilter(n.state.initial),"transfered"===t&&(r=r.filter(function(e){return e.from===a.id}),n.props.onFilter(r)),"completed"===t&&(r=r.filter(function(e){return"1"===e.status}),n.props.onFilter(r))},n.handleDelete=function(){var e=new FormData,t=Object(ce.a)(Object(ce.a)(n));e.append("id",n.state.preparedToDelete),se.a.ajax({url:"".concat(de,"/api/tasks/delete.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(){t.props.enqueueSnackbar("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",{variant:"info"}),t.props.onDeleteTask(t.state.preparedToDelete),t.handleClose(),t.forceUpdate()},error:function(){return t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",{variant:"error"})}})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillUnmount",value:function(){window.clearTimeout(Ua)}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,i=t.users,o=this.props.store.user;return r.a.createElement(Va,null,r.a.createElement(ue.r,null,window.innerWidth<600?r.a.createElement(Ma,{title:"\u0417\u0430\u0434\u0430\u0447\u0438"}):null,o.hasOwnProperty("name")?r.a.createElement(a.Fragment,null,r.a.createElement(za.a,{position:"static",color:"default"},r.a.createElement(La.a,{value:this.state.value,indicatorColor:"primary",textColor:"primary",onChange:this.handleChange,variant:"fullWidth"},r.a.createElement(Ra.a,{label:"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",onClick:function(){return e.handleFilter(1,"initial")}}),r.a.createElement(Ra.a,{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435",onClick:function(){return e.handleFilter(2,"transfered")}}),r.a.createElement(Ra.a,{label:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435",onClick:function(){return e.handleFilter(3,"completed")}}))),this.props.store.tasks.length>0?this.props.store.tasks.map(function(t){return r.a.createElement(Oa,{key:t.id,task:t,users:i,handleCompleted:e.handleCompleted,handleConfirm:e.handleConfirm.bind(e)})}):r.a.createElement(ue.w,{className:"no-tasks",variant:"caption"},"\u043d\u0435\u0442 \u0437\u0430\u0434\u0430\u0447")):r.a.createElement(_,{minHeight:300,color:"primary"})),"1"===this.props.store.user.admin?r.a.createElement("span",{onClick:this.handleOpen},r.a.createElement(Tn,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"})):null,r.a.createElement(Ut,{open:n,handleClose:this.handleClose.bind(this),component:r.a.createElement(ma,{handleClose:this.handleClose.bind(this),users:i})}),r.a.createElement(Ut,{open:this.state.confirm,handleClose:this.handleClose.bind(this),component:r.a.createElement(Na,{handleDelete:this.handleDelete,handleClose:this.handleClose.bind(this),name:"\u0437\u0430\u0434\u0430\u0447\u0443"})}))}}]),t}(a.Component),Va=O.a.div(Ba()),Ga=Object(I.b)(function(e){return{store:e}},function(e){return{markAsCompleted:function(t){e({type:"MARK_COMPLETED",payload:t})},onDeleteTask:function(t){e({type:"DELETE_TASK",payload:t})},onFilter:function(t){e({type:"FILTER_TASKS",payload:t})},getTasks:function(t){e({type:"FETCH_TASKS",payload:t})},onReadTasks:function(){return e({type:"READ_TASKS"})}}})(Object(z.withSnackbar)(Ya));function Ka(){var e=Object(p.a)(["\n  cursor: pointer;\n  position: absolute;\n  top: 15px;\n  right: 20px;\n  svg {\n    font-size: 32px;\n    color: #1976d2;\n  }\n  @media all and (max-width: 600px) {\n    right: 15px;\n  }\n"]);return Ka=function(){return e},e}function Qa(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n  height: 150px;\n\n  textarea {\n    max-height: 130px;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 85%;\n    & > div {\n      height: 100%;\n    }\n  }\n  @media all and (max-width: 600px) {\n    & > div {\n      width: 100%;\n    }\n    height: 250px;\n    textarea {\n      max-height: 230px;\n    }\n  }\n"]);return Qa=function(){return e},e}function Xa(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 5px;\n\n  & > div {\n    width: 85%;\n  }\n  @media all and (max-width: 600px) {\n    flex-direction: column;\n    align-items: flex-start;\n    & > div {\n      width: 100%;\n    }\n  }\n"]);return Xa=function(){return e},e}function Ja(){var e=Object(p.a)(["\n  display: flex;\n  height: 90px;\n  align-items: center;\n  justify-content: space-between;\n  width: 85%;\n  margin-left: 15%;\n  @media all and (max-width: 600px) {\n    width: 100%;\n    margin-left: 0;\n  }\n"]);return Ja=function(){return e},e}function Za(){var e=Object(p.a)(["\n  .image {\n    width: 56px;\n    height: 56px;\n    border-radius: 50%;\n    display: inline-block;\n  }\n  padding: 0 25px;\n  @media all and (max-width: 600px) {\n    .image {\n      display: none;\n    }\n    padding: 0 15px;\n  }\n"]);return Za=function(){return e},e}function $a(){var e=Object(p.a)(["\n  display: flex;\n  height: 50px;\n  align-items: center;\n  justify-content: center;\n"]);return $a=function(){return e},e}function er(){var e=Object(p.a)(["\n  background: #ffffff;\n  width: 600px;\n  position: fixed;\n  top: 150px;\n  left: 0;\n  right: 0;\n  margin: auto;\n  border-radius: 10px;\n  z-index: 37;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n\n  .close {\n    top: -5px;\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    box-shadow: unset;\n    border-radius: 0;\n    padding-top: 10px;\n  }\n"]);return er=function(){return e},e}function tr(){var e=Object(p.a)(["\n  position: fixed;\n  background: rgba(0,0,0, .5);\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  z-index: 30;\n"]);return tr=function(){return e},e}var nr=O.a.div(tr()),ar=O.a.div(er()),rr=O.a.div($a()),ir=O.a.div(Za()),or=O.a.div(Ja()),cr=O.a.div(Xa()),lr=O.a.div(Qa()),sr=O.a.div(Ka()),ur=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.submitNews,n=e.closeNews,i=e.newNewsTopic,o=e.handleChange,c=e.invalidTopic,l=e.invalidText,s=e.newNewsText,u=e.newNewsImportance,d=e.changeImportance,p=e.store.user,m=p.avatar;return r.a.createElement(a.Fragment,null,r.a.createElement(ar,null,r.a.createElement(rr,null,r.a.createElement(ue.w,{variant:"button"},"\u041d\u043e\u0432\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement(ue.v,{placement:"left",title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"},r.a.createElement(sr,null,r.a.createElement(fe.a,{onClick:n})))),r.a.createElement(ir,null,r.a.createElement("form",{action:"",method:"POST",onSubmit:t},r.a.createElement(cr,null,""===p.avatar?r.a.createElement("div",{className:"image",alt:"".concat(p.name," ").concat(p.surname),style:{background:"url(".concat(j.a,") no-repeat center/cover")}}):r.a.createElement("div",{className:"image",alt:"".concat(p.name," ").concat(p.surname),style:{background:"url(".concat(m,") no-repeat center/cover")}}),r.a.createElement(ue.u,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:i,onChange:o,error:c,variant:"outlined",name:"newNewsTopic",type:"text",required:!0})),r.a.createElement(lr,null,r.a.createElement(ue.u,{label:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",multiline:!0,variant:"outlined",name:"newNewsText",error:l,onChange:o,value:s,required:!0})),r.a.createElement(or,null,r.a.createElement(ue.i,{control:r.a.createElement(ue.b,{checked:u,onChange:d,color:"primary"}),label:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u043e\u0435"}),r.a.createElement(ue.a,{onClick:t,variant:"contained",color:"primary"},window.innerWidth>600?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c":r.a.createElement(kn.a,null)))))),r.a.createElement(nr,{onClick:n}))});function dr(){var e=Object(p.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return dr=function(){return e},e}function pr(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return pr=function(){return e},e}function mr(){var e=Object(p.a)(["\n  position: fixed !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0,0,0,0.54);\n  width: 100vw;\n  height: 100vh !important;\n  z-index: 5;\n"]);return mr=function(){return e},e}function hr(){var e=Object(p.a)(["\n  position: fixed;\n  height: 200px;\n  width: 400px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  & > div {\n    height: 100%;\n    position: relative;\n    display: flex;\n    padding: 30px;\n    flex-direction: column;\n    justify-content: center;\n    z-index: 10;\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n  }\n"]);return hr=function(){return e},e}function fr(e){return r.a.createElement(gr,null,r.a.createElement(ue.r,null,r.a.createElement(Er,{onClick:e.closeNews},r.a.createElement(fe.a,null)),r.a.createElement(ue.w,{variant:"body1"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c?"),r.a.createElement(ue.w,{variant:"caption"},"\u0412\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u043d\u043e\u0432\u043e\u0441\u0442\u0438 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e."),r.a.createElement(vr,null,r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:e.removeNews},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(ue.a,{variant:"text",color:"default",onClick:e.closeNews},"\u041e\u0442\u043c\u0435\u043d\u0430"))),r.a.createElement(br,null))}var gr=O.a.div(hr()),br=O.a.section(mr()),vr=O.a.div(pr()),Er=O.a.div(dr());function yr(){var e=Object(p.a)(["\n  cursor: pointer;\n  svg {\n    color: rgba(0,0,0,0.54);\n  }\n"]);return yr=function(){return e},e}function xr(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin: 15px 0 10px;\n  height: 120px;\n\n  textarea {\n    max-height: 100px;\n    &::-webkit-scrollbar {\n      width: 10px;\n    }\n   \n    &::-webkit-scrollbar-track {\n      background-color: #ebebeb;\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      -webkit-border-radius: 10px;\n      border-radius: 10px;\n      background: #1976d2; \n    }\n  }\n\n  & > div {\n    width: 100%;\n    & > div {\n      height: 100%;\n    }\n  }\n"]);return xr=function(){return e},e}function wr(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n\n  p {\n    margin-right: 5px;\n    color: #657786;\n  }\n"]);return wr=function(){return e},e}function jr(){var e=Object(p.a)(["\n  position: absolute;\n  left: 20px;\n  top: 30px;\n  border-radius: 50%;\n  width: 80px;\n  height: 80px;\n  @media all and (max-width: 600px) {\n    width: 45px;\n    height: 45px;\n  }\n"]);return jr=function(){return e},e}function Or(){var e=Object(p.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 5px;\n\n  span {\n    display: flex;\n    align-items: baseline;\n    h6 {\n      margin-right: 10px;\n      :after {\n        content: '\0b7';\n        margin-left: 10px;\n      }\n    }\n  }\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 5px;\n\n  span {\n    display: flex;\n    align-items: baseline;\n    h6 {\n      margin-right: 10px;\n      :after {\n        content: '\\00b7';\n        margin-left: 10px;\n      }\n    }\n  }\n"]);return Or=function(){return e},e}function kr(){var e=Object(p.a)(["\n  padding: 10px 15px;\n  margin-top: 10px;\n  background: rgba(0,0,0,0.015);\n"]);return kr=function(){return e},e}function Cr(){var e=Object(p.a)(["\n  position: relative;\n  padding: 20px 40px 20px 120px;\n  border-bottom: 1px solid #e6ecf0;\n  cursor: pointer;\n\n  input {\n    padding: 10px 15px;\n  }\n  :hover {\n    background: rgba(0,0,0,0.037);\n    transition: .37s ease;\n  }\n  @media all and (max-width: 600px) {\n    padding: 10px 20px 10px 80px;\n  }\n"]);return Cr=function(){return e},e}function Sr(){var e=Object(p.a)(["\n      display: flex;\n      align-items: center;\n      margin-bottom: 0;\n      margin-top: ","px;\n      svg {\n        color: rgba(0,0,0,.15);\n        margin-right: 5px;  \n      }\n    "]);return Sr=function(){return e},e}var Tr=null,Nr=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){var t;return n.setState((t={},Object(At.a)(t,e.target.name,e.target.value),Object(At.a)(t,"invalidText",!1),Object(At.a)(t,"invalidTopic",!1),t))},n.addLike=function(e,t){var a=n.props.store.user,r=Object(ce.a)(Object(ce.a)(n));t.preventDefault(),t.stopPropagation();var i=new FormData;i.append("id",e),i.append("liked_by",a.id),i.append("created_at",(new Date).getTime());var o=document.getElementById("actions");o.style.pointerEvents="none",se.a.ajax({url:"".concat(de,"/api/news/addlike.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(){r.props.onAddLike(e,a.id),r.forceUpdate(),setTimeout(function(){return o.style.pointerEvents="all"},500)}})},n.removeLike=function(e,t){var a=n.props.store.user,r=Object(ce.a)(Object(ce.a)(n));t.preventDefault(),t.stopPropagation();var i=document.getElementById("actions");i.style.pointerEvents="none";var o=new FormData;o.append("id",e),o.append("liked_by",a.id),se.a.ajax({url:"".concat(de,"/api/news/removelike.php"),data:o,processData:!1,contentType:!1,type:"POST",success:function(){r.props.onRemoveLike(e,a.id),r.setState({newNews:!1}),setTimeout(function(){return i.style.pointerEvents="all"},500)}})},n.submitNews=function(e){var t=n.props.store.user,a=Object(ce.a)(Object(ce.a)(n));if(e.preventDefault(),""!==n.state.newNewsTopic&&""!==n.state.newNewsText){var r=new FormData,i={author:"".concat(t.name," ").concat(t.surname),title:n.state.newNewsTopic,text:n.state.newNewsText,date:(new Date).toJSON().slice(0,10).replace(/-/g,"."),created_at:(new Date).getTime(),importance:n.state.newNewsImportance?1:0,author_id:t.id,likes:0,liked_by:"",comments:0,avatar:t.avatar};for(var o in i)r.append(o,i[o]);se.a.ajax({url:"".concat(de,"/api/news/submitnews.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(e){i.id=e["MAX(`id`)"],a.props.onAddNews(i),a.setState({newNews:!a.state.newNews,newNewsText:"",newNewsTopic:""}),a.props.enqueueSnackbar("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u043e\u0432\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"success"})},error:function(){return a.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"error"})}})}else a.props.enqueueSnackbar("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"}),""===a.state.newNewsTopic&&n.setState({invalidTopic:!0}),""===a.state.newNewsText&&n.setState({invalidText:!0})},n.changeImportance=function(){return n.setState({newNewsImportance:!n.state.newNewsImportance})},n.removeNews=function(){n.setState({editing:!0});var e=Object(ce.a)(Object(ce.a)(n)),t=new FormData;t.append("id",n.state.preparedNewsId),se.a.ajax({url:"".concat(de,"/api/news/delete.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(){e.props.onDeleteNews(n.state.preparedNewsId),e.setState({editing:"",preparedNewsId:"",confirmDelete:!1}),e.props.enqueueSnackbar("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",{variant:"info"})},error:function(){return e.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"error"})}})},n.prepareNews=function(e){var t=n.props.store.news,a=t.find(function(t){return t.id===e}).title,r=t.find(function(t){return t.id===e}).text;n.setState({editing:e,newNewsTopic:a,newNewsText:r})},n.editNews=function(e,t){e.preventDefault(),e.stopPropagation();var a=Object(ce.a)(Object(ce.a)(n));if(""!==n.state.newNewsTopic&&""!==n.state.newNewsText){var r=new FormData;r.append("id",t),r.append("title",n.state.newNewsTopic),r.append("text",n.state.newNewsText),se.a.ajax({url:"".concat(de,"/api/news/edit.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(){setTimeout(function(){return a.setState({editing:""})},200),a.props.enqueueSnackbar("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0431\u044b\u043b\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430",{variant:"info"})},error:function(){return a.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",{variant:"error"})}})}else a.props.enqueueSnackbar("\u041d\u0443\u0436\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0451 \u043f\u043e\u043b\u044f",{variant:"warning"}),""===a.state.newNewsTopic&&n.setState({invalidTopic:!0}),""===a.state.newNewsText&&n.setState({invalidText:!0})},n.addNews=function(){return n.setState({editing:"",newNews:!n.state.newNews,newNewsText:"",newNewsTopic:""})},n.closeNews=function(){n.setState({singleNews:!1,singleNewsId:"",newNews:!1,likedBy:[],preparedNewsId:"",confirmDelete:!1})},n.getNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043e\u0442\u043c\u0435\u0442\u043e\u043a":1===(e%=10)?"\u043e\u0442\u043c\u0435\u0442\u043a\u0430":e>=2&&e<=4?"\u043e\u0442\u043c\u0435\u0442\u043a\u0438":"\u043e\u0442\u043c\u0435\u0442\u043e\u043a"},n.getCommentsNoun=function(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432":1===(e%=10)?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439":e>=2&&e<=4?"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},n.createImportantBar=function(e){var t=O.a.div(Sr(),e);return r.a.createElement(t,null,r.a.createElement(Ye.a,null),r.a.createElement(ue.w,{variant:"caption"},'\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a "\u0412\u0430\u0436\u043d\u043e\u0435"'))},n.prepareDelete=function(e,t){n.setState({confirmDelete:!0,preparedNewsId:t}),e.stopPropagation()},n.state={newNews:!1,newNewsTopic:"",newNewsText:"",newNewsImportance:!1,editing:"",singleNews:!1,singleNewsData:[],singleNewsId:"",invalidText:!1,invalidTopic:!1,confirmDelete:!1,preparedNewsId:""},n.addLike=n.addLike.bind(Object(ce.a)(Object(ce.a)(n))),n.removeLike=n.removeLike.bind(Object(ce.a)(Object(ce.a)(n))),n.addNews=n.addNews.bind(Object(ce.a)(Object(ce.a)(n))),n.handleChange=n.handleChange.bind(Object(ce.a)(Object(ce.a)(n))),n.submitNews=n.submitNews.bind(Object(ce.a)(Object(ce.a)(n))),n.removeNews=n.removeNews.bind(Object(ce.a)(Object(ce.a)(n))),n.editNews=n.editNews.bind(Object(ce.a)(Object(ce.a)(n))),n.prepareNews=n.prepareNews.bind(Object(ce.a)(Object(ce.a)(n))),n.showNews=n.showNews.bind(Object(ce.a)(Object(ce.a)(n))),n.changeImportance=n.changeImportance.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.store.unreaded.news>0&&(Tr=setTimeout(function(){document.querySelector(".newsBadge span").style.display="none",e.props.onReadNews()},2e3))}},{key:"componentWillUnmount",value:function(){window.clearTimeout(Tr)}},{key:"showNews",value:function(e){var t=this;setTimeout(function(){""===t.state.editing&&t.setState({singleNews:!0,singleNewsId:e})},100)}},{key:"render",value:function(){var e=this,t=this.state,n=t.invalidText,i=t.invalidTopic,o=t.newNews,c=t.newNewsText,l=t.newNewsTopic,s=t.editing,u=t.singleNews,d=t.singleNewsId,p=t.newNewsImportance,m=this.props.store,h=m.user,f=m.news;return r.a.createElement(ue.r,null,window.innerWidth<600?r.a.createElement(Ma,{title:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}):null,0===f.length?r.a.createElement(_,{minHeight:300,color:"primary"}):f.map(function(t,n){return r.a.createElement(Dr,{key:n,onClick:function(){return e.showNews(t.id)}},r.a.createElement(Ar,{style:{background:"url(".concat(""===t.avatar?j.a:t.avatar,") no-repeat center/cover")}}),r.a.createElement("div",null,r.a.createElement(Ir,null,h.id===t.author_id?r.a.createElement(a.Fragment,null,r.a.createElement(ue.w,{variant:"caption"},r.a.createElement(ue.w,{variant:"subtitle2"},"\u0412\u044b"),t.date),r.a.createElement(Pr,null,r.a.createElement(ue.v,{placement:"left",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(be.a,{onClick:function(n){return e.prepareDelete(n,t.id)}})))):r.a.createElement(ue.w,{variant:"caption"},r.a.createElement(ue.w,{variant:"subtitle2"},t.author),t.date)),"1"===t.importance?e.createImportantBar(0):null,s!==t.id?r.a.createElement(a.Fragment,null,r.a.createElement(ue.w,{variant:"h6",style:{fontSize:"1.1rem",fontWeight:400}},t.title.replace(/&quot;/g,'"')),r.a.createElement(_r,null,r.a.createElement(ue.w,{variant:"body2"},t.text.replace(/&quot;/g,'"')))):r.a.createElement("form",{id:"edit-news",action:"".concat(de,"/api/news/edit.php"),method:"POST",onSubmit:function(n){return e.editNews(n,t.id)}},r.a.createElement(ue.u,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",value:l,onChange:e.handleChange,variant:"outlined",name:"newNewsTopic",type:"text",error:e.state.invalidTopic}),r.a.createElement(Mr,null,r.a.createElement(ue.u,{label:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",multiline:!0,variant:"outlined",name:"newNewsText",onChange:e.handleChange,value:c,error:e.state.invalidText})),r.a.createElement(ue.a,{onClick:function(n){return e.editNews(n,t.id)},variant:"contained",color:"primary"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"))),r.a.createElement(Fr,{id:"actions"},r.a.createElement("p",null,t.comments),r.a.createElement(ue.v,{title:"".concat(t.comments," ").concat(e.getCommentsNoun(t.comments)),placement:"top"},r.a.createElement(ae.a,{onClick:""===s?function(){return e.showNews(t.id)}:null,icon:"comments"})),r.a.createElement("p",null,t.likes),t.liked_by.includes(" ".concat(h.id))?r.a.createElement(ue.v,{title:"".concat(t.likes," ").concat(e.getNoun(t.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"'),placement:"top"},r.a.createElement(ae.a,{onClick:function(n){return e.removeLike(t.id,n)},icon:"heart",style:{color:"#1976d2"}})):r.a.createElement(ue.v,{title:"".concat(t.likes," ").concat(e.getNoun(t.likes),' "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"'),placement:"top"},r.a.createElement(ae.a,{onClick:function(n){return e.addLike(t.id,n)},icon:"heart"})),h.id===t.author_id?r.a.createElement(ue.v,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",placement:"top"},r.a.createElement(ae.a,{onClick:function(){return e.prepareNews(t.id)},icon:"edit",style:{marginLeft:"25px"}})):null,window.innerWidth>=600?r.a.createElement(ue.a,{onClick:function(){return e.showNews(t.id)},variant:"contained",color:"primary",style:{position:"absolute",right:window.innerWidth>600?40:20}},"\u0427\u0438\u0442\u0430\u0442\u044c"):null))}),r.a.createElement("div",{onClick:this.addNews},r.a.createElement(Tn,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"})),o?r.a.createElement(ur,{newNewsTopic:l,newNewsText:c,invalidText:n,invalidTopic:i,submitNews:this.submitNews,handleChange:this.handleChange,changeImportance:this.changeImportance,newNewsImportance:p,closeNews:this.closeNews.bind(this)}):null,u?r.a.createElement(Be,{showNews:this.showNews,closeNews:this.closeNews.bind(this),singleNewsId:d,getNoun:this.getNoun,getCommentsNoun:this.getCommentsNoun,reloadComponent:this.reloadComponent,createImportantBar:this.createImportantBar}):null,this.state.confirmDelete?r.a.createElement(fr,{closeNews:this.closeNews.bind(this),removeNews:this.removeNews.bind(this)}):null)}}]),t}(a.Component),Dr=O.a.div(Cr()),_r=O.a.div(kr()),Ir=O.a.div(Or()),Ar=O.a.div(jr()),Fr=O.a.div(wr()),Mr=O.a.div(xr()),Pr=O.a.div(yr()),qr=Object(I.b)(function(e){return{store:e}},function(e){return{onAddNews:function(t){return e({type:"ADD_NEWS",payload:t})},onDeleteNews:function(t){return e({type:"DELETE_NEWS",payload:t})},onAddLike:function(t,n){return e({type:"ADD_LIKE",payload:t,user_id:n})},onRemoveLike:function(t,n){return e({type:"REMOVE_LIKE",payload:t,user_id:n})},onReadNews:function(){return e({type:"READ_NEWS"})}}})(Object(z.withSnackbar)(Nr)),Lr=n(56),Hr=n.n(Lr),Rr=n(294),Wr=n.n(Rr),zr=n(292),Br=n.n(zr),Ur=n(168),Yr=n.n(Ur),Vr=n(167),Gr=n.n(Vr),Kr=n(293),Qr=n.n(Kr),Xr=n(291),Jr=n.n(Xr),Zr=[{value:0,section:"feed",label:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",img:r.a.createElement(Jr.a,null)},{value:1,section:"messages",label:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",img:r.a.createElement(Br.a,null)},{value:2,section:"news",label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",img:r.a.createElement(Gr.a,null)},{value:3,section:"tasks",label:"\u0417\u0430\u0434\u0430\u0447\u0438",img:r.a.createElement(Yr.a,null)},{value:4,section:"colleagues",label:"\u041a\u043e\u043b\u043b\u0435\u0433\u0438",img:r.a.createElement(Qr.a,null)}];window.innerWidth>=600&&Zr.push({value:5,section:"calendar",label:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",img:r.a.createElement(Wr.a,null)});var $r=Zr;function ei(){var e=Object(p.a)(["\n  & > span > span {\n    top: -19px;\n    right: -5px;\n  }\n"]);return ei=function(){return e},e}function ti(){var e=Object(p.a)(["\n  flex-grow: 1;\n  width: 100%;\n  background-color: #ffffff;\n  margin-bottom: 4px;\n\n  a {\n    width: ","%\n  }\n  svg {\n    color: #1976d2;\n  }\n\n  @media all and (max-width: 600px) {\n    position: fixed;\n    bottom: 0;\n    z-index: 1000;\n    opacity: 1;\n    margin-bottom: 0;\n    width: ","px;\n    a {\n      padding-top: 5px;\n      min-height: 50px;\n    }\n    a > span > span {\n      display: block;\n      font-size: 8px;\n    }\n  }\n"]);return ti=function(){return e},e}var ni=O.a.div(ti(),100/$r.length,window.innerWidth),ai=O.a.div(ei()),ri=Object(I.b)(function(e){return{store:e}},function(e){return{getTasks:function(t){return e({type:"FETCH_TASKS",payload:t})}}})(function(e){var t=e.store.unreaded,n=t.feed,i=t.news,o=t.events,c=t.tasks,l=t.messages,s=Object(a.useState)(0),u=Object(x.a)(s,2),d=(u[0],u[1]);function p(e){switch(e.section){case"feed":return n?r.a.createElement(ai,null,r.a.createElement(Hr.a,{color:"secondary",className:"feedBadge",badgeContent:n},e.label)):e.label;case"news":return i?r.a.createElement(ai,null,r.a.createElement(Hr.a,{color:"secondary",className:"newsBadge",badgeContent:i},e.label)):e.label;case"calendar":return o?r.a.createElement(ai,null,r.a.createElement(Hr.a,{color:"secondary",className:"eventsBadge",badgeContent:o},e.label)):e.label;case"tasks":return c?r.a.createElement(ai,null,r.a.createElement(Hr.a,{color:"secondary",className:"tasksBadge",badgeContent:c},e.label)):e.label;case"messages":return l?r.a.createElement(ai,null,r.a.createElement(Hr.a,{color:"secondary",className:"messagesBadge",badgeContent:l},e.label)):e.label;default:return e.label}}return r.a.createElement(ni,null,r.a.createElement(za.a,{position:"static",color:"default"},r.a.createElement(La.a,{value:-1!==$r.findIndex(function(e){return window.location.pathname.slice(1)===e.section})?$r.findIndex(function(e){return window.location.pathname.slice(1)===e.section}):0,indicatorColor:"primary",centered:!0},$r.map(function(e,t){return r.a.createElement(Ra.a,{key:t,label:p(e),component:A.a,to:e.section,icon:e.img})}))),r.a.createElement("span",{id:"reloadNavigation",onClick:function(){return d(Math.random())},style:{display:"none"}}))});function ii(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return ii=function(){return e},e}function oi(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  opacity: .87;\n  svg {\n    margin-right: 6px;\n    font-size: 17px;\n    color: #1976d2;\n  }\n"]);return oi=function(){return e},e}var ci=O.a.div(oi()),li=O.a.div(ii()),si=Object(I.b)(function(e){return{store:e}},function(e){return{onFetchUser:function(t){return e({type:"FETCH_USER",payload:t})}}})(function(e){var t;return r.a.createElement(ot.a,{onClick:function(){return e.openRoom(e.friend.hasOwnProperty("message")&&e.friend.message?e.friend.message.chat:0,e.friend)},button:!0,TouchRippleProps:{classes:{child:"touch-ripple"}}},r.a.createElement(ut.a,null,r.a.createElement(pt.a,{style:{height:50,width:50},alt:"".concat(e.friend.name," ").concat(e.friend.surname),src:""!==e.friend.avatar?e.friend.avatar:j.a})),r.a.createElement(lt.a,{inset:!0,primary:r.a.createElement(li,null,r.a.createElement(zn.a,{variant:"subtitle1"},"".concat(e.friend.name," ").concat(e.friend.surname)),e.friend.message?function(t,n){var a=Ct()().startOf("day").format(),i=Ct()(n,"DD.MM.YYYY").format();return Ct()(a).isSame(i,"day")?r.a.createElement(ci,null,r.a.createElement(zn.a,{variant:"subtitle2",color:"primary"},e.friend.message.time)):r.a.createElement(ci,null,r.a.createElement(zn.a,{variant:"subtitle2",color:"primary"},Ct()(n,"DD.MM.YYYY").calendar().slice(0,-4)," ",t))}(e.friend.message.time,e.friend.message.date,e.friend.message.readed):null),secondary:e.friend.message?r.a.createElement(a.Fragment,null,r.a.createElement(zn.a,{component:"span",style:{display:"inline"},color:"primary"},e.friend.id===e.friend.message.user?"".concat(e.friend.name," ").concat(e.friend.surname,":"):"\u0412\u044b:")," \u2014 ".concat((t=e.friend.message.body,t.length<137?t:"".concat(t.substring(0,137),"..."))," "),r.a.createElement(Hr.a,{color:"secondary",badgeContent:function(t){var n=e.store.unreaded.chats,a=n.findIndex(function(e){return e.chat_id===t});return a>=0?n[a].unreaded:null}(e.friend.message.chat),style:{position:"absolute",right:45,top:45}},null)):null}))}),ui=n(174),di=n(297),pi=n.n(di);function mi(){var e=Object(p.a)(["\n  padding: 30px 80px;\n  height: 250px;\n  display: flex;\n  opacity: .75;\n  text-align: center;\n  justify-content: center;\n  flex-direction: column;\n\n  @media all and (max-width: 600px) {\n    padding: 30px 40px;\n    height: 160px;\n  }\n"]);return mi=function(){return e},e}function hi(){return r.a.createElement(fi,null,r.a.createElement(ue.w,{variant:"body1",style:{marginBottom:12}},"\u0411\u0443\u0434\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c, \u043a\u0442\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u044d\u0442\u043e\u043c \u0434\u0438\u0430\u043b\u043e\u0433\u0435."),r.a.createElement(ue.w,{variant:"body2"},'\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u0433\u0435, \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u0441\u043d\u0438\u0437\u0443 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043b\u0430\u0432\u0438\u0448\u0443 "Enter".'))}var fi=O.a.div(mi()),gi=n(295),bi=n.n(gi),vi=n(115),Ei=n.n(vi);function yi(){var e=Object(p.a)(["\n  max-width: 70%;\n  background: #fafafa;\n  padding: 10px 15px;\n  border-radius: 7px;\n  margin: 15px 0 0;\n  .message-time {\n    font-size: .7rem;\n    display: flex;\n    align-items: center;\n    svg {\n      font-size: 18px;\n      margin-left: 5px; \n    }\n  }\n  .message-name {\n    display: flex;\n    align-items: center;\n    min-width: 100px;\n    justify-content: space-between;\n    svg {\n      font-size: 16px;\n      margin-left: 5px; \n      color: rgba(0,0,0,.34);\n      cursor: pointer;\n    }\n  }\n"]);return yi=function(){return e},e}function xi(){var e=Object(p.a)(["\n  min-width: 35px;\n  min-height: 35px;\n  border-radius: 50%;\n  margin: 0 15px;\n"]);return xi=function(){return e},e}function wi(){var e=Object(p.a)(["\n  display: flex;\n  align-items: flex-end;\n"]);return wi=function(){return e},e}var ji=O.a.div(wi()),Oi=O.a.div(xi()),ki=O.a.div(yi()),Ci=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store,n=t.room,a=t.user;return r.a.createElement(ji,{style:n.user.id!==e.message.user?{flexDirection:"row-reverse"}:{}},r.a.createElement(Oi,{style:n.user.id!==e.message.user?{background:"url(".concat(a.avatar?a.avatar:j.a,") no-repeat center/cover")}:{background:"url(".concat(n.user.avatar?n.user.avatar:j.a,") no-repeat center/cover")}}),r.a.createElement(ki,null,r.a.createElement(ue.w,{className:"message-name",variant:"subtitle2",color:"secondary"},n.user.id!==e.message.user?"\u0412\u044b":"".concat(n.user.name," ").concat(n.user.surname),n.user.id!==e.message.user?r.a.createElement("span",null,r.a.createElement(ue.v,{title:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",placement:"top"},r.a.createElement(Ei.a,{onClick:function(){return e.editMessage(e.message.body,e.message.id)}})),r.a.createElement(ue.v,{title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",placement:"top"},r.a.createElement(be.a,{onClick:e.handleDelete}))):null),r.a.createElement(ue.w,{variant:"body2"},e.message.body),r.a.createElement(ue.w,{className:"message-time",variant:"subtitle2",color:"primary"},function(e){var t=Ct()().startOf("day").format(),n=Ct()(e,"DD.MM.YYYY").format();return Ct()(t).isSame(n,"day")?null:Ct()(e,"DD.MM.YYYY").calendar().slice(0,-4)}(e.message.date)," ",e.message.time,"1"===e.message.edited?" \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e":null,n.user.id!==e.message.user?"1"===e.message.readed?r.a.createElement(bi.a,null):r.a.createElement(Lt.a,null):null)))});function Si(){var e=Object(p.a)(["\n  overflow: auto;\n  margin-top: 5px;\n  max-height: 310px;\n  &::-webkit-scrollbar {\n    width: 2px;\n  } \n  &::-webkit-scrollbar-track {\n    background-color: #fafafa;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #1976d2; \n  }\n\n  @media all and (max-width: 600px) {\n    max-height: calc(100vh - 100px);\n  }\n"]);return Si=function(){return e},e}var Ti=O.a.div(Si()),Ni=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store.messages;return setTimeout(function(){var e=document.getElementById("messages");0!==t.length&&e&&(e.scrollTop=e.scrollHeight)},0),r.a.createElement(Ti,{id:"messages"},0!==t.length?t.map(function(t){return r.a.createElement(Ci,{key:t.id,message:t,editMessage:e.editMessage,handleDelete:function(){return e.handleDelete(t.id)}})}):r.a.createElement(hi,null))}),Di=n(296),_i=n.n(Di);function Ii(){var e=Object(p.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background: #fafafa;\n  & > div {\n    margin: 0;\n  }\n  & > div > div {\n    background: #fafafa !important;\n    :hover {\n      background: #fafafa;\n    }\n  }\n  input {\n    background: #fafafa;\n    padding: 13px 25px;\n    font-size: 14px;\n  }\n"]);return Ii=function(){return e},e}function Ai(e){return r.a.createElement(Fi,{onSubmit:e.sendMessage},r.a.createElement(bt.a,{placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",fullWidth:!0,autoFocus:!0,margin:"dense",variant:"filled",onChange:e.handleNewMessage,value:e.message,InputProps:{endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(Sn.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",position:"top"},r.a.createElement(M.a,{"aria-label":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onClick:e.sendMessage},r.a.createElement(_i.a,null))))}}))}var Fi=O.a.form(Ii());function Mi(){var e=Object(p.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background: #fafafa;\n  z-index: 10;\n  & > div {\n    margin: 0;\n  }\n  & > div > div {\n    background: #fafafa !important;\n    :hover {\n      background: #fafafa;\n    }\n  }\n  input {\n    background: #fafafa;\n    padding: 13px 25px;\n    font-size: 14px;\n  }\n"]);return Mi=function(){return e},e}function Pi(e){return r.a.createElement(qi,{onSubmit:e.submitEdit},r.a.createElement(bt.a,{placeholder:"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",fullWidth:!0,autoFocus:!0,margin:"dense",variant:"filled",onChange:e.handleEdit,value:e.message,InputProps:{startAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(Sn.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",position:"top"},r.a.createElement(M.a,{"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:e.submitEdit},r.a.createElement(Ei.a,null)))),endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(Sn.a,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",position:"top"},r.a.createElement(M.a,{"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.closeEditing},r.a.createElement(fe.a,null))))}}))}var qi=O.a.form(Mi());function Li(){var e=Object(p.a)(["\n  position: absolute;\n  top: 0; bottom: 0;\n  left: 0; right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5;\n  background: rgba(0,0,0,.17);\n"]);return Li=function(){return e},e}function Hi(){var e=Object(p.a)(["\n  display: flex;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 30px 20px 10px;\n  width: 320px;\n  height: 200px;\n  margin: auto;\n  z-index: 10;\n  background: #fafafa;\n  box-shadow: rgba(0,0,0,0.2) 0px 1px 3px 0px, rgba(0,0,0,0.14) 0px 1px 1px 0px, rgba(0,0,0,0.12) 0px 2px 1px -1px;\n  flex-direction: column;\n  justify-content: space-between;\n  & > div {\n    display: flex;\n    justify-content: flex-end;\n  }\n"]);return Hi=function(){return e},e}function Ri(e){return r.a.createElement(a.Fragment,null,r.a.createElement(Wi,null,r.a.createElement(ue.w,{variant:"body2"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?"),r.a.createElement(ue.w,{variant:"body2"},"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0443\u0434\u0430\u043b\u0438\u0442 \u0435\u0433\u043e \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0447\u0430\u0442\u0430."),r.a.createElement("div",null,r.a.createElement(ue.a,{variant:"text",color:"primary",onClick:e.closeDelete},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ue.a,{variant:"text",color:"primary",onClick:e.submitDelete},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(zi,{onClick:e.closeDelete}))}var Wi=O.a.div(Hi()),zi=O.a.div(Li());function Bi(){var e=Object(p.a)(["\n  width: 60px;\n  height: 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n"]);return Bi=function(){return e},e}function Ui(){var e=Object(p.a)(["\n  background: #1976d2;\n  height: 60px;\n  color: rgba(255,255,255,.5);\n  display: flex;\n  align-items: center;\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 2px 1px -1px;\n\n  .room-header__user {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n  .room-header__avatar {\n    height: 45px;\n    width: 45px;\n    border-radius: 50%;\n    margin-right: 15px;\n  }\n  h6 {\n    color: #fff;\n    opacity: .85;\n  }\n  span {\n    color: rgba(255,255,255,.5);\n  }\n  :hover {\n    color: #fff;\n    transition: .37s ease;\n  }\n"]);return Ui=function(){return e},e}function Yi(){var e=Object(p.a)(["\n  overflow: hidden;\n  height: 432px;\n\n  @media all and (max-width: 600px) {\n    height: calc(100vh - 55px);\n  }\n"]);return Yi=function(){return e},e}var Vi=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,editing:!1,editText:"",deleting:!1,newMessage:"",deleteID:null,editID:null},n.interval=null,n.chatInteral=null,n.componentDidMount=function(){n.getMessages(),n.interval=setInterval(function(){return n.getMessages()},5e3),n.chatInteral=setInterval(function(){return n.readMessages()},2e3)},n.componentWillUnmount=function(){clearInterval(n.interval),clearInterval(n.chatInteral)},n.readMessages=function(){var e=Object(ce.a)(Object(ce.a)(n)),t=new FormData;t.append("chat_id",n.props.store.room.chat_id),se.a.ajax({url:"".concat(de,"/api/message/set_readed.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(){e.props.store.unreaded.chats.find(function(t){return t.chat_id===e.props.store.room.chat_id})&&(e.props.readChat(e.props.store.room.chat_id),document.getElementById("reloadNavigation").click())}})},n.getMessages=function(){var e=new FormData,t=Object(ce.a)(Object(ce.a)(n));e.append("chat",n.props.store.room.chat_id),se.a.ajax({url:"".concat(de,"/api/message/read.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(e){t.setState({loading:!1}),e.messages&&t.props.getMessages(e.messages)}})},n.handleEdit=function(e){return n.setState({editText:e.target.value})},n.editMessage=function(e,t){n.state.editing||n.setState({editing:!n.state.editing,editText:e,editID:t})},n.closeEditing=function(){return n.setState({editing:!1,editText:"",editID:null})},n.handleDelete=function(e){return n.setState({deleting:!0,deleteID:e})},n.closeDelete=function(){return n.setState({deleting:!1,deleteID:null})},n.handleNewMessage=function(e){return n.setState({newMessage:e.target.value})},n.sendMessage=function(e){e&&e.preventDefault();var t=n.props.store,a=t.room,r=t.user;if(a.hasOwnProperty("chat_id")){fetch("".concat(de,"/api/message/get_id.php")).then(function(e){return e.json()}).then(function(e){return localStorage.setItem("message_id",e.message_id)});var i=new FormData,o=Object(ce.a)(Object(ce.a)(n)),c={user:r.id,chat:a.hasOwnProperty("chat_id")?a.chat_id:localStorage.getItem("chat_id"),body:n.state.newMessage,date:Ct()().format("L"),time:Ct()().format("LT"),created_at:(new Date).getTime()};i.append("chat",c.chat),i.append("user",c.user),i.append("body",c.body),i.append("date",c.date),i.append("time",c.time),i.append("created_at",c.created_at),se.a.ajax({url:"".concat(de,"/api/message/send.php"),data:i,processData:!1,contentType:!1,type:"POST",success:function(){o.props.store.chats.find(function(e){return e.id===c.chat})||o.props.createChat(localStorage.getItem("users"),c.chat,c),o.props.addMessage(c),o.setState({newMessage:""}),o.getMessages(),clearInterval(o.chatInteral),o.chatInteral=setInterval(function(){return o.readMessages()},2e3)}})}else n.getMessageId(r.id,a.user.id)},n.getMessageId=function(e,t){fetch("".concat(de,"/api/message/get_id.php")).then(function(e){return e.json()}).then(function(a){return n.createChat(e,t,a.message_id)})},n.createChat=function(e,t,a){var r=new FormData,i=Object(ce.a)(Object(ce.a)(n)),o="id".concat(e,", id").concat(t),c=(Number(a)+1).toString();r.append("users",o),r.append("last_msg",c),se.a.ajax({url:"".concat(de,"/api/chat/create.php"),data:r,processData:!1,contentType:!1,type:"POST",success:function(n){i.props.assignChat(n.chat_id),localStorage.setItem("message_id",c),localStorage.setItem("chat_id",n.chat_id),localStorage.setItem("users","id".concat(e,", id").concat(t)),i.sendMessage(!1)}})},n.submitDelete=function(){var e=new FormData,t=Object(ce.a)(Object(ce.a)(n));e.append("id",n.state.deleteID),se.a.ajax({url:"".concat(de,"/api/message/delete.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(e){t.props.deleteMessage(t.state.deleteID),0===t.props.store.messages.length&&t.props.deleteChat(t.props.store.room.chat_id),t.closeDelete(),t.getMessages()}})},n.submitEdit=function(e){e.preventDefault();var t=new FormData,a=Object(ce.a)(Object(ce.a)(n));t.append("id",n.state.editID),t.append("body",n.state.editText),se.a.ajax({url:"".concat(de,"/api/message/edit.php"),data:t,processData:!1,contentType:!1,type:"POST",success:function(){var e=Object(oe.a)(ie.a.mark(function e(){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.editMessage(a.state.editID,a.state.editText);case 2:return e.next=4,a.closeEditing();case 4:return e.next=6,a.getMessages();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.editing,i=t.deleting,o=this.props.store.room;return r.a.createElement(Gi,null,r.a.createElement(Ki,null,r.a.createElement(Qi,{onClick:function(){return e.props.openRoom(0,o.user)}},r.a.createElement(pi.a,null)),o.hasOwnProperty("user")?r.a.createElement(A.a,{to:"/id".concat(o.user.id)},r.a.createElement("div",{className:"room-header__user"},r.a.createElement("div",{className:"room-header__avatar",style:{background:"url(".concat(""!==o.user.avatar?o.user.avatar:j.a,") no-repeat center/cover")}}),r.a.createElement("div",{className:"room-header__info"},r.a.createElement(ue.w,{variant:"subtitle2"},o.user.name," ",o.user.surname),r.a.createElement(ue.w,{variant:"caption"},o.user.position)))):null),n?r.a.createElement(_,{minHeight:250,color:"primary"}):r.a.createElement(Ni,{editMessage:this.editMessage.bind(this),handleDelete:this.handleDelete.bind(this)}),a?r.a.createElement(Pi,{closeEditing:this.closeEditing.bind(this),message:this.state.editText,handleEdit:this.handleEdit.bind(this),submitEdit:this.submitEdit.bind(this)}):null,r.a.createElement(Ai,{message:this.state.newMessage,sendMessage:this.sendMessage,handleNewMessage:this.handleNewMessage}),i?r.a.createElement(Ri,{closeDelete:this.closeDelete.bind(this),submitDelete:this.submitDelete.bind(this)}):null)}}]),t}(a.Component),Gi=O.a.div(Yi()),Ki=O.a.div(Ui()),Qi=O.a.div(Bi()),Xi=Object(I.b)(function(e){return{store:e}},function(e){return{getMessages:function(t){e({type:"FETCH_MESSAGES",payload:t})},createChat:function(t,n,a){e({type:"CREATE_CHAT",payload:{users:t,id:n,message:a}})},assignChat:function(t){e({type:"ASSIGN_CHAT",payload:t})},addMessage:function(t){e({type:"ADD_MESSAGE",payload:t})},deleteMessage:function(t){e({type:"DELETE_MESSAGE",payload:t})},editMessage:function(t,n){e({type:"EDIT_MESSAGE",payload:[t,n]})},deleteChat:function(t){e({type:"DELETE_CHAT",payload:t})},readChat:function(t){e({type:"READ_CHAT",payload:t})}}})(Vi);function Ji(){var e=Object(p.a)(["\n  height: 432px;\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  } \n  &::-webkit-scrollbar-track {\n    background-color: #fafafa;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #1976d2; \n  }\n  a {\n    text-decoration: none;\n  }\n  ul {\n    padding: 0;\n    padding-bottom: 50px;\n  }\n\n  @media all and (max-width: 600px) {\n    height: calc(100vh - 55px);\n    ul {\n      padding: unset;\n      padding-top: 10px;\n    }\n  }\n"]);return Ji=function(){return e},e}var Zi=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).handleSearch=function(e){n.setState({searchValue:e.target.value});var t=e.target.value.toLowerCase();document.title=e.target.value||n.state.documentTitle;var a=n.state.initial;a=a.filter(function(e){return e.name.toLowerCase().includes(t)||e.surname.toLowerCase().includes(t)||e.position.toLowerCase().includes(t)}),n.setState({friends:a})},n.componentWillUnmount=function(){document.title=n.state.documentTitle},n.rebuildList=function(e){var t=n.state.friends;e.forEach(function(e){t.find(function(t){return e.users.includes("id".concat(t.id))}).message=e.message});var a=t.filter(function(e){return e.hasOwnProperty("message")}),r=t.filter(function(e){return!e.hasOwnProperty("message")}),i=a.concat(r);n.setState({completed:!0,friends:i})},n.openRoom=function(e,t){n.state.initialAnimation||n.setState({initialAnimation:!0}),e?n.props.openChat(e,t):(n.rebuildList(n.props.store.chats),setTimeout(function(){return n.props.closeChat(t)},570)),n.setState({direction:!n.state.direction}),setTimeout(function(){return n.setState(function(e){return{index:1===e.index?0:1}})},300)},n.pages=[function(e){return r.a.createElement(ui.animated.div,{style:Object(Ft.a)({},e,{position:"absolute",width:"100%"})},r.a.createElement(Xi,{openRoom:n.openRoom.bind(Object(ce.a)(Object(ce.a)(n)))}))},function(e){return r.a.createElement(ui.animated.div,{style:Object(Ft.a)({},e,{position:"absolute",width:"100%"})},r.a.createElement(wt,{handleSearch:n.handleSearch,searchValue:n.searchValue}),r.a.createElement(rt.a,null,n.state.friends.map(function(e){return r.a.createElement(si,{openRoom:n.openRoom.bind(Object(ce.a)(Object(ce.a)(n))),key:e.id,friend:e})})))}],n.getDirection=function(e){return e?"translateX(100%)":"translateX(-100%)"},n.state={friends:[],initial:[],searchValue:"",loading:!0,documentTitle:document.title,completed:!1,openRoom:!1,index:1,initialAnimation:!1,direction:!0},n.rebuildList=n.rebuildList.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(de,"/api/user/read.php")).then(function(e){return e.json()}).then(function(t){var n=t.data;e.setState({friends:n,initial:n,loading:!1})})}},{key:"render",value:function(){var e=this,t=this.props.store.chats,n=this.state,a=n.completed,i=n.friends,o=n.index,c=n.direction;return t.length>0&&i.length>0&&!a&&this.rebuildList(t),r.a.createElement(Ot.a,null,this.state.loading?r.a.createElement(_,{minHeight:370,color:"primary"}):r.a.createElement($i,null,r.a.createElement(ui.Transition,{reset:!0,unique:!0,native:!0,items:o,from:this.state.initialAnimation?{transform:this.getDirection(c)}:{zIndex:1},enter:{transform:"translateX(0%)"},leave:{transform:this.getDirection(!c)}},function(t){return e.pages[t]})))}}]),t}(a.Component),$i=O.a.div(Ji()),eo=Object(I.b)(function(e){return{store:e}},function(e){return{openChat:function(t,n){e({type:"OPEN_CHAT",payload:[t,n]})},closeChat:function(t){e({type:"CLOSE_CHAT",payload:[null,t]})}}})(Zi);function to(){var e=Object(p.a)(["\n  padding: 30px 40px;\n  height: 150px;\n  display: flex;\n  justify-content: space-around;\n  flex-direction: column;\n"]);return to=function(){return e},e}function no(){return r.a.createElement(ao,null,r.a.createElement(ue.w,{variant:"body1"},"\u041f\u043e\u043a\u0430 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u0430."),r.a.createElement(ue.w,{variant:"body2"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b\u043b\u0435\u0433\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435 \u0438\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u0438\u043c\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0438\u043b\u0438 \u0437\u0430\u043d\u0438\u043c\u0430\u044e\u0449\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u0433\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435."))}var ao=O.a.div(to()),ro=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.fetchChats()}},{key:"fetchChats",value:function(){var e=this;se.a.ajax({url:"".concat(de,"/api/chat/read.php"),processData:!1,contentType:!1,type:"POST",success:function(t){e.setState({loading:!1}),t[0].chats&&e.props.getChats(t[0].chats)}})}},{key:"render",value:function(){var e=this.state.loading,t=this.props.store.chats;return r.a.createElement(ue.r,null,0===t.length?r.a.createElement(no,null):null,e?r.a.createElement(_,{minHeight:300,color:"primary"}):r.a.createElement(eo,null))}}]),t}(a.Component),io=Object(I.b)(function(e){return{store:e}},function(e){return{getChats:function(t){e({type:"FETCH_CHATS",payload:t})}}})(ro),oo=n(205),co=n.n(oo),lo=n(299),so=n.n(lo),uo=n(300),po=n.n(uo),mo=n(298),ho=n.n(mo);function fo(){var e=Object(p.a)(["\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  background: white;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  box-shadow: 2px 2px 3px 0px #2323;\n  svg {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    top: 0;\n    margin: auto;\n    font-size: 18px;\n  }\n"]);return fo=function(){return e},e}function go(){var e=Object(p.a)(["\n  border-radius: 50%;\n  min-width: 80px;\n  margin: 15px 25px;\n  min-height: 80px;\n  position: relative;\n"]);return go=function(){return e},e}function bo(e){var t=e.avatar,n=e.type;return r.a.createElement(vo,{style:{background:'url("'.concat(t||j.a,'") center center / cover no-repeat')}},r.a.createElement(Eo,null,function(){switch(n){case"likes":return r.a.createElement(co.a,{style:{color:"#ff4800",top:"2px"}});case"tasks":return r.a.createElement(Yr.a,{style:{color:"#6a1b9a"}});case"results":return r.a.createElement(ho.a,{style:{color:"#2e7d32"}});case"events":return r.a.createElement(so.a,{style:{color:"#1976d2"}});case"comments":return r.a.createElement(po.a,{style:{color:"#1976d2"}});case"news":return r.a.createElement(Gr.a,{style:{color:"#1976d2"}});default:return r.a.createElement(co.a,{style:{color:"#ff4800",top:"2px"}})}}()))}var vo=O.a.div(go()),Eo=O.a.div(fo());function yo(){var e=Object(p.a)(["\n  width: 100%;\n  padding-right: 25px;\n"]);return yo=function(){return e},e}function xo(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n"]);return xo=function(){return e},e}function wo(e){var t=e.item;return r.a.createElement(jo,null,r.a.createElement(bo,{avatar:t.avatar,type:t.type}),r.a.createElement(Oo,null,r.a.createElement(ue.w,{variant:"subtitle2",color:"primary"},"".concat(t.name," ").concat(t.surname)),r.a.createElement(ue.w,{variant:"body1",style:{padding:"5px 0"}},t.text),r.a.createElement(ue.w,{variant:"caption"},r.a.createElement("b",{style:{fontWeight:500}},Ct()(Number(t.created_at)).calendar())," \u2014 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0432\u0430\u0448\u0435\u0439 \u043d\u043e\u0432\u043e\u0441\u0442\u0438\xa0",r.a.createElement("b",{style:{fontWeight:500}},t.title))))}var jo=O.a.div(xo()),Oo=O.a.div(yo());function ko(){var e=Object(p.a)(["\n  width: 100%;\n  padding-right: 25px;\n"]);return ko=function(){return e},e}function Co(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n"]);return Co=function(){return e},e}function So(e){var t=e.item;return r.a.createElement(To,null,r.a.createElement(bo,{avatar:t.avatar,type:t.type}),r.a.createElement(No,null,r.a.createElement(ue.w,{variant:"subtitle2",color:"primary"},"".concat(t.name," ").concat(t.surname)),r.a.createElement(ue.w,{variant:"caption"},r.a.createElement("b",{style:{fontWeight:500}},Ct()(Number(t.created_at)).calendar())," \u2014 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0430\u0441\u044c \u0432\u0430\u0448\u0430 \u0437\u0430\u043f\u0438\u0441\u044c\xa0",r.a.createElement("b",{style:{fontWeight:500}},t.title))))}var To=O.a.div(Co()),No=O.a.div(ko());function Do(){var e=Object(p.a)(["\n  width: 100%;\n  padding-right: 25px;\n"]);return Do=function(){return e},e}function _o(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n"]);return _o=function(){return e},e}function Io(){var e=Object(p.a)(["\n      display: flex;\n      align-items: center;\n      margin: 0;\n      svg {\n        color: rgba(0,0,0,.15);\n        margin-right: 5px;  \n      }\n    "]);return Io=function(){return e},e}function Ao(e){var t=e.item;return r.a.createElement(Fo,null,r.a.createElement(bo,{avatar:t.avatar,type:t.type}),r.a.createElement(Mo,null,r.a.createElement(ue.w,{variant:"subtitle2",color:"primary",style:{display:"flex",alignItems:"center"}},"1"===t.importance?function(){var e=O.a.div(Io());return r.a.createElement(ue.v,{title:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u043e",placement:"top"},r.a.createElement(e,null,r.a.createElement(Ye.a,null)))}():null,"".concat(t.name," ").concat(t.surname," \u2014 ").concat(t.title)),r.a.createElement(ue.w,{variant:"body1",style:{padding:"5px 0"}},t.text),r.a.createElement(ue.w,{variant:"caption"},r.a.createElement("b",{style:{fontWeight:500}},Ct()(Number(t.created_at)).calendar()))))}var Fo=O.a.div(_o()),Mo=O.a.div(Do());function Po(){var e=Object(p.a)(["\n  width: 100%;\n  padding-right: 25px;\n"]);return Po=function(){return e},e}function qo(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n"]);return qo=function(){return e},e}function Lo(){var e=Object(p.a)(["\n      display: flex;\n      align-items: center;\n      margin: 0;\n      svg {\n        color: rgba(0,0,0,.15);\n        margin-right: 5px;  \n      }\n    "]);return Lo=function(){return e},e}function Ho(e){var t=e.item;return r.a.createElement(Ro,null,r.a.createElement(bo,{avatar:t.avatar,type:t.type}),r.a.createElement(Wo,null,r.a.createElement(ue.w,{variant:"subtitle2",color:"primary",style:{display:"flex",alignItems:"center"}},"1"===t.importance?function(){var e=O.a.div(Lo());return r.a.createElement(ue.v,{title:"\u041e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u043e",placement:"top"},r.a.createElement(e,null,r.a.createElement(Ye.a,null)))}():null,"".concat(t.name," ").concat(t.surname," \u2014 \u041f\u043e\u0441\u0442\u0430\u0432\u0438\u043b \u0432\u0430\u043c \u0437\u0430\u0434\u0430\u0447\u0443")),r.a.createElement(ue.w,{variant:"body1",style:{padding:"5px 0"}},t.text),r.a.createElement(ue.w,{variant:"caption"},r.a.createElement("b",{style:{fontWeight:500}},Ct()(Number(t.created_at)).calendar())," \u2014 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e:\xa0",r.a.createElement("b",{style:{fontWeight:500}},"".concat(t.until_date," \u2014 ").concat(t.until_time)))))}var Ro=O.a.div(qo()),Wo=O.a.div(Po());function zo(){var e=Object(p.a)(["\n  width: 100%;\n  padding-right: 25px;\n"]);return zo=function(){return e},e}function Bo(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n"]);return Bo=function(){return e},e}function Uo(e){var t=e.item,n="".concat(parseFloat(t.result.replace(",","."))/t.questions.split(",").length*100,"%");return r.a.createElement(Yo,null,r.a.createElement(bo,{avatar:t.avatar,type:t.type}),r.a.createElement(Vo,null,r.a.createElement(ue.w,{variant:"subtitle2",color:"primary"},"\u0412\u044b \u043f\u0440\u043e\u0448\u043b\u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(ue.w,{variant:"h3",color:"primary",style:{marginTop:5}},n),r.a.createElement(ue.w,{variant:"caption",style:{padding:"5px 0"}},"\u041e\u0441\u0442\u0430\u0432\u0448\u0435\u0435\u0441\u044f \u0432\u0440\u0435\u043c\u044f: ",t.estimated_time),r.a.createElement(ue.w,{variant:"caption"},r.a.createElement("b",{style:{fontWeight:500}},Ct()(Number(t.created_at)).calendar()),"\xa0 \u2014 \xa0",r.a.createElement(A.a,{to:"/test/".concat(t.id),style:{color:"#1976d2",textDecoration:"none"}},"\u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"))))}var Yo=O.a.div(Bo()),Vo=O.a.div(zo());function Go(){var e=Object(p.a)(["\n  width: 100%;\n  padding-right: 25px;\n"]);return Go=function(){return e},e}function Ko(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n"]);return Ko=function(){return e},e}function Qo(e){var t=e.item;return r.a.createElement(Xo,null,r.a.createElement(bo,{avatar:t.avatar,type:t.type}),r.a.createElement(Jo,null,r.a.createElement(ue.w,{variant:"subtitle2",color:"primary",style:{marginBottom:5}},"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0432 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435 \u2014 ".concat(t.title)),r.a.createElement(ue.w,{variant:"body1"},"".concat(Ct()(t.startDate).calendar()," \u2014 ").concat(t.endDate.slice(-5))),"0"!==t.max&&Ct()(t.endDate).diff(Ct()(new Date))>0?r.a.createElement(ue.w,{variant:"caption"},function(e,t){var n=Number(e),a=t.split(",").length;""===t&&(a=0);var r=n-a;return 0===r?"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442 \u043d\u0435\u0442.":1===r?"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f, \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043e\u0434\u043d\u043e \u043c\u0435\u0441\u0442\u043e.":r>5?"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f, \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ".concat(r," \u043c\u0435\u0441\u0442."):r>1?"\u041c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f, \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ".concat(r," \u043c\u0435\u0441\u0442\u0430."):void 0}(t.max,t.signed)):null,r.a.createElement(ue.w,{variant:"caption",style:{marginTop:5}},"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u2014 \xa0",r.a.createElement("b",{style:{fontWeight:500}},Ct()(Number(t.created_at)).calendar()))))}var Xo=O.a.div(Ko()),Jo=O.a.div(Go());function Zo(){var e=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100px;\n  width: 100%;\n"]);return Zo=function(){return e},e}function $o(){return r.a.createElement(ec,null,r.a.createElement(ue.w,{variant:"button",style:{opacity:.5}},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u044b \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"))}var ec=O.a.div(Zo()),tc=n(301),nc=n.n(tc);function ac(){var e=Object(p.a)(["\n  display: flex;\n  height: 125px;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  svg {\n    opacity: 0.075;\n    font-size: 36px;\n    margin-bottom: 10px;\n  }\n"]);return ac=function(){return e},e}var rc=O.a.div(ac()),ic=Object(I.b)(function(e){return{store:e}},function(e){return{onReadFeed:function(){return e({type:"READ_FEED"})}}})(function(e){var t=e.onReadFeed,n=e.store,i=n.feed,o=n.unreaded;function c(e){switch(e.type){case"news":return r.a.createElement(Ao,{key:e.fake_id,item:e});case"tasks":return r.a.createElement(Ho,{key:e.fake_id,item:e});case"results":return r.a.createElement(Uo,{key:e.fake_id,item:e});case"events":return r.a.createElement(Qo,{key:e.fake_id,item:e});case"likes":return r.a.createElement(So,{key:e.fake_id,item:e});case"comments":return r.a.createElement(wo,{key:e.fake_id,item:e});default:return"notfound"}}return Object(a.useEffect)(function(){var e=null;return o.feed>0&&(e=setTimeout(function(){document.querySelector(".feedBadge span").style.display="none",t()},2e3)),function(){return window.clearTimeout(e)}}),r.a.createElement(a.Fragment,null,r.a.createElement(ue.r,null,0===i.length?r.a.createElement($o,{style:{height:400}}):i.map(function(e,t){return o.feed>0&&o.feed===t+1?function(e){var t=c(e);return r.a.createElement(a.Fragment,{key:e.fake_id},t,r.a.createElement(rc,null,r.a.createElement(nc.a,null),r.a.createElement(ue.w,{variant:"subtitle2",style:{opacity:.5}},"\u043d\u043e\u0432\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")))}(e):c(e)})),0!==i.length?r.a.createElement($o,null):null)}),oc=n(155),cc=n.n(oc),lc=n(156),sc=n.n(lc),uc=n(159),dc=n.n(uc),pc=n(158),mc=n.n(pc),hc=n(157),fc=n.n(hc);var gc=Object(jn.withStyles)({card:{width:"100%",maxWidth:345},media:{height:170},text:{height:140}})(function(e){var t=e.classes;return r.a.createElement(cc.a,{className:t.card,style:"materials"===e.section?{pointerEvents:"none",filter:"grayscale(100%)"}:{}},r.a.createElement(sc.a,{onClick:function(){return e.changeSection(e.section)}},r.a.createElement(fc.a,{className:t.media,image:e.image,title:e.title}),r.a.createElement(mc.a,{className:t.text},r.a.createElement(zn.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.title),r.a.createElement(zn.a,{component:"p"},e.description))),r.a.createElement(dc.a,null,r.a.createElement(Rn.a,{size:"small",color:"primary",onClick:function(){return e.changeSection(e.section)}},e.button||"\u041f\u0435\u0440\u0435\u0439\u0442\u0438")))}),bc=[{id:0,image:"https://coda.newjobs.com/api/imagesproxy/ms/niche/images/can/ml.jpg",title:"\u0422\u0435\u0441\u0442\u044b",description:"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442\u044b. \u041f\u043e \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044e - \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0437\u043d\u0430\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b.",section:"tests"},{id:1,image:"https://wpdocs.co/wp-content/uploads/2016/04/documentation.png",title:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b",description:"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438 \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u0443\u0447\u0435\u0431\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u043c\u043e\u0433\u0443 \u0432\u0430\u043c \u043f\u0440\u0438 \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0438 \u0442\u0435\u0441\u0442\u043e\u0432.",section:"materials",button:"\u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435..."}];function vc(e){return r.a.createElement(ue.r,{className:e.class},bc.map(function(t){return r.a.createElement(gc,{key:t.id,title:t.title,image:t.image,description:t.description,section:t.section,changeSection:e.changeSection,button:t.button})}))}function Ec(e){return r.a.createElement("div",null,"materials",r.a.createElement(Rn.a,{variant:"contained",onClick:e.closeSection},"\u041d\u0430\u0437\u0430\u0434"))}function yc(){return xc.apply(this,arguments)}function xc(){return(xc=Object(oe.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(de,"/api/test/read.php")).then(function(e){return e.json()}).then(function(e){return t=e.data}).catch(function(e){return console.log(e)});case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function wc(){return jc.apply(this,arguments)}function jc(){return(jc=Object(oe.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(de,"/api/test/read.php?byid=true")).then(function(e){return e.json()}).then(function(e){return t=e.data}).catch(function(e){return console.log(e)});case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Oc(){return kc.apply(this,arguments)}function kc(){return(kc=Object(oe.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(de,"/api/question/read.php")).then(function(e){return e.json()}).then(function(e){return t=e.data}).catch(function(e){return console.log(e)});case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Cc(){return Sc.apply(this,arguments)}function Sc(){return(Sc=Object(oe.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("".concat(de,"/api/getCategories.php")).then(function(e){return e.json()}).then(function(e){return t=e}).catch(function(e){return console.log(e)});case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Tc(){return Nc.apply(this,arguments)}function Nc(){return(Nc=Object(oe.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,fetch("".concat(de,"/api/test/getLastId.php")).then(function(e){return e.json()}).then(function(e){return t=e}).catch(function(e){return console.log(e)});case 3:return e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Dc(e){return _c.apply(this,arguments)}function _c(){return(_c=Object(oe.a)(ie.a.mark(function e(t){var n;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(de,"/api/test/getSingleTest.php?id=").concat(t)).then(function(e){return e.json()}).then(function(e){return n=e.data}).catch(function(e){return console.log(e)});case 3:return e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ic(e){return Ac.apply(this,arguments)}function Ac(){return(Ac=Object(oe.a)(ie.a.mark(function e(t){var n;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("".concat(de,"/api/question/getSingleQuestion.php?id=").concat(t)).then(function(e){return e.json()}).then(function(e){return n=e.data}).catch(function(e){return console.log(e)});case 3:return e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Fc(){var e=Object(p.a)(["\n  height: 100%;\n  width: 100%;\n  min-height: 220px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: .35;\n"]);return Fc=function(){return e},e}function Mc(){return r.a.createElement(Pc,null,r.a.createElement(zn.a,{variant:"h6"},"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))}var Pc=O.a.div(Fc());function qc(){var e=Object(p.a)(["\n  svg {\n    font-size: 32px;\n    color: rgba(0,0,0,0.54);\n    right: 25px;\n    padding: 5px;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    position: absolute;\n  }\n"]);return qc=function(){return e},e}function Lc(e){return r.a.createElement(ot.a,Object.assign({button:!0,component:"a"},e))}var Hc=O.a.span(qc()),Rc=Object(jn.withStyles)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,paddingBottom:40},inline:{display:"inline"}}})(function(e){var t=e.classes,n=e.items;return e.completed&&(n=n.filter(function(t){return e.completed?t.completed:!t.completed})),r.a.createElement("div",{className:t.root},r.a.createElement(rt.a,{component:"nav"},n&&n.length>0?n.map(function(n){return r.a.createElement(a.Fragment,{key:n.id},r.a.createElement(Lc,{href:"test/".concat(n.id)},r.a.createElement(lt.a,{primary:"".concat(n.user_name,", ").concat(n.position," ").concat("1"===n.completed?"(\u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d)":"0.5"===n.completed?"(\u043d\u0430\u0447\u0430\u0442)":"(\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f)"),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a,{component:"span",className:t.inline,color:"textPrimary"},n.date),"1"===n.completed?" \u2014 \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: ".concat((o=n.result,100*parseFloat(o.replace(",",".")).toFixed(2)+"%"),"."):" \u2014 \u0412\u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0432 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438: ".concat(n.questions.length,", \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435: ").concat((i=n.time,"false"!==i&&i?"".concat(i," \u043c\u0438\u043d\u0443\u0442"):"\u043d\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e")))}),e.completed?null:r.a.createElement(Hc,{onClick:function(t){return e.handleConfirm(t,n.id)}},r.a.createElement(Sn.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",placement:"top"},r.a.createElement(be.a,null)))),r.a.createElement(U.a,null));var i,o}):r.a.createElement(Mc,null)))}),Wc=n(303),zc=n.n(Wc);function Bc(){var e=Object(p.a)(["\n  padding: 30px 40px;\n  height: 350px;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]);return Bc=function(){return e},e}function Uc(){return r.a.createElement(Yc,null,r.a.createElement(ue.w,{variant:"body1"},"\u041f\u043e\u043a\u0430 \u0432\u044b \u0435\u0449\u0451 \u043d\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u043b\u0438 \u043d\u0438\u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f."),r.a.createElement(ue.w,{variant:"body2",style:{marginTop:20}},"\u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0443 \u0432\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 - \u0437\u0434\u0435\u0441\u044c \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u0435\u043d\u0438\u044f."))}var Yc=O.a.div(Bc()),Vc=n(302),Gc=n.n(Vc);function Kc(){var e=Object(p.a)(["\n  padding: 20px;\n  & > div {\n    width: 100%;\n  }\n\n  @media all and (max-width: 600px) {\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    padding: 10px 20px 12px;\n    height: 80px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    label {\n      line-height: .5;\n    }\n    input {\n      padding: 9px 18.5px;\n    }\n    input::placeholder {\n      color: red;\n    }\n  }\n"]);return Kc=function(){return e},e}var Qc=O.a.div(Kc()),Xc=function(e){return r.a.createElement(Qc,null,r.a.createElement(bt.a,{id:"outlined-adornment-password",variant:"outlined",type:"text",label:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0438\u043c\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0438\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c...",margin:"dense",value:e.searchValue,onChange:e.handleSearch,InputProps:{endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(M.a,{"aria-label":"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0438\u043c\u044f, \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0438\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c..."},r.a.createElement("img",{alt:"\u041f\u043e\u0438\u0441\u043a",src:Et.a,style:{opacity:".37"}})))}}))};function Jc(e){var t=e.inputRef,n=Object(Bn.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))}for(var Zc={Control:function(e){return r.a.createElement(ue.u,Object.assign({fullWidth:!0,InputProps:{inputComponent:Jc,inputProps:Object(Ft.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(ue.r,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ue.c,{tabIndex:-1,label:e.children,className:Yn()(e.selectProps.classes.chip,Object(At.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(Kn.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(ue.w,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(ue.o,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(ue.w,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(ue.w,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},$c=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,a=this.props.users.map(function(e){return{value:e.id,label:"".concat(e.name," ").concat(e.surname),position:e.position}}),i={input:function(e){return Object(Ft.a)({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(ue.p,null,r.a.createElement(Vn.a,{classes:t,styles:i,textFieldProps:{label:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",InputLabelProps:{shrink:!0}},options:a,components:Zc,value:this.props.selectedUser,onChange:this.props.handleChange("selectedUser"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430",isMulti:!1})))}}]),t}(r.a.Component),el=Object(jn.withStyles)(function(e){return{root:{flexGrow:1,height:120,marginTop:20,display:"flex",flexDirection:"column",justifyContent:"space-between",zIndex:1e3},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",zIndex:1e3},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(Qn.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:1e3,marginTop:e.spacing.unit,left:0,right:0}}},{withTheme:!0})($c),tl=[{value:!1,label:"\u0431\u0435\u0437 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"}],nl=10;nl<=120;nl+=10){var al={};al.value=nl,al.label="".concat(nl," \u043c\u0438\u043d\u0443\u0442"),tl.push(al)}var rl=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ta.a,{container:!0,justify:"space-around",style:{paddingBottom:30}},r.a.createElement(bt.a,{select:!0,label:"\u041c\u0438\u043d\u0443\u0442\u044b",className:e.textField,value:this.props.selectedTime,onChange:this.props.handleTimeChange,SelectProps:{MenuProps:{className:e.menu}},helperText:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0442\u0435\u0441\u0442\u0430",margin:"dense"},tl.map(function(e){return r.a.createElement(H.a,{key:e.value,value:e.value},e.label)})))}}]),t}(r.a.Component),il=Object(jn.withStyles)(function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},menu:{width:200}}})(rl),ol=n(85),cl=n.n(ol),ll=n(86),sl=n.n(ll),ul=n(99),dl=n.n(ul),pl=n(84),ml=n.n(pl),hl=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"mark",value:function(e,t){this.props.setHeadSubCategory(e),this.props.handleMarkQuestion(t,"")}},{key:"render",value:function(){var e=this,t=this.props.question;return r.a.createElement(ot.a,{dense:!0,button:!0,onClick:function(){return e.mark(e.props.category,t.id)}},r.a.createElement(ml.a,{checked:t.checked,tabIndex:-1,disableRipple:!0,color:"primary"}),r.a.createElement(lt.a,{primary:t.question}))}}]),t}(r.a.Component);var fl=Object(I.b)(function(e){return{store:e}},function(e){return{getCategories:function(t){e({type:"GET_CATEGORIES",payload:t})},resetCategories:function(t){e({type:"RESET_CATEGORIES",payload:t})}}})(Object(jn.withStyles)(function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}})(function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),i=n[0],o=n[1],c=Object(a.useState)([]),l=Object(x.a)(c,2),s=l[0],u=l[1],d=e.classes,p=Object(a.useState)([]),m=Object(x.a)(p,2),h=m[0],f=m[1];function g(e){var t=h;-1===t.indexOf(e)?(t.push(e),o(!0)):0===(t=t.filter(function(t){return t!==e})).length&&o(!1),f(t)}return Object(a.useEffect)(function(){var t=e.questions.filter(function(t){return t.category===e.value});u(t),function(t){var n=e.store.categories;t.forEach(function(e){-1===n.indexOf(e.subcategory)&&n.push(e.subcategory)}),e.getCategories(n)}(t)},[]),r.a.createElement(cl.a,null,r.a.createElement(sl.a,{expandIcon:r.a.createElement(W.a,null),className:"align-center expansion-panel-top",style:{paddingLeft:12}},r.a.createElement(ml.a,{onClick:function(t){return function(t){t.stopPropagation();var n=e.store.categories;o(!i),f(i?[]:n)}(t)},checked:i,onChange:function(){return e.handleMarkQuestion("",e.value,i)}}),r.a.createElement(zn.a,{className:d.heading},e.var)),r.a.createElement(dl.a,{style:{flexDirection:"column",padding:0}},e.store.categories.map(function(t){if(s.find(function(e){return e.subcategory===t}))return r.a.createElement(cl.a,{key:t},r.a.createElement(sl.a,{expandIcon:r.a.createElement(W.a,null),className:"align-center",style:{paddingLeft:12}},r.a.createElement(ml.a,{color:"primary",onClick:function(n){return function(t,n){t.stopPropagation(),e.handleMarkQuestion(void 0,e.value,-1!==h.indexOf(n),n);var a=h;-1===a.indexOf(n)?(a.push(n),o(!0)):0===(a=a.filter(function(e){return e!==n})).length&&o(!1),f(a)}(n,t)},checked:-1!==h.indexOf(t)}),r.a.createElement(zn.a,{className:d.heading},t)),r.a.createElement(dl.a,{style:{flexDirection:"column",padding:0}},r.a.createElement(rt.a,null,s.map(function(n){if(n.subcategory===t)return r.a.createElement(hl,{key:n.id,category:t,setHeadSubCategory:g,question:n,handleMarkQuestion:e.handleMarkQuestion})}))))})))}));function gl(e){return r.a.createElement(a.Fragment,null,e.categories.map(function(t){return r.a.createElement(fl,{key:t.id,var:t.var,value:t.value,questions:e.questions,handleMarkQuestion:e.handleMarkQuestion})}))}var bl=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={activeStep:0},n.handleNext=function(){n.setState(function(e){return{activeStep:e.activeStep+1}}),n.setOverlay(n.state.activeStep+1)},n.handleBack=function(){n.setState(function(e){return{activeStep:e.activeStep-1}}),n.setOverlay(n.state.activeStep-1)},n.handleReset=function(){n.setState({activeStep:0}),n.setOverlay(0)},n.checkDisabled=function(e,t,n,a){if(0===e&&0!==t.length)return!1;if(1===e&&("boolean"===typeof n||n))return!1;if(2===e&&a&&a.filter(function(e){return e.checked}).length>0)return!1;return!0},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"setOverlay",value:function(e){var t=document.getElementById("overlay-modal");t.style.overflow=2===e?"overlay":"visible"}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.users,i=t.selectedUser,o=t.selectedTime,c=t.questions,l=t.categories,s=["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430","\u041d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b"],u=this.state.activeStep;return r.a.createElement("div",{className:n.root},r.a.createElement(In.a,{activeStep:u,orientation:"vertical"},s.map(function(t,a){return r.a.createElement(Fn.a,{key:t},r.a.createElement(Pn.a,null,t),r.a.createElement(Ln.a,null,r.a.createElement(zn.a,null,function(e){switch(e){case 0:return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0438\u0437 \u0432\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430, \u0442\u0430\u043a \u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0447\u0430\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0438\u043c\u044f \u0438\u043b\u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u043f\u043e\u0438\u0441\u043a\u0430. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430.";case 1:return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u0437 \u0432\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430.";case 2:return"\u041e\u0442\u043c\u0435\u0442\u044c\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0438\u043b\u0438 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0432 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438\u0437 \u0440\u0430\u0437\u043d\u044b\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439.";default:return"Unknown step"}}(a)),r.a.createElement("div",{className:n.actionsContainer},r.a.createElement("div",null,r.a.createElement(Rn.a,{disabled:0===u,onClick:e.handleBack,className:n.button},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(Rn.a,{variant:"contained",color:u===s.length-1?"secondary":"primary",onClick:u===s.length-1?function(){e.props.handleSubmit(),e.handleNext()}:e.handleNext,className:n.button,disabled:e.checkDisabled(u,i,o,c)},u===s.length-1?"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435":"\u0414\u0430\u043b\u044c\u0448\u0435")))))})),0===u?r.a.createElement(el,{users:a,selectedUser:i,handleChange:this.props.handleChange}):1===u?r.a.createElement(il,{selectedTime:o,handleTimeChange:this.props.handleTimeChange}):2===u?r.a.createElement(gl,{questions:c,categories:l,handleMarkQuestion:this.props.handleMarkQuestion}):null,u===s.length&&r.a.createElement(Ot.a,{square:!0,elevation:0,className:n.resetContainer},r.a.createElement(zn.a,null,'\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043b\u044e\u0431\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0435 "\u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435" \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0442\u0435\u0441\u0442\u044b.'),r.a.createElement(Rn.a,{onClick:function(){e.handleReset(),e.props.resetAll()},variant:"contained",color:"secondary",className:n.button},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0435\u0449\u0451 \u043e\u0434\u043d\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(Rn.a,{onClick:this.props.handleClose,className:n.button},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}}]),t}(r.a.Component),vl=Object(jn.withStyles)(function(e){return{root:{width:"100%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}})(bl);function El(){var e=Object(p.a)(["\n  position: absolute;\n  top: 0; bottom: 0;\n  left: 0; right: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5;\n  background: rgba(0,0,0,.17);\n"]);return El=function(){return e},e}function yl(){var e=Object(p.a)(["\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  max-width: 850px;\n  height: fit-content;\n  max-height: 75vh;\n  overflow: visible;\n  margin: auto;\n  background: #ffffff;\n  border-radius: 10px;\n  outline: none;\n  z-index: 10;\n\n  .listFor {\n    max-height: 220px;\n    margin-top: 20px;\n    overflow: auto;\n  }\n  ::-webkit-scrollbar {\n    width: 5px;\n  }\n  ::-webkit-scrollbar-track {\n    background-color: #ebebeb;\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n  }\n  ::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n    background: #1976d2; \n  }\n\n  & > div {\n    height: fit-content;\n    padding: 20px 30px;\n  }\n   \n  .closeNewTask svg {\n    font-size: 30px;\n    color: #1976d2;\n    opacity: .8;\n    cursor: pointer;\n    position: absolute;\n    right: 20px;\n    top: 20px;\n\n    :hover {\n      opacity: .8;\n      transition: .37s ease;\n    }\n  }\n  @media all and (max-width: 600px) {\n    top: 0;\n    max-width: 100%;\n    border-radius: unset;\n    height: calc(100vh - 55px);\n    margin: unset;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    & > div {\n      padding: 20px 15px;\n      box-shadow: unset;\n      & > div {\n        > div:first-child {\n          padding: 20px 5px;\n        }\n      }\n    }\n    .closeNewTask svg {\n      font-size: 32px;\n      right: 15px;\n    } \n  }\n"]);return yl=function(){return e},e}var xl=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={selectedTime:"",users:[],selectedUser:[],questions:[],categories:[]},n.handleChange=function(e){return function(t){return n.setState(Object(At.a)({},e,t))}},n.handleTimeChange=function(e){return n.setState({selectedTime:e.target.value})},n.handleMarkQuestion=function(e,t,a,r){var i=n.state.questions;if(e){var o=i.find(function(t){return t.id===e});o.checked=!o.checked}else{if(r)i.filter(function(e){return e.category===t&&e.subcategory===r}).forEach(function(e){e.checked=!a});else i.filter(function(e){return e.category===t}).forEach(function(e){e.checked=!a})}n.setState({questions:i})},n.handleSubmit=function(){var e=new FormData,t=Object(ce.a)(Object(ce.a)(n)),a=n.state,r=a.selectedUser,i=a.questions,o=a.selectedTime,c=i.filter(function(e){return e.checked}),l=[];c.map(function(e){return l.push(e.id)}),e.append("questions",l),e.append("user_name",r.label),e.append("user_id",r.value),e.append("date",Ct()().format("L")),e.append("time",o),se.a.ajax({url:"".concat(de,"/api/test/create.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(){var e=Object(oe.a)(ie.a.mark(function e(){var n;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tc();case 2:return n=e.sent,e.next=5,t.props.onAddNewTest({questions:l,user_name:r.label,user_id:r.value,date:Ct()().format("L"),time:o,completed:!1,position:r.position,id:Number(n)});case 5:return e.next=7,t.props.enqueueSnackbar("\u0422\u0435\u0441\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0431\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d",{variant:"success"});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),error:function(){t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(ie.a.mark(function e(){var t,n,a=this;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return fetch("".concat(de,"/api/user/read.php")).then(function(e){return e.json()}).then(function(e){return a.setState({users:e.data})}).catch(function(e){return console.log(e)}),e.next=3,Cc();case 3:return t=e.sent,e.next=6,Oc();case 6:return n=e.sent,e.next=9,this.setState({questions:n,categories:t});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetAll",value:function(){var e=[];this.state.questions.forEach(function(t){t.checked=!1,e.push(t)}),this.setState({selectedTime:"",selectedUser:[],questions:e})}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.selectedUser,i=e.selectedTime;return r.a.createElement(a.Fragment,null,r.a.createElement(wl,{id:"overlay-modal"},r.a.createElement(ue.r,null,r.a.createElement("span",{className:"closeNewTask",onClick:this.props.handleClose},r.a.createElement(ue.v,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",placement:"left"},r.a.createElement(Dn.a,null))),r.a.createElement(ue.w,{variant:"h5"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(vl,{users:t,selectedUser:n,selectedTime:i,handleChange:this.handleChange,handleTimeChange:this.handleTimeChange,handleClose:this.props.handleClose,handleSubmit:this.handleSubmit,questions:this.state.questions,categories:this.state.categories,handleMarkQuestion:this.handleMarkQuestion.bind(this),resetAll:this.resetAll.bind(this)}))),window.innerWidth>=600?r.a.createElement(jl,{onClick:this.props.handleClose}):null)}}]),t}(a.Component),wl=O.a.div(yl()),jl=O.a.div(El()),Ol=Object(I.b)(function(e){return{store:e}},function(e){return{onAddNewTest:function(t){e({type:"ADD_TEST",payload:t})}}})(Object(z.withSnackbar)(xl));function kl(e){var t=e.children,n=e.dir;return r.a.createElement(zn.a,{component:"div",dir:n},t)}var Cl=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={value:0,searchValue:"",items:[],documentTitle:document.title,open:!1,confirm:!1,loading:!1},n.handleChange=function(e,t){n.setState({value:t})},n.handleChangeIndex=function(e){n.setState({value:e})},n.handleSearch=function(e){n.setState({searchValue:e.target.value});var t=e.target.value.toLowerCase();document.title=e.target.value||n.state.documentTitle;var a=n.state.items;a=a.filter(function(e){return e.user_name.toLowerCase().includes(t)||e.position.toLowerCase().includes(t)}),n.props.onFilterTests(a)},n.componentWillUnmount=function(){document.title=n.state.documentTitle},n.openModal=function(){return n.setState({open:!0})},n.closeModal=function(){return n.setState({open:!1})},n.handleClose=function(){return n.setState({open:!1,confirm:!1,preparedToDelete:null})},n.handleConfirm=function(e,t){e.preventDefault(),e.stopPropagation(),n.setState({confirm:!0,preparedToDelete:t})},n.handleDelete=function(){var e=new FormData,t=Object(ce.a)(Object(ce.a)(n));n.setState({loading:!0,confirm:!1}),e.append("id",n.state.preparedToDelete),se.a.ajax({url:"".concat(de,"/api/test/delete.php"),data:e,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),t.props.onDeleteTest(t.state.preparedToDelete),t.setState({loading:!1,preparedToDelete:null}),t.props.enqueueSnackbar("\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0431\u044b\u043b\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e",{variant:"info"})},error:function(e){console.log(e),t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",{variant:"error"})}})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({items:this.props.store.tests})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,i=this.props.store.tests;return r.a.createElement("div",{className:t.root},r.a.createElement(za.a,{position:"static",color:"default"},r.a.createElement(La.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},r.a.createElement(Ra.a,{label:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),r.a.createElement(Ra.a,{label:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435"}))),this.state.loading?r.a.createElement(_,{minHeight:300,color:"primary"}):r.a.createElement(a.Fragment,null,r.a.createElement(Xc,{handleSearch:this.handleSearch,searchValue:this.state.searchValue}),r.a.createElement(Gc.a,{axis:"rtl"===n.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex,style:{maxHeight:350,paddingBottom:50},className:"swipeable"},r.a.createElement(kl,{dir:n.direction},r.a.createElement(Rc,{items:i.length>0?i:[],completed:!0,handleConfirm:this.handleConfirm})),r.a.createElement(kl,{dir:n.direction},r.a.createElement(Rc,{items:i.length>0?i:[],completed:!1,handleConfirm:this.handleConfirm})))),r.a.createElement(Ut,{open:this.state.open,handleClose:this.closeModal,component:r.a.createElement(Ol,{handleClose:this.closeModal})}),r.a.createElement(Ut,{open:this.state.confirm,handleClose:this.handleClose.bind(this),component:r.a.createElement(Na,{handleDelete:this.handleDelete,handleClose:this.handleClose.bind(this),name:"\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})}),r.a.createElement("span",{onClick:this.openModal},r.a.createElement(Tn,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})))}}]),t}(r.a.Component),Sl=Object(I.b)(function(e){return{store:e}},function(e){return{onFilterTests:function(t){e({type:"FILTER_TESTS",payload:t})},onDeleteTest:function(t){e({type:"DELETE_TEST",payload:t})}}})(Object(z.withSnackbar)(Object(jn.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:"100%"}}},{withTheme:!0})(Cl)));function Tl(){return r.a.createElement(ue.r,{style:Nl},r.a.createElement(ue.w,{variant:"h5"},"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"),r.a.createElement(ue.w,{variant:"body2"},"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0432\u0430\u043c\u0438 \u0442\u0435\u0441\u0442\u043e\u0432."))}var Nl={marginBottom:10,padding:"35px 15px 15px"};function Dl(){var e=Object(p.a)(["\n  width: 100%;\n  display: flex;\n  position: absolute;\n  bottom: 0;\n  button {\n    width: 100%;\n    height: 50px;\n    margin: 20px auto 0;\n    background: #fff;\n    span > svg {\n      margin-right: 10px;\n    }\n    :hover {\n      background: #1976d2;\n      color: white;\n      svg {\n        color: white;\n      }\n    }\n  }\n"]);return Dl=function(){return e},e}var _l=O.a.div(Dl()),Il=Object(I.b)(function(e){return{store:e}},function(e){return{fetchTests:function(t){e({type:"FETCH_TESTS",payload:t})}}})(function(e){var t=e.store.tests,n=e.store.user.admin,i=Object(a.useState)(0===t.length),o=Object(x.a)(i,2),c=o[0],l=o[1];return Object(a.useEffect)(function(){0===t.length&&function(){var t=Object(oe.a)(ie.a.mark(function t(){var a;return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("1"!==n){t.next=6;break}return t.next=3,yc();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,wc();case 8:t.t0=t.sent;case 9:a=t.t0,e.fetchTests(a),l(!1);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()()},[]),r.a.createElement(ue.r,{style:{minHeight:300,position:"relative"}},c||"1"!==n?null:r.a.createElement(Sl,{items:t}),c||"0"!==n?null:r.a.createElement(Tl,null),c?r.a.createElement(_,{minHeight:350,color:"primary"}):t&&t.length>0&&"0"===n?r.a.createElement(Rc,{items:t}):"0"===n?r.a.createElement(Uc,null):null,r.a.createElement(_l,null,r.a.createElement(ue.a,{color:"primary",onClick:e.closeSection},r.a.createElement(zc.a,null),"\u041d\u0430\u0437\u0430\u0434")))});function Al(){var e=Object(p.a)(["\n  .learnings-container {\n    display: flex;\n  }\n  @media all and (max-width: 600px) {\n    .learnings-container {\n      flex-direction: column;\n      padding-bottom: 50px;\n      & > div {\n        margin: 0 auto 25px;\n      }\n    }\n  }\n"]);return Al=function(){return e},e}var Fl=O.a.div(Al()),Ml=function(){var e=Object(a.useState)(!1),t=Object(x.a)(e,2),n=t[0],i=t[1];function o(){i(!1)}return r.a.createElement(Fl,null,window.innerWidth<600?r.a.createElement(Ma,{title:"\u041e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"}):null,n?"tests"===n?r.a.createElement(Il,{closeSection:o}):r.a.createElement(Ec,{closeSection:o}):r.a.createElement(vc,{class:"learnings-container",changeSection:function(e){i(e)}}))};function Pl(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Pl=function(){return e},e}var ql=O.a.div(Pl()),Ll=Object(I.b)(function(e){return{store:e}})(function(){return r.a.createElement(a.Fragment,null,r.a.createElement(ne,null),r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(ri,null),r.a.createElement(ql,null,r.a.createElement(nt,null),r.a.createElement("div",{className:"main-page-container"},function(){var e=window.location.pathname.slice(1);if(e.includes("id"))return r.a.createElement(wn,null);switch(e){case"messages":return r.a.createElement(io,null);case"news":return r.a.createElement(qr,null);case"tasks":return r.a.createElement(Ga,null);case"learnings":return r.a.createElement(Ml,null);case"colleagues":return r.a.createElement(It,null);case"feed":return r.a.createElement(ic,null);default:return null}}()))))});function Hl(){var e=Object(p.a)(["\n  position: absolute;\n  right: 25px;\n  top: 15px;  \n  cursor: pointer;\n  svg {\n    color: #1976d2;\n  }\n"]);return Hl=function(){return e},e}function Rl(){var e=Object(p.a)(["\n  background: #fff;\n  z-index: 100;\n  width: 500px;\n  height: 258px;\n  left: 0;\n  right: 0;\n  position: fixed;\n  top: 25%;\n  margin: auto;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  padding: 30px;\n"]);return Rl=function(){return e},e}var Wl=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={credentials:""},n.handleSubmit=function(e){var t=Object(ce.a)(Object(ce.a)(n));if(e.preventDefault(),n.state.credentials){var a=new FormData;a.append("credentials",n.state.credentials),se.a.ajax({url:"".concat(de,"/api/user/forget.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(e){console.log(e),1===e.result?(t.props.enqueueSnackbar("\u041d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u043c\u0438 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 email - \u0431\u044b\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044e \u043f\u0430\u0440\u043e\u043b\u044f",{variant:"info"}),t.props.forgetPassword()):t.props.enqueueSnackbar("\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0442\u0430\u043a\u043e\u0433\u043e \u043b\u043e\u0433\u0438\u043d\u0430 \u0438\u043b\u0438 email - \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",{variant:"info"})},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435, \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",{variant:"warning"})},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(a.Fragment,null,r.a.createElement(zl,null,r.a.createElement(Bl,null,r.a.createElement(fe.a,{onClick:this.props.forgetPassword})),r.a.createElement(ue.w,{variant:"subtitle2"},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f."),r.a.createElement(ue.u,{label:"E-mail \u0438\u043b\u0438 \u043b\u043e\u0433\u0438\u043d",variant:"outlined",name:"login",fullWidth:!0,margin:"dense",error:this.state.credential,onChange:function(t){return e.setState({credentials:t.target.value})},value:this.state.username}),r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("div",{className:"black-wrapper black-wrapper__this",onClick:this.props.forgetPassword}))}}]),t}(a.Component),zl=O.a.div(Rl()),Bl=O.a.div(Hl()),Ul=Object(z.withSnackbar)(Wl),Yl=n(117),Vl=n.n(Yl),Gl=n(116),Kl=n.n(Gl),Ql=n(61),Xl=n.n(Ql),Jl=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"setCookie",value:function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"checkCookie",value:function(){var e=this.getCookie("username");""!==e?alert("Welcome again "+e):""!==(e=prompt("Please enter your name:",""))&&null!==e&&this.setCookie("username",e,365)}}]),e}();function Zl(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 35px;\n"]);return Zl=function(){return e},e}var $l=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).forgetPassword=function(){return n.setState({isForget:!n.state.isForget})},n.handleClickShowPassword=function(){n.setState({isPassHidden:!n.state.isPassHidden})},n.state={login:"",password:"",isForget:"",isPassHidden:!1,invalidText:!1,invalidPass:!1},n.handleChange=n.handleChange.bind(Object(ce.a)(Object(ce.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){this.setState({invalidText:!1,invalidPass:!1}),this.setState(Object(At.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""!==this.state.login&&this.state.password.length>=8){var n=new FormData;n.append("login",this.state.login),n.append("password",this.state.password),se.a.ajax({url:"".concat(de,"/api/user/signup.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){var n=e.jwt,a=e.result,r=e.user_id,i=new Jl;switch(a){case 0:t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",{variant:"warning"});break;case.5:t.props.enqueueSnackbar("\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0432\u0430\u0448\u0430 \u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c \u0435\u0449\u0451 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435",{variant:"info"});break;case"error":t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",{variant:"error"});break;case 1:localStorage.setItem("akv_jwt_token",n),i.setCookie("akv_jwt_token",n,30),i.setCookie("user_id",r,30),window.location.href="/"}},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"}),this.state.password.length<8&&this.setState({invalidPass:!0}),this.state.login||this.setState({invalidText:!0})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"form-container",style:{paddingBottom:"45px"}},r.a.createElement("form",{className:"registerForm",id:"register",action:"",method:"POST",onSubmit:this.handleSubmit},r.a.createElement(bt.a,{label:"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 email",variant:"outlined",name:"login",fullWidth:!0,margin:"dense",onChange:this.handleChange,value:this.state.username,error:this.state.invalidText}),r.a.createElement(bt.a,{fullWidth:!0,variant:"outlined",type:this.state.isPassHidden?"text":"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",margin:"dense",name:"password",error:this.state.invalidPass,value:this.state.password,onChange:this.handleChange,InputProps:{endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(M.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.isPassHidden?r.a.createElement(Kl.a,null):r.a.createElement(Vl.a,null)))}}),this.state.invalidPass?r.a.createElement(Xl.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):"",r.a.createElement(es,null,r.a.createElement(ue.a,{variant:"text",color:"default",onClick:this.forgetPassword},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.a.createElement(ue.a,{variant:"contained",color:"primary",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),this.state.isForget?r.a.createElement(Ul,{forgetPassword:this.forgetPassword}):null)))}}]),t}(a.Component),es=O.a.div(Zl()),ts=Object(I.b)(function(e){return{global:e}},function(e){return{login:function(t){e({type:"LOGGED_IN",payload:t})}}})(Object(z.withSnackbar)($l));function ns(){var e=Object(p.a)(["\n  button {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 30px;\n    margin: auto;\n    width: fit-content;\n    min-width: 199px;\n    background: #1976d2 !important;\n    & > span > div > div {\n      height: 25px !important;\n      width: 25px !important;\n    }\n  }\n"]);return ns=function(){return e},e}var as=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).handleClickShowPassword=function(){n.setState({isPassHidden:!n.state.isPassHidden})},n.state={email:"",login:"",password:"",confirmed:"",isEmailValid:"",isPassHidden:!1,entered:!1,name:"",surname:"",loading:!1},n.handleChange=n.handleChange.bind(Object(ce.a)(Object(ce.a)(n))),n.validateEmail=n.validateEmail.bind(Object(ce.a)(Object(ce.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ce.a)(Object(ce.a)(n))),n.showPassword=n.showPassword.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t;this.setState((t={},Object(At.a)(t,e.target.name,e.target.value),Object(At.a)(t,"entered",!1),t)),"email"===e.target.name&&(this.validateEmail(e.target.value),""===e.target.value&&this.setState({isEmailValid:""}))}},{key:"validateEmail",value:function(e){/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?this.setState({isEmailValid:!0}):this.setState({isEmailValid:!1})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.setState({entered:!0,loading:!0}),this.state.login&&this.state.surname&&this.state.name&&this.state.isEmailValid&&this.state.password){var n=new FormData;n.append("login",this.state.login),n.append("email",this.state.email),n.append("password",this.state.password),n.append("name",this.state.name),n.append("surname",this.state.surname),se.a.ajax({url:"".concat(de,"/api/user/register.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){switch(e.result){case 0:t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044cc\u044f.",{variant:"error"});break;case 1:t.props.enqueueSnackbar("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c, \u043a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0448\u0443 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u044f\u0442 - \u0432\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0447\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c. \u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0447\u0442\u0435.",{variant:"success"}),t.setState({email:"",login:"",name:"",surname:"",password:"",confirmed:"",isEmailValid:"",isPassHidden:!1,entered:!1,loading:!1});break;case 2:t.props.enqueueSnackbar("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0438\u043b\u0438 email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",{variant:"warning"});break;default:return null}},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"})}},{key:"showPassword",value:function(){this.setState({isPassHidden:!this.state.isPassHidden})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{id:"register",action:"",method:"POST",onSubmit:this.handleSubmit},r.a.createElement(bt.a,{label:"\u0418\u043c\u044f",variant:"outlined",name:"name",fullWidth:!0,error:this.state.entered&&!this.state.name,margin:"dense",onChange:this.handleChange,value:this.state.name}),r.a.createElement(bt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",variant:"outlined",name:"surname",fullWidth:!0,error:this.state.entered&&!this.state.surname,margin:"dense",onChange:this.handleChange,value:this.state.surname}),r.a.createElement(bt.a,{label:"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 email",variant:"outlined",name:"login",fullWidth:!0,error:this.state.entered&&!this.state.login,margin:"dense",onChange:this.handleChange,value:this.state.login}),r.a.createElement(bt.a,{fullWidth:!0,variant:"outlined",type:this.state.isPassHidden?"text":"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",margin:"dense",name:"password",value:this.state.password,onChange:this.handleChange,error:this.state.entered&&this.state.password.length<8,InputProps:{endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(M.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.isPassHidden?r.a.createElement(Kl.a,null):r.a.createElement(Vl.a,null)))}}),this.state.password.length>0&&this.state.password.length<8?r.a.createElement(Xl.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):"",r.a.createElement(bt.a,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",name:"confirmed",fullWidth:!0,margin:"dense",type:"password",error:this.state.entered&&this.state.confirmed.length<8,onChange:this.handleChange,value:this.state.confirmed}),this.state.password!==this.state.confirmed&&""!==this.state.confirmed?r.a.createElement(Xl.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):null,r.a.createElement(bt.a,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",name:"email",fullWidth:!0,error:this.state.entered&&!this.state.isEmailValid&&!this.state.email.lentgh,margin:"dense",onChange:this.handleChange,value:this.state.email}),!this.state.isEmailValid&&this.state.email?r.a.createElement(Xl.a,{style:{color:"#f44336"}},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0439 email \u0430\u0434\u0440\u0435\u0441"):"",r.a.createElement(rs,null,r.a.createElement(ue.a,{variant:"contained",color:"primary",type:"submit",disabled:this.state.loading},this.state.loading?r.a.createElement(_,{minHeight:30,color:"secondary"}):"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))}}]),t}(a.Component),rs=O.a.div(ns()),is=Object(z.withSnackbar)(as),os=(n(596),function(e){var t=e.cssClass;return r.a.createElement("ul",{className:t?"".concat(t," bg-bubbles"):"bg-bubbles"},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null))}),cs=(n(198),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={whichForm:!1},n.changeForm=n.changeForm.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"changeForm",value:function(){this.setState({whichForm:!this.state.whichForm})}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-screen"},r.a.createElement(y,null),r.a.createElement("div",{className:"login-screen-container"},r.a.createElement("p",{className:"login-screen-greetings"},"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435"),r.a.createElement("div",{className:"login-button-container"},r.a.createElement("button",{className:this.state.whichForm?"login-screen-button login-screen-button-enabled":"login-screen-button",onClick:this.changeForm},r.a.createElement(zn.a,{variant:"button"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("button",{className:this.state.whichForm?"login-screen-button":"login-screen-button login-screen-button-enabled",onClick:this.changeForm},r.a.createElement(zn.a,{variant:"button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),this.state.whichForm?r.a.createElement(is,null):r.a.createElement(ts,null)),r.a.createElement(os,null))}}]),t}(a.Component)),ls=(n(599),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).goToMain=function(){return window.location.href="/"},n.closeWindow=function(){return window.close()},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-screen"},r.a.createElement(y,null),r.a.createElement("div",{className:"approved-container"},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0431\u044b\u043b\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430."),r.a.createElement("button",{onClick:this.goToMain},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")),r.a.createElement(os,null))}}]),t}(a.Component));n(601);function ss(){var e=Object(p.a)(["\n  margin-top: 15px;\n"]);return ss=function(){return e},e}function us(){var e=Object(p.a)(["\n  button {\n    position: absolute;\n    bottom: 35px;\n    left: 0;\n    right: 0;\n    margin: auto;\n    width: fit-content;\n  }\n"]);return us=function(){return e},e}var ds=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){var t;n.setState((t={},Object(At.a)(t,e.target.name,e.target.value),Object(At.a)(t,"entered",!1),t))},n.handleClickShowPassword=function(){n.setState({isPassHidden:!n.state.isPassHidden})},n.state={pw:"",confirmed:"",isPassHidden:!1,entered:!1},n.handleSubmit=n.handleSubmit.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(this.setState({entered:!0}),t.state.pw===t.state.confirmed&&t.state.pw&&t.state.confirmed){t.setState({modal:!1}),e.preventDefault();var n=new FormData;n.append("password",se()('input[name="pw"]').val()),n.append("auth",function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,a){e[n]=a});return e}().auth),se.a.ajax({url:"".concat(de,"/api/user/restore.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(e){switch(console.log(e),e.result){case 0:t.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",{variant:"error"});break;case 1:t.props.enqueueSnackbar("\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c, \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c - \u0442\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443",{variant:"success"}),setTimeout(function(){return window.location.href="login"},237);break;default:return null}},error:function(){t.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",{variant:"error"})}})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-screen"},r.a.createElement(y,null),r.a.createElement("div",{className:"form-container restore-container"},r.a.createElement(ue.w,{variant:"h6"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c."),r.a.createElement(ue.w,{variant:"caption"}," \u0412\u044b\u0431\u043e\u0440 \u0431\u043e\u043b\u0435\u0435 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u043e\u043b\u044f \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0437\u0430\u0449\u0438\u0442\u0443 \u0432\u0430\u0448\u0435\u0439 \u043b\u0438\u0447\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438."),r.a.createElement(ms,null,r.a.createElement(bt.a,{fullWidth:!0,variant:"outlined",type:this.state.isPassHidden?"text":"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",margin:"dense",name:"pw",value:this.state.pw,onChange:this.handleChange,error:this.state.pw.length>0&&this.state.pw.length<8,InputProps:{endAdornment:r.a.createElement(ft.a,{position:"end"},r.a.createElement(M.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.isPassHidden?r.a.createElement(Kl.a,null):r.a.createElement(Vl.a,null)))}}),this.state.pw.length>0&&this.state.pw.length<8?r.a.createElement(Xl.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):"",r.a.createElement(bt.a,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",name:"confirmed",fullWidth:!0,margin:"dense",type:"password",error:this.state.entered&&this.state.confirmed.length<8&&this.state.confirmed.length>0,onChange:this.handleChange,value:this.state.confirmed}),this.state.pw!==this.state.confirmed&&this.state.confirmed?r.a.createElement(Xl.a,{style:{color:"#f44336"}},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):null),r.a.createElement(ps,null,r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"))),r.a.createElement(os,null))}}]),t}(a.Component),ps=O.a.div(us()),ms=O.a.div(ss()),hs=Object(z.withSnackbar)(ds),fs=(n(603),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).goToMain=function(){return window.location.href="/"},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("div",{className:"loading wave"},"404"),r.a.createElement("div",{className:"not-found wave"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),r.a.createElement("button",{onClick:this.goToMain},"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))}}]),t}(a.Component)),gs=n(160),bs=n.n(gs);"/settings"===window.location.pathname&&se()(document.body).css({background:"linear-gradient(to bottom right,#00c5fe,#9de3dc,#0d11b4)"});var vs={default:{width:window.innerWidth<600?"95%":600,margin:"10px auto",position:"relative",padding:window.innerWidth<600?"20px 15px 80px":"20px 40px 80px",zIndex:37},input:{width:"100%"},button:{position:"absolute",left:0,right:0,width:120,bottom:25,margin:"auto"},upload:{background:"#ef6c00",color:"white",margin:"auto",cursor:"pointer",position:"relative"},hiddenInput:{opacity:0,position:"absolute",cursor:"pointer",left:0,right:0,bottom:0,top:0},avatar:{width:100,height:100,marginBottom:15,borderRadius:"50%"},header:{marginTop:100,marginBottom:12,color:"#fff",textAlign:"center",fontWeight:500,display:window.innerWidth<600?"none":"block"}},Es=[{value:"\u043c\u0443\u0436\u0441\u043a\u043e\u0439",label:"\u043c\u0443\u0436\u0441\u043a\u043e\u0439"},{value:"\u0436\u0435\u043d\u0441\u043a\u0438\u0439",label:"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"}],ys=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).fileSelect=function(e){e.target.files[0].size<2097152?(n.setState({selectedFile:e.target.files[0]}),n.uploadAvatar(e.target.files[0])):n.props.enqueueSnackbar("\u0424\u0430\u0439\u043b \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439, \u0440\u0430\u0437\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0435 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 2\u041c\u0411",{variant:"warning"})},n.uploadAvatar=function(e){var t=new FormData,a=e,r=Object(ce.a)(Object(ce.a)(n));t.append("file",a),t.append("id",n.state.user_id),se.a.ajax({url:"".concat(de,"/api/user/upload.php"),type:"post",data:t,contentType:!1,processData:!1,success:function(e){window.location.host.includes("localhost")?r.setState({uploadedAvatar:e.location.slice(22)}):r.setState({uploadedAvatar:e.location.slice(6)}),console.log(e)}})},n.componentDidMount=function(){fetch("".concat(de,"/api/user/info.php")).then(function(e){return e.json()}).then(function(e){return n.setState({user:e,user_id:e.id})})},n.handleChange=function(e){var t=Object(Ft.a)({},n.state.user);t[e.target.name]=e.target.value,n.setState({user:t})},n.handleSubmit=function(e){var t=Object(ce.a)(Object(ce.a)(n));if(t.setState({modal:!1}),e.preventDefault(),se()('input[name="surname"]').val()&&se()('input[name="name"]').val()&&se()('input[name="sex"]').val()&&se()('input[name="position"]').val()&&(n.state.selectedDate||n.state.user.birthday)){var a=new FormData;a.append("id",t.state.user.id),a.append("surname",se()('input[name="surname"]').val()),a.append("name",se()('input[name="name"]').val()),a.append("birthday",t.state.selectedDate.slice(0,10)||n.state.user.birthday),a.append("sex",se()('input[name="sex"]').val()),a.append("position",se()('input[name="position"]').val()),a.append("avatar",t.state.uploadedAvatar),se.a.ajax({url:"".concat(de,"/api/user/settings.php"),data:a,processData:!1,contentType:!1,type:"POST",success:function(e){switch(console.log(e),e.result){case 0:t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"});break;case 1:t.props.enqueueSnackbar("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b",{variant:"success"}),window.location.href="/feed"}},error:function(){t.props.enqueueSnackbar("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",{variant:"error"})}})}else t.props.enqueueSnackbar("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"warning"})},n.handleDateChange=function(e){return n.setState({selectedDate:e.format()})},n.state={user:[],selectedFile:null,user_id:"",uploadedAvatar:"",selectedDate:""},n.handleSubmit=n.handleSubmit.bind(Object(ce.a)(Object(ce.a)(n))),n.handleChange=n.handleChange.bind(Object(ce.a)(Object(ce.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.user,n=e.uploadedAvatar,a=t.avatar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a,{variant:"h5",style:Object(Ft.a)({},vs.header)},"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(Ot.a,{style:Object(Ft.a)({},vs.default),elevation:1},r.a.createElement("form",{id:"personal-info",action:"",method:"POST",encType:"multipart/form-data"},n?r.a.createElement("div",{style:Object(Ft.a)({},vs.avatar,{background:"url(".concat(n,") no-repeat center/cover")})}):r.a.createElement("div",{style:Object(Ft.a)({},vs.avatar,{background:"url(".concat(a||j.a,") no-repeat center/cover")})}),r.a.createElement(Rn.a,{variant:"contained",style:Object(Ft.a)({},vs.upload)},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f",r.a.createElement(bs.a,{style:{marginLeft:10}},"cloud_upload"),r.a.createElement("input",{id:"avatar",accept:"image/*",style:Object(Ft.a)({},vs.hiddenInput),type:"file",name:"avatar",onChange:this.fileSelect})),r.a.createElement(bt.a,{required:!0,label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"name",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.handleChange,value:t.name,style:Object(Ft.a)({},vs.input)}),r.a.createElement(bt.a,{required:!0,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",name:"surname",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.handleChange,value:t.surname,style:Object(Ft.a)({},vs.input)}),r.a.createElement(bt.a,{select:!0,required:!0,label:"\u041f\u043e\u043b",InputLabelProps:{shrink:!0},value:t.sex,onChange:this.handleChange,helperText:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b",margin:"normal",name:"sex",style:Object(Ft.a)({},vs.input)},Es.map(function(e){return r.a.createElement(H.a,{name:"sex",key:e.value,value:e.value},e.label)})),r.a.createElement(bt.a,{required:!0,label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",name:"position",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.handleChange,value:t.position,style:Object(Ft.a)({},vs.input)}),r.a.createElement(Wt.a,{name:"birthday",margin:"normal",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",format:"Do MMMM YYYY",value:this.state.selectedDate?this.state.selectedDate:t.birthday||null,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:this.handleDateChange,"aria-describedby":"component-helper-text",style:Object(Ft.a)({},vs.input),cancelLabel:"\u041e\u0442\u043c\u0435\u043d\u0430",emptyLabel:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0434\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",required:!0}),r.a.createElement(zn.a,{variant:"caption",gutterBottom:!0},"*\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u0438\u0434\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0443"),r.a.createElement(Rn.a,{variant:"contained",color:"primary",style:Object(Ft.a)({},vs.button),onClick:this.handleSubmit},"\u0412\u043f\u0435\u0440\u0451\u0434!"))),r.a.createElement(os,null))}}]),t}(a.Component),xs=Object(z.withSnackbar)(ys),ws=n(38),js=n(304),Os=n(307),ks=n.n(Os),Cs=n(306),Ss=n.n(Cs),Ts=n(305),Ns=n.n(Ts);function Ds(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 25%;\n  align-items: center;\n  h3 {\n    opacity: .15;\n  }\n  .time-icon {\n    font-size: 42px;\n    opacity: .15;\n  }\n  .completed {\n    font-size: 32px;\n    margin-top: 64px;\n  }\n"]);return Ds=function(){return e},e}function _s(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n"]);return _s=function(){return e},e}function Is(){var e=Object(p.a)(["\n  svg {\n    font-size: 40px;\n    opacity: .15;\n    transition: .57s ease;\n    cursor: pointer;\n    :hover {\n      opacity: .9;\n    }\n  }\n"]);return Is=function(){return e},e}var As=function(){return r.a.createElement(ue.w,{variant:"h3",id:"timer",className:"completed"},"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e")},Fs=function(e){var t,n,a,i=e.hours,o=e.minutes,c=e.seconds,l=e.completed,s=e.api;return l?r.a.createElement(Ps,null,r.a.createElement(qs,null,r.a.createElement(As,null))):r.a.createElement(Ps,null,r.a.createElement(qs,null,r.a.createElement(Ns.a,{className:"time-icon"}),r.a.createElement(ue.w,{variant:"h3",id:"timer"},((t=i)<10&&(t="0"+t),(n=o)<10&&(n="0"+n),(a=c)<10&&(a="0"+a),"00"===t?"".concat(n,":").concat(a):"".concat(t,":").concat(n,":").concat(a)))),r.a.createElement(Ms,null,r.a.createElement(ue.v,{title:"\u0441\u0442\u0430\u0440\u0442",onClick:s.start},r.a.createElement(Ss.a,{style:s.isPaused()?{pointerEvents:"all"}:{pointerEvents:"none",opacity:1}})),r.a.createElement(ue.v,{title:"\u043f\u0430\u0443\u0437\u0430",onClick:s.pause},r.a.createElement(ks.a,{style:s.isPaused()?{pointerEvents:"none",opacity:1}:{pointerEvents:"all"}}))))},Ms=O.a.div(Is()),Ps=O.a.div(_s()),qs=O.a.div(Ds()),Ls=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store,n=e.pauseTest,i=e.resumeTest,o=e.finish,c=Object(a.useState)(t.tests[0]&&t.tests[0].hasOwnProperty("time")?Date.now()+60*Number(t.tests[0].time)*1e3:0),l=Object(x.a)(c,2),s=l[0];l[1];return r.a.createElement(js.a,{controlled:!1,autoStart:!0,date:s,renderer:Fs,onPause:n,onStart:i,onComplete:o})}),Hs=n(308),Rs=n.n(Hs),Ws=n(309),zs=n.n(Ws);function Bs(){var e=Object(p.a)(["\n  height: 100px;\n  width: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  img {\n    width: 100%;\n    height: 100%;\n  }\n  h1 {\n    font-size: 48px;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    color: white;\n    width: fit-content;\n    height: fit-content;\n    font-weight: 600;\n  }\n"]);return Bs=function(){return e},e}function Us(){var e=Object(p.a)(["\n  display: flex;\n  align-items: flex-start;\n  .question-header-text {\n    width: 525px;\n    padding-left: 25px;\n    margin-bottom: 20px;\n  }\n  .question-audio {\n    width: 100%;\n    :focus, :active {\n      outline: 0;\n    }\n  }\n"]);return Us=function(){return e},e}function Ys(){var e=Object(p.a)(["\n  button {\n    margin-right: 30px;\n    min-width: 125px;\n  }\n"]);return Ys=function(){return e},e}function Vs(){var e=Object(p.a)(["\n  width: 75%;\n  margin-top: 40px;\n  .checkboxes {\n    margin: 25px 0;\n  }\n"]);return Vs=function(){return e},e}function Gs(e){var t=e.allQuestionsId,n=e.paused,i=e.findTimer,o=e.answered,c=e.variants,l=e.setChecked,s=e.question,u=e.questionNumber,d=e.skipQuestion,p=e.nextQuestion,m=e.prevQuestion,h=Object(a.useState)([]),f=Object(x.a)(h,2),g=f[0],b=f[1],v=Object(a.useState)(!1),E=Object(x.a)(v,2),y=E[0],w=E[1];function j(){w(!0)}Object(a.useEffect)(function(){!function(){if(s.image){var e=[];Object.entries(s.image_file).map(function(t){return e.push({src:"http://akvatory.local/".concat(t[1].original.file)})}),b(e)}}()},[]);var O=c.length>0?c.find(function(e){return e.checked}):0;return r.a.createElement(Ks,{style:i()?{marginTop:"-93px"}:{marginTop:40}},r.a.createElement(Xs,null,r.a.createElement(Js,null,r.a.createElement(ue.w,{variant:"h1"},u+1),r.a.createElement("img",{src:Rs.a,alt:""})),r.a.createElement("div",{className:"question-header-text"},r.a.createElement(ue.w,{variant:"h6"},s.question),r.a.createElement(ue.w,{variant:"caption",style:{marginBottom:10}},s.category," - ",s.subcategory),s.audio?s.audio_file.map(function(e){return r.a.createElement("audio",{controls:!0,className:"question-audio",key:e.id},r.a.createElement("source",{src:"http://akvatory.local/".concat(e.file)}))}):null,s.image?Object.entries(s.image_file).map(function(e,t){return r.a.createElement("img",{onClick:j,key:e[0],style:{maxWidth:"100%",maxHeight:300,marginTop:10,cursor:"pointer"},src:"http://akvatory.local/".concat(e[1].original.file),alt:""})}):null)),r.a.createElement(ue.j,{className:"checkboxes",style:n?{pointerEvents:"none"}:{pointerEvents:"all"}},c.map(function(e){return r.a.createElement(ue.i,{key:e.id,control:r.a.createElement(ue.b,{checked:e.checked,onClick:function(){return l(e.id)}}),label:e.item})})),n?null:r.a.createElement(Qs,null,r.a.createElement(ue.a,{onClick:p,disabled:!O,variant:"contained",color:"primary"},"\u0414\u0430\u043b\u0435\u0435"),r.a.createElement(ue.a,{onClick:m,disabled:function(e){if(!e)return!0;var t=!1;return o.includes(e-1)&&(t=!0),t}(u),variant:"outlined",color:"primary"},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(ue.a,{onClick:d,disabled:t.length-1===o.length,variant:"contained",color:"secondary"},"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c")),s.image?r.a.createElement(zs.a,{images:Object(ws.a)(g),isOpen:y,onClose:function(){w(!1)},width:1920,showImageCount:!1}):null)}var Ks=O.a.div(Vs()),Qs=O.a.div(Ys()),Xs=O.a.div(Us()),Js=O.a.div(Bs());function Zs(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  > span {\n    width: 45px;\n    height: 30px;\n    margin: 10px 0 0;\n    > span {\n      width: 30px;\n      height: 30px;\n      transform: unset;\n      left: 0;\n      margin: auto;\n    }\n  }\n  .default-badge span {\n    background: #F9A825;\n  }\n"]);return Zs=function(){return e},e}function $s(e){var t=e.questions,n=e.answered,a=e.skipped;function i(e,t){var r=n.includes(e),i=a.includes(e);return"class"!==t||r||i?"class"===t?"":"color"===t&&r?"primary":"secondary":"default-badge"}return r.a.createElement(eu,null,t.map(function(e,t){return r.a.createElement(Hr.a,{key:t,badgeContent:t+1,color:i(t,"color"),className:i(t,"class")},"")}))}var eu=O.a.div(Zs());function tu(){var e=Object(p.a)(["\n  margin: 35px 0;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  flex-wrap: wrap;\n  > div > span {\n    width: 45px;\n    height: 30px;\n    margin: 10px 0 0;\n    > span {\n      width: 30px;\n      height: 30px;\n      transform: unset;\n      left: 0;\n      margin: auto;\n    }\n  }\n  > div {\n    align-items: center;\n    display: flex;\n    .caption {\n      width: unset;\n      height: unset;\n      margin-top: 10px;\n      margin-left: 10px;\n    }\n  }\n  .default-badge span {\n    background: #F9A825;\n  }\n"]);return tu=function(){return e},e}function nu(){return r.a.createElement(au,null,r.a.createElement("div",null,r.a.createElement(Hr.a,{children:!0,color:"primary",className:"default-badge"},""),r.a.createElement(zn.a,{variant:"caption",className:"caption"},"\u0412\u043e\u043f\u0440\u043e\u0441 \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430")),r.a.createElement("div",null,r.a.createElement(Hr.a,{children:!0,color:"primary"},""),r.a.createElement(zn.a,{variant:"caption",className:"caption"},"\u0412\u044b \u043e\u0442\u0432\u0435\u0442\u0438\u043b\u0438 \u043d\u0430 \u044d\u0442\u043e\u0442 \u0432\u043e\u043f\u0440\u043e\u0441")),r.a.createElement("div",null,r.a.createElement(Hr.a,{color:"secondary"},""),r.a.createElement(zn.a,{variant:"caption",className:"caption"},"\u0412\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u0432\u043e\u043f\u0440\u043e\u0441")))}var au=O.a.div(tu());function ru(e){var t=new FormData;t.append("test_id",e.test_id),t.append("variants",e.variants),t.append("estimated_time",e.estimated_time),t.append("question_id",e.question_id),se.a.ajax({url:"".concat(de,"/api/result/update.php"),data:t,processData:!1,contentType:!1,type:"POST"})}function iu(e){var t=new FormData;t.append("id",e.id),t.append("estimated_time",e.estimated_time),t.append("created_at",(new Date).getTime()),se.a.ajax({url:"".concat(de,"/api/test/finish.php"),data:t,processData:!1,contentType:!1,type:"POST"})}function ou(e){return cu.apply(this,arguments)}function cu(){return(cu=Object(oe.a)(ie.a.mark(function e(t){var n,a,r;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=new FormData,t)n.append(a,t[a]);return e.next=4,se.a.ajax({url:"".concat(de,"/api/calendar/addEvent.php"),data:n,processData:!1,contentType:!1,type:"POST",success:function(){var e=Object(oe.a)(ie.a.mark(function e(t){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()});case 4:return e.next=6,r;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function lu(){var e=Object(p.a)(["\n  width: 100%;\n  hr {\n    border: none;\n    height: 3px;\n    background: #fafafa;\n  }\n"]);return lu=function(){return e},e}var su=O.a.div(lu()),uu=Object(jn.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){var t=e.classes,n=e.object;function a(e){return n.question_data.answers.includes(e)?"primary":"secondary"}return r.a.createElement("div",{className:t.root},r.a.createElement(cl.a,null,r.a.createElement(sl.a,{expandIcon:r.a.createElement(W.a,null),className:"align-center",style:{background:"#fafafa"}},r.a.createElement(zn.a,{variant:"h6"},n.result>=1?n.result+" \u0431\u0430\u043b\u043b":n.result+" \u0431\u0430\u043b\u043b\u043e\u0432",r.a.createElement(zn.a,{className:t.heading},"\u0412\u043e\u043f\u0440\u043e\u0441: ",n.question_data.question))),r.a.createElement(dl.a,null,r.a.createElement(su,null,r.a.createElement(zn.a,{variant:"subtitle2",gutterBottom:!0},"\u0432\u044b \u043e\u0442\u0432\u0435\u0442\u0438\u043b\u0438:"),n.answered.map(function(e){return r.a.createElement(zn.a,{color:a(e)},e)}),r.a.createElement("hr",null),r.a.createElement(zn.a,{variant:"subtitle2",gutterBottom:!0},n.question_data.answers.length>0?"\u043e\u0442\u0432\u0435\u0442\u044b:":"\u043e\u0442\u0432\u0435\u0442:"),n.question_data.answers.map(function(e){return r.a.createElement(zn.a,null,e)})))))});var du=Object(jn.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){var t=e.classes,n=e.object;return r.a.createElement("div",{className:t.root},r.a.createElement(cl.a,{disabled:!0},r.a.createElement(sl.a,{className:"align-center",style:{background:"#fafafa"}},r.a.createElement(zn.a,{variant:"h6"},"0 \u0431\u0430\u043b\u043b\u043e\u0432",r.a.createElement(zn.a,{className:t.heading},"\u0412\u043e\u043f\u0440\u043e\u0441: ",n)))))});function pu(){var e=Object(p.a)(["\n  margin-top: 40px;\n  a {\n    margin-right: 10px;\n  }\n"]);return pu=function(){return e},e}function mu(){var e=Object(p.a)(["\n  height: 100%;\n  width: 100%;\n"]);return mu=function(){return e},e}function hu(){var e,t=Object(a.useState)([]),n=Object(x.a)(t,2),i=n[0],o=n[1],c=Object(a.useState)(!0),l=Object(x.a)(c,2),s=l[0],u=l[1];return Object(a.useEffect)(function(){var e=window.location.pathname.replace("/test/","");fetch("".concat(de,"/api/result/getResults.php?test_id=").concat(e)).then(function(e){return e.json()}).then(function(e){e.data.not_answered=JSON.parse(e.data.not_answered),e.data.object=JSON.parse(e.data.object),e.data.object.forEach(function(e){e.question_data=JSON.parse(e.question_data),e.question_data.variants=e.question_data.variants.split("\n"),e.question_data.answers=e.question_data.answers.split("\n")}),o(e.data)}).then(function(){return u(!1)}).catch(function(e){return console.log(e)})},[]),r.a.createElement(fu,null,s?r.a.createElement(_,{minHeight:"300px",color:"primary"}):r.a.createElement(a.Fragment,null,r.a.createElement(ue.w,{variant:"h1",style:{marginBottom:20},color:(e=i.result,parseFloat(e.replace(",",".")).toFixed(2)>=.5?"primary":"secondary")},function(e){return 100*parseFloat(e.replace(",",".")).toFixed(2)+"%"}(i.result)),r.a.createElement(ue.w,{variant:"h6"},i.user_name),r.a.createElement(ue.w,{variant:"caption"},"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f: ",i.date),i.estimated_time?r.a.createElement(ue.w,{variant:"caption"},"\u041e\u0441\u0442\u0430\u0432\u0448\u0435\u0435\u0441\u044f \u0432\u0440\u0435\u043c\u044f: ",i.estimated_time):null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),i.object.map(function(e){return r.a.createElement(uu,{object:e})}),i.not_answered.map(function(e){return r.a.createElement(du,{object:e})}),r.a.createElement(gu,null,r.a.createElement(ue.a,{variant:"contained",component:"a",href:"/",color:"primary"},"\u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"),r.a.createElement(ue.a,{variant:"outlined",component:"a",href:"/learnings",color:"primary"},"\u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"))))}var fu=O.a.div(mu()),gu=O.a.div(pu());function bu(){var e=Object(p.a)(["\n  margin-top: 30px;\n  button {\n    margin: 0 10px;\n  }\n"]);return bu=function(){return e},e}function vu(){var e=Object(p.a)(["\n  height: fit-content;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 30px;\n"]);return vu=function(){return e},e}function Eu(){var e=Object(a.useState)(!1),t=Object(x.a)(e,2),n=t[0],i=t[1];return r.a.createElement(yu,null,n?r.a.createElement(hu,null):r.a.createElement(a.Fragment,null,r.a.createElement(ue.w,{variant:"h5",style:{marginBottom:10}},"\u0422\u0435\u0441\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d."),r.a.createElement(ue.w,{variant:"body2"},"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435."),r.a.createElement(xu,null,r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:function(){return i(!0)}},"\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),r.a.createElement(ue.a,{variant:"outlined",color:"primary",component:"a",href:"/"},"\u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))))}var yu=O.a.div(vu()),xu=O.a.div(bu());function wu(){var e=Object(p.a)(["\n  display: flex;\n\n  hr {\n    background: #f5f5f5;\n    border: none;\n    height: 2px;\n    margin-bottom: 30px;\n  }\n"]);return wu=function(){return e},e}function ju(){var e=Object(p.a)(["\n  width: 1000px;\n  margin-top: -50px;\n  min-height: 75vh;\n  padding: 30px 35px;\n"]);return ju=function(){return e},e}var Ou=O.a.div(ju()),ku=O.a.div(wu()),Cu=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store,n=e.object,i=Object(a.useState)(0),o=Object(x.a)(i,2),c=(o[0],o[1]),l=Object(a.useState)([]),s=Object(x.a)(l,2),u=s[0],d=s[1],p=Object(a.useState)(0),m=Object(x.a)(p,2),h=m[0],f=m[1],g=Object(a.useState)([]),b=Object(x.a)(g,2),v=b[0],E=b[1],y=Object(a.useState)([]),w=Object(x.a)(y,2),j=w[0],O=w[1],k=Object(a.useState)(!0),C=Object(x.a)(k,2),S=C[0],T=C[1],N=Object(a.useState)([]),D=Object(x.a)(N,2),I=D[0],A=D[1],F=Object(a.useState)([]),M=Object(x.a)(F,2),P=M[0],q=M[1],L=Object(a.useState)(!1),H=Object(x.a)(L,2),R=H[0],W=H[1],z=Object(a.useState)([]),B=Object(x.a)(z,2),U=B[0],Y=B[1],V=Object(a.useState)(!1),G=Object(x.a)(V,2),K=G[0],Q=G[1];function X(e){var t=e[0].variants.split("\n"),n=[];t.forEach(function(e,t){n.push({id:t,item:e,checked:!1})}),d(n)}function J(){if(v.length!==P.length){var e=h;if(P.includes(e)&&(e=Math.max.apply(Math,Object(ws.a)(P))),e+1===v.length){for(var t=0;t<v.length;t++)if(!P.includes(t)){e=t;break}f(e)}else f(e+1)}else Z()}function Z(){return $.apply(this,arguments)}function $(){return($=Object(oe.a)(ie.a.mark(function e(){var n,a;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tests[0];case 2:return n=e.sent,a={id:n.id,estimated_time:document.getElementById("timer")?document.getElementById("timer").innerHTML:0},e.next=6,iu(a);case 6:return e.next=8,W(!0);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ee(){return(ee=Object(oe.a)(ie.a.mark(function e(){var n,a,r;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tests[0];case 2:n=e.sent,a=u.filter(function(e){return e.checked}),r=[],a.forEach(function(e){r.push(e.item)}),ru({question_id:v[h],test_id:n.id,variants:r,estimated_time:document.getElementById("timer")?document.getElementById("timer").innerHTML:0});case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function te(){return!Array.isArray(U)&&!U.estimated_time.includes("false")}return Object(a.useEffect)(function(){var e=t.tests[0].questions.split(",");function n(){return(n=Object(oe.a)(ie.a.mark(function t(){var n;return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ic(e[h]);case 2:return n=t.sent,t.next=5,O(n);case 5:return t.next=7,X(n);case 7:if(!S){t.next=10;break}return t.next=10,T(!1);case 10:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}Y(t.tests[0]),E(e),function(){n.apply(this,arguments)}()},[h]),Object(a.useEffect)(function(){var e=t.tests[0].questions.split(",");n&&n.length>1&&function(e,t){for(var n=e[1].answered,a=[],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)n[r]!==t[i]||a.push(i);q(a);for(var o=0,c=0;c<a.length;c++)o=t.includes(c)?c+1:c;f(o)}(n,e)},[]),r.a.createElement(Ou,null,!R&&te()?r.a.createElement(Ls,{style:"".concat(S?{opacity:0}:{opacity:1}),pauseTest:function(){Q(!0)},resumeTest:function(){Q(!1)},finish:Z}):null,S?r.a.createElement(_,{minHeight:"45vh"}):R?r.a.createElement(Eu,null):r.a.createElement(ku,null,r.a.createElement(Gs,{question:j[0],questionNumber:h,nextQuestion:function(){var e=P;P.includes(h)||(e.push(h),q(e)),function(){ee.apply(this,arguments)}(),J()},prevQuestion:function(){f(h-1)},skipQuestion:function(){var e=I;I.includes(h)||(e.push(h),A(e)),J()},setChecked:function(e){var t=u;j[0].answers||t.forEach(function(e){e.checked=!1}),t[e].checked=!t[e].checked,d(t),c(Math.random())},variants:u,answered:P,allQuestionsId:v,findTimer:te,paused:K}),r.a.createElement("div",{style:{width:"25%"}},r.a.createElement(nu,null),r.a.createElement("hr",null),r.a.createElement($s,{skipped:I,answered:P,questions:v}))))});function Su(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  button, a {\n    min-width: 150px;\n  }\n"]);return Su=function(){return e},e}function Tu(){var e=Object(p.a)(["\n  padding: 60px 40px;\n  min-height: 30vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return Tu=function(){return e},e}function Nu(e){var t=e.start;return r.a.createElement(Du,null,r.a.createElement(ue.w,{variant:"h5"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435."),r.a.createElement("div",null,r.a.createElement(ue.w,{variant:"body2"},'\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c - \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0435\u0441\u0442".'),r.a.createElement(ue.w,{variant:"body2"},"\u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e, \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0447\u043d\u0451\u0442\u0441\u044f - \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0441\u044f \u0442\u0430\u0439\u043c\u0435\u0440.")),r.a.createElement(_u,null,r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:t},"\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0435\u0441\u0442"),r.a.createElement(ue.a,{color:"primary",component:"a",href:"/learnings"},"\u043d\u0430\u0437\u0430\u0434")))}var Du=O.a.div(Tu()),_u=O.a.div(Su());function Iu(){var e=Object(p.a)(["\n  margin-top: 30px;\n  button {\n    margin: 0 10px;\n  }\n"]);return Iu=function(){return e},e}function Au(){var e=Object(p.a)(["\n  height: fit-content;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 30px;\n"]);return Au=function(){return e},e}function Fu(){var e=Object(a.useState)([]),t=Object(x.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),c=Object(x.a)(o,2),l=c[0],s=c[1];return Object(a.useEffect)(function(){var e=window.location.pathname.replace("/test/","");fetch("".concat(de,"/api/result/getResults.php?test_id=").concat(e)).then(function(e){return e.json()}).then(function(e){var t=[];t.push(e.data.estimated_time),t.push({answered:[]}),e.data.object=JSON.parse(e.data.object),e.data.object.forEach(function(e){e.question_data=JSON.parse(e.question_data),t[1].answered.push(e.question_data.id)}),i(t)}).catch(function(e){return console.log(e)})},[]),r.a.createElement(Mu,null,l?r.a.createElement(Cu,{object:n}):r.a.createElement(a.Fragment,null,r.a.createElement(ue.w,{variant:"h4",style:{marginBottom:10}},"\u0422\u0435\u0441\u0442 \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u043b."),r.a.createElement(ue.w,{variant:"body1"},"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043d\u0430\u0436\u0430\u0432 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435."),r.a.createElement(Pu,null,r.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:function(){return s(!0)}},"\u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"),r.a.createElement(ue.a,{variant:"outlined",color:"primary",component:"a",href:"/"},"\u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))))}var Mu=O.a.div(Au()),Pu=O.a.div(Iu());function qu(){var e=Object(p.a)([""]);return qu=function(){return e},e}"/settings"!==window.location.pathname&&(document.body.style.height="unset");var Lu={container:{margin:"200px auto 0",width:"fit-content",minWidth:600}},Hu=O.a.div(qu()),Ru=Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store,n=Object(a.useState)(!1),i=Object(x.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(!1),s=Object(x.a)(l,2),u=s[0],d=s[1],p=Object(a.useState)(!1),m=Object(x.a)(p,2),h=m[0],f=m[1],g=Object(a.useState)(!0),b=Object(x.a)(g,2),v=b[0],E=b[1];return Object(a.useEffect)(function(){var e=window.location.pathname.replace("/test/","");fetch("".concat(de,"/api/test/getStatus.php?id=").concat(e)).then(function(e){return e.json()}).then(function(e){switch(e){case"1":d(!0);break;case"0.5":f(!0);break;default:return}}).then(function(){return E(!1)}).catch(function(e){return console.log(e)})},[]),r.a.createElement(a.Fragment,null,r.a.createElement(y,null),r.a.createElement(Hu,{className:"container"},r.a.createElement(Ot.a,{style:Lu.container},v?r.a.createElement(_,{minHeight:250,color:"primary"}):o?r.a.createElement(Cu,null):u||h?u?r.a.createElement(Eu,null):r.a.createElement(Fu,null):r.a.createElement(Nu,{start:function(){var e=t.tests[0],n=window.location.pathname.replace("/test/",""),a={test_id:e.id,user_id:e.user_id,user_name:e.user_name,date:Ct()().format("L"),estimated_time:e.estimated_time};c(!0),function(e){var t=new FormData;t.append("id",e),se.a.ajax({url:"".concat(de,"/api/test/start.php"),data:t,processData:!1,contentType:!1,type:"POST"})}(n),function(e){var t=new FormData;t.append("test_id",e.test_id),t.append("user_id",e.user_id),t.append("user_name",e.user_name),t.append("date",e.date),t.append("estimated_time",e.estimated_time),se.a.ajax({url:"".concat(de,"/api/result/init.php"),data:t,processData:!1,contentType:!1,type:"POST"})}(a)}}))),r.a.createElement(os,{cssClass:"testing-bubbles"}))});var Wu=Object(I.b)(function(e){return{store:e}},function(e){return{fetchTest:function(t){e({type:"FETCH_TEST",payload:t})}}})(function(e){var t=e.fetchTest,n=Object(a.useState)(!1),i=Object(x.a)(n,2),o=i[0],c=i[1];return Object(a.useEffect)(function(){var e=window.location.pathname.replace("/test/","");function n(){return(n=Object(oe.a)(ie.a.mark(function n(){var a;return ie.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Dc(e);case 2:return a=n.sent,n.next=5,a;case 5:if(!n.sent){n.next=9;break}t(a),n.next=10;break;case 9:window.location.href="/404";case 10:return n.next=12,c(!1);case 12:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},[]),r.a.createElement(a.Fragment,null,o?r.a.createElement(_,{minHeight:"100vh",color:"secondary"}):r.a.createElement(Ru,null))}),zu=n(59),Bu=n(54),Uu=n(313),Yu=n.n(Uu),Vu=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.helperText,n=e.date,a=e.setDate,i=e.error,o=e.callback;return r.a.createElement(Wt.b,{ampm:!1,showTabs:!1,autoSubmit:!1,allowKeyboardControl:!0,minDate:new Date,value:n,onChange:function(e){a(e),o()},label:t,variant:"outlined",margin:"dense",cancelLabel:"\u043e\u0442\u043c\u0435\u043d\u0430",required:!0,minutesStep:10,error:i,InputProps:{endAdornment:r.a.createElement(ue.m,{position:"end"},r.a.createElement(ue.l,null,r.a.createElement(Yu.a,null)))}})}}]),t}(a.PureComponent);function Gu(){var e=Object(p.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return Gu=function(){return e},e}function Ku(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return Ku=function(){return e},e}function Qu(){var e=Object(p.a)(["\n  position: fixed !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0,0,0,0.54);\n  width: 100vw;\n  height: 100vh !important;\n  z-index: 5;\n"]);return Qu=function(){return e},e}function Xu(){var e=Object(p.a)(["\n  position: fixed;\n  height: fit-content;\n  width: 480px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  & > div {\n    position: relative;\n    display: flex;\n    padding: 45px 45px 30px;\n    flex-direction: column;\n    justify-content: center;\n    z-index: 10;\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n  }\n"]);return Xu=function(){return e},e}for(var Ju=[],Zu=[],$u=1;$u<=5;$u++)Ju.push({value:$u,label:"".concat($u," ").concat(td($u))});Ju.push({value:1/0,label:"\u043d\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e"});for(var ed=30;ed<=120;ed+=10)Zu.push({value:ed,label:"".concat(ed," \u043c\u0438\u043d\u0443\u0442")});function td(e){return e=Math.abs(e),(e%=100)>=5&&e<=20?"\u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432":1===(e%=10)?"\u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a":e>=2&&e<=4?"\u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430":"\u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"}var nd=O.a.div(Xu()),ad=O.a.section(Qu()),rd=O.a.div(Ku()),id=O.a.div(Gu()),od=Object(I.b)(function(e){return{store:e}},function(e){return{onAddEvent:function(t){e({type:"ADD_EVENT",payload:t})}}})(Object(z.withSnackbar)(function(e){var t=e.isOpen,n=e.handleClose,i=e.enqueueSnackbar,o=e.user,c=e.onAddEvent,l=Object(a.useState)(""),s=Object(x.a)(l,2),u=s[0],d=s[1],p=Object(a.useState)(null),m=Object(x.a)(p,2),h=m[0],f=m[1],g=Object(a.useState)(null),b=Object(x.a)(g,2),v=b[0],E=b[1],y=Object(a.useState)(null),w=Object(x.a)(y,2),j=w[0],O=w[1],k=Object(a.useState)(null),C=Object(x.a)(k,2),S=C[0],T=C[1],N=Object(a.useState)(!1),D=Object(x.a)(N,2),_=D[0],I=D[1],A=Object(a.useState)(Ju[0].value),F=Object(x.a)(A,2),M=F[0],P=F[1],q=Object(a.useState)(!1),L=Object(x.a)(q,2),H=L[0],R=L[1],W=Object(a.useState)(Zu[2].value),z=Object(x.a)(W,2),B=z[0],U=z[1],Y=Object(a.useState)(!1),V=Object(x.a)(Y,2),G=V[0],K=V[1],Q=Object(a.useState)(!1),X=Object(x.a)(Q,2),J=X[0],Z=X[1],$=Object(a.useState)(!1),ee=Object(x.a)($,2),te=ee[0],ne=ee[1];function ae(){return(ae=Object(oe.a)(ie.a.mark(function e(){var t,a;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u&&j&&S)){e.next=12;break}return(t={creator:o.id,title:u,created_at:(new Date).getTime()}).max=_?M:"0",H&&(t.interval=B),Ct()(h).diff(Ct()(v))>0?(t.startDate=S,t.endDate=j):(t.endDate=S,t.startDate=j),e.next=7,ou(t);case 7:(a=e.sent)?(t.name=o.name,t.surname=o.surname,H||(t.id=a.id),c(t),i("\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e",{variant:"success"}),H&&window.location.reload()):i("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430",{variant:"error"}),n(),e.next=16;break;case 12:u||K(!0),j||Z(!0),S||ne(!0),i("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f",{variant:"error"});case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}return r.a.createElement(Ut,{open:t,onClose:n,component:r.a.createElement(nd,null,r.a.createElement(ue.r,null,r.a.createElement(id,{onClick:n},r.a.createElement(fe.a,null)),r.a.createElement(ue.u,{required:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",margin:"dense",variant:"outlined",value:u,error:G,onClick:function(){return K(!1)},onChange:function(e){return d(e.target.value)}}),r.a.createElement(Vu,{helperText:"\u041d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",date:h,setDate:function(e){var t=Ct()(e._d).format("YYYY-MM-DD HH:mm");Number(t.slice(-5,-3))>7&&Number(t.slice(-5,-3))<18||18===Number(t.slice(-5,-3))&&0===Number(t.slice(-2))?(f(e._d),O(t)):(setTimeout(function(){return Z(!0)},500),i("\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0441 08:00 - 18:00",{variant:"warning"}))},error:J,callback:function(){return Z(!1)}}),r.a.createElement(Vu,{helperText:"\u041d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",date:v,setDate:function(e){var t=Ct()(e._d).format("YYYY-MM-DD HH:mm");Number(t.slice(-5,-3))>7&&Number(t.slice(-5,-3))<18||18===Number(t.slice(-5,-3))&&0===Number(t.slice(-2))?(E(e._d),T(t)):(setTimeout(function(){return ne(!0)},500),i("\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0441 08:00 - 18:00",{variant:"warning"}))},error:te,callback:function(){return ne(!1)}}),r.a.createElement(ue.i,{control:r.a.createElement(ue.b,{checked:_,onChange:function(){return I(!_)},color:"primary"}),label:"\u041d\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"}),_?r.a.createElement(ue.u,{select:!0,variant:"outlined",margin:"dense",label:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432",value:M,onChange:function(e){return P(e.target.value)}},Ju.map(function(e){return r.a.createElement(ue.o,{key:e.value,value:e.value},e.label)})):null,function(){if(S&&j){var e=parseInt(S.slice(0,4)),t=parseInt(S.slice(5,7)),n=parseInt(S.slice(8,10)),a=parseInt(j.slice(0,4)),r=parseInt(j.slice(5,7)),i=parseInt(j.slice(8,10));return e===a&&t===r&&n===i}return!1}()?r.a.createElement(ue.i,{control:r.a.createElement(ue.b,{checked:H,onChange:function(){return R(!H)},color:"primary"}),label:"\u0420\u0430\u0437\u0431\u0438\u0442\u044c \u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u044b"}):null,H?r.a.createElement(ue.u,{select:!0,variant:"outlined",margin:"dense",label:"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b",value:B,onChange:function(e){return U(e.target.value)}},Zu.map(function(e){return r.a.createElement(ue.o,{key:e.value,value:e.value},e.label)})):null,r.a.createElement(rd,null,r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:function(){return ae.apply(this,arguments)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),r.a.createElement(ue.a,{variant:"text",color:"default",onClick:n},"\u041e\u0442\u043c\u0435\u043d\u0430"))),r.a.createElement(ad,null))})}));function cd(){var e=Object(p.a)(["\n  svg {\n    cursor: pointer;\n    color: rgba(0,0,0,.54);\n    position: absolute;\n    right: 16px;\n    top: 16px;\n  }\n"]);return cd=function(){return e},e}function ld(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 30px;\n  button {\n    margin-right: 25px;\n  }\n"]);return ld=function(){return e},e}function sd(){var e=Object(p.a)(["\n  position: fixed !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0,0,0,0.54);\n  width: 100vw;\n  height: 100vh !important;\n  z-index: 5;\n"]);return sd=function(){return e},e}function ud(){var e=Object(p.a)(["\n  position: fixed;\n  height: fit-content;\n  width: 350px;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  outline: none;\n  & > div {\n    position: relative;\n    display: flex;\n    padding: 45px 25px 30px;\n    flex-direction: column;\n    justify-content: center;\n    z-index: 10;\n  }\n  @media all and (max-width: 600px) {\n    width: 100%;\n  }\n"]);return ud=function(){return e},e}function dd(e){var t=e.deleteAppointment,n=e.isOpened,a=e.handleClose;return r.a.createElement(Ut,{open:n,onClose:a,component:r.a.createElement(pd,null,r.a.createElement(ue.r,null,r.a.createElement(fd,{onClick:a},r.a.createElement(fe.a,null)),r.a.createElement(ue.w,{variant:"body1"},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435?"),r.a.createElement(ue.w,{variant:"caption"},"\u0412\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044e \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e."),r.a.createElement(hd,null,r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:t},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(ue.a,{variant:"text",color:"default",onClick:a},"\u041e\u0442\u043c\u0435\u043d\u0430"))),r.a.createElement(md,null))})}var pd=O.a.div(ud()),md=O.a.section(sd()),hd=O.a.div(ld()),fd=O.a.div(cd());function gd(){var e=Object(p.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: fit-content;\n  margin-top: 15px;\n  z-index: 50;\n"]);return gd=function(){return e},e}var bd=function(e){return{todayCell:{backgroundColor:Object(Qn.fade)(e.palette.primary.main,.1),color:"black","&:hover":{backgroundColor:Object(Qn.fade)(e.palette.primary.main,.14)},"&:focus":{backgroundColor:Object(Qn.fade)(e.palette.primary.main,.16)}},weekendCell:{backgroundColor:Object(Qn.fade)(e.palette.action.disabledBackground,.04),"&:hover":{backgroundColor:Object(Qn.fade)(e.palette.action.disabledBackground,.04)},"&:focus":{backgroundColor:Object(Qn.fade)(e.palette.action.disabledBackground,.04)}},today:{backgroundColor:Object(Qn.fade)(e.palette.primary.main,.16)},weekend:{backgroundColor:Object(Qn.fade)(e.palette.action.disabledBackground,.06)}}},vd=function(e){var t=e.children,n=e.style,a=Object(Bn.a)(e,["children","style"]),i=a.data.signed?a.data.signed.split(","):[],o=a.data.max-i.length;return r.a.createElement(Bu.c.Appointment,Object.assign({},a,{style:Object(Ft.a)({},n,{backgroundColor:o?"#1976d2":"#3949AB",borderRadius:"8px"}),onDoubleClick:null}),t)},Ed=Object(I.b)(function(e){return{store:e}},function(e){return{onSignup:function(t){return e({type:"SIGN_UP",payload:t})},onUnSignup:function(t){return e({type:"UNSIGN_UP",payload:t})}}})(Object(z.withSnackbar)(function(e){var t=e.enqueueSnackbar,n=e.onSignup,i=e.onUnSignup,o=e.store,c=e.children,l=Object(Bn.a)(e,["enqueueSnackbar","onSignup","onUnSignup","store","children"]),s=l.appointmentData.signed?l.appointmentData.signed.split(","):[],u="".concat(l.appointmentData.name," ").concat(l.appointmentData.surname),d=l.appointmentData.max-s.length;function p(){var e={id:l.appointmentData.id,name:o.user.name,surname:o.user.surname};!function(e){var t=new FormData;t.append("id",e.id),t.append("username","".concat(e.name," ").concat(e.surname)),se.a.ajax({url:"".concat(de,"/api/calendar/unSignUp.php"),data:t,processData:!1,contentType:!1,type:"POST"})}(e),i(e),t("\u0412\u044b \u043e\u0442\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043e\u0442 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",{variant:"info"}),document.getElementById("openedEvent").parentNode.querySelector("div button:last-child").click()}function m(){return!!l.appointmentData.hasOwnProperty("signed")&&l.appointmentData.signed.includes("".concat(o.user.name," ").concat(o.user.surname))}return r.a.createElement("div",{style:{overflow:"hidden",paddingBottom:10},id:"openedEvent"},r.a.createElement("div",{style:{padding:"5px 15px"}},r.a.createElement(ue.w,{variant:"subtitle2"},"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c: ",u),"0"===l.appointmentData.max?null:r.a.createElement(a.Fragment,null,0===s.length?r.a.createElement(ue.w,{variant:"body2",style:{padding:"5px 0"}},"\u041f\u043e\u043a\u0430 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u043b\u0441\u044f"):r.a.createElement(ue.w,{variant:"body2",style:{padding:"5px 0"}},"\u0417\u0430\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c: "),s.map(function(e){return r.a.createElement(ue.w,{variant:"body2",key:e},"\u2014 ",e)}),r.a.createElement(ue.w,{variant:"caption",style:{marginTop:5}},function(e){return 1===e?"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043e\u0434\u043d\u043e \u043c\u0435\u0441\u0442\u043e.":e>1?"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442: ".concat(e,"."):"\u0412\u0441\u0435 \u043c\u0435\u0441\u0442\u0430 \u0437\u0430\u043d\u044f\u0442\u044b."}(d)))),c,d?r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"15px 15px 5px"}},r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:m()?p:function(){var e={id:l.appointmentData.id,name:o.user.name,surname:o.user.surname};!function(e){var t=new FormData;t.append("id",e.id),t.append("username","".concat(e.name," ").concat(e.surname)),se.a.ajax({url:"".concat(de,"/api/calendar/signUp.php"),data:t,processData:!1,contentType:!1,type:"POST"})}(e),n(e),t("\u0412\u044b \u0437\u0430\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435",{variant:"success"}),document.getElementById("openedEvent").parentNode.querySelector("div button:last-child").click()}},m()?"\u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f":"\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"," ")):null,!d&&m()?r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"15px 15px 5px"}},r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:p},"\u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"," ")):null)})),yd=Object(I.b)(function(e){return{store:e}},function(e){return{onDeleteEvent:function(t){return e({type:"DELETE_EVENT",payload:t})}}})(Object(z.withSnackbar)(function(e){var t=e.enqueueSnackbar,n=e.onDeleteEvent,i=(e.style,e.store),o=e.children,c=Object(Bn.a)(e,["enqueueSnackbar","onDeleteEvent","style","store","children"]),l=Object(a.useState)(!1),s=Object(x.a)(l,2),u=s[0],d=s[1],p=!1;c.appointmentMeta&&c.appointmentMeta.data.creator===i.user.id&&(p=!0);return r.a.createElement(a.Fragment,null,r.a.createElement(Bu.b.Layout,Object.assign({},c,{contentComponent:Ed,showDeleteButton:p,onDeleteButtonClick:function(){d(!0)}}),o),u?r.a.createElement(dd,{isOpened:u,handleClose:function(){d(!1)},deleteAppointment:function(){!function(e){var t=new FormData;t.append("id",e),se.a.ajax({url:"".concat(de,"/api/calendar/deleteEvent.php"),data:t,processData:!1,contentType:!1,type:"POST"})}(c.appointmentMeta.data.id),n(c.appointmentMeta.data.id),c.onHide(),d(!1),t("\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e",{variant:"success"})}}):null)})),xd=Object(jn.withStyles)(bd,{name:"TimeTableCell"})(function(e){var t=e.classes,n=Object(Bn.a)(e,["classes"]),a=n.startDate,i=new Date(a);return i.getDate()===(new Date).getDate()?r.a.createElement(Bu.j.TimeTableCell,Object.assign({},n,{className:t.todayCell})):0===i.getDay()||6===i.getDay()?r.a.createElement(Bu.j.TimeTableCell,Object.assign({},n,{className:t.weekendCell})):r.a.createElement(Bu.j.TimeTableCell,n)}),wd=Object(jn.withStyles)(bd,{name:"DayScaleCell"})(function(e){var t=e.classes,n=Object(Bn.a)(e,["classes"]),a=n.startDate;return n.today?r.a.createElement(Bu.j.DayScaleCell,Object.assign({},n,{className:t.today})):0===a.getDay()||6===a.getDay()?r.a.createElement(Bu.j.DayScaleCell,Object.assign({},n,{className:t.weekend})):r.a.createElement(Bu.j.DayScaleCell,n)});var jd=O.a.div(gd()),Od=Object(I.b)(function(e){return{store:e}},function(e){return{onFetchEvents:function(t){e({type:"FETCH_EVENTS",payload:t})},onDeleteEvent:function(t){e({type:"DELETE_EVENT",payload:t})},onReadEvents:function(){return e({type:"READ_EVENTS"})}}})(function(e){var t=e.onReadEvents,n=e.onFetchEvents,i=e.store,o=i.user,c=i.events,l=i.unreaded,s=Object(a.useState)(!1),u=Object(x.a)(s,2),d=u[0],p=u[1];return Object(a.useEffect)(function(){fetch("".concat(de,"/api/calendar/read.php")).then(function(e){return e.json()}).then(function(e){return n(e)})},[]),Object(a.useEffect)(function(){var e=null;return l.events>0&&(e=setTimeout(function(){document.querySelector(".eventsBadge span").style.display="none",t()},2e3)),function(){return window.clearTimeout(e)}}),r.a.createElement(a.Fragment,null,r.a.createElement(ue.r,null,"1"===o.admin?r.a.createElement(jd,null,r.a.createElement(ue.a,{variant:"contained",color:"secondary",onClick:function(){return p(!0)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435")):null,r.a.createElement(Bu.g,{style:{height:"100%"},data:c},r.a.createElement(zu.j,{defaultCurrentViewName:"\u0414\u0435\u043d\u044c"}),r.a.createElement(Bu.e,{name:"\u0414\u0435\u043d\u044c",startDayHour:8,endDayHour:19}),r.a.createElement(Bu.j,{name:"\u041d\u0435\u0434\u0435\u043b\u044f",startDayHour:8,endDayHour:19,firstDayOfWeek:1,timeTableCellComponent:xd,dayScaleCellComponent:wd}),r.a.createElement(Bu.f,{name:"\u041c\u0435\u0441\u044f\u0446",firstDayOfWeek:1}),r.a.createElement(Bu.h,null),r.a.createElement(Bu.d,null),r.a.createElement(Bu.i,null),r.a.createElement(Bu.c,{appointmentComponent:vd}),r.a.createElement(Bu.b,{showOpenButton:!1,layoutComponent:yd,showCloseButton:!0}),r.a.createElement(Bu.a,{messages:{allDayLabel:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",titleLabel:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435",startDateLabel:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",endDateLabel:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f",commitCommand:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",cancelCommand:"\u041e\u0442\u043c\u0435\u043d\u0430"},readOnly:!0})),d?r.a.createElement(od,{isOpen:d,handleClose:function(){return p(!1)},user:o}):null))});var kd=[{path:"/id:user_id",component:Ll,description:"\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"},{path:"/colleagues",component:Ll,description:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0440\u0443\u0437\u0435\u0439(\u043a\u043e\u043b\u043b\u0435\u0433)"},{path:"/news",component:Ll,description:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"},{path:"/messages",component:Ll,description:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"},{path:"/tasks",component:Ll,description:"\u0417\u0430\u0434\u0430\u0447\u0438"},{path:"/learnings",component:Ll,description:"\u041e\u0431\u0443\u0447\u0435\u043d\u0438\u0435"},{path:"/settings",component:xs,description:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"},{path:"/calendar",component:Object(I.b)(function(e){return{store:e}})(function(e){var t=e.store.user;return r.a.createElement(a.Fragment,null,r.a.createElement(ne,null),r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(ri,null)),t.hasOwnProperty("name")?r.a.createElement(Od,{user:t}):r.a.createElement(_,{minHeight:370}))}),description:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c"},{path:"/feed",component:Ll,description:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{path:"/test/:any",component:Wu,description:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"},{path:"/login",component:cs,description:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 / \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"},{path:"/approved",component:ls,description:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"},{path:"/Restore",component:hs,description:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f"},{path:"/404",component:fs,description:"\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 404"},{path:"/:any",component:fs,description:"\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 404"}];u.b.add(d.a,d.d,d.c,d.b);var Cd=Object(I.b)(function(e){return{store:e}},function(e){return{onFetchUser:function(t){return e({type:"FETCH_USER",payload:t})},onFetchFeed:function(t){return e({type:"FETCH_FEED",payload:t})},onFetchNews:function(t){return e({type:"FETCH_NEWS",payload:t})},setUnreadedFeed:function(t){return e({type:"UNREADED_FEED",payload:t})},setUnreadedMessages:function(t){return e({type:"UNREADED_MESSAGES",payload:t})},onGetNewFeed:function(t){return e({type:"NEW_FEED",payload:t})}}})(Object(z.withSnackbar)(function(e){var t=e.enqueueSnackbar,n=e.onFetchFeed,i=e.setUnreadedFeed,o=e.onFetchNews,u=e.onFetchUser,d=e.onGetNewFeed,p=e.setUnreadedMessages,m=e.store.unreaded,h={autoHideDuration:5e3,action:r.a.createElement(Rn.a,{size:"small",style:{color:"#1976d2",fontWeight:700}},"OK")};function f(e,n){for(var a=0;a<n;a++)switch(e[a].type){case"news":d("news"),g(),t("\u041d\u043e\u0432\u043e\u0441\u0442\u044c. ".concat(e[a].name," ").concat(e[a].surname," \u2014 ").concat(e[a].title),h);break;case"likes":t("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e ".concat(e[a].name," ").concat(e[a].surname," \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0430\u0441\u044c \u0432\u0430\u0448\u0430 \u0437\u0430\u043f\u0438\u0441\u044c \u2014 ").concat(e[a].title),h);break;case"tasks":d("tasks"),g(),t("\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 ".concat("1"===e[a].importance?' c \u043f\u043e\u043c\u0435\u0442\u043a\u043e\u0439 "\u0412\u0430\u0436\u043d\u043e\u0435" ':""," \u043e\u0442 ").concat(e[a].name," ").concat(e[a].surname," \u2014 ").concat(e[a].text),h);break;case"messages":t("\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442 ".concat(e[a].name," ").concat(e[a].surname),h);break;case"comments":t("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(e[a].name," ").concat(e[a].surname," \u2014 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0432\u0430\u0448\u0435\u0439 \u0437\u0430\u043f\u0438\u0441\u0438: ").concat(e[a].title),h);break;case"events":d("events"),g(),t("\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0432 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435 \u2014 ".concat(e[a].title),h);break;default:return 1/0}}function g(){document.getElementById("reloadNavigation").click()}return Object(a.useEffect)(function(){fetch("".concat(de,"/api/user/info.php")).then(function(e){return e.json()}).then(function(e){return u(e)})},[]),Object(a.useEffect)(function(){var e=!0;function t(){(e||"/messages"!==window.location.pathname)&&fetch("".concat(de,"/api/message/getUnreaded.php")).then(function(e){return e.json()}).then(function(t){t.unreaded.new>m.messages&&(p(t.unreaded),g(),e||f(t.messages,t.messages.length)),e=!1})}t(),setInterval(function(){return t()},15e3)},[]),Object(a.useEffect)(function(){var e=null;function t(){fetch("".concat(de,"/api/getFeed.php")).then(function(e){return e.json()}).then(function(t){t.length>0&&t[0].created_at>e&&(e&&i(a(t)),n(t),f(t,a(t)),e=t[0].created_at)})}function a(t){return t.findIndex(function(t){return t.created_at===e})}t(),setInterval(function(){return t()},15e3)},[]),Object(a.useEffect)(function(){var e=0;function t(){fetch("".concat(de,"/api/news/read.php")).then(function(e){return e.json()}).then(function(t){e!==t.records.length&&(o(t.records||[]),e=t.records.length)})}t(),setInterval(function(){return t()},15e3)},[]),r.a.createElement(c.a,null,r.a.createElement(l.a,null,kd.map(function(e){return r.a.createElement(s.a,{path:e.path,component:e.component,key:e.description})})))})),Sd=n(113);var Td={feed:0,news:0,messages:0,tasks:0,events:0,chats:[]};var Nd=Object(Sd.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":var n=e;return n[t.field]=t.payload,n;case"FETCH_USER":return t.payload;case"ADD_CHILD":var a=JSON.parse(e.childs);return e.childs=JSON.stringify([].concat(Object(ws.a)(a),[t.payload])),e;case"REMOVE_CHILD":var r=JSON.parse(e.childs);return e.childs=JSON.stringify(r.filter(function(e){return e.id!==t.payload})),e;default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.findIndex(function(e){return e.id===t.payload});switch(t.type){case"FETCH_NEWS":return Object(ws.a)(t.payload);case"DELETE_NEWS":var a=e.filter(function(e){return e.id!==t.payload});return Object(ws.a)(a);case"ADD_NEWS":return[t.payload].concat(Object(ws.a)(e));case"ADD_LIKE":return e[n].likes=Number(e[n].likes)+1,e[n].liked_by+=", ".concat(t.user_id),e;case"REMOVE_LIKE":return e[n].likes=Number(e[n].likes)-1,e[n].liked_by=e[n].liked_by.replace(", ".concat(t.user_id),""),e;case"ADD_COMMENT":return e[n].comments=Number(e[n].comments)+1,e;case"REMOVE_COMMENT":return e[n].comments=Number(e[n].comments)-1,e;default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TASKS":return Array.isArray(t.payload)?Object(ws.a)(t.payload):e;case"MARK_COMPLETED":case"ADD_TASK":case"FILTER_TASKS":return Object(ws.a)(t.payload);case"READED_TASK":var n=e;return n.find(function(e){return e.id===t.payload}).readed=1,n;case"DELETE_TASK":var a=e.filter(function(e){return e.id!==t.payload});return Object(ws.a)(a);default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHATS":return Object(ws.a)(t.payload);case"CREATE_CHAT":return[].concat(Object(ws.a)(e),[t.payload]);case"DELETE_CHAT":return e.filter(function(e){return e.id!==t.payload});case"ADD_MESSAGE":var n=e.filter(function(e){return e.id!==t.payload.chat}),a=e.find(function(e){return e.id===t.payload.chat});return a.message=t.payload,n=me.a.concat(n,a);case"EDIT_MESSAGE":var r=e.filter(function(e){return e.message.id!==t.payload[0]}),i=e.find(function(e){return e.message.id===t.payload[0]});return i&&(i.message.body=t.payload[1],r=me.a.concat(r,i)),r;default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_CHAT":return{chat_id:t.payload[0],user:t.payload[1]};case"CLOSE_CHAT":return{user:t.payload[1]};case"DELETE_CHAT":var n=e;return delete n.chat_id,n.user.message=null,n;case"ASSIGN_CHAT":var a=e;return a.chat_id=t.payload,a;default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MESSAGES":return Object(ws.a)(t.payload);case"ADD_MESSAGE":var n=t.payload;return n.id=(Number(localStorage.getItem("message_id"))+1).toString(),e.find(function(e){return e.id===n.id})&&(n.id=(Number(n.id)+1).toString()),[].concat(Object(ws.a)(e),[n]);case"DELETE_MESSAGE":return e.filter(function(e){return e.id!==t.payload});case"CLOSE_CHAT":return[];default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FRIENDS":case"FILTER_FRIENDS":return Object(ws.a)(t.payload);case"SET_FRIENDS":return t.payload;default:return e}},tests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TESTS":return Object(ws.a)(t.payload);case"FETCH_TEST":return t.payload;case"ADD_TEST":return[].concat(Object(ws.a)(e),[t.payload]);case"DELETE_TEST":return e.filter(function(e){return Number(e.id)!==Number(t.payload)});case"FILTER_TESTS":return Object(ws.a)(t.payload);default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CATEGORIES":case"RESE_CATEGORIES":return t.payload;default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EVENTS":return Array.isArray(t.payload)?Object(ws.a)(t.payload):e;case"ADD_EVENT":return[].concat(Object(ws.a)(e),[t.payload]);case"CHANGE_EVENTS":return Object(ws.a)(t.payload);case"DELETE_EVENT":return e.filter(function(e){return e.id!==t.payload});case"SIGN_UP":var n=e.find(function(e){return e.id===t.payload.id});n.signed?n.signed+=", ".concat(t.payload.name," ").concat(t.payload.surname):n.signed="".concat(t.payload.name," ").concat(t.payload.surname);var a=e.findIndex(function(e){return e.id===t.payload.id}),r=e;return r[a].signed=n.signed,r;case"UNSIGN_UP":var i=e,o=e.find(function(e){return e.id===t.payload.id}),c="".concat(t.payload.name," ").concat(t.payload.surname);return o.signed.split(",").length>1&&(o.signed.split(",")[0]===c?o.signed=o.signed.replace("".concat(c,","),""):o.signed=o.signed.replace(", ".concat(c),"")),o.signed=o.signed.replace(c,""),i[e.findIndex(function(e){return e.id===t.payload.id})].signed=o.signed,i;default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FEED":return Object(ws.a)(t.payload);default:return e}},unreaded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Td,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNREADED_MESSAGES":e.messages=t.payload.new;var n=[];for(var a in t.payload)"object"===typeof t.payload[a]&&n.push(t.payload[a]);return e.chats=n,e;case"UNREADED_FEED":return e.feed=e.feed+t.payload,e;case"READ_FEED":return e.feed=0,e;case"READ_CHAT":var r=e.chats.find(function(e){return e.chat_id===t.payload}).unreaded;return e.messages-=r,e.chats=e.chats.filter(function(e){return e.chat_id!==t.payload}),e;case"READ_NEWS":return e.news=0,e;case"READ_TASKS":return e.tasks=0,e;case"READ_EVENTS":return e.events=0,e;case"NEW_FEED":switch(t.payload){case"news":return e.news+=1,e;case"tasks":return e.tasks+=1,e;case"events":return e.events+=1,e;default:return 1/0}default:return e}}}),Dd=Object(jn.createMuiTheme)({palette:{primary:{main:"#1976d2"},secondary:{main:"#ff4800"}},typography:{useNextVariants:!0},overrides:{MuiSnackbar:{root:{bottom:window.innerWidth<600?"60px !important":"0"}},MuiModal:{root:{bottom:window.innerWidth<600?"60px !important":"0",maxWidth:"".concat(window.innerWidth,"px !important")}},MuiBackdrop:{root:{bottom:window.innerWidth<600?"display: none":"display: block"}},MuiFab:{root:{bottom:window.innerWidth<600?"76px":"0",zIndex:10}},MuiList:{padding:{padding:"0 !important"}},MuiGrid:{container:{height:"100% !important"}},MuiTableCell:{root:{pointerEvents:"none"}},Layout:{title:{marginLeft:"-40px"}},VerticalAppointment:{content:{fontSize:"1.1rem"},title:{fontWeight:"500",fontSize:"1.2rem"},textContainer:{lineHeight:"20px",opacity:".75"}}}}),_d=n(315),Id=(n(660),Object(Sd.c)(Nd,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Ct.a.locale("ru"),o.a.render(r.a.createElement(function(){return r.a.createElement(jn.MuiThemeProvider,{theme:Dd},r.a.createElement(I.a,{store:Id},r.a.createElement(Wt.c,{utils:_d.a,moment:Ct.a},r.a.createElement(z.SnackbarProvider,{maxSnack:3,preventDuplicate:!0},r.a.createElement(Cd,null)))))},null),document.getElementById("root"))}},[[348,2,1]]]);
//# sourceMappingURL=main.afaacea7.chunk.js.map