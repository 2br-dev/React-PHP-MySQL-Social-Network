{"version":3,"sources":["components/img/photos/Water image_Dreamstime.jpg","components/img/icons/baseline-search-24px.svg","components/img/photos/images.png","components/Header.jsx","components/Loader/Loader.jsx","components/MainpageHeader.jsx","components/functions/API.js","components/SingleNews.jsx","components/SideNews.jsx","components/functions/Cookie.js","components/FriendsList/Friend.jsx","components/FriendsList/Search.jsx","components/FriendsList/FriendsList.jsx","components/PersonalInfo.jsx","components/Fab/Fab.jsx","components/Modal/Modal.jsx","components/Tasks/Autocomplete.jsx","components/Tasks/Pickers.jsx","components/Tasks/TextInput.jsx","components/Tasks/Stepper.jsx","components/Tasks/NewTask.jsx","components/Tasks/Task.jsx","components/Tasks/ConfirmDelete.jsx","components/Tasks/Tasks.jsx","components/News/NewNews.jsx","components/News/ConfirmDelete.jsx","components/News.jsx","components/Navigation/sections.js","components/Navigation/Navigation.jsx","components/Chat/ChatItem.jsx","components/Chat/NoMessages.jsx","components/Chat/Message.jsx","components/Chat/Messages.jsx","components/Chat/SendMessageInput.jsx","components/Chat/EditMessageInput.jsx","components/Chat/DeleteModal.jsx","components/Chat/ChatRoom.jsx","components/Chat/Dialogues.jsx","components/Chat/NoChats.jsx","components/Chat/Chat.jsx","components/MainPage.jsx","components/ForgetPassword.jsx","components/SignupForm.jsx","components/RegisterForm.jsx","components/BgBubbles.jsx","components/LoginForm.jsx","components/Approved.jsx","components/Restore.jsx","components/Page404.jsx","components/Settings.jsx","App.jsx","reducers/index.js","reducers/user.js","reducers/news.js","reducers/tasks.js","reducers/chats.js","reducers/room.js","reducers/messages.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","date","Date","react_default","a","createElement","className","dist_default","element","format","id","toLocaleString","weekday","Component","StyledLoader","styled","div","_templateObject","Loader","props","style","minHeight","CircularProgress_default","color","Wrapper","MainpageHeader_templateObject","defaultBackground","MainpageHeader","user","defaultAvatar","backgroundImage","concat","image","uploadedAvatar","window","location","host","includes","avatar","loading","background","components_Loader_Loader","react","name","surname","position","Button_default","variant","href","API","origin","SingleNews","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getAvatars","likedBy","state","currentNews","liked_by","split","slice","formData","FormData","self","assertThisInitialized","append","$","ajax","url","data","processData","contentType","type","success","res","setState","error","err","console","log","handleChange","e","commentText","target","value","addLike","preventDefault","actions","document","getElementById","pointerEvents","fetch","singleNewsId","then","response","json","setTimeout","removeLike","stopPropagation","submitComment","commentsLoading","toJSON","replace","toLocaleTimeString","fetchComments","enqueueSnackbar","deleteComment","news_id","currentUser","thisComments","loadedComments","_this2","fetchUserInfo","_this3","_this4","_this5","_this$props","closeNews","_this$state","userAvatar","length","author_id","Single","core_index_es","placement","title","Icon","Clear_default","onClick","PostHeader","Avatar","DefaultAvatar","importance","createImportantBar","PostContent","text","PostLikes","likes","getNoun","map","i","key","PostActions","getCommentsNoun","index_es","icon","marginLeft","_","some","Fragment","NewComment","TextArea","label","multiline","onChange","required","disabled","comment","Comments","marginTop","who","DelIcon","Delete_default","SingleNews_Wrapper","SingleNews_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","withSnackbar","SideNews","goToSingleNews","singleNews","reloadComponent","changeImportance","number","Math","abs","news","singleNewsData","comments","bind","getNews","records","NEWS_COUNTER","store","SideNews_Wrapper","SideNews_News","NewsSwitch","item","author","Warning_default","NoNews","handleChangeSection","scrollTo","components_SingleNews","SideNews_templateObject","SideNews_templateObject2","News","SideNews_templateObject3","SideNews_templateObject4","connect","dispatch","payload","Cookie","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","cookie","ca","c","charAt","substring","indexOf","getCookie","alert","prompt","setCookie","Friend","friend","ListItem_default","button","TouchRippleProps","classes","child","ListItemAvatar_default","Avatar_default","height","width","alt","src","ListItemText_default","inset","primary","secondary","SearchWrapper","Search_templateObject","Search","TextField_default","margin","searchValue","handleSearch","InputProps","endAdornment","InputAdornment_default","IconButton_default","aria-label","SearchIcon","opacity","FriendList","friends","initial","documentTitle","toLowerCase","filter","componentWillUnmount","user_id","toString","Paper_default","FriendWrapper","FriendsList_Search","List_default","Link","to","handleChangeUserId","FriendsList_Friend","FriendsList_templateObject","PersonalInfo","handleDateChange","selectedDate","removeInput","newChildInput","createInput","user_logged_id","fullWidth","InputLabelProps","shrink","Naked","InputBase_default","htmlFor","userInfo","nameError","yearError","childName","childBirthyear","loadingChild","handleSubmit","deleteChild","prepareChild","handleChild","addChild","action","birthday","catch","event","objectSpread","_this$setState","defineProperty","modal","val","sex","result","_this$props2","childrens","childs","JSON","parse","Form","method","onSubmit","react_input_mask_default","mask","phone","padding","material_ui_pickers_esm","aria-describedby","select","status","Childrens","keys","Children","child_name","child_birthyear","NewChild","Done_default","ChildBtns","city","district","adress","vuz","fakultet","army_country","army_type","Btn","form","PersonalInfo_templateObject","PersonalInfo_templateObject2","PersonalInfo_templateObject3","PersonalInfo_templateObject4","PersonalInfo_templateObject5","PersonalInfo_templateObject6","PersonalInfo_templateObject7","withStyles","theme","fixed","bottom","spacing","unit","right","Tooltip_default","Add_default","ModalWindow","Modal_default","open","onClose","handleClose","component","inputComponent","_ref","inputRef","objectWithoutProperties","assign","ref","components","Control","inputProps","selectProps","input","innerRef","children","innerProps","textFieldProps","Menu","square","paper","MultiValue","tabIndex","classNames","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","noOptionsMessage","Option","buttonRef","selected","fontWeight","isSelected","Placeholder","placeholder","SingleValue","singleValue","ValueContainer","valueContainer","IntegrationReactSelect","users","selectStyles","base","palette","& input","font","root","react_select_esm","styles","options","multi","isMulti","control","React","flexGrow","display","flexDirection","justifyContent","flexWrap","flex","alignItems","overflow","backgroundColor","emphasize","grey","fontSize","left","zIndex","withTheme","MaterialUIPickers","Grid_default","container","justify","paddingBottom","ampm","selectedTime","locale","handleTimeChange","TextInput","TextInput_TextArea","handleTextChange","TextInput_templateObject","VerticalLinearStepper","activeStep","handleNext","handleBack","handleReset","checkDisabled","step","time","steps","Stepper_default","orientation","index","Step_default","StepLabel_default","StepContent_default","Typography_default","getStepContent","actionsContainer","Autocomplete","Pickers","elevation","resetContainer","resetAll","marginRight","marginBottom","NewTask","componentDidMount","Number","forWho","forEach","push","toLocaleDateString","join","getHours","getMinutes","tasks","onAddNewTask","_this$state2","NewTask_Wrapper","Close_default","Tasks_Stepper","NewTask_templateObject","task","Task","getUserNames","usersId","find","getAdresant","from","now","moment","end","until_date","difference","duration","diff","_milliseconds","expandIcon","ExpandMore_default","Task_Icon","TaskStatus","task-completed","task-doing","task-late","DeleteIcon","handleConfirm","details","Footer","for","reverse","until_time","leaveDelay","handleCompleted","Task_templateObject","span","Task_templateObject2","Task_templateObject3","Task_templateObject4","ConfirmDelete","ConfirmDelete_Wrapper","ConfirmDelete_Icon","ButtonContainer","handleDelete","ConfirmDelete_templateObject","ConfirmDelete_templateObject2","ConfirmDelete_templateObject3","Tasks","confirm","preparedToDelete","disabledButton","getTasks","handleOpen","done_date","done_time","markAsCompleted","handleFilter","filtered","onFilter","onDeleteTask","Tasks_Wrapper","Filters","Task_Task","Fab_Fab","Tasks_NewTask","Tasks_templateObject","Tasks_templateObject2","NewNews","Container","NewNews_Header","NewNews_Icon","Body","submitNews","Topic","newNewsTopic","invalidTopic","NewNews_TextArea","invalidText","newNewsText","NewNews_Footer","checked","newNewsImportance","NewNews_Wrapper","NewNews_templateObject","NewNews_templateObject2","NewNews_templateObject3","NewNews_templateObject4","NewNews_templateObject5","NewNews_templateObject6","NewNews_templateObject7","NewNews_templateObject8","News_ConfirmDelete_Wrapper","News_ConfirmDelete_Icon","ConfirmDelete_ButtonContainer","removeNews","Dialogue","News_ConfirmDelete_templateObject","section","News_ConfirmDelete_templateObject2","News_ConfirmDelete_templateObject3","ConfirmDelete_templateObject4","newNews","editing","preparedNewsId","confirmDelete","prepareNews","editNews","addNews","Important","News_templateObject","prepareDelete","showNews","onAddNews","NewsContainer","UserAvatar","NewsInfo","News_Icon","News_Body","News_TextArea","Actions","data-id","News_NoNews","ConfirmDelete_ConfirmDelete","News_templateObject2","News_templateObject3","News_templateObject4","News_templateObject5","News_templateObject6","News_templateObject7","News_templateObject8","News_templateObject9","sections","img","Person_default","Message_default","NewReleases_default","ListAlt_default","People_default","PATH","pathname","urlValue","Navigation","countTask","counter","Navigation_Wrapper","AppBar_default","Tabs_default","indicatorColor","centered","Tab_default","BadgeWrapper","Badge_default","badgeContent","Navigation_templateObject","Navigation_templateObject2","Time","ChatItem_templateObject","MessageHeader","ChatItem_templateObject2","string","openRoom","hasOwnProperty","message","chat","readed","fromDayStart","startOf","dateFromNow","DoneAll_default","isSame","calendar","body","NoMessages","NoMessages_Container","NoMessages_templateObject","Message_templateObject","Message_templateObject2","Message_templateObject3","prodUrl","_props$store","room","Message_Container","Message_Avatar","Message_Body","Edit_default","editMessage","isToday","edited","Messages_templateObject","messages","messageContainer","scrollTop","scrollHeight","Messages_Container","Chat_Message","SendMessageInput","SendMessageInput_Container","sendMessage","autoFocus","handleNewMessage","Send_default","SendMessageInput_templateObject","EditMessageInput","EditMessageInput_Container","submitEdit","handleEdit","startAdornment","closeEditing","EditMessageInput_templateObject","DeleteModal","DeleteModal_Container","closeDelete","submitDelete","Overlay","DeleteModal_templateObject","DeleteModal_templateObject2","ChatRoom","editText","deleting","newMessage","deleteID","editID","interval","getMessages","setInterval","clearInterval","chat_id","_this$props$store","localStorage","setItem","message_id","getItem","chats","createChat","addMessage","getMessageId","user1","user2","messageId","assignChat","deleteMessage","deleteChat","Room","RoomHeader","ChatRoom_Icon","ArrowBack_default","Chat_Messages","ChatRoom_templateObject","ChatRoom_templateObject2","ChatRoom_templateObject3","messageID","messageBody","rebuildList","completed","initialAnimation","openChat","closeChat","direction","pages","renderprops","Chat_ChatRoom","ChatItem","getDirection","Dialogues_FriendWrapper","reset","unique","native","items","transform","enter","leave","Dialogues_templateObject","NoChats","NoChats_Container","NoChats_templateObject","Chat","trim","getChats","userStore","fetchChats","Dialogues","MainPage","initialUser","handleChangeUrl","switchComponent","cookie_id","parseInt","current_id","getUser","components_PersonalInfo","components_Chat_Chat","components_News","components_Tasks_Tasks","FriendsList_FriendList","components_MainpageHeader","components_Header","components_Navigation_Navigation","MainSection","components_SideNews","MainPage_templateObject","ForgetPassword","credentials","forgetPassword","ForgetPassword_Wrapper","ForgetPassword_Icon","credential","username","ForgetPassword_templateObject","ForgetPassword_templateObject2","SignupForm","isForget","handleClickShowPassword","isPassHidden","login","password","invalidPass","VisibilityOff_default","Visibility_default","FormHelperText_default","Buttons","components_ForgetPassword","SignupForm_templateObject","global","RegisterForm","email","confirmed","isEmailValid","entered","validateEmail","showPassword","test","lentgh","BtnWrapper","RegisterForm_templateObject","BgBubbles","LoginForm","whichForm","changeForm","components_RegisterForm","components_SignupForm","components_BgBubbles","Approved","goToMain","closeWindow","close","Restore","pw","vars","m","getUrlVars","InputWrapper","BtnContainer","Restore_templateObject","Restore_templateObject2","Page404","css","cursor","top","borderRadius","textAlign","genders","Settings","fileSelect","files","size","selectedFile","uploadAvatar","file","fd","encType","Icon_default","accept","helperText","option","MenuItem_default","gutterBottom","library","add","faComments","faHeart","faEnvelope","faEdit","App","BrowserRouter","Switch","Route","path","combineReducers","arguments","undefined","toConsumableArray","nextState","newState","currentChat","editedState","editedMessage","createMuiTheme","main","typography","useNextVariants","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","core_styles","es","utils","MomentUtils","build","maxSnack","src_App"],"mappings":"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","file":"static/js/main.495b71e8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Water image_Dreamstime.b2e60f28.jpg\";","module.exports = __webpack_public_path__ + \"static/media/baseline-search-24px.a87eca9e.svg\";","module.exports = \"data:image/png;base64,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\"","import React, { Component } from 'react';\r\nimport Moment from 'react-moment';\r\nimport './css/Header.css';\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const date = new Date();\r\n    return (\r\n      <div className=\"absolute-header\">\r\n        <div className=\"header-team\">#ЕдинаяКоманда</div>\r\n        <div className=\"header-date\">\r\n          <span>сегодня</span>\r\n          <Moment element=\"span\" format=\"DD.MM.YYYY\">{date}</Moment>\r\n          <span id=\"header-date-day\">{date.toLocaleString('ru', {weekday: 'long'})}</span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport styled from 'styled-components';\r\n\r\nconst Loader = props => (\r\n  <StyledLoader style={{ minHeight: props.minHeight }}>\r\n    <CircularProgress color={props.color} />\r\n  </StyledLoader>\r\n)\r\n\r\nconst StyledLoader = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default Loader;","import React, { Fragment } from 'react';\r\nimport './css/MainpageHeader.css';\r\nimport image from './img/photos/images.png';\r\nimport Button from '@material-ui/core/Button';\r\nimport styled from 'styled-components';\r\nimport defaultBackground from './img/photos/Water image_Dreamstime.jpg';\r\nimport Loader from './Loader/Loader';\r\n\r\nfunction MainpageHeader(props) {\r\n  const { user } = props;\r\n  const defaultAvatar = { backgroundImage: `url(${image})` };\r\n  let uploadedAvatar = '';\r\n\r\n  if (window.location.host.includes('localhost')) {\r\n    uploadedAvatar = { backgroundImage: `url(${user.avatar})` };\r\n  } else {\r\n    uploadedAvatar = { backgroundImage: `url(frontend/public/${user.avatar})` };\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <header className=\"header\">\r\n        <div className=\"person\">\r\n          {props.loading\r\n            ?\r\n            <div className=\"person-image\" style={{ background: 'rgba(255,255,255,0.5)' }}>\r\n              <Loader minHeight={125} color='primary' />\r\n            </div>\r\n            :\r\n            <div className=\"person-image\" style={user.avatar === '' ? defaultAvatar : uploadedAvatar}></div>\r\n          }\r\n          <div className=\"person-info\">\r\n            <div className=\"person-info__container\">\r\n              {!props.loading\r\n                ?\r\n                (<Fragment>\r\n                  <p className=\"person-info__name\">{`${user.name} ${user.surname}`}</p>\r\n                  <p className=\"person-info__position\">{user.position}</p>\r\n                </Fragment>)\r\n                :\r\n                <Loader minHeight={70} color='primary' />}\r\n            </div>\r\n            <Button variant=\"contained\" href=\"logout.php\" color=\"primary\">Выйти</Button>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"contained\" href=\"/settings\" color=\"primary\">Настройки</Button>\r\n      </header>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  background: url('${defaultBackground}') no-repeat center/cover;\r\n`;\r\n\r\nexport default MainpageHeader;","let API = '';\r\n\r\nif (window.location.host.includes('localhost')) {\r\n  API = 'http://akvatory.local';\r\n} else {\r\n  API = window.location.origin;\r\n}\r\n\r\nexport default API;","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport $ from 'jquery';\r\nimport DefaultAvatar from './img/photos/images.png';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\r\nimport API from './functions/API';\r\nimport _ from 'lodash';\r\nimport Loader from './Loader/Loader';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass SingleNews extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentUser: [],\r\n      thisComments: [],\r\n      loadedComments: false,\r\n      commentText: '',\r\n      currentNews: [],\r\n      likedBy: [],\r\n      loading: true,\r\n      commentsLoading: false\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(`${API}/api/news/read_one.php?id=${this.props.singleNewsId}`)\r\n      .then(response => response.json())\r\n      .then(currentNews => this.setState({ currentNews }))\r\n    await this.fetchUserInfo(this.props.user.id);\r\n    await this.fetchComments(this.props.singleNewsId);\r\n    await this.getAvatars(this.props.singleNewsId);\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  fetchUserInfo(id) {\r\n    fetch(`${API}/api/user/info.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(currentUser => this.setState({ currentUser }))\r\n  }\r\n\r\n  fetchComments(id) {\r\n    fetch(`${API}/api/news/single_comments.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(thisComments => this.setState({ thisComments, loadedComments: !this.state.loadedComments }))\r\n  }\r\n\r\n  // получаем аватарки лайкнувших пост\r\n  getAvatars = () => {\r\n    const likedBy = this.state.currentNews.liked_by.split(', ').slice(1);\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('likedBy', likedBy);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/getAvatars.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => self.setState({ likedBy: res }),\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n  handleChange = e => this.setState({ commentText: e.target.value });\r\n\r\n  // добавляем лайк\r\n  addLike = (id, e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addlike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (e, res) {\r\n        console.log(res);\r\n        fetch(`${API}/api/news/read_one.php?id=${self.props.singleNewsId}`)\r\n          .then(response => response.json())\r\n          .then(currentNews => self.setState({ currentNews }))\r\n          .then(() => self.getAvatars(self.props.singleNewsId))\r\n\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)  \r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // убираем лайк\r\n  removeLike = (id, e) => {\r\n    const self = this;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/removelike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        console.log(res);\r\n        fetch(`${API}/api/news/read_one.php?id=${self.props.singleNewsId}`)\r\n          .then(response => response.json())\r\n          .then(currentNews => self.setState({ currentNews }))\r\n          .then(() => self.getAvatars(self.props.singleNewsId))\r\n\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  submitComment = e => {\r\n    this.setState({ commentsLoading: true });\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('news_id', this.props.singleNewsId);\r\n    formData.append('who', `${this.props.user.name} ${this.props.user.surname}`);\r\n    formData.append('date', new Date().toJSON().slice(0, 10).replace(/-/g, '.'));\r\n    formData.append('visible', 1);\r\n    formData.append('time', new Date().toLocaleTimeString().slice(0, -3));\r\n    formData.append('text', this.state.commentText);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addcomment.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function() {\r\n        self.setState({ commentText: '' });\r\n        self.fetchComments();\r\n        self.props.enqueueSnackbar('Комментарий был добавлен', { variant: 'success' });\r\n        setTimeout(() => self.setState({ commentsLoading: false }), 250);\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Не удалось оставить комментарий', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Удаление комментария \r\n  | arguments: @id \r\n  | type: @int\r\n  |--------------------------------------------------\r\n  */\r\n  deleteComment = (e, id, news_id) => {\r\n    this.setState({ commentsLoading: true });\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/deletecomment.php`,\r\n      data: { id, news_id },\r\n      type: 'POST',\r\n      success: function() {\r\n        self.props.enqueueSnackbar('Комментарий был удален', { variant: 'info' });\r\n        self.fetchComments();\r\n        setTimeout(() => self.setState({ commentsLoading: false }), 250);\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Не удалось удалить комментарий', { variant: 'error' });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    const { closeNews, singleNewsId, user } = this.props;\r\n    const { currentUser, thisComments, loadedComments, commentText, currentNews, likedBy, loading, commentsLoading } = this.state;\r\n\r\n    let avatar = null;\r\n    if (window.location.host.includes('localhost')) {\r\n      avatar = currentUser.avatar;\r\n    } else {\r\n      avatar = `frontend/public/${currentUser.avatar}`;\r\n    }\r\n    let userAvatar = null;\r\n    if (window.location.host.includes('localhost')) {\r\n      userAvatar = user.avatar;\r\n    } else {\r\n      userAvatar = `frontend/public/${user.avatar}`;\r\n    }\r\n\r\n    if (currentUser.length === 0) this.fetchUserInfo(currentNews.author_id);\r\n    if (!loadedComments) this.fetchComments(singleNewsId);\r\n\r\n    return (\r\n      <Fragment>\r\n\r\n        <Single>\r\n          {loading ? <Loader minHeight={500} color='primary' /> :\r\n            <Fragment>\r\n              <Tooltip placement='left' title='Закрыть'>\r\n                <Icon><CloseIcon onClick={closeNews} /></Icon>\r\n              </Tooltip>\r\n\r\n              <PostHeader>\r\n                <Avatar style={{ background: `url(${currentUser.avatar ? avatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                <Typography variant='subtitle2'>{currentUser.name} {currentUser.surname}</Typography>            \r\n              </PostHeader>\r\n\r\n              {currentNews.importance === '1' ? this.props.createImportantBar(10) : null}\r\n\r\n              <Typography variant='h5'>{currentNews.title}</Typography>\r\n\r\n              <PostContent>\r\n                <Typography variant='body1'>{currentNews.text}</Typography>\r\n                <Typography variant='caption'>{currentNews.date}</Typography>\r\n              </PostContent>\r\n\r\n              <PostLikes>\r\n                <Typography variant='subtitle2'>{currentNews.likes} {this.props.getNoun(currentNews.likes)} \"Нравится\"</Typography>\r\n                {/* eslint-disable-next-line*/}\r\n                {likedBy.map((user, i) => {\r\n\r\n                  while (i < 7) {\r\n                    return (\r\n                      <Tooltip key={i} title={`${user.name} ${user.surname}`} placement=\"top\">\r\n                        <Avatar style={{ background: `url(${user.avatar ? user.avatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                      </Tooltip>\r\n                    )\r\n                  }\r\n                })}\r\n              </PostLikes>\r\n\r\n              <PostActions id='actions'>\r\n                {thisComments.length}\r\n                <Tooltip placement='top' title={`${thisComments.length} ${this.props.getCommentsNoun(thisComments.length)}`}>\r\n                  <FontAwesomeIcon icon='comments' style={{ marginLeft: 10 }} />\r\n                </Tooltip>\r\n\r\n                {!_.some(likedBy, ['id', user.id])\r\n                  ?\r\n                  <React.Fragment>\r\n                    <span>{currentNews.likes}</span>\r\n                    <Tooltip placement='top' title={`${currentNews.likes} ${this.props.getNoun(currentNews.likes)} \"Нравится\"`}>\r\n                      <FontAwesomeIcon onClick={e => this.addLike(currentNews.id, e)} icon='heart' style={{ marginLeft: 10 }} />\r\n                    </Tooltip>\r\n                  </React.Fragment>\r\n                  :\r\n                  <React.Fragment>\r\n                    <span>{currentNews.likes}</span>\r\n                    <Tooltip placement='top' title={`${currentNews.likes} ${this.props.getNoun(currentNews.likes)} \"Нравится\"`}>\r\n                      <FontAwesomeIcon onClick={e => this.removeLike(currentNews.id, e)} icon='heart' style={{ color: '#1976d2', marginLeft: 10 }} />\r\n                    </Tooltip>  \r\n                  </React.Fragment>\r\n                }\r\n                <Tooltip placement='top' title='Написать сообщение'>\r\n                  <FontAwesomeIcon icon='envelope' style={{ marginLeft: '25px' }} />\r\n                </Tooltip>\r\n                \r\n              </PostActions>\r\n\r\n              <NewComment>\r\n                <p className='newcomment-reply'>В ответ <a href={`${window.location.origin}/id${currentUser.id}`}>{currentUser.name} {currentUser.surname}</a></p>\r\n                <div className='newcomment-input'>\r\n                  <Avatar style={{ background: `url(${user.avatar ? userAvatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                  <TextArea>\r\n                    <TextField\r\n                      label='Комментарий'\r\n                      multiline\r\n                      variant='outlined'\r\n                      name='commentText'\r\n                      value={commentText}\r\n                      onChange={this.handleChange}\r\n                      required\r\n                    />\r\n                  </TextArea>\r\n                </div>\r\n                <Button variant='contained' color='primary' onClick={this.submitComment} disabled={!commentText}>Отправить</Button>\r\n              </NewComment>\r\n\r\n              {commentsLoading ? <Loader minHeight={280} color='primary' /> :\r\n                thisComments.map((comment, i) => {\r\n                  return (\r\n                    <Comments key={i}>\r\n                      <div className='comment-header'>\r\n                        <Avatar style={{ background: `url(${user.avatar ? userAvatar : DefaultAvatar}) no-repeat center/cover`, marginTop: 20 }}></Avatar>\r\n                        <Typography variant='subtitle2'>{comment.who}</Typography>\r\n                        <Typography variant='caption' className='comment-date'>{comment.date}</Typography>\r\n                      </div>\r\n                      <div className='comment-text'>{comment.text}</div>\r\n\r\n                      <DelIcon>\r\n                        <Tooltip placement='left' title=\"Удалить\">\r\n                          <DeleteIcon onClick={(e) => this.deleteComment(e, comment.id, comment.news_id)} />\r\n                        </Tooltip>\r\n                      </DelIcon>\r\n                    </Comments>\r\n                  )\r\n                })}\r\n\r\n            </Fragment>}\r\n        </Single>\r\n        <Wrapper onClick={closeNews}></Wrapper>\r\n\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst Single = styled.div`\r\n  width: 600px;\r\n  min-height: 300px;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  position: fixed;\r\n  z-index: 50;\r\n  background: #fff;\r\n  top: 100px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n  padding: 15px 30px;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  max-height: 80%;\r\n\r\n  .close {\r\n    top: 5px;\r\n  }\r\n  ::-webkit-scrollbar { \r\n    display: none; \r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  background: rgba(0,0,0,.5);\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  z-index: 49;\r\n`;\r\n\r\nconst PostHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 25px;\r\n\r\n  img {\r\n    border-radius: 50%;\r\n    width: 60px;\r\n  }\r\n  p {\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n  }\r\n`;\r\n\r\nconst PostContent = styled.div`\r\n  p {\r\n    margin: 15px 0 5px;\r\n    font-size: 20px;\r\n  }\r\n  span {\r\n    color: #657786;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst PostLikes = styled.div`\r\n  border-top: 1px solid #e6ecf0;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  margin-top: 20px;\r\n  1px solid #e6ecf0;\r\n  align-items: center;\r\n  display: flex;\r\n\r\n  div {\r\n    margin: 0 5px;\r\n  }\r\n\r\n  h6:first-child {\r\n    width: 50%;\r\n    padding: 15px 10px;\r\n    border-right: 1px solid #e6ecf0;\r\n  }\r\n\r\n  span {\r\n    width: 50%;\r\n    padding: 15px 10px 15px;\r\n  }\r\n`;\r\n\r\nconst PostActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n\r\n  img {\r\n    width: 15px;\r\n    margin-right: 40px;\r\n    margin-left: 10px;\r\n    opacity: .7;\r\n    cursor: pointer;\r\n  }\r\n\r\n  img:hover {\r\n    opacity: 1;\r\n    transition: .37s ease;\r\n  }\r\n`;\r\n\r\nconst Comments = styled.div`\r\n  margin-left: -30px;\r\n  width: 600px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  cursor: pointer;\r\n  padding: 15px 30px;\r\n  position: relative;\r\n\r\n  :last-child {\r\n    border-bottom: none;\r\n  }\r\n\r\n  :hover {\r\n    background: #f5f8fa;\r\n    transition: .37s ease;\r\n  }\r\n\r\n  .comment-header {\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n    div {\r\n      border-radius: 50%;\r\n      width: 30px;\r\n      height: 30px;\r\n    }\r\n  }\r\n\r\n  .comment-text {\r\n    padding-left: 45px;\r\n  }\r\n\r\n  .comment-date {\r\n    margin-left: 10px;\r\n    color: #657786;\r\n    :before {\r\n      content: '\\00b7';\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst NewComment = styled.div`\r\n  padding: 15px 30px;\r\n  background: #f5f8fa;\r\n  width: 600px;\r\n  margin-top: 20px;\r\n  margin-left: -30px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  border-top: 1px solid #e6ecf0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  .close {\r\n    top: 5px;\r\n  }\r\n  button {\r\n    width: 150px;\r\n    align-self: flex-end;\r\n    margin-top: 15px;\r\n  }\r\n  \r\n  .newcomment-reply {\r\n    margin: 0 40px;\r\n    color: #657786;\r\n    a {\r\n      color: #0084B4;\r\n      text-decoration: none;\r\n      margin-left: 5px;\r\n      :hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n\r\n  .newcomment-input {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    margin-top: 20px;\r\n    div {\r\n      margin-right: 0;\r\n    }\r\n  }\r\n`;\r\nconst Avatar = styled.div`\r\n  min-width: 30px;\r\n  border-radius: 50%;\r\n  min-height: 30px;\r\n  margin-right: 15px;\r\n`;\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-left: 10px;\r\n  background: #fff;\r\n  height: 110px;\r\n  width: 100%;\r\n\r\n  textarea {\r\n    max-height: 90px;\r\n    background: #fff;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  position: absolute;\r\n  right: 25px;\r\n  top: 10px;\r\n  cursor: pointer;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\n\r\nconst DelIcon = styled.div`\r\n  cursor: pointer;\r\n  right: 25px;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  position: absolute;\r\n  height: fit-content;\r\n  svg {\r\n    color: rgba(0,0,0,.54);\r\n  }\r\n`;\r\n\r\nexport default withSnackbar(SingleNews);","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport './css/SideNews.css';\r\nimport SingleNews from './SingleNews';\r\nimport styled from 'styled-components';\r\nimport { Typography, Paper, Switch, Button, Tooltip } from '@material-ui/core';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { connect } from 'react-redux';\r\nimport Loader from './Loader/Loader';\r\n\r\nclass SideNews extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      news: [],\r\n      importance: false,\r\n      singleNews: false,\r\n      singleNewsData: [],\r\n      singleNewsId: '',\r\n      comments: [],\r\n      loading: true\r\n    }\r\n    this.reloadComponent = this.reloadComponent.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  async reloadComponent() {\r\n    await this.setState({ loading: true })\r\n    await fetch(`http://akvatory.local/api/news/read.php`)\r\n      .then(response => response.json())\r\n      .then(news => this.props.getNews(news.records || []))\r\n    await fetch(`http://akvatory.local/api/news/getcomments.php`)\r\n      .then(response => response.json())\r\n      .then(comments => this.setState({ comments: comments.records }))\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  // переходим к конкретной новости\r\n  goToSingleNews = id => this.setState({ singleNews: true, singleNewsId: id });\r\n\r\n  // закрываем новость \r\n  closeNews = () => {\r\n    this.setState({ singleNews: false, singleNewsId: '' });\r\n    this.reloadComponent();\r\n  }\r\n\r\n  changeImportance = () => this.setState({ importance: !this.state.importance });\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'отметок';\r\n    number %= 10;\r\n    if (number === 1) return 'отметка';\r\n    if (number >= 2 && number <= 4) return 'отметки';\r\n    return 'отметок';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getCommentsNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'комментариев';\r\n    number %= 10;\r\n    if (number === 1) return 'комментарий';\r\n    if (number >= 2 && number <= 4) return 'комментария';\r\n    return 'комментариев';\r\n  }\r\n\r\n  render() {\r\n    const { news, importance, singleNews, singleNewsId, comments, loading } = this.state;\r\n    var NEWS_COUNTER = 0;\r\n\r\n    if (this.state.news.length === 0) {\r\n      setTimeout(() => this.setState({ news: this.props.store.news }), 0);\r\n    }\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          {loading ? <Loader minHeight={250} color='primary' /> :\r\n            <News>\r\n              <NewsSwitch>\r\n                <Typography variant='subtitle2'>Только важное </Typography>\r\n                <Switch color='primary' onClick={this.changeImportance.bind(this)} />\r\n              </NewsSwitch>\r\n              {/* eslint-disable-next-line */}\r\n              {news.length > 0 ? this.props.store.news.map((item, i) => {\r\n\r\n                if (importance) {\r\n                  if (item.importance === '1' && NEWS_COUNTER < 3) {\r\n                    NEWS_COUNTER++;\r\n                    return (\r\n                      <div key={i} className=\"news-item\">\r\n                        <div className=\"news-item-header\">\r\n                          <Typography variant='subtitle2'>{item.author}</Typography>\r\n                          <Typography variant='caption'>{item.date}</Typography>\r\n                        </div>\r\n                        <Typography variant='button' className='news-caption' onClick={() => this.goToSingleNews(item.id)}>\r\n                          {item.importance === '1' ? <Tooltip title='Важное!' placement=\"left\"><WarningIcon /></Tooltip> : null}\r\n                          {item.title}\r\n                        </Typography>\r\n                        <div className=\"news-item-text\">\r\n                          <Typography variant='body2'>{item.text}</Typography>\r\n                        </div>\r\n                        <Tooltip title=\"Перейти к комментариям\" placement=\"top-start\">\r\n                          <div\r\n                            onClick={() => this.goToSingleNews(item.id)}\r\n                            className=\"news-item-comment\"\r\n                          >\r\n                            <FontAwesomeIcon icon='comments' />\r\n                            {item.comments} {this.getCommentsNoun(item.comments)}\r\n                          </div>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )\r\n                  }\r\n                } else {\r\n                  while (i < 3) {\r\n                    return (\r\n                      <div key={i} className=\"news-item\">\r\n                        <div className=\"news-item-header\">\r\n                          <Typography variant='subtitle2'>{item.author}</Typography>\r\n                          <Typography variant='caption'>{item.date}</Typography>\r\n                        </div>\r\n                        <Typography variant='button' className='news-caption' onClick={() => this.goToSingleNews(item.id)}>\r\n                          {item.importance === '1' ? <Tooltip title='Важное!' placement=\"top-start\"><WarningIcon /></Tooltip> : null}\r\n                          {item.title}\r\n                        </Typography>\r\n                        <div className=\"news-item-text\">\r\n                          <Typography variant='body2'>{item.text}</Typography>\r\n                        </div>\r\n                        <Tooltip title=\"Перейти к комментариям\" placement=\"top-start\">\r\n                          <div\r\n                            onClick={() => this.goToSingleNews(item.id)}\r\n                            className=\"news-item-comment\"\r\n                          >\r\n                            <FontAwesomeIcon icon='comments' />\r\n                            {item.comments} {this.getCommentsNoun(item.comments)}\r\n                          </div>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )\r\n                  }\r\n                }\r\n              }) :\r\n                <NoNews><Typography variant='h6'>нет новостей</Typography></NoNews>\r\n              }\r\n              <Button\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={() => { this.props.handleChangeSection('news'); window.scrollTo(0, 0) }}\r\n              >\r\n                КО ВСЕМ НОВОСТЯМ\r\n            </Button>\r\n\r\n              {singleNews\r\n                ?\r\n                <SingleNews\r\n                  closeNews={this.closeNews.bind(this)}\r\n                  singleNewsId={singleNewsId}\r\n                  news={news}\r\n                  user={this.props.user}\r\n                  comments={comments}\r\n                  getNoun={this.getNoun}\r\n                  getCommentsNoun={this.getCommentsNoun}\r\n                  reloadComponent={this.reloadComponent}\r\n                />\r\n                : null}\r\n\r\n            </News>}\r\n        </Paper>\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  width: 30%;\r\n`;\r\nconst NewsSwitch = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\nconst News = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n\r\n  .news-item {\r\n    width: 100%;\r\n    padding-bottom: 0;\r\n  }\r\n  svg {\r\n    margin-left: 0;\r\n  }\r\n  .news-caption {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    width: 111%;\r\n    cursor: pointer;\r\n    margin-left: -15px;\r\n    padding: 10px 15px 8px;\r\n    &:hover {\r\n      background: #1976d2;\r\n      color: #ffffff;\r\n      transition: .37s ease;\r\n    }\r\n    svg {\r\n      color: rgba(0,0,0,.15) !important;\r\n      margin-right: 8px;\r\n      font-size: 22px;\r\n    }\r\n  }\r\n\r\n  .news-item-comment {\r\n    width: 111%;\r\n    cursor: pointer;\r\n    margin-left: -15px;\r\n    padding: 12px 15px;\r\n    &:hover {\r\n      background: rgba(0,0,0,0.015);\r\n    }\r\n  }\r\n`;\r\nconst NoNews = styled.div`\r\n  height: 150px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .37;\r\n  margin-bottom: 20px;\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    getNews: (news) => {\r\n      dispatch({ type: 'FETCH_NEWS', payload: news })\r\n    }\r\n  })\r\n)(SideNews);","class Cookie {\r\n  setCookie(cname, cvalue, exdays) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\"+d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n  }\r\n\r\n  getCookie(cname) {\r\n    var name = cname + \"=\";\r\n    var ca = document.cookie.split(';');\r\n    for(var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') {\r\n        c = c.substring(1);\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length);\r\n      }\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  checkCookie() {\r\n    var user = this.getCookie(\"username\");\r\n    if (user !== \"\") {\r\n      alert(\"Welcome again \" + user);\r\n    } else {\r\n      user = prompt(\"Please enter your name:\", \"\");\r\n      if (user !== \"\" && user !== null) {\r\n        this.setCookie(\"username\", user, 365);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cookie;","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport defaultAvatar from '../img/photos/images.png';\r\n\r\nfunction Friend(props) {\r\n  let avatar = '';\r\n\r\n  if (window.location.host.includes('localhost')) {\r\n    avatar = props.friend.avatar;\r\n  } else {\r\n    avatar = `frontend/public/${props.friend.avatar}`;\r\n  }\r\n\r\n  return (\r\n    <ListItem button TouchRippleProps={{ classes: { child: 'touch-ripple' }}} >\r\n      <ListItemAvatar>\r\n        <Avatar\r\n          style={{ height: 100, width: 100 }}\r\n          alt={`${props.friend.name} ${props.friend.surname}`}\r\n          src={props.friend.avatar !== '' ? avatar : defaultAvatar}\r\n        />\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        inset\r\n        primary={`${props.friend.name} ${props.friend.surname}`}\r\n        secondary={props.friend.position}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default Friend;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchIcon from '../img/icons/baseline-search-24px.svg';\r\nimport styled from 'styled-components';\r\n\r\nfunction Search(props) {\r\n  return (\r\n    <SearchWrapper>\r\n      <TextField\r\n        id=\"outlined-adornment-password\"\r\n        variant=\"outlined\"\r\n        type='text'\r\n        label=\"Поиск\"\r\n        margin='dense'\r\n        value={props.searchValue}\r\n        onChange={props.handleSearch}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"Искать в списке коллег\"\r\n              >\r\n                <img alt='Поиск' src={SearchIcon} style={{ opacity: '.37' }} />\r\n              </IconButton>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </SearchWrapper>\r\n  )\r\n}\r\n\r\nconst SearchWrapper = styled.div`\r\n  padding: 20px\r\n  & > div {\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nexport default Search;","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport Friend from './Friend';\r\nimport API from '../functions/API';\r\nimport styled from 'styled-components';\r\nimport Search from './Search';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Loader from '../Loader/Loader';\r\n\r\nexport default class FriendList extends Component {\r\n  state = { \r\n    friends: [], \r\n    initial: [],\r\n    searchValue: '',\r\n    loading: true,\r\n    documentTitle: document.title\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(friends => this.setState({ \r\n        friends: friends.data.filter(friend => friend.id !== this.props.user_id.toString()), \r\n        initial: friends.data.filter(friend => friend.id !== this.props.user_id.toString()), \r\n      })) \r\n      .then(() => this.setState({ loading: false }))   \r\n  }\r\n\r\n  handleSearch = (e) => {\r\n    this.setState({ searchValue: e.target.value });\r\n    const searchValue = e.target.value.toLowerCase();\r\n\r\n    document.title = e.target.value || this.state.documentTitle;\r\n\r\n    let friends = this.state.initial;\r\n    friends = friends.filter(friend => \r\n      friend.name.toLowerCase().includes(searchValue) || \r\n      friend.surname.toLowerCase().includes(searchValue) ||\r\n      friend.position.toLowerCase().includes(searchValue)\r\n    );\r\n    this.setState({ friends });\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.title = this.state.documentTitle;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Paper>\r\n        {\r\n          this.state.loading ? \r\n            <Loader minHeight={370} color='primary' /> \r\n          :\r\n            <FriendWrapper>\r\n            <Search \r\n              handleSearch={this.handleSearch} \r\n              searchValue={this.searchValue}\r\n            />\r\n            <List>\r\n              {this.state.friends.map(friend  => \r\n                <Link \r\n                  key={friend.id} \r\n                  to={`id${friend.id}`}\r\n                  onClick={() => this.props.handleChangeUserId(friend.id)}\r\n                >\r\n                  <Friend\r\n                    friend={friend} \r\n                  />\r\n                </Link>\r\n              )} \r\n            </List>\r\n          </FriendWrapper>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst FriendWrapper = styled.div`\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n  ul {\r\n    padding: 0;\r\n    padding-bottom: 50px;\r\n  }\r\n`;","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport API from './functions/API';\r\nimport InputMask from 'react-input-mask';\r\nimport './css/PersonalInfo.css';\r\nimport defaultAvatar from './img/photos/images.png';\r\nimport { Typography, TextField, Tooltip, Paper, FormControl, FormHelperText, Button, MenuItem, InputLabel } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Done';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Loader from './Loader/Loader';\r\nimport { DatePicker } from 'material-ui-pickers';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass PersonalInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userInfo: {},\r\n      newChildInput: false,\r\n      nameError: true,\r\n      yearError: true,\r\n      childName: '',\r\n      childBirthyear: '',\r\n      loading: true,\r\n      selectedDate: '',\r\n      loadingChild: false\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.fetchUserInfo = this.fetchUserInfo.bind(this);\r\n    this.deleteChild = this.deleteChild.bind(this);\r\n    this.prepareChild = this.prepareChild.bind(this);\r\n    this.handleChild = this.handleChild.bind(this);\r\n    this.addChild = this.addChild.bind(this);\r\n    this.removeInput = this.removeInput.bind(this);\r\n  }\r\n\r\n  fetchUserInfo(action) {\r\n    if (!action) this.setState({ loading: true });\r\n      \r\n    if (action === 'child') this.setState({ loadingChild: true });\r\n\r\n    fetch(`${API}/api/user/info.php?id=${this.props.user_id}`)\r\n      .then(response => response.json())\r\n      .then(userInfo => this.setState({ userInfo, selectedDate: userInfo.birthday }))\r\n      .then(() => this.setState({ loading: false, loadingChild: false }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  // делаем запрос перед рендером\r\n  componentDidMount() {\r\n    this.fetchUserInfo();\r\n  }\r\n\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    let userInfo = { ...this.state.userInfo };\r\n    userInfo[event.target.name] = event.target.value;\r\n    this.setState({ userInfo });\r\n  }\r\n\r\n  prepareChild() {\r\n    this.setState({ newChildInput: true })\r\n  }\r\n\r\n  handleChild(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      nameError: true,\r\n      yearError: true\r\n    })\r\n  }\r\n\r\n  addChild(e) {\r\n    e.preventDefault();\r\n    if (this.state.childName && this.state.childBirthyear) {\r\n      var self = this;\r\n      const formData = new FormData();\r\n      formData.append('name', this.state.childName);\r\n      formData.append('year', this.state.childBirthyear);\r\n      formData.append('parent', self.props.user_logged_id);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/child/add.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          self.fetchUserInfo('child');\r\n          self.setState({ newChildInput: false, childBirthyear: '', childName: '' });\r\n          self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n          console.log(res);\r\n        },\r\n        error: function() {\r\n          self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      if (this.state.newChildInput) {\r\n        this.props.enqueueSnackbar('Нужно заполнить все поля', { variant: 'warning' });\r\n        if (!this.state.childBirthyear) this.setState({ yearError: false })\r\n        if (!this.state.childName) this.setState({ nameError: false })\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteChild(id) {\r\n    var self = this;\r\n    self.setState({ modal: false });\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/child/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.fetchUserInfo('child');\r\n        self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n        console.log(res);\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  removeInput = () => this.setState({ newChildInput: false });\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append('id', this.props.user_logged_id);\r\n    formData.append('adress', $('input[name=\"adress\"]').val());\r\n    formData.append('army_country', $('input[name=\"army_country\"]').val());\r\n    formData.append('army_type', $('input[name=\"army_type\"]').val());\r\n    formData.append('birthday', this.state.selectedDate.slice(0, 10));\r\n    formData.append('district', $('input[name=\"district\"]').val());\r\n    formData.append('fakultet', $('input[name=\"fakultet\"]').val());\r\n    formData.append('name', $('input[name=\"name\"]').val());\r\n    formData.append('phone', $('input[name=\"phone\"]').val());\r\n    formData.append('position', $('input[name=\"position\"]').val());\r\n    formData.append('status', $('input[name=\"status\"]').val());\r\n    formData.append('surname', $('input[name=\"surname\"]').val());\r\n    formData.append('vuz', $('input[name=\"vuz\"]').val());\r\n    formData.append('city', $('input[name=\"city\"]').val());\r\n    formData.append('sex', this.state.userInfo.sex);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/update.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        let response = res.result;\r\n        switch (response) {\r\n          case 0:\r\n            self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n            break;\r\n          case 1:\r\n            self.fetchUserInfo('update');\r\n            self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n            self.addChild(e);\r\n            break;\r\n          default: break;\r\n        }\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  createInput = (label, value, name) => {\r\n    const { user_id, user_logged_id } = this.props;\r\n\r\n    if (user_id === user_logged_id) {\r\n      return (\r\n        <TextField\r\n          label={label}\r\n          value={value}\r\n          fullWidth={true}\r\n          name={name}\r\n          margin='dense'\r\n          InputLabelProps={{ shrink: true }}\r\n          onChange={this.handleChange}\r\n          variant=\"outlined\"\r\n        />\r\n      )\r\n    } else {\r\n      return (\r\n        <Naked>\r\n          {name === 'name' || name === 'surname' || name === 'position' ? (\r\n            <FormControl>\r\n              <InputBase value={value} />\r\n            </FormControl>\r\n          ) : (\r\n              <FormControl>\r\n                <InputLabel htmlFor={name}>{label}</InputLabel>\r\n                <InputBase id={name} value={value} />\r\n              </FormControl>\r\n            )}\r\n        </Naked>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loading, userInfo, newChildInput, childName, childBirthyear, nameError, yearError } = this.state;\r\n    const { user_id, user_logged_id, user } = this.props;\r\n    let childrens = {};\r\n    let avatar = user.avatar;\r\n\r\n    if (userInfo.childs) childrens = JSON.parse(userInfo.childs.replace(/\\//g, ''));\r\n    if (!window.location.host.includes('localhost')) avatar = `frontend/public/${avatar}`;\r\n\r\n    return (\r\n      <Paper className=\"personal\">\r\n\r\n        {!loading ? <Form id=\"personal-info\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n          <div className=\"personal-header\">\r\n            <div className=\"personal-header__photo\">\r\n              <div style={{ background: `url(${avatar ? avatar : defaultAvatar}) no-repeat center/cover` }}></div>\r\n            </div>\r\n            <div className={user_logged_id === user_id ? 'personal-header__info' : null}>\r\n              {user_logged_id === user_id ? (\r\n                <Fragment>\r\n                  {this.createInput('Имя', userInfo.name, 'name')}\r\n                  {this.createInput('Фамилия', userInfo.surname, 'surname')}\r\n                  {this.createInput('Должность', userInfo.position, 'position')}\r\n                </Fragment>\r\n              ) : (\r\n                  <Fragment>\r\n                    <InputBase className='user-header' value={userInfo.name + ' ' + userInfo.surname} />\r\n                    <span className='user-position'>{this.createInput('Должность', userInfo.position, 'position')}</span>\r\n                  </Fragment>\r\n                )}\r\n\r\n              {user_logged_id === user_id ? (\r\n                <InputMask\r\n                  mask=\"+7 (999) 99-99-999\"\r\n                  value={userInfo.phone}\r\n                  onChange={this.handleChange}\r\n                >\r\n                  {() => <TextField\r\n                    label='Номер телефона'\r\n                    name='phone'\r\n                    fullWidth={true}\r\n                    margin='dense'\r\n                    InputLabelProps={{ shrink: true }}\r\n                    variant=\"outlined\"\r\n                  />}\r\n                </InputMask>) : (\r\n                  <Naked>\r\n                    <InputBase id='phone' style={{ pointerEvents: 'none', padding: 0 }} value={userInfo.phone} />\r\n                  </Naked>\r\n                )}\r\n\r\n              {user_logged_id === user_id ? (\r\n                <FormControl >\r\n                  <DatePicker\r\n                    variant='outlined'\r\n                    name=\"birthday\"\r\n                    margin='dense'\r\n                    label='Дата рождения'\r\n                    format={'Do MMMM YYYY'}\r\n                    value={this.state.selectedDate ? this.state.selectedDate : userInfo.birthday}\r\n                    fullWidth={true}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    onChange={this.handleDateChange}\r\n                    aria-describedby=\"component-helper-text\"\r\n                  />\r\n                  <FormHelperText id=\"component-helper-text\">*Год рождения будет виден только руководству</FormHelperText>\r\n                </FormControl>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Семья</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {user_logged_id === user_id ? (\r\n              <TextField\r\n                select\r\n                label=\"Семейное положение\"\r\n                name=\"status\"\r\n                value={userInfo.status || ''}\r\n                onChange={this.handleChange}\r\n                margin=\"dense\"\r\n                variant='outlined'\r\n                fullWidth={true}\r\n                InputLabelProps={{ shrink: true }}\r\n              >\r\n                {userInfo.sex === 'женский' ?\r\n                  <MenuItem value=\"Не замужем\">Не замужем</MenuItem> :\r\n                  <MenuItem value=\"Не женат\">Не женат</MenuItem>\r\n                }\r\n                {userInfo.sex === 'женский' ?\r\n                  <MenuItem value=\"Замужем\">Замужем</MenuItem> :\r\n                  <MenuItem value=\"Женат\">Женат</MenuItem>\r\n                }\r\n                <MenuItem value=\"В гражданском браке\">В гражданском браке</MenuItem>\r\n              </TextField>\r\n            ) : (\r\n                <Naked>\r\n                  <FormControl>\r\n                    <InputLabel htmlFor='status'>Семейное положение</InputLabel>\r\n                    <InputBase id='status' value={userInfo.status} />\r\n                  </FormControl>\r\n                </Naked>\r\n              )}\r\n          </div>\r\n          <div className=\"personal-section\">\r\n          \r\n              <Fragment>\r\n                <div className=\"personal-section__header\">\r\n                  <Typography variant='h6' color='primary'>Дети</Typography>\r\n                  <hr />\r\n                </div>\r\n                {this.state.loadingChild ? <Loader minHeight={120} color='primary' /> :\r\n                <Childrens>\r\n                  {Object.keys(childrens).map(child =>\r\n                    <Children key={childrens[child].id}>\r\n                      <Typography variant='subtitle2'>Имя: {childrens[child].child_name} </Typography>\r\n                      <Typography variant='caption'>{childrens[child].child_birthyear} г.р.</Typography>\r\n                      <Tooltip title=\"Удалить\" placement=\"right\"><Clear onClick={() => this.deleteChild(childrens[child].id)} /></Tooltip>\r\n                    </Children>\r\n                  )}\r\n                </Childrens>}\r\n              </Fragment>\r\n\r\n            {newChildInput ? (<NewChild>\r\n              <div>\r\n                <TextField\r\n                  label='Имя'\r\n                  value={childName}\r\n                  fullWidth={true}\r\n                  name='childName'\r\n                  margin='dense'\r\n                  error={!nameError}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  onChange={this.handleChild}\r\n                  variant=\"outlined\"\r\n                />\r\n                <TextField\r\n                  label='Год рождения'\r\n                  value={childBirthyear}\r\n                  fullWidth={true}\r\n                  name='childBirthyear'\r\n                  margin='dense'\r\n                  type='date'\r\n                  error={!yearError}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  onChange={this.handleChild}\r\n                  variant=\"outlined\"\r\n                />\r\n              </div>\r\n              <span>\r\n                <Tooltip title=\"Добавить\" placement=\"right\">\r\n                  <AddIcon onClick={this.addChild} />\r\n                </Tooltip>\r\n                <Tooltip title=\"Отменить\" placement=\"right\">\r\n                  <Clear onClick={() => this.setState({ newChildInput: false, childBirthyear: '', childName: '', nameError: true, yearError: true })} />\r\n                </Tooltip>\r\n              </span>\r\n            </NewChild>) : null}\r\n\r\n            {user_logged_id === user_id ? (\r\n              <ChildBtns>\r\n                <Button variant='contained' color='primary' onClick={newChildInput ? this.addChild : this.prepareChild}>Добавить</Button>\r\n              </ChildBtns>) : null}\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Контакты</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {this.createInput('Родной город', userInfo.city, 'city')}\r\n            {this.createInput('Области/края', userInfo.district, 'district')}\r\n            {this.createInput('Актуальный адрес', userInfo.adress, 'adress')}\r\n\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Образование</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {this.createInput('ВУЗ', userInfo.vuz, 'vuz')}\r\n            {this.createInput('Факультет', userInfo.fakultet, 'fakultet')}\r\n\r\n          </div>\r\n          {userInfo.sex === 'мужской' ?\r\n            <div className=\"personal-section\">\r\n              <div className=\"personal-section__header\">\r\n                <Typography variant='h6' color='primary'>Служба</Typography>\r\n                <hr />\r\n              </div>\r\n\r\n              {this.createInput('Страна', userInfo.army_country, 'army_country')}\r\n              {this.createInput('Род войск', userInfo.army_type, 'army_type')}\r\n            </div> : null}\r\n\r\n          {user_logged_id === user_id ? <Btn><Button type='submit' variant='contained' color='primary' onClick={this.handleSubmit}>Обновить данные</Button></Btn> : null}\r\n        </Form> : <Loader minHeight={400} color='primary' />}\r\n      </Paper >\r\n    )\r\n  }\r\n}\r\nconst Form = styled.form`\r\n  padding-bottom: 30px;\r\n  label {\r\n    text-transform: lowercase;\r\n  }\r\n  .user-header {\r\n    color: #1976d2;\r\n    font-size: 20px;\r\n  }\r\n  .user-position {\r\n    display: block;\r\n    margin-top: -10px;\r\n    & > div > div {\r\n      margin: 0;\r\n      padding: 0;\r\n      & > div > input {\r\n        color: rgba(0,0,0,.54);\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  fieldset {\r\n    border: none;\r\n  }\r\n`;\r\nconst Btn = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\nconst Children = styled.div`\r\n  width: 30%;\r\n  position: relative;\r\n  margin-bottom: 15px;\r\n  margin-right: 3%;\r\n\r\n  &:hover > svg {\r\n    display: block;\r\n  } \r\n\r\n  svg {\r\n    display: none;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    opacity: .5;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    &:hover {\r\n      opacity: .8;\r\n    }\r\n  }\r\n`;\r\nconst Childrens = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 20px 0 5px;\r\n  padding-left: 15px;\r\n`;\r\nconst NewChild = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  & > div {\r\n    width: 90%;\r\n  }\r\n\r\n  svg {\r\n    opacity: .5;\r\n    cursor: pointer;\r\n    font-size: 24px;\r\n    &:hover {\r\n      opacity: .8;\r\n    }\r\n  }\r\n`;\r\nconst ChildBtns = styled.div`\r\n  margin-top: 15px;\r\n  button {\r\n    margin-right: 15px;\r\n  }\r\n  padding-left: 15px;\r\n`;\r\nconst Naked = styled.div`\r\n  width: 100%;\r\n  display: inline-block;\r\n  & > div {\r\n    display: block;\r\n    margin-bottom: 10px;\r\n    padding-left: 37px;\r\n  }\r\n  & > div > div {\r\n    display: block;\r\n    pointer-events: none;\r\n    margin-top: -5px;\r\n  }\r\n  label {\r\n    font-size: 12px;\r\n    position: relative;\r\n    text-transform: lowercase;\r\n  }\r\n  .inline-input {\r\n    display: inline-flex;\r\n    margin-left: 10px;\r\n  }\r\n`;\r\nexport default withSnackbar(PersonalInfo);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { Fab as Fabulous } from '@material-ui/core';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst styles = theme => ({\r\n  fixed: {\r\n    position: 'fixed',\r\n    bottom: theme.spacing.unit * 2,\r\n    right: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nfunction Fab(props) {\r\n  const { classes } = props;\r\n  return (\r\n    <div>\r\n      <Tooltip title={props.title} aria-label={props.title}>\r\n        <Fabulous color={props.secondary ? 'secondary' : 'primary'} className={classes.fixed}>\r\n          <AddIcon />\r\n        </Fabulous>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n}\r\n\r\nFab.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Fab);","import React from 'react';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\nexport default function ModalWindow(props) {\r\n  return (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={props.handleClose}\r\n    >\r\n      {props.component}\r\n    </Modal>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport Select from 'react-select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography, FormControlLabel, Checkbox, NoSsr, TextField, Paper, Chip, MenuItem } from '@material-ui/core';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    height: 120,\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n      0.08,\r\n    ),\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n  },\r\n  singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  }\r\n});\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Menu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass IntegrationReactSelect extends React.Component {\r\n\r\n  render() {\r\n    const { classes, theme } = this.props;\r\n    \r\n    const users = this.props.users.map(user => ({\r\n      value: user.id,\r\n      label: `${user.name} ${user.surname}`,\r\n    }));\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <NoSsr>\r\n          <Select\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            textFieldProps={{\r\n              label: 'Сотрудники',\r\n              InputLabelProps: {\r\n                shrink: true,\r\n              },\r\n            }}\r\n            options={users}\r\n            components={components}\r\n            value={this.props.multi}\r\n            onChange={this.props.handleChange('multi')}\r\n            placeholder=\"Выберите сотрудников\"\r\n            isMulti\r\n          />\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                onChange={this.props.changeImportance}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Отметить как важную\"\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nIntegrationReactSelect.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(IntegrationReactSelect);","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { TimePicker, DatePicker } from 'material-ui-pickers';\r\n\r\nclass MaterialUIPickers extends React.Component {\r\n  render() {\r\n    return (\r\n      <Grid container justify=\"space-around\" style={{ paddingBottom: 30 }}>\r\n        <DatePicker\r\n          margin=\"normal\"\r\n          label=\"Выберите дату\"\r\n          value={this.props.selectedDate}\r\n          fullWidth={true}\r\n          onChange={this.props.handleDateChange}\r\n        />\r\n        <TimePicker\r\n          ampm={false}\r\n          margin=\"normal\"\r\n          label=\"Выберите время\"\r\n          value={this.props.selectedTime}\r\n          locale='ru'\r\n          fullWidth={true}\r\n          onChange={this.props.handleTimeChange}\r\n        />\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MaterialUIPickers;","import React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function TextInput(props) {\r\n  return (\r\n    <TextArea>\r\n      <TextField\r\n        label=\"Поставленная задача\"\r\n        multiline\r\n        variant=\"outlined\"\r\n        name='text'\r\n        onChange={props.handleTextChange}\r\n        value={props.text}\r\n        required\r\n      />\r\n    </TextArea>\r\n  )\r\n}\r\n\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n  height: 150px;\r\n\r\n  textarea {\r\n    max-height: 130px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Autocomplete from './Autocomplete';\r\nimport Pickers from './Pickers';\r\nimport TextInput from './TextInput';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  actionsContainer: {\r\n    marginBottom: theme.spacing.unit * 2,\r\n  },\r\n  resetContainer: {\r\n    padding: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nfunction getSteps() {\r\n  return ['Выберите сотрудника и важность', 'Назначьте дату и время', 'Поставьте задачу'];\r\n}\r\n\r\nfunction getStepContent(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return `Вы можете выбрать одного или более сотрудников. К тому же можете установить повышенную важность задачи.`;\r\n    case 1:\r\n      return 'Выберите дату и время в соответствующих полях.';\r\n    case 2:\r\n      return `Сотрудник сможет найти поставленные ему задачи в уведомлениях.`;\r\n    default:\r\n      return 'Unknown step';\r\n  }\r\n}\r\n\r\nclass VerticalLinearStepper extends React.Component {\r\n  state = {\r\n    activeStep: 0,\r\n  };\r\n\r\n  handleNext = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep + 1,\r\n    }));\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep - 1,\r\n    }));\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      activeStep: 0,\r\n    });\r\n  };\r\n\r\n  checkDisabled = (step, multi, date, time, text) => {\r\n    if (step === 0 && multi.length !== 0) return false;\r\n    if (step === 1 && typeof date === 'string' && typeof time === 'string') return false;\r\n    if (step === 2 && text.length > 0) return false;\r\n    \r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const { classes, users, multi, selectedTime, selectedDate, text } = this.props;\r\n    const steps = getSteps();\r\n    const { activeStep } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n          {steps.map((label, index) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n              <StepContent>\r\n                <Typography>{getStepContent(index)}</Typography>\r\n                <div className={classes.actionsContainer}>\r\n                  <div>\r\n                    <Button\r\n                      disabled={activeStep === 0}\r\n                      onClick={this.handleBack}\r\n                      className={classes.button}\r\n                    >\r\n                      Назад\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      onClick={activeStep === steps.length - 1 ? () => {this.props.handleSubmit(); this.handleNext()} : this.handleNext}\r\n                      className={classes.button}\r\n                      disabled={this.checkDisabled(activeStep, multi, selectedDate, selectedTime, text)} \r\n                    >\r\n                      {activeStep === steps.length - 1 ? 'Финиш' : 'Дальше'}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </StepContent>\r\n            </Step>\r\n          ))}\r\n                        \r\n        </Stepper>\r\n\r\n        {/* Контент */}\r\n        {activeStep === 0 \r\n          ? <Autocomplete \r\n              users={users} \r\n              multi={multi}\r\n              handleChange={this.props.handleChange}\r\n              changeImportance={this.props.changeImportance}\r\n            />\r\n          : activeStep === 1\r\n          ? <Pickers \r\n              selectedTime={selectedTime} \r\n              selectedDate={selectedDate}\r\n              handleDateChange={this.props.handleDateChange}\r\n              handleTimeChange={this.props.handleTimeChange}\r\n            />\r\n          : activeStep === 2\r\n          ? <TextInput\r\n              text={text}\r\n              handleTextChange={this.props.handleTextChange}\r\n            />\r\n          : null } \r\n\r\n        {activeStep === steps.length && (\r\n          <Paper square elevation={0} className={classes.resetContainer}>\r\n            <Typography>Задача успешно поставлена.</Typography>\r\n            <Button \r\n              onClick={() => {this.handleReset(); this.props.resetAll()}}\r\n              variant=\"contained\"               \r\n              color=\"primary\"\r\n              className={classes.button}\r\n            >\r\n              Поставить ещё задачу\r\n            </Button>\r\n            <Button \r\n              onClick={this.props.handleClose} \r\n              className={classes.button}\r\n            >\r\n              Закрыть\r\n            </Button>\r\n          </Paper>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVerticalLinearStepper.propTypes = {\r\n  classes: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(VerticalLinearStepper);","import React, { Component } from 'react';\r\nimport { Paper, Typography, Tooltip } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport API from '../functions/API';\r\nimport Stepper from './Stepper';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass NewTask extends Component {\r\n  state = {\r\n    selectedDate: new Date(),\r\n    selectedTime: new Date(),\r\n    users: [],\r\n    multi: [],\r\n    text: '',\r\n    importance: 0\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(users => this.setState({ users: users.data.filter(user => Number(user.id) !== this.props.user_logged_id) }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChange = name => value => this.setState({ [name]: value });\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n  handleTimeChange = time => this.setState({ selectedTime: time.format() });\r\n  handleTextChange = e => this.setState({ text: e.target.value })\r\n  changeImportance = () => this.setState({ importance: !this.state.importance });\r\n  resetAll = () => {\r\n    this.setState({\r\n      selectedDate: new Date(),\r\n      selectedTime: new Date(),\r\n      multi: [],\r\n      text: '',\r\n      importance: 0\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const { multi, selectedTime, selectedDate, text, importance } = this.state;\r\n    const formData = new FormData();\r\n    const self = this;\r\n    let forWho = [];\r\n    let date = new Date();\r\n    multi.forEach(user => forWho.push(`for${user.value}`));\r\n\r\n    formData.append('from', this.props.user_logged_id);\r\n    formData.append('date', date.toLocaleDateString());\r\n    formData.append('for', forWho.join(','));\r\n    formData.append('time', `${date.getHours() < 10 ? '0' + date.getHours() : date.getHours()}:${date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()}`);\r\n    formData.append('until_date', selectedDate.slice(0, 10));\r\n    formData.append('text', text);\r\n    formData.append('until_time', selectedTime.slice(11, 16));\r\n    formData.append('importance', importance ? '1' : '0');\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/add.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.props.onAddNewTask(tasks.data))\r\n          .then(() => self.props.enqueueSnackbar('Задача была поставлена', { variant: 'success' }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n  \r\n  render() {\r\n    const { users, multi, selectedTime, selectedDate, text } = this.state;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          <span className='closeNewTask' onClick={this.props.handleClose}>\r\n            <Tooltip title=\"Закрыть\" placement=\"left\"><CloseIcon /></Tooltip>\r\n          </span>\r\n          <Typography variant='h5'>Новая Задача</Typography>\r\n          <Stepper\r\n            users={users}\r\n            multi={multi}\r\n            text={text}\r\n            selectedTime={selectedTime}\r\n            selectedDate={selectedDate}\r\n            handleChange={this.handleChange}\r\n            handleTextChange={this.handleTextChange}\r\n            handleDateChange={this.handleDateChange}\r\n            handleTimeChange={this.handleTimeChange}\r\n            changeImportance={this.changeImportance}\r\n            resetAll={this.resetAll}\r\n            handleClose={this.props.handleClose}\r\n            handleSubmit={this.handleSubmit}\r\n          />\r\n        </Paper>\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  max-width: 600px;\r\n  min-height: 300px;\r\n  height: fit-content;\r\n  margin: auto;\r\n  background: #ffffff;\r\n  border-radius: 10px;\r\n  outline: none;\r\n\r\n  .listFor {\r\n    max-height: 220px;\r\n    margin-top: 20px;\r\n    overflow: auto;\r\n  }\r\n  .listFor::-webkit-scrollbar {\r\n    width: 10px;\r\n  }\r\n  .listFor::-webkit-scrollbar-track {\r\n    background-color: #ebebeb;\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n  }\r\n  .listFor::-webkit-scrollbar-thumb {\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n    background: #1976d2; \r\n  }\r\n\r\n  & > div {\r\n    height: fit-content;\r\n    padding: 20px 30px;\r\n  }\r\n   \r\n  .closeNewTask svg {\r\n    font-size: 30px;\r\n    color: #1976d2;\r\n    opacity: .6;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: 20px;\r\n    top: 20px;\r\n\r\n    :hover {\r\n      opacity: .8;\r\n      transition: .37s ease;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({ store: state }),\r\n  dispatch => ({\r\n    onAddNewTask: (task) => {\r\n      dispatch({ type: 'ADD_TASK', payload: task })\r\n    }\r\n  })\r\n)(withSnackbar(NewTask));","import React from 'react';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport { Typography, ExpansionPanelDetails, ExpansionPanelSummary, ExpansionPanel, Tooltip, Button } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\n\r\nexport default class Task extends React.Component {\r\n\r\n  getUserNames = (users) => {\r\n    let usersId = users.split(',');\r\n    let result = 'Для: ';\r\n\r\n    usersId.forEach(id => {\r\n      result += `${this.props.users.find(user => user.id === id.slice(3)).name} `;\r\n      result += `${this.props.users.find(user => user.id === id.slice(3)).surname}, `;\r\n    })\r\n    return result;\r\n  }\r\n\r\n  getAdresant = (id) => {\r\n    let initial = \"От: \";\r\n    // eslint-disable-next-line\r\n    if (id = this.props.user_logged_id) return initial += 'Вас';\r\n\r\n    if (this.props.users.length > 0) {\r\n      initial += this.props.users.find(user => user.id === this.props.task.from).name;\r\n      initial += ` ${this.props.users.find(user => user.id === this.props.task.from).surname}`;\r\n      return initial;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const now = moment(new Date()); //todays date\r\n    const end = moment(this.props.task.until_date); // another date\r\n    const difference = moment.duration(end.diff(now))._milliseconds;\r\n\r\n    return (\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <Typography variant='caption'>\r\n            <Typography variant='subtitle2' style={styles.flex}>\r\n              Получено: {this.props.task.date} в {`${this.props.task.time} `}\r\n              {this.props.task.importance === '1' ? <Tooltip title=\"Отмечено как 'Важное'\" placement=\"top-start\"><Icon><WarningIcon /></Icon></Tooltip> : null}\r\n            </Typography>\r\n            {this.getAdresant(this.props.task.from)}\r\n            <TaskStatus>\r\n              <Typography variant='caption' className={classNames({\r\n                'task-completed': this.props.task.status === '1',\r\n                'task-doing': this.props.task.status === '0',\r\n                'task-late': difference < 0\r\n              })}>\r\n                {this.props.task.status === '1' && difference > 0 ? \"Выполнена\" :\r\n                  this.props.task.status === '0' && difference > 0 ? \"Выполняется\" :\r\n                    \"Просрочена\"}\r\n              </Typography>\r\n            </TaskStatus>\r\n          </Typography>\r\n\r\n          <DeleteIcon onClick={() => this.props.handleConfirm(this.props.task.id)}>\r\n            <Tooltip title=\"Удалить\" placement=\"left\">\r\n              <Delete />\r\n            </Tooltip>\r\n          </DeleteIcon>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={styles.details}>\r\n          <Typography variant='h6'>Задача: {this.props.task.text}  </Typography>\r\n          <Footer>\r\n            <div>\r\n              <Typography variant='caption'>{this.props.users.length > 0 ? this.getUserNames(this.props.task.for).slice(0, -2) : null}</Typography>\r\n              <Typography variant='subtitle2'>Выполнить до: {this.props.task.until_date.split('-').reverse().join('.')}, {this.props.task.until_time}</Typography>\r\n            </div>\r\n            {this.props.task.status === '0' && this.props.task.from.includes(`for${this.props.user_logged_id}`) ?\r\n              difference < 0 ?\r\n                <Tooltip title=\"Нельзя выполнить просроченную задачу\" placement=\"top-start\" leaveDelay={200}>\r\n                  <span><Button disabled={true} variant='contained' color='primary'>Выполнить</Button></span>\r\n                </Tooltip> :\r\n                <Button\r\n                  onClick={() => this.props.handleCompleted(this.props.task.id)}\r\n                  variant='contained'\r\n                  color='primary'\r\n                >\r\n                  Выполнить</Button>\r\n              : null}\r\n          </Footer>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    )\r\n  }\r\n}\r\nconst styles = {\r\n  flex: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  details: {\r\n    flexDirection: 'column'\r\n  }\r\n}\r\nconst Icon = styled.div`\r\n  svg {\r\n    color: rgba(0,0,0,.15) !important;\r\n    margin-left: 8px;\r\n    font-size: 22px;\r\n  }\r\n`;\r\nconst DeleteIcon = styled.span`\r\n  svg {\r\n    font-size: 26px;\r\n    color: rgba(0,0,0,0.54);\r\n    right: 55px;\r\n    padding: 5px;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    position: absolute;\r\n  }\r\n`;\r\nconst Footer = styled.div`\r\n  margin-top: 30px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\nconst TaskStatus = styled.span`\r\n  .task-completed {\r\n    color: darkgreen;\r\n  }\r\n  .task-doing {\r\n    color: darkblue;\r\n  }\r\n  .task-late {\r\n    color: darkred;\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ConfirmDelete(props) {\r\n  return (\r\n    <Wrapper>\r\n      <Paper>\r\n        <Icon onClick={props.handleClose}>\r\n          <CloseIcon />\r\n        </Icon>\r\n        <Typography variant='body1'>Вы уверены, что хотите удалить задачу?</Typography>\r\n        <Typography variant='caption'>Вся информация по задаче будет удалена безвозвратно.</Typography>\r\n        <ButtonContainer>\r\n          <Button variant='contained' color='secondary' onClick={props.handleDelete}>Удалить</Button>\r\n          <Button variant='text' color='default' onClick={props.handleClose}>Отмена</Button>\r\n        </ButtonContainer>\r\n      </Paper>\r\n    </Wrapper>\r\n  )\r\n}\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  height: 200px;\r\n  width: 400px;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  outline: none;\r\n  & > div {\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    padding: 30px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n  }\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 30px;\r\n  button {\r\n    margin-right: 25px;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  svg {\r\n    cursor: pointer;\r\n    color: rgba(0,0,0,.54);\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n  }\r\n`","import React, { Component, Fragment } from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport Fab from '../Fab/Fab';\r\nimport Modal from '../Modal/Modal';\r\nimport NewTask from './NewTask';\r\nimport styled from 'styled-components';\r\nimport API from '../functions/API';\r\nimport Task from './Task';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport ConfirmDelete from './ConfirmDelete';\r\nimport Loader from '../Loader/Loader';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass Tasks extends Component {\r\n  state = {\r\n    open: false,\r\n    confirm: false,\r\n    preparedToDelete: null,\r\n    tasks: [],\r\n    initial: [],\r\n    users: [],\r\n    disabledButton: 1,\r\n    loading: true\r\n  }\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(tasks => this.props.getTasks(tasks.data))\r\n      .catch(err => console.log(err))\r\n\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(users => this.setState({ users: users.data }))\r\n      .then(() => this.setState({ loading: false }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleOpen = () => this.setState({ open: true });\r\n  handleConfirm = id => this.setState({ confirm: true, preparedToDelete: id });\r\n  handleClose = () => this.setState({ open: false, confirm: false, preparedToDelete: null });\r\n\r\n  handleCompleted = (id) => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    let date = new Date();\r\n    this.setState({ loading: true })\r\n    const done_date = date.toLocaleDateString();\r\n    const done_time = `${date.getHours() < 10 ? '0' + date.getHours() : date.getHours()}:${date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()}`;\r\n\r\n    formData.append('id', id);\r\n    formData.append('done_date', done_date);\r\n    formData.append('done_time', done_time);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/complete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${self.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.setState({ tasks: tasks.data, initial: tasks.data }))\r\n          .then(() => self.props.enqueueSnackbar('Задача отмечена как \"Выполненная\"', { variant: 'success' }))\r\n          .then(() => self.props.markAsCompleted(self.state.tasks))\r\n          .then(() => this.setState({ loading: false }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте снова', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n\r\n  handleFilter = (id, filter) => {\r\n    this.setState({ disabledButton: id });\r\n    let filtered = this.state.initial;\r\n\r\n    if (filter === 'initial') this.props.onFilter(this.state.initial);\r\n    if (filter === 'transfered') {\r\n      filtered = filtered.filter(item => Number(item.from) === this.props.user_logged_id);\r\n      this.props.onFilter(filtered);\r\n    }\r\n    if (filter === 'completed') {\r\n      filtered = filtered.filter(item => item.status === '1');\r\n      this.props.onFilter(filtered);\r\n    }\r\n  }\r\n\r\n  handleDelete = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    this.setState({ loading: true })\r\n    formData.append('id', this.state.preparedToDelete);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${self.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.setState({ tasks: tasks.data || [], initial: tasks.data || [] }))\r\n          .then(() => self.props.enqueueSnackbar('Задача успешно была удалена', { variant: 'info' }))\r\n          .then(() => self.props.onDeleteTask(self.state.preparedToDelete))\r\n          .then(() => self.handleClose())\r\n          .then(() => this.setState({ loading: false }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте снова', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { open, users, disabledButton } = this.state;\r\n\r\n    if (this.state.initial.length === 0) {\r\n      setTimeout(() => this.setState({ initial: this.props.store.tasks, tasks: this.props.store.tasks }), 0);\r\n    }\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          {!this.state.loading ?\r\n            <Fragment>\r\n              <Filters>\r\n                <Button\r\n                  onClick={() => this.handleFilter(1, 'initial')}\r\n                  variant={disabledButton === 1 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 1 ? true : false}>Все задачи</Button>\r\n                <Button\r\n                  color=\"primary\"\r\n                  onClick={() => this.handleFilter(2, 'transfered')}\r\n                  variant={disabledButton === 2 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 2 ? true : false}\r\n                >\r\n                  Переданные\r\n            </Button>\r\n                <Button\r\n                  onClick={() => this.handleFilter(3, 'completed')}\r\n                  variant={disabledButton === 3 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 3 ? true : false}\r\n                  color=\"secondary\">\r\n                  Выполненные\r\n            </Button>\r\n              </Filters>\r\n              {this.props.store.tasks.length > 0\r\n                ?\r\n                this.props.store.tasks.map(task =>\r\n                  <Task\r\n                    key={task.id}\r\n                    task={task}\r\n                    users={users}\r\n                    user_logged_id={this.props.user_logged_id}\r\n                    handleCompleted={this.handleCompleted}\r\n                    handleConfirm={this.handleConfirm.bind(this)}\r\n                  />)\r\n                :\r\n                <Typography className='no-tasks' variant='caption'>нет задач</Typography>}\r\n            </Fragment>\r\n            : <Loader minHeight={300} color='primary' />}\r\n        </Paper>\r\n\r\n\r\n        {/* Button to add task */}\r\n        <span onClick={this.handleOpen}><Fab title='Добавить задачу' /></span>\r\n\r\n        {/* Add new task modal */}\r\n        <Modal\r\n          open={open}\r\n          handleClose={this.handleClose.bind(this)}\r\n          component={\r\n            <NewTask\r\n              handleClose={this.handleClose.bind(this)}\r\n              user_logged_id={this.props.user_logged_id}\r\n            />}\r\n        />\r\n\r\n        {/* Confirm delete modal */}\r\n        <Modal\r\n          open={this.state.confirm}\r\n          handleClose={this.handleClose.bind(this)}\r\n          component={<ConfirmDelete\r\n            handleDelete={this.handleDelete}\r\n            handleClose={this.handleClose.bind(this)}\r\n          />}\r\n        />\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  .no-tasks {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    opacity: .37;\r\n    height: 300px;\r\n    font-size: 20px;\r\n  }\r\n`;\r\nconst Filters = styled.div`\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  button {\r\n    width: 33.3%;\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    markAsCompleted: (tasks) => {\r\n      dispatch({ type: 'MARK_COMPLETED', payload: tasks })\r\n    },\r\n    onDeleteTask: (task) => {\r\n      dispatch({ type: 'DELETE_TASK', payload: task })\r\n    },\r\n    onFilter: (tasks) => {\r\n      dispatch({ type: 'FILTER_TASKS', payload: tasks })\r\n    },\r\n    getTasks: (tasks) => {\r\n      dispatch({ type: 'FETCH_TASKS', payload: tasks })\r\n    }\r\n  })\r\n)(withSnackbar(Tasks));","import React, { Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Checkbox, Button, FormControlLabel, Typography, TextField, Tooltip } from '@material-ui/core';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function NewNews(props) {\r\n  let avatar = '';\r\n  if (!window.location.host.includes('localhost')) {\r\n    avatar = `frontend/public/${props.user.avatar}`;\r\n  } else {\r\n    avatar = props.user.avatar;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n        <Header>\r\n          <Typography variant='button'>Новая новость</Typography> \r\n\r\n          <Tooltip placement='left' title='Закрыть'>\r\n            <Icon><CloseIcon onClick={props.closeNews} /></Icon>\r\n          </Tooltip>\r\n\r\n        </Header>\r\n        <Body>\r\n          <form action=\"\" method=\"POST\" onSubmit={props.submitNews}>\r\n            <Topic>\r\n              {props.user.avatar === ''\r\n                ? <div className='image' alt={`${props.user.name} ${props.user.surname}`} style={{ background: `url(${defaultAvatar}) no-repeat center/cover` }} />\r\n                : <div className='image' alt={`${props.user.name} ${props.user.surname}`} style={{ background: `url(${avatar}) no-repeat center/cover` }} />\r\n              }\r\n              <TextField\r\n                label=\"Заголовок\"\r\n                value={props.newNewsTopic}\r\n                onChange={props.handleChange}\r\n                error={props.invalidTopic}\r\n                variant=\"outlined\"\r\n                name='newNewsTopic'\r\n                type='text'\r\n                required\r\n              />\r\n            </Topic>\r\n            <TextArea>\r\n              <TextField\r\n                label=\"Текст новости\"\r\n                multiline\r\n                variant=\"outlined\"\r\n                name='newNewsText'\r\n                error={props.invalidText}\r\n                onChange={props.handleChange}\r\n                value={props.newNewsText}\r\n                required\r\n              />\r\n            </TextArea>\r\n            <Footer>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={props.newNewsImportance}\r\n                    onChange={props.changeImportance}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label=\"Отметить как важное\"\r\n              />\r\n              <Button onClick={props.submitNews} variant='contained' color='primary'>Добавить новость</Button>\r\n            </Footer>\r\n          </form>\r\n        </Body>\r\n      </Container>\r\n      <Wrapper onClick={props.closeNews}></Wrapper>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  background: rgba(0,0,0, .5);\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  z-index: 30;\r\n`;\r\nconst Container = styled.div`\r\n  background: #ffffff;\r\n  width: 600px;\r\n  position: fixed;\r\n  top: 150px;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  border-radius: 10px;\r\n  z-index: 37;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n\r\n  .close {\r\n    top: -5px;\r\n  }\r\n`;\r\nconst Header = styled.div`\r\n  display: flex;\r\n  height: 50px;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\nconst Body = styled.div`\r\n  .image {\r\n    width: 56px;\r\n    height: 56px;\r\n    border-radius: 50%;\r\n    display: inline-block;\r\n  }\r\n  padding: 0 25px;\r\n`;\r\nconst Footer = styled.div`\r\n  display: flex;\r\n  height: 90px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 85%;\r\n  margin-left: 15%;\r\n`;\r\nconst Topic = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 5px;\r\n\r\n  & > div {\r\n    width: 85%;\r\n  }\r\n`;\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n  height: 150px;\r\n\r\n  textarea {\r\n    max-height: 130px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 85%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 20px;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;","import React from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ConfirmDelete(props) {\r\n  return (\r\n    <Wrapper>\r\n      <Paper>\r\n        <Icon onClick={props.closeNews}>\r\n          <CloseIcon />\r\n        </Icon>\r\n        <Typography variant='body1'>Вы уверены, что хотите удалить новость?</Typography>\r\n        <Typography variant='caption'>Вся информация по новости будет удалена безвозвратно.</Typography>\r\n        <ButtonContainer>\r\n          <Button variant='contained' color='secondary' onClick={props.removeNews}>Удалить</Button>\r\n          <Button variant='text' color='default' onClick={props.closeNews}>Отмена</Button>\r\n        </ButtonContainer>\r\n      </Paper>\r\n      <Dialogue />\r\n    </Wrapper>\r\n  )\r\n}\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  height: 200px;\r\n  width: 400px;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  outline: none;\r\n  & > div {\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    padding: 30px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    z-index: 10;\r\n  }\r\n`;\r\nconst Dialogue = styled.section`\r\n  position: fixed !important;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: rgba(0,0,0,0.54);\r\n  width: 100vw;\r\n  height: 100vh !important;\r\n  z-index: 5;\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 30px;\r\n  button {\r\n    margin-right: 25px;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  svg {\r\n    cursor: pointer;\r\n    color: rgba(0,0,0,.54);\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n  }\r\n`","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport $ from 'jquery';\r\nimport SingleNews from './SingleNews';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Fab from './Fab/Fab';\r\nimport NewNews from './News/NewNews';\r\nimport API from './functions/API';\r\nimport { Paper, Button, Typography, TextField, Tooltip } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport defaultAvatar from './img/photos/images.png';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Loader from './Loader/Loader';\r\nimport ConfirmDelete from './News/ConfirmDelete';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass News extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      news: [],\r\n      newNews: false,\r\n      newNewsTopic: '',\r\n      newNewsText: '',\r\n      newNewsImportance: false,\r\n      editing: '',\r\n      singleNews: false,\r\n      singleNewsData: [],\r\n      singleNewsId: '',\r\n      invalidText: false,\r\n      invalidTopic: false,\r\n      loading: true,\r\n      confirmDelete: false,\r\n      preparedNewsId: ''\r\n    }\r\n\r\n    this.addLike = this.addLike.bind(this);\r\n    this.reloadComponent = this.reloadComponent.bind(this);\r\n    this.removeLike = this.removeLike.bind(this);\r\n    this.addNews = this.addNews.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.submitNews = this.submitNews.bind(this);\r\n    this.removeNews = this.removeNews.bind(this);\r\n    this.editNews = this.editNews.bind(this);\r\n    this.prepareNews = this.prepareNews.bind(this);\r\n    this.showNews = this.showNews.bind(this);\r\n    this.changeImportance = this.changeImportance.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  async reloadComponent(action) {\r\n    if (!action) await this.setState({ loading: true })\r\n    await fetch(`${API}/api/news/read.php`)\r\n      .then(response => response.json())\r\n      .then(news => this.props.onAddNews(news.records || []))\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n    this.setState({ invalidText: false, invalidTopic: false });\r\n  }\r\n\r\n  // добавляем лайк\r\n  addLike = (id, e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addlike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function () {\r\n        self.reloadComponent('like');\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // убираем лайк\r\n  removeLike = (id, e) => {\r\n    const self = this;\r\n    e.preventDefault();\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/removelike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.reloadComponent('like');\r\n        self.setState({ newNews: false });\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  submitNews = (e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    if (this.state.newNewsTopic !== '' && this.state.newNewsText !== '') {\r\n      const formData = new FormData();\r\n\r\n      formData.append('author', `${this.props.user.name} ${this.props.user.surname}`);\r\n      formData.append('title', this.state.newNewsTopic);\r\n      formData.append('text', this.state.newNewsText);\r\n      formData.append('date', new Date().toJSON().slice(0, 10).replace(/-/g, '.'));\r\n      formData.append('created', new Date().getTime());\r\n      formData.append('importance', this.state.newNewsImportance ? 1 : 0);\r\n      formData.append('author_id', this.props.user.id);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/news/submitnews.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          self.reloadComponent();\r\n          self.setState({ \r\n            newNews: !self.state.newNews, \r\n            newNewsText: '', \r\n            newNewsTopic: ''\r\n          });\r\n          self.props.enqueueSnackbar('Добавлена новая новость', { variant: 'success' })\r\n        },\r\n        error: function (err) {\r\n          console.log(err);\r\n          self.props.enqueueSnackbar('Не удалось добавить новость', { variant: 'error' })\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Необходимо заполнить все поля', { variant: 'warning' })\r\n      if (self.state.newNewsTopic === '') this.setState({ invalidTopic: true });\r\n      if (self.state.newNewsText === '') this.setState({ invalidText: true });\r\n    }\r\n  }\r\n\r\n  changeImportance = () => this.setState({ newNewsImportance: !this.state.newNewsImportance });\r\n\r\n  removeNews = () => {\r\n    this.setState({ editing: true });\r\n    var self = this;\r\n    const formData = new FormData();\r\n    formData.append('id', this.state.preparedNewsId);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function() {\r\n        self.reloadComponent();\r\n        self.setState({ editing: '', preparedNewsId: '', confirmDelete: false  });\r\n        self.props.enqueueSnackbar('Новость была удалена', { variant: 'info' });\r\n      },\r\n      error: function(err) {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Не удалось удалить новость', { variant: 'error' });\r\n      }\r\n    });\r\n  };\r\n\r\n  prepareNews = id => {\r\n    let title = this.props.store.news.find(news => news.id === id).title;\r\n    let text = this.props.store.news.find(news => news.id === id).text;\r\n    this.setState({ editing: id, newNewsTopic: title, newNewsText: text });\r\n  }\r\n\r\n  editNews = (e, id) => {\r\n    e.preventDefault();\r\n    var self = this;\r\n\r\n    if (this.state.newNewsTopic !== '' && this.state.newNewsText !== '') {\r\n      const formData = new FormData();\r\n      formData.append('id', id);\r\n      formData.append('title', this.state.newNewsTopic);\r\n      formData.append('text', this.state.newNewsText);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/news/edit.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function() {\r\n          self.reloadComponent();\r\n          setTimeout(() => self.setState({ editing: '' }), 200);\r\n          self.props.enqueueSnackbar('Новость была изменена', { variant: 'info' });\r\n        },\r\n        error: function (err) {\r\n          console.log(err);\r\n          self.props.enqueueSnackbar('Не удалось изменить новость', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      self.props.enqueueSnackbar('Нужно заполнить всё поля', { variant: 'warning' });\r\n      if (self.state.newNewsTopic === '') this.setState({ invalidTopic: true });\r\n      if (self.state.newNewsText === '') this.setState({ invalidText: true });\r\n    }\r\n  }\r\n\r\n  addNews = () => this.setState({ editing: '', newNews: !this.state.newNews, newNewsText: '', newNewsTopic: '' });\r\n\r\n  showNews(id) {\r\n    setTimeout(() => {\r\n      if (this.state.editing === '') this.setState({ singleNews: true, singleNewsId: id });\r\n    }, 100)\r\n  }\r\n\r\n  // закрываем новость \r\n  closeNews = () => {\r\n    this.setState({ \r\n      singleNews: false, \r\n      singleNewsId: '', \r\n      newNews: false, \r\n      likedBy: [], \r\n      preparedNewsId: '',\r\n      confirmDelete: false\r\n    });\r\n    this.reloadComponent('close');\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | находим правильную форму склонения лайков \r\n  |--------------------------------------------------\r\n  */\r\n getNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'отметок';\r\n    number %= 10;\r\n    if (number === 1) return 'отметка';\r\n    if (number >= 2 && number <= 4) return 'отметки';\r\n    return 'отметок';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getCommentsNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'комментариев';\r\n    number %= 10;\r\n    if (number === 1) return 'комментарий';\r\n    if (number >= 2 && number <= 4) return 'комментария';\r\n    return 'комментариев';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | создаёт надпись \"Помечено как важное\"\r\n  |--------------------------------------------------\r\n  */\r\n  createImportantBar = (margin) => {\r\n    const Important = styled.div`\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 0;\r\n      margin-top: ${margin}px;\r\n      svg {\r\n        color: rgba(0,0,0,.15);\r\n        margin-right: 5px;  \r\n      }\r\n    `;\r\n    return (\r\n      <Important>\r\n        <WarningIcon />\r\n        <Typography variant='caption'>Отмечено как \"Важное\"</Typography>            \r\n      </Important>\r\n    )\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Спрашиваем об удалении новости\r\n  |--------------------------------------------------\r\n  */\r\n  prepareDelete = (id) => {\r\n    this.setState({ confirmDelete: true, preparedNewsId: id })\r\n  }\r\n\r\n  render() {\r\n    const { news, invalidText, invalidTopic, newNews, loading, newNewsText, newNewsTopic, editing, singleNews, singleNewsId, newNewsImportance } = this.state;\r\n    const { user } = this.props;\r\n    let avatar = null;\r\n    window.location.host.includes('localhost') ? avatar = user.avatar : avatar = `frontend/public/${user.avatar}`;\r\n\r\n    if (this.state.news.length === 0) {\r\n      setTimeout(() => this.setState({ news: this.props.store.news }), 0);\r\n    }\r\n\r\n    return (\r\n      <Paper>\r\n        {loading ? <Loader minHeight={300} color='primary' /> :\r\n          this.props.store.news.length > 0 && this.props.store.news ? this.props.store.news.map((item, i) => {\r\n            return (\r\n              <NewsContainer key={i}>\r\n                <UserAvatar style={{ background: `url(${user.avatar === '' ? defaultAvatar : avatar}) no-repeat center/cover` }} />\r\n                <div>\r\n                  <NewsInfo>\r\n                    {user.id === item.author_id\r\n                      ?\r\n                      <Fragment>\r\n                        <Typography variant='caption'>\r\n                          <Typography variant='subtitle2'>Вы</Typography>\r\n                          {item.date}\r\n                        </Typography>\r\n                        <Icon>\r\n                          <Tooltip placement='left' title=\"Удалить\">\r\n                            <DeleteIcon onClick={() => this.prepareDelete(item.id)} />\r\n                          </Tooltip>\r\n                        </Icon>\r\n                      </Fragment>\r\n                      :\r\n                      <Typography variant='caption'>\r\n                        <Typography variant='subtitle2'>{item.author}</Typography>\r\n                        {item.date}\r\n                      </Typography>}\r\n                  </NewsInfo>\r\n\r\n                  {item.importance === '1' ? this.createImportantBar(0) : null}\r\n\r\n                  {editing !== item.id ?\r\n                    <Fragment>\r\n                      <Typography variant='button'>{item.title.replace(/&quot;/g, `\"`)}</Typography>\r\n                      <Body><Typography variant='body2'>{item.text.replace(/&quot;/g, `\"`)}</Typography></Body>\r\n                    </Fragment>\r\n                    :\r\n                    <form id='edit-news' action={`${API}/api/news/edit.php`} method=\"POST\" onSubmit={(e) => this.editNews(e, item.id)} >\r\n                      <TextField\r\n                        label=\"Заголовок\"\r\n                        value={newNewsTopic}\r\n                        onChange={this.handleChange}\r\n                        variant=\"outlined\"\r\n                        name='newNewsTopic'\r\n                        type='text'\r\n                        error={this.state.invalidTopic}\r\n                      />\r\n                      <TextArea>\r\n                        <TextField\r\n                          label=\"Текст новости\"\r\n                          multiline\r\n                          variant=\"outlined\"\r\n                          name='newNewsText'\r\n                          onChange={this.handleChange}\r\n                          value={newNewsText}\r\n                          error={this.state.invalidText}\r\n                        />\r\n                      </TextArea>\r\n                      <Button onClick={(e) => this.editNews(e, item.id)} variant='contained' color='primary'>Изменить</Button>\r\n                    </form>}\r\n                </div>\r\n\r\n                <Actions id='actions'>\r\n                  <p>{item.comments}</p>\r\n                  <Tooltip title={`${item.comments} ${this.getCommentsNoun(item.comments)}`} placement='top'>\r\n                    <FontAwesomeIcon onClick={editing === '' ? () => this.showNews(item.id) : null} icon=\"comments\" />\r\n                  </Tooltip>\r\n                  \r\n                    <p>{item.likes}</p>\r\n\r\n                  {!item.liked_by.includes(` ${user.id}`)\r\n                    ?\r\n                    <Tooltip title={`${item.likes} ${this.getNoun(item.likes)} \"Нравится\"`} placement='top'>\r\n                      <FontAwesomeIcon onClick={e => this.addLike(item.id, e)} icon=\"heart\" />\r\n                    </Tooltip>  \r\n                    :\r\n                    <Tooltip title={`${item.likes} ${this.getNoun(item.likes)} \"Нравится\"`} placement='top'>\r\n                      <FontAwesomeIcon onClick={e => this.removeLike(item.id, e)} icon=\"heart\" style={{ color: '#1976d2' }} />\r\n                    </Tooltip>  \r\n                  }\r\n                  <Tooltip title='Отправить сообщение' placement='top'>\r\n                    <FontAwesomeIcon data-id={item.id} onClick={this.addLike} icon=\"envelope\" style={{ marginLeft: '25px' }} />\r\n                  </Tooltip>\r\n\r\n                  {user.id === item.author_id\r\n                    ?\r\n                    <Tooltip title='Редактировать' placement='top'>\r\n                    <FontAwesomeIcon onClick={() => this.prepareNews(item.id)} icon=\"edit\" style={{ marginLeft: '25px' }} />\r\n                    </Tooltip>\r\n                    :\r\n                    null\r\n                  }\r\n                  <Button onClick={() => this.showNews(item.id)} variant='contained' color='primary' style={{ position: 'absolute', right: 40 }}>Читать</Button>\r\n                </Actions>\r\n\r\n              </NewsContainer>\r\n            )\r\n          }\r\n          ) : <NoNews><Typography variant='h6'>нет новостей</Typography></NoNews>}\r\n\r\n        <div onClick={this.addNews}><Fab title='Добавить новость' /></div>\r\n\r\n        {newNews ?\r\n          <NewNews\r\n            user={user}\r\n            newNewsTopic={newNewsTopic}\r\n            newNewsText={newNewsText}\r\n            invalidText={invalidText}\r\n            invalidTopic={invalidTopic}\r\n            submitNews={this.submitNews}\r\n            handleChange={this.handleChange}\r\n            changeImportance={this.changeImportance}\r\n            newNewsImportance={newNewsImportance}\r\n            closeNews={this.closeNews.bind(this)}\r\n          /> : null}\r\n\r\n        {singleNews\r\n          ?\r\n          <SingleNews\r\n            showNews={this.showNews}\r\n            closeNews={this.closeNews.bind(this)}\r\n            singleNewsId={singleNewsId}\r\n            news={news}\r\n            user={user}\r\n            getNoun={this.getNoun}\r\n            getCommentsNoun={this.getCommentsNoun}\r\n            reloadComponent={this.reloadComponent}\r\n            createImportantBar={this.createImportantBar} />\r\n          :\r\n          null}\r\n\r\n        {/* Подтверить удаление новости */}\r\n        {this.state.confirmDelete ?\r\n        <ConfirmDelete\r\n          closeNews={this.closeNews.bind(this)}\r\n          removeNews={this.removeNews.bind(this)}\r\n        /> : null}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst NewsContainer = styled.div`\r\n  position: relative;\r\n  padding: 20px 40px 20px 120px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  input {\r\n    padding: 10px 15px;\r\n  }\r\n  :hover {\r\n    background: rgba(0,0,0,0.015);\r\n    transition: .37s ease;\r\n  }\r\n`;\r\nconst Body = styled.div`\r\n  padding: 10px 15px;\r\n  margin-top: 10px;\r\n  background: rgba(0,0,0,0.015);\r\n`;\r\nconst NewsInfo = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n\r\n  span {\r\n    display: flex;\r\n    align-items: baseline;\r\n    h6 {\r\n      margin-right: 10px;\r\n      :after {\r\n        content: '\\00b7';\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n`;\r\nconst UserAvatar = styled.div`\r\n  position: absolute;\r\n  left: 20px;\r\n  top: 30px;\r\n  border-radius: 50%;\r\n  width: 80px;\r\n  height: 80px;\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  p {\r\n    margin-right: 5px;\r\n    color: #657786;\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin: 15px 0 10px;\r\n  height: 120px;\r\n\r\n  textarea {\r\n    max-height: 100px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst NoNews = styled.div`\r\n  height: 254px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .37;\r\n  margin-bottom: 20px;\r\n`;\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  svg {\r\n    color: rgba(0,0,0,0.54);\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    onAddNews: (news) => {\r\n      dispatch({ type: 'ADD_NEWS', payload: news })\r\n    }\r\n  })\r\n)(withSnackbar(News));","import React from 'react';\r\nimport Person from '@material-ui/icons/Person';\r\nimport Message from '@material-ui/icons/Message';\r\nimport Task from '@material-ui/icons/ListAlt';\r\nimport News from '@material-ui/icons/NewReleases';\r\nimport People from '@material-ui/icons/People';\r\n\r\nconst sections = [\r\n  {\r\n    value: 0,\r\n    section: 'id',\r\n    label: 'Моя страница',\r\n    img: <Person />,\r\n  },\r\n  { \r\n    value: 1,\r\n    section: 'messages',\r\n    label: 'Сообщения',\r\n    img: <Message />,\r\n  },\r\n  {\r\n    value: 2,\r\n    section: 'news',\r\n    label: 'Новости компании',\r\n    img: <News />,\r\n  },\r\n  {\r\n    value: 3,\r\n    section: 'tasks',\r\n    label: 'Входящие задачи',\r\n    img: <Task />,\r\n  },\r\n  {\r\n    value: 4,\r\n    section: 'colleagues',\r\n    label: 'Коллеги',\r\n    img: <People />,\r\n  }/* ,\r\n  {\r\n    section: 'learnings',\r\n    label: 'Обучение',\r\n    img: 'learning.png',\r\n  },\r\n  {\r\n    section: 'gallery',\r\n    label: 'Галерея',\r\n    img: 'gallery.png',\r\n  },\r\n  {\r\n    section: 'favourites',\r\n    label: 'Избранное',\r\n    img: 'favourites.png',\r\n  }, */\r\n];\r\n\r\nexport default sections;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport sections from './sections';\r\nimport styled from 'styled-components';\r\nimport _ from 'lodash';\r\nimport API from '../functions/API';\r\nimport { connect } from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nconst PATH = window.location.pathname;\r\nlet urlValue = _.find(sections, ['section', PATH.includes('id') ? 'id' : PATH.slice(1)]);\r\nif (urlValue) urlValue = urlValue.value;\r\n\r\nclass Navigation extends React.Component {\r\n  state = {\r\n    value: urlValue\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(tasks => this.props.getTasks(tasks.data))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChange = (event, value) => this.setState({ value });\r\n\r\n  countTask = () => {\r\n    let counter = 0;\r\n    const now = moment(new Date()); //todays date\r\n    const filtered = this.props.store.tasks.filter(task => Number(task.from) !== this.props.user_logged_id);\r\n    filtered.forEach(task => {\r\n      const end = moment(task.until_date); // another date\r\n      const difference = moment.duration(end.diff(now))._milliseconds;\r\n      if (task.status === '0' && difference > 0) counter++;\r\n    })\r\n    return counter;\r\n  }\r\n  render() {\r\n    const { value } = this.state;\r\n    const user = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <AppBar position=\"static\" color=\"default\">\r\n          <Tabs\r\n            value={value}\r\n            onChange={this.handleChange}\r\n            indicatorColor=\"primary\"\r\n            centered\r\n          >\r\n            {sections.map((section, i) =>\r\n              <Tab\r\n                key={i}\r\n                label={section.section === 'tasks' && this.countTask() > 0 ?\r\n                  <BadgeWrapper><Badge color=\"secondary\" badgeContent={this.countTask()}>\r\n                    {section.label}\r\n                  </Badge></BadgeWrapper>\r\n                  : section.label\r\n                }\r\n                onClick={() => user.handleChangeSection(section.section !== 'id' ? section.section : `id${user.user_logged_id}`)}\r\n                component={Link}\r\n                to={section.section !== 'id' ? section.section : `id${user.user_logged_id}`}\r\n                icon={section.img}\r\n              />\r\n            )}\r\n          </Tabs>\r\n        </AppBar>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  background-color: #ffffff;\r\n  margin-bottom: 4px;\r\n\r\n  a {\r\n    width: ${100 / sections.length}%\r\n  }\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\nconst BadgeWrapper = styled.div`\r\n  & > span > span {\r\n    top: -19px;\r\n    right: -5px;\r\n  }\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getTasks: (tasks) => {\r\n      dispatch({ type: 'FETCH_TASKS', payload: tasks})\r\n    }     \r\n  })\r\n)(Navigation);","import React, { Fragment } from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport styled from 'styled-components';\r\nimport moment from 'moment';\r\nimport NotReaded from '@material-ui/icons/Done';\r\nimport Readed from '@material-ui/icons/DoneAll';\r\n\r\nfunction Friend(props) {\r\n  let avatar = '';\r\n\r\n  if (window.location.host.includes('localhost')) {\r\n    avatar = props.friend.avatar;\r\n  } else {\r\n    avatar = `frontend/public/${props.friend.avatar}`;\r\n  }\r\n\r\n  const cropString = string => {\r\n    if (string.length < 137) return string;\r\n    return `${string.substring(0,137)}...`;\r\n  }\r\n\r\n  const getTime = (time, date, readed) => {\r\n    const fromDayStart = moment().startOf('day').format();\r\n    const dateFromNow = moment(date, \"DD.MM.YYYY\").format();\r\n    let icon = null;\r\n\r\n    readed === '1' ? icon = <Readed /> : icon = <NotReaded />;   \r\n    \r\n    /**\r\n    |--------------------------------------------------\r\n    | здесь проблема с моментом, считает почему с ошибкой на день\r\n    | внизу заккоментирован правильный ретурн по логике\r\n    |--------------------------------------------------\r\n    */\r\n    if (!moment(fromDayStart).isSame(dateFromNow, 'day')) {\r\n      return <Time>{props.friend.id === props.friend.message.user ? icon : null}<Typography variant=\"subtitle2\" color='primary'>{moment(date, \"DD.MM.YYYY\").calendar().slice(0,-4)} {time}</Typography></Time>\r\n      /* return <Time>{icon}<Typography variant=\"subtitle2\" color='primary'>{moment(date).fromNow()}</Typography></Time> */\r\n    }\r\n\r\n    return (\r\n      <Time>{props.friend.id === props.friend.message.user ? icon : null}<Typography variant=\"subtitle2\" color='primary'>{props.friend.message.time}</Typography></Time>\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <ListItem \r\n      onClick={() => props.openRoom(props.friend.hasOwnProperty('message') && props.friend.message ? props.friend.message.chat : 0, props.friend)}\r\n      button \r\n      TouchRippleProps={{ classes: { child: 'touch-ripple' }}} \r\n    >\r\n      <ListItemAvatar>\r\n        <Avatar\r\n          style={{ height: 50, width: 50 }}\r\n          alt={`${props.friend.name} ${props.friend.surname}`}\r\n          src={props.friend.avatar !== '' ? avatar : defaultAvatar}\r\n        />\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        inset\r\n        primary={<MessageHeader>\r\n          <Typography variant=\"subtitle1\">{`${props.friend.name} ${props.friend.surname}`}</Typography>\r\n          {props.friend.message ? \r\n            getTime(props.friend.message.time, props.friend.message.date, props.friend.message.readed)     \r\n          : null}\r\n        </MessageHeader>}\r\n        secondary={props.friend.message ?\r\n          <Fragment>\r\n            <Typography component=\"span\" style={{ display: 'inline' }} color=\"primary\">\r\n              {props.friend.id === props.friend.message.user ? `${props.friend.name} ${props.friend.surname}:` : 'Вы:'}\r\n            </Typography>\r\n            {` — ${cropString(props.friend.message.body)} `} \r\n          </Fragment>\r\n        : null}    \r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst Time = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  opacity: .87;\r\n  svg {\r\n    margin-right: 6px;\r\n    font-size: 17px;\r\n    color: #1976d2;\r\n  }\r\n`;\r\nconst MessageHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\nexport default Friend;","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function NoMessages() {\r\n  return (\r\n    <Container>\r\n      <Typography variant='body1' style={{ marginBottom: 12 }}>\r\n        Будьте первым, кто отправит сообщение в этом диалоге.\r\n      </Typography>\r\n      <Typography variant='body2'>\r\n        Чтобы написать коллеге, просто введите текст сообщения в строке снизу и нажмите клавишу \"Enter\".\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 30px 80px;\r\n  height: 250px;\r\n  display: flex;\r\n  opacity: .75;\r\n  text-align: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n`;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport styled from 'styled-components';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport { Typography, Tooltip } from '@material-ui/core';\r\nimport NotReaded from '@material-ui/icons/Done';\r\nimport Readed from '@material-ui/icons/DoneAll';\r\nimport moment from 'moment';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport Edit from '@material-ui/icons/Edit';\r\n\r\nfunction Message(props) { \r\n  let prodUrl = '';\r\n  if (!window.location.host.includes('localhost')) {\r\n    prodUrl = `frontend/public/`;\r\n  } \r\n\r\n  function isToday(date) {\r\n    const fromDayStart = moment().startOf('day').format();\r\n    const dateFromNow = moment(date, \"DD.MM.YYYY\").format();\r\n\r\n    if (!moment(fromDayStart).isSame(dateFromNow, 'day')) {\r\n      return moment(date, \"DD.MM.YYYY\").calendar().slice(0,-4);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const { room, user } = props.store;\r\n\r\n  return (\r\n    <Container style={ room.user.id !== props.message.user ? { flexDirection: 'row-reverse'} : {}}>\r\n      <Avatar \r\n        style={ room.user.id !== props.message.user \r\n          ? { background: `url(${prodUrl}${user[0].avatar ? user[0].avatar : defaultAvatar}) no-repeat center/cover` } \r\n          : { background: `url(${prodUrl}${room.user.avatar? room.user.avatar : defaultAvatar}) no-repeat center/cover` } \r\n        }>\r\n      </Avatar>  \r\n      <Body>\r\n        <Typography className='message-name' variant='subtitle2' color='secondary'>      \r\n          {room.user.id !== props.message.user \r\n            ? `Вы` \r\n            : `${room.user.name} ${room.user.surname}` }\r\n          \r\n          {room.user.id !== props.message.user \r\n            ? <span>\r\n                <Tooltip title='редактировать' placement='top'><Edit onClick={() => props.editMessage(props.message.body, props.message.id)} /></Tooltip>\r\n                <Tooltip title='удалить' placement='top'><Delete onClick={props.handleDelete} /></Tooltip>\r\n              </span> \r\n            : null}\r\n        </Typography>\r\n        <Typography variant='body2'>{props.message.body}</Typography>\r\n        <Typography className='message-time' variant='subtitle2' color='primary'>    \r\n          {isToday(props.message.date)} {props.message.time}\r\n          {props.message.edited === '1' ? ' отредактировано' : null}\r\n          {room.user.id !== props.message.user ? props.message.readed === '1' ? <Readed /> : <NotReaded /> : null}\r\n        </Typography>\r\n      </Body>  \r\n    </Container>\r\n  )\r\n}\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n`;\r\nconst Avatar = styled.div`\r\n  min-width: 35px;\r\n  min-height: 35px;\r\n  border-radius: 50%;\r\n  margin: 0 15px;\r\n`;\r\nconst Body = styled.div`\r\n  max-width: 70%;\r\n  background: #fafafa;\r\n  padding: 10px 15px;\r\n  border-radius: 7px;\r\n  margin: 15px 0 0;\r\n  .message-time {\r\n    font-size: .7rem;\r\n    display: flex;\r\n    align-items: center;\r\n    svg {\r\n      font-size: 18px;\r\n      margin-left: 5px; \r\n    }\r\n  }\r\n  .message-name {\r\n    display: flex;\r\n    align-items: center;\r\n    min-width: 100px;\r\n    justify-content: space-between;\r\n    svg {\r\n      font-size: 16px;\r\n      margin-left: 5px; \r\n      color: rgba(0,0,0,.34);\r\n      cursor: pointer;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  })\r\n)(Message);","import React from 'react';\r\nimport NoMessages from './NoMessages';\r\nimport { connect } from 'react-redux';\r\nimport Message from './Message';\r\nimport styled from 'styled-components';\r\n\r\nfunction Messages(props) {\r\n  const { messages } = props.store;\r\n  \r\n  setTimeout(() => {\r\n    const messageContainer = document.getElementById(\"messages\");\r\n    if (messages.length !== 0 && messageContainer) messageContainer.scrollTop = messageContainer.scrollHeight; \r\n  }, 0);\r\n\r\n  return (\r\n    <Container id='messages'>\r\n      {messages.length !== 0 ? \r\n        messages.map(message => \r\n          <Message \r\n            key={message.id} \r\n            message={message} \r\n            editMessage={props.editMessage}\r\n            handleDelete={() => props.handleDelete(message.id)}\r\n          />\r\n        )\r\n      : <NoMessages />}\r\n    </Container>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst Container = styled.div`\r\n  overflow: auto;\r\n  margin-top: 5px;\r\n  max-height: 310px;\r\n  &::-webkit-scrollbar {\r\n    width: 2px;\r\n  } \r\n  &::-webkit-scrollbar-track {\r\n    background-color: #fafafa;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #1976d2; \r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  })\r\n)(Messages);","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Send from '@material-ui/icons/Send';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport default function SendMessageInput(props) {\r\n  return (\r\n    <Container onSubmit={props.sendMessage}>\r\n      <TextField\r\n        placeholder=\"Напишите сообщение...\"\r\n        fullWidth\r\n        autoFocus\r\n        margin='dense'\r\n        variant=\"filled\"\r\n        onChange={props.handleNewMessage}\r\n        value={props.message}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Отправить сообщение' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Отправить сообщение\"\r\n                  onClick={props.sendMessage}\r\n                >\r\n                  <Send />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.form`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n  & > div {\r\n    margin: 0;\r\n  }\r\n  & > div > div {\r\n    background: #fafafa !important;\r\n    :hover {\r\n      background: #fafafa;\r\n    }\r\n  }\r\n  input {\r\n    background: #fafafa;\r\n    padding: 13px 25px;\r\n    font-size: 14px;\r\n  }\r\n`;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport default function EditMessageInput(props) {\r\n  return (\r\n    <Container onSubmit={props.submitEdit}>\r\n      <TextField\r\n        placeholder=\"Отредактируйте сообщение...\"\r\n        fullWidth\r\n        autoFocus\r\n        margin='dense'\r\n        variant=\"filled\"\r\n        onChange={props.handleEdit}\r\n        value={props.message}\r\n        InputProps={{\r\n          startAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Редактировать' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Редактировать\"\r\n                  onClick={props.submitEdit}\r\n                >\r\n                  <Edit />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Закрыть' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Закрыть\"\r\n                  onClick={props.closeEditing}\r\n                >\r\n                  <Clear />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.form`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n  z-index: 10;\r\n  & > div {\r\n    margin: 0;\r\n  }\r\n  & > div > div {\r\n    background: #fafafa !important;\r\n    :hover {\r\n      background: #fafafa;\r\n    }\r\n  }\r\n  input {\r\n    background: #fafafa;\r\n    padding: 13px 25px;\r\n    font-size: 14px;\r\n  }\r\n`;","import React, { Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Typography, Button } from '@material-ui/core';\r\n\r\nexport default function DeleteModal(props) {\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n        <Typography variant='body2'>Вы уверены, что хотите удалить сообщение?</Typography>\r\n        <Typography variant='body2'>Это действие удалит его для всех участников чата.</Typography>    \r\n        <div>\r\n          <Button variant='text' color='primary' onClick={props.closeDelete} >Отмена</Button>\r\n          <Button variant='text' color='primary' onClick={props.submitDelete}>Удалить</Button>\r\n        </div>       \r\n      </Container>\r\n      <Overlay onClick={props.closeDelete} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 30px 20px 10px;\r\n  width: 320px;\r\n  height: 200px;\r\n  margin: auto;\r\n  z-index: 10;\r\n  background: #fafafa;\r\n  box-shadow: rgba(0,0,0,0.2) 0px 1px 3px 0px, rgba(0,0,0,0.14) 0px 1px 1px 0px, rgba(0,0,0,0.12) 0px 2px 1px -1px;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  & > div {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n`;\r\n\r\nconst Overlay = styled.div`\r\n  position: absolute;\r\n  top: 0; bottom: 0;\r\n  left: 0; right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 5;\r\n  background: rgba(0,0,0,.17);\r\n`;","import React, { Component } from 'react';\r\nimport API from '../functions/API';\r\nimport $ from 'jquery';\r\nimport styled from 'styled-components';\r\nimport { connect } from 'react-redux';\r\nimport Back from '@material-ui/icons/ArrowBack';\r\nimport { Typography } from '@material-ui/core';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport Messages from './Messages';\r\nimport Loader from '../Loader/Loader';\r\nimport SendMessageInput from './SendMessageInput';\r\nimport EditMessageInput from './EditMessageInput';\r\nimport DeleteModal from './DeleteModal';\r\nimport moment from 'moment';\r\n\r\nclass ChatRoom extends Component {\r\n  state = {\r\n    loading: true,\r\n    editing: false,\r\n    editText: '',\r\n    deleting: false,\r\n    newMessage: '',\r\n    deleteID: null,\r\n    editID: null\r\n  }\r\n  interval = null;\r\n\r\n  componentDidMount = () => {\r\n    this.getMessages();\r\n    this.interval = setInterval(() => this.getMessages(), 5000);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    clearInterval(this.interval);\r\n  }\r\n  \r\n  getMessages = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('chat', this.props.store.room.chat_id); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/read.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.setState({ loading: false });\r\n        if (res.messages) self.props.getMessages(res.messages);      \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n\r\n  }\r\n\r\n  handleEdit = (e) => this.setState({ editText: e.target.value });\r\n  editMessage = (message, id) => { if(!this.state.editing) this.setState({ editing: !this.state.editing, editText: message, editID: id })};\r\n  closeEditing = () =>  this.setState({ editing: false, editText: '', editID: null });\r\n\r\n  handleDelete = id => this.setState({ deleting: true, deleteID: id });\r\n  closeDelete = () =>  this.setState({ deleting: false, deleteID: null });\r\n\r\n  handleNewMessage = (e) => this.setState({ newMessage: e.target.value });\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Отправляет сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  sendMessage = (e) => {\r\n    if (e) e.preventDefault();\r\n\r\n    const { room, user } = this.props.store;  \r\n\r\n    // если в комнате нет чат-id то создадим чат\r\n    if (!room.hasOwnProperty('chat_id')) {\r\n      this.getMessageId(user[0].id, room.user.id);\r\n      return;\r\n    } else {\r\n      fetch(`${API}/api/message/get_id.php`)\r\n        .then(response => response.json())\r\n        .then(message => localStorage.setItem('message_id', message.message_id))\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    const formData = new FormData();\r\n    const self = this; \r\n    const message = {\r\n      user: user[0].id,\r\n      chat: room.hasOwnProperty('chat_id') ? room.chat_id : localStorage.getItem('chat_id'),\r\n      body: this.state.newMessage,\r\n      date: moment().format('L'),\r\n      time: moment().format('LT')\r\n    };\r\n\r\n    formData.append('chat', message.chat); \r\n    formData.append('user', message.user);\r\n    formData.append('body', message.body); \r\n    formData.append('date', message.date); \r\n    formData.append('time', message.time); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/send.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function(res) {\r\n        if (!self.props.store.chats.find(chat => chat.id === message.chat)) {\r\n          self.props.createChat(localStorage.getItem('users'), message.chat, message); \r\n        }  \r\n        self.props.addMessage(message);\r\n        self.setState({ newMessage: '' })\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | получаем @ID последнего сообщение в базе\r\n  |--------------------------------------------------\r\n  */\r\n  getMessageId = (user1, user2) => {\r\n    fetch(`${API}/api/message/get_id.php`)\r\n      .then(response => response.json())\r\n      .then(message => this.createChat(user1, user2, message.message_id))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Создаем чат\r\n  |--------------------------------------------------\r\n  */\r\n  createChat = (user1, user2, message_id) => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    const users = `id${user1}, id${user2}`;\r\n    const messageId = (Number(message_id) + 1).toString();\r\n    formData.append('users', users); \r\n    formData.append('last_msg', messageId); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/chat/create.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.props.assignChat(res.chat_id);\r\n        localStorage.setItem('message_id', messageId);\r\n        localStorage.setItem('chat_id', res.chat_id);\r\n        localStorage.setItem('users', `id${user2}`);\r\n        self.sendMessage(false);    \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | удаляем сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  submitDelete = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', this.state.deleteID); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function(res) {\r\n        self.props.deleteMessage(self.state.deleteID);\r\n        if (self.props.store.messages.length === 0) self.props.deleteChat(self.props.store.room.chat_id);\r\n        self.closeDelete();\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | редактируем сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  submitEdit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', this.state.editID); \r\n    formData.append('body', this.state.editText); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/edit.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: () => {      \r\n        self.props.editMessage(this.state.editID, this.state.editText);\r\n        self.closeEditing();\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, editing, deleting } = this.state;\r\n    const { room } = this.props.store;\r\n\r\n    let avatar = null;\r\n    if (room.hasOwnProperty('user') && window.location.host.includes('localhost')) {\r\n      avatar = room.user.avatar;\r\n    } else if (room.hasOwnProperty('user')) {\r\n      avatar = `frontend/public/${room.user.avatar}`;\r\n    }\r\n\r\n    return (\r\n      <Room>\r\n        <RoomHeader>\r\n          <Icon onClick={() => this.props.openRoom(0, room.user)}>\r\n            <Back />\r\n          </Icon>\r\n          {room.hasOwnProperty('user') ?\r\n          <div className='room-header__user'>\r\n            <div className='room-header__avatar' style={{ background: `url(${room.user.avatar !== '' ? avatar : defaultAvatar}) no-repeat center/cover`}}></div>\r\n            <div className='room-header__info'>\r\n              <Typography variant='subtitle2'>{room.user.name} {room.user.surname}</Typography>\r\n              <Typography variant='caption'>{room.user.position}</Typography>\r\n            </div>\r\n          </div> : null}\r\n        </RoomHeader>\r\n\r\n        {loading ? <Loader minHeight={250} color='primary' /> : <Messages \r\n          editMessage={this.editMessage.bind(this)} \r\n          handleDelete={this.handleDelete.bind(this)}\r\n        />}\r\n\r\n        {editing ? <EditMessageInput \r\n          closeEditing={this.closeEditing.bind(this)} \r\n          message={this.state.editText} \r\n          handleEdit={this.handleEdit.bind(this)}\r\n          submitEdit={this.submitEdit.bind(this)}\r\n        /> : null}\r\n\r\n        <SendMessageInput \r\n          message={this.state.newMessage}\r\n          sendMessage={this.sendMessage} \r\n          handleNewMessage={this.handleNewMessage}\r\n        />\r\n\r\n        {deleting ? <DeleteModal \r\n          closeDelete={this.closeDelete.bind(this)}\r\n          submitDelete={this.submitDelete.bind(this)}\r\n        /> : null}\r\n      </Room>\r\n    )\r\n  }\r\n}\r\nconst Room = styled.div`\r\n  overflow: hidden;\r\n  height: 432px;\r\n`;\r\nconst RoomHeader = styled.div`\r\n  background: #1976d2;\r\n  height: 60px;\r\n  color: rgba(255,255,255,.5);\r\n  display: flex;\r\n  align-items: center;\r\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 2px 1px -1px;\r\n\r\n  .room-header__user {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n  }\r\n  .room-header__avatar {\r\n    height: 45px;\r\n    width: 45px;\r\n    border-radius: 50%;\r\n    margin-right: 15px;\r\n  }\r\n  h6 {\r\n    color: #fff;\r\n    opacity: .85;\r\n  }\r\n  span {\r\n    color: rgba(255,255,255,.5);\r\n  }\r\n  :hover {\r\n    color: #fff;\r\n    transition: .37s ease;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  width: 60px;\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getMessages: (messages) => {\r\n      dispatch({ type: 'FETCH_MESSAGES', payload: messages })\r\n    },\r\n    createChat: (users, chat_id, message) => {\r\n      dispatch({ type: 'CREATE_CHAT', payload: { users: users, id: chat_id, message: message }})\r\n    },\r\n    assignChat: (chat_id) => {\r\n      dispatch({ type: 'ASSIGN_CHAT', payload: chat_id })\r\n    },\r\n    addMessage: (message) => {\r\n      dispatch({ type: 'ADD_MESSAGE', payload: message })\r\n    },\r\n    deleteMessage: (messageID) => {\r\n      dispatch({ type: 'DELETE_MESSAGE', payload: messageID })\r\n    },\r\n    editMessage: (messageID, messageBody) => {\r\n      dispatch({ type: 'EDIT_MESSAGE', payload: messageID, body: messageBody })\r\n    },\r\n    deleteChat: (chat_id) => {\r\n      dispatch({ type: 'DELETE_CHAT', payload: chat_id })\r\n    },\r\n  })\r\n)(ChatRoom);","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ChatItem from './ChatItem';\r\nimport API from '../functions/API';\r\nimport styled from 'styled-components';\r\nimport Search from '../FriendsList/Search';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Loader from '../Loader/Loader';\r\nimport { connect } from 'react-redux';\r\nimport { Transition, animated } from 'react-spring/renderprops';\r\nimport ChatRoom from './ChatRoom';\r\n\r\nclass FriendList extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      friends: [],\r\n      initial: [],\r\n      searchValue: '',\r\n      loading: true,\r\n      documentTitle: document.title,\r\n      completed: false,\r\n      openRoom: false,\r\n      index: 1,\r\n      initialAnimation: false,\r\n      direction: true\r\n    }\r\n\r\n    this.rebuildList = this.rebuildList.bind(this);\r\n  }\r\n    \r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(friends => {\r\n        const data = friends.data.filter(friend => friend.id !== this.props.user_id);\r\n        this.setState({ friends: data, initial: data, loading: false })\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleSearch = (e) => {\r\n    this.setState({ searchValue: e.target.value });\r\n    const searchValue = e.target.value.toLowerCase();\r\n\r\n    document.title = e.target.value || this.state.documentTitle;\r\n\r\n    let friends = this.state.initial;\r\n    friends = friends.filter(friend =>\r\n      friend.name.toLowerCase().includes(searchValue) ||\r\n      friend.surname.toLowerCase().includes(searchValue) ||\r\n      friend.position.toLowerCase().includes(searchValue)\r\n    );\r\n    this.setState({ friends });\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.title = this.state.documentTitle;\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | переделываем массив списка друзей исходя из полученных сообщений\r\n  |--------------------------------------------------\r\n  */\r\n  rebuildList = (chats) => {\r\n    let friends = this.state.friends;\r\n    chats.forEach(chat => {\r\n      friends.find(friend => `id${friend.id}` === chat.users).message = chat.message;\r\n    })\r\n    this.setState({ completed: true });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | переключаем и анимируем комнату чата и список\r\n  |--------------------------------------------------\r\n  */\r\n  openRoom = (chat, friend) => {\r\n    if (!this.state.initialAnimation) this.setState({ initialAnimation: true });\r\n\r\n    if (chat) {\r\n      this.props.openChat(chat, friend);\r\n    } else {\r\n      this.rebuildList(this.props.store.chats);\r\n      setTimeout(() => this.props.closeChat(friend), 570);\r\n    }\r\n\r\n    this.setState({ direction: !this.state.direction });\r\n\r\n    setTimeout(() => this.setState(state => ({\r\n      index: state.index === 1 ? 0 : 1,\r\n    })), 300)\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | массив того, что анимируем\r\n  |--------------------------------------------------\r\n  */\r\n  pages = [\r\n    style => (\r\n      <animated.div style={{ ...style, position: 'absolute', width: '100%' }}>\r\n        <ChatRoom\r\n          openRoom={this.openRoom.bind(this)}\r\n        />\r\n      </animated.div>\r\n    ),\r\n    style => (\r\n      <animated.div style={{ ...style, position: 'absolute', width: '100%' }}>\r\n        <Search\r\n          handleSearch={this.handleSearch}\r\n          searchValue={this.searchValue}\r\n        />\r\n        <List>\r\n          {this.state.friends.map(friend =>\r\n            <ChatItem\r\n              openRoom={this.openRoom.bind(this)}\r\n              key={friend.id}\r\n              friend={friend}\r\n            />\r\n          )}\r\n        </List>\r\n      </animated.div>\r\n    )\r\n  ]\r\n\r\n  getDirection = direction => {\r\n    if (direction) {\r\n      return 'translateX(100%)';\r\n    } else {\r\n      return 'translateX(-100%)';\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { chats } = this.props.store;\r\n    const { completed, friends, index, direction } = this.state;\r\n\r\n    if (chats.length > 0 && friends.length > 0 && !completed) {\r\n      this.rebuildList(chats);\r\n    }\r\n\r\n    return (\r\n      <Paper>\r\n        {this.state.loading ?\r\n          <Loader minHeight={370} color='primary' />\r\n          :\r\n          <FriendWrapper>\r\n            <Transition\r\n              reset\r\n              unique\r\n              native\r\n              items={index}\r\n              from={this.state.initialAnimation ? { transform: this.getDirection(direction) } : { zIndex: 1 }}\r\n              enter={{ transform: 'translateX(0%)' }}\r\n              leave={{ transform: this.getDirection(!direction) }}\r\n            >\r\n              {index => this.pages[index]}\r\n            </Transition>\r\n          </FriendWrapper>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst FriendWrapper = styled.div`\r\n  height: 432px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n  position: relative;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 5px;\r\n  } \r\n  &::-webkit-scrollbar-track {\r\n    background-color: #fafafa;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #1976d2; \r\n  }\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n  ul {\r\n    padding: 0;\r\n    padding-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({ store: state }),\r\n  dispatch => ({\r\n    openChat: (chat, friend) => {\r\n      dispatch({ type: 'OPEN_CHAT', payload: [chat, friend] })\r\n    },\r\n    closeChat: (friend) => {\r\n      dispatch({ type: 'CLOSE_CHAT', payload: [null, friend] })\r\n    },\r\n  })\r\n)(FriendList);","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function NoChats() {\r\n  return (\r\n    <Container>\r\n      <Typography variant='body1'>\r\n        Пока у вас нет ни одного диалога.\r\n      </Typography>\r\n      <Typography variant='body2'>\r\n        Выберите коллегу из списка ниже или введите в строке поиска имя, фамилию или занимающую должность коллеги, которому хотите отправить сообщение.\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 30px 40px;\r\n  height: 150px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-direction: column;\r\n`;","import React, { Component } from 'react';\r\nimport Dialogues from './Dialogues';\r\nimport API from '../functions/API';\r\nimport $ from 'jquery';\r\nimport Loader from '../Loader/Loader';\r\nimport { connect } from 'react-redux';\r\nimport { Paper } from '@material-ui/core';\r\nimport NoChats from './NoChats';\r\n\r\nclass Chat extends Component {\r\n  state = {\r\n    loading: true,\r\n    user: []\r\n  }\r\n\r\n  fetchChats(id) {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', id); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/chat/read.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.setState({ loading: false });\r\n\r\n        if (res.chats) {\r\n          let result = res.chats;\r\n          result.forEach(item => {\r\n            item.users = item.users.replace(id, '').replace(',', '').trim();\r\n          }) \r\n          self.props.getChats(res.chats);\r\n        }\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, user } = this.state;\r\n    const chats = this.props.store.chats;\r\n    const userStore = this.props.store.user;\r\n\r\n    if (userStore.length > 0 && user.length === 0) {\r\n      this.setState({ user: userStore });\r\n      this.fetchChats(`id${userStore[0].id}`);\r\n    }\r\n    \r\n    return (\r\n      <Paper>\r\n\r\n        {chats.length === 0 ? <NoChats /> : null}\r\n\r\n        {!loading ?\r\n          <Dialogues\r\n            user_id={this.props.user.id}\r\n          />\r\n          : <Loader minHeight={300} color='primary' />}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getChats: (chats) => {\r\n      dispatch({ type: 'FETCH_CHATS', payload: chats })\r\n    }\r\n  })\r\n)(Chat);\r\n","import React, { Component, Fragment } from 'react';\r\nimport './css/MainPage.css'\r\nimport Header from './Header';\r\nimport MainpageHeader from './MainpageHeader';\r\nimport SideNews from './SideNews';\r\nimport Cookie from './functions/Cookie';\r\nimport FriendsList from './FriendsList/FriendsList';\r\nimport PersonalInfo from './PersonalInfo';\r\nimport Tasks from './Tasks/Tasks';\r\nimport News from './News';\r\nimport Nav from './Navigation/Navigation';\r\nimport styled from 'styled-components';\r\nimport Chat from './Chat/Chat';\r\nimport { connect } from 'react-redux';\r\n\r\nclass MainPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user_id: 0,\r\n      user_logged_id: 0,\r\n      user: [],\r\n      initialUser: [],\r\n      section: window.location.pathname.slice(1),\r\n      loading: true\r\n    }\r\n    this.handleChangeUrl      = this.handleChangeUrl.bind(this);  \r\n    this.handleChangeSection  = this.handleChangeSection.bind(this);  \r\n    this.handleChangeUserId   = this.handleChangeUserId.bind(this);\r\n    this.switchComponent      = this.switchComponent.bind(this);  \r\n  }\r\n\r\n  handleChangeUrl() { \r\n    this.setState({ user_id: this.state.user_logged_id });\r\n    \r\n    fetch(`http://akvatory.local/api/user/read_one.php?id=${this.state.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChangeSection(section) {\r\n    this.setState({ section });\r\n    this.handleChangeUrl();\r\n  }\r\n\r\n  handleChangeUserId(id) {\r\n    this.setState({ user_id: id, section: `id${id}`})\r\n    fetch(`http://akvatory.local/api/user/read_one.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n  }\r\n\r\n  componentWillMount() {\r\n    const cookie = new Cookie();\r\n    const cookie_id = cookie.getCookie('user_id');\r\n    this.setState({ user_id: parseInt(cookie_id), user_logged_id: parseInt(cookie_id) });\r\n    \r\n    if (window.location.pathname.includes('id')) {\r\n      const current_id = window.location.pathname.slice(3);\r\n      this.setState({ user_id: parseInt(current_id)});\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`http://akvatory.local/api/user/read_one.php?id=${this.state.user_id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user: user, initialUser: user, loading: false }))\r\n      .then(() => this.props.getUser(this.state.initialUser))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  switchComponent(){\r\n    switch(this.state.section) {\r\n      case `id${this.state.user_id}`:\r\n        return <PersonalInfo user_id={this.state.user_id} user_logged_id={this.state.user_logged_id} user={this.state.user} />\r\n      case 'messages':\r\n        return <Chat user={this.state.user} />;\r\n      case 'news':\r\n        return <News user={this.state.user} />;\r\n      case 'tasks':\r\n        return <Tasks user_logged_id={this.state.user_logged_id} />;\r\n      case 'colleagues':\r\n        return (\r\n            <FriendsList \r\n              handleChangeUserId={this.handleChangeUserId} \r\n              user_id={this.state.user_logged_id}\r\n            />\r\n        )\r\n /*      case 'learnings':\r\n        return 'learnings';\r\n      case 'gallery':\r\n        return 'gallery';\r\n      case 'favourites':\r\n        return 'favourites'; */\r\n      default: return null;\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    const { user_id, user_logged_id, user, initialUser, loading } = this.state;\r\n    \r\n    if (user.error === 1) { window.location.href = '/404';}\r\n    \r\n    return (\r\n      <Fragment>\r\n        <MainpageHeader \r\n          user={initialUser} loading={loading}\r\n        />\r\n        <div className=\"container\">\r\n          <Header />\r\n          <Nav \r\n            user_id={user_id}\r\n            user_logged_id={user_logged_id} \r\n            handleChangeUrl={this.handleChangeUrl} \r\n            handleChangeSection={this.handleChangeSection}\r\n          />\r\n          <MainSection>\r\n            <SideNews \r\n              handleChangeSection={this.handleChangeSection} \r\n              user={user} \r\n            />\r\n            <div className=\"main-page-container\">\r\n              {this.switchComponent()}\r\n            </div>\r\n          </MainSection>  \r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst MainSection = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    getUser: user => {\r\n      dispatch({ type: 'LOGGED_IN', payload: user })\r\n    }\r\n  })\r\n)(MainPage);","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport { withSnackbar } from 'notistack';\r\nimport API from './functions/API';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport { Button, Typography, TextField } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nclass ForgetPassword extends Component {\r\n  state = {\r\n    credentials: ''\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    if (this.state.credentials) {\r\n      const formData = new FormData();\r\n      formData.append('credentials', this.state.credentials);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/forget.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n\r\n          if (response === 1) {\r\n            self.props.enqueueSnackbar('На указанный вами при регистрации email - были отправлены рекомендации по восстановлению пароля', { variant: 'info' });\r\n            self.props.forgetPassword();\r\n          } else {\r\n            self.props.enqueueSnackbar('К сожалению, такого логина или email - не существует. Проверьте правильность введенных данных', { variant: 'info' });\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, введите, логин или пароль', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Wrapper>\r\n          <Icon>\r\n            <CloseIcon onClick={this.props.forgetPassword} />\r\n          </Icon>\r\n          <Typography variant='subtitle2'>Восстановление пароля.</Typography>\r\n          <TextField\r\n            label=\"E-mail или логин\"\r\n            variant=\"outlined\"\r\n            name='login'\r\n            fullWidth\r\n            margin='dense'\r\n            error={this.state.credential}\r\n            onChange={e => this.setState({ credentials: e.target.value })}\r\n            value={this.state.username}\r\n          />\r\n          <Button variant='contained' color='primary' onClick={this.handleSubmit}>Отправить</Button>\r\n        </Wrapper>\r\n        <div className=\"black-wrapper black-wrapper__this\" onClick={this.props.forgetPassword}></div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  background: #fff;\r\n  z-index: 100;\r\n  width: 500px;\r\n  height: 258px;\r\n  left: 0;\r\n  right: 0;\r\n  position: fixed;\r\n  top: 25%;\r\n  margin: auto;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  justify-content: space-evenly;\r\n  padding: 30px;\r\n`;\r\nconst Icon = styled.div`\r\n  position: absolute;\r\n  right: 25px;\r\n  top: 15px;  \r\n  cursor: pointer;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\nexport default withSnackbar(ForgetPassword);\r\n","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport Cookie from './functions/Cookie';\r\nimport ForgetPassword from './ForgetPassword';\r\nimport { connect } from 'react-redux';\r\nimport API from './functions/API';\r\nimport { Button } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport { withSnackbar } from 'notistack';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nclass SignupForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      login: '',\r\n      password: '',\r\n      isForget: '',\r\n      isPassHidden: false,\r\n      invalidText: false,\r\n      invalidPass: false\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    this.setState({ invalidText: false, invalidPass: false })\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  forgetPassword = () => this.setState({ isForget: !this.state.isForget });\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    if (this.state.login !== '' && this.state.password.length >= 8) {\r\n      const formData = new FormData();\r\n\r\n      formData.append('login', this.state.login);\r\n      formData.append('password', this.state.password);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/signup.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n          let user_id = res.user_id;\r\n          let cookie = new Cookie();\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось войти. Проверьте правильность введенных данных', { variant: 'warning' });\r\n              break;\r\n            case 0.5:\r\n              self.props.enqueueSnackbar('К сожалению, ваша учетная запись ещё не подтверждена, попробуйте войти позже', { variant: 'info' });\r\n              break;\r\n            case 1:\r\n              cookie.setCookie('user_id', user_id, 30);\r\n              localStorage.setItem('user_id', user_id);\r\n              window.location.href = `/`;\r\n              break;\r\n            default: break;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, заполните все поля', { variant: 'warning' });\r\n      if (this.state.password.length < 8) this.setState({ invalidPass: true })\r\n      if (!this.state.login) this.setState({ invalidText: true })\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"form-container\" style={{ 'paddingBottom': '45px' }}>\r\n          <form className=\"registerForm\" id=\"register\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n\r\n            <TextField\r\n              label=\"Логин или email\"\r\n              variant=\"outlined\"\r\n              name='login'\r\n              fullWidth\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.username}\r\n              error={this.state.invalidText}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='password'\r\n              error={this.state.invalidPass}\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.invalidPass ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <Buttons>\r\n              <Button variant='text' color='default' onClick={this.forgetPassword}>Забыли пароль?</Button>\r\n              <Button variant='contained' color='primary' type='submit'>Войти</Button>\r\n            </Buttons>\r\n            {this.state.isForget ? <ForgetPassword forgetPassword={this.forgetPassword} /> : null}\r\n          </form>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst Buttons = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 35px;\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    global: state\r\n  }),\r\n  dispatch => ({\r\n    login: (user) => {\r\n      dispatch({ type: 'LOGGED_IN', payload: user })\r\n    }\r\n  })\r\n)(withSnackbar(SignupForm));","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport { withSnackbar } from 'notistack';\r\nimport API from './functions/API';\r\nimport { Button } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\n\r\nclass RegisterForm extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      email: '',\r\n      login: '',\r\n      password: '',\r\n      confirmed: '',\r\n      isEmailValid: '',\r\n      isPassHidden: false, \r\n      entered: false\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.validateEmail = this.validateEmail.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showPassword = this.showPassword.bind(this);\r\n  }\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      entered: false\r\n    })\r\n    // если вводится е-мэйл то прогоняем через функцию\r\n    if (event.target.name === 'email') {\r\n      this.validateEmail(event.target.value);\r\n      // если вводимое значение пустое - то убираем подсказку \r\n      if (event.target.value === '') {\r\n        this.setState({ isEmailValid: '' });\r\n      }\r\n    }\r\n  }\r\n\r\n  validateEmail(email) {\r\n    // eslint-disable-next-line\r\n    const regExp = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    regExp.test(email) ? this.setState({ isEmailValid: true }) : this.setState({ isEmailValid: false });\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n    this.setState({ entered: true });\r\n\r\n    if (this.state.login && this.state.isEmailValid && this.state.password) {\r\n      const formData = new FormData();\r\n\r\n      formData.append('login', this.state.login);\r\n      formData.append('email', this.state.email);\r\n      formData.append('password', this.state.password);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/register.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          const response = res.result;\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось зарегистрироватьcя.', { variant: 'error' });\r\n              break;\r\n            case 1:\r\n              self.props.enqueueSnackbar('Вы успешно зарегистрировались, как только вашу учетную запись подтвердят - вы сможете начать пользоваться сервисом. Вы получите уведомление по указанной при регистрации почте.', { variant: 'success' });\r\n              self.setState({ \r\n                email: '',\r\n                login: '',\r\n                password: '',\r\n                confirmed: '',\r\n                isEmailValid: '',\r\n                isPassHidden: false, \r\n                entered: false\r\n              })\r\n              break;\r\n            case 2:\r\n              self.props.enqueueSnackbar('Пользователь с таким логином или email уже существует', { variant: 'warning' });\r\n              break;\r\n            default: return null;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка регистрации', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, заполните все поля', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  showPassword() {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"form-container\">\r\n          <form id=\"register\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n            <TextField\r\n              label=\"Логин или email\"\r\n              variant=\"outlined\"\r\n              name='login'\r\n              fullWidth\r\n              error={this.state.entered && !this.state.login}\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.login}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='password'\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              error={this.state.entered && this.state.password.length < 8}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.password.length > 0 && this.state.password.length < 8 ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <TextField\r\n              label=\"Повторите пароль\"\r\n              variant=\"outlined\"\r\n              name='confirmed'\r\n              fullWidth\r\n              margin='dense'\r\n              type='password'\r\n              error={this.state.entered && this.state.confirmed.length < 8}\r\n              onChange={this.handleChange}\r\n              value={this.state.confirmed}\r\n            />\r\n\r\n            {this.state.password !== this.state.confirmed && this.state.confirmed !== '' ? <FormHelperText style={{ color: '#f44336' }}>Пароль должны совпадать</FormHelperText> : null}\r\n\r\n            <TextField\r\n              label=\"Электронная почта\"\r\n              variant=\"outlined\"\r\n              name='email'\r\n              fullWidth\r\n              error={this.state.entered && !this.state.isEmailValid && !this.state.email.lentgh}\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            />\r\n            {!this.state.isEmailValid && this.state.email ? <FormHelperText style={{ color: '#f44336' }}>Пожалуйста, введите настоящий email адрес</FormHelperText> : ''}\r\n\r\n            <BtnWrapper>\r\n              <Button variant='contained' color='primary' type='submit'>Зарегистрироваться</Button>\r\n            </BtnWrapper>\r\n          </form>\r\n\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nconst BtnWrapper = styled.div`\r\n  button {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 30px;\r\n    margin: auto;\r\n    width: fit-content;\r\n  }\r\n`;\r\nexport default withSnackbar(RegisterForm);","import React from 'react';\r\nimport './css/BgBubbles.css';\r\n\r\nconst BgBubbles = () => {\r\n  return (\r\n    <ul className=\"bg-bubbles\">\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default BgBubbles;","import React, { Component } from 'react';\nimport SignupForm from './SignupForm';\nimport RegisterForm from './RegisterForm';\nimport Header from './Header';\nimport Typography from '@material-ui/core/Typography';\nimport BgBubbles from './BgBubbles';\nimport './css/LoginForms.css';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      whichForm: false,\n    }\n    this.changeForm = this.changeForm.bind(this);\n  }\n\n  changeForm() {\n    this.setState({whichForm: !this.state.whichForm});\n  }\n\n  render() {\n    return (\n      <div className=\"login-screen\">\n        <Header />\n        <div className=\"login-screen-container\">\n          <p className=\"login-screen-greetings\">Здравствуйте</p>  \n          <div className=\"login-button-container\">\n            <button className={this.state.whichForm ? 'login-screen-button login-screen-button-enabled' : 'login-screen-button'} onClick={this.changeForm}>\n              <Typography variant='button'>Войти</Typography>\n            </button>\n            <button className={this.state.whichForm ? 'login-screen-button' : 'login-screen-button login-screen-button-enabled'} onClick={this.changeForm}>\n              <Typography variant='button'>Зарегистрироваться</Typography>\n            </button>\n          </div>              \n          {this.state.whichForm ? <RegisterForm /> : <SignupForm />}                        \n        </div>\n        <BgBubbles /> \n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React, { Component } from 'react';\r\nimport Header from './Header';\r\nimport BgBubbles from './BgBubbles';\r\nimport './css/LoginForms.css';\r\nimport './css/Approved.css';\r\n\r\nclass Approved extends Component {\r\n  goToMain = () => window.location.href = '/';\r\n  closeWindow = () => window.close();\r\n\r\n  render() {\r\n   return (\r\n      <div className=\"login-screen\">\r\n        <Header />\r\n        <div className=\"approved-container\">\r\n          <h1>Регистрация пользователя была подтверждена.</h1>\r\n          <button onClick={this.goToMain}>На главную</button>                   \r\n        </div>\r\n        <BgBubbles /> \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Approved;","import React, { Component } from 'react';\r\nimport Header from './Header';\r\nimport BgBubbles from './BgBubbles';\r\nimport $ from 'jquery';\r\nimport './css/LoginForms.css';\r\nimport './css/Restore.css';\r\nimport { withSnackbar } from 'notistack';\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport API from './functions/API';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\n\r\nclass Restore extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pw: '',\r\n      confirmed: '',\r\n      isPassHidden: false,\r\n      entered: false\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      entered: false\r\n    })\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    this.setState({ entered: true });\r\n\r\n    if (self.state.pw === self.state.confirmed && self.state.pw && self.state.confirmed) {\r\n      self.setState({ modal: false });\r\n      e.preventDefault();\r\n      const formData = new FormData();\r\n\r\n      function getUrlVars() {\r\n        let vars = {};\r\n        // eslint-disable-next-line\r\n        let parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\r\n          vars[key] = value;\r\n        });\r\n        return vars;\r\n      }\r\n\r\n      formData.append('password', $('input[name=\"pw\"]').val());\r\n      formData.append('auth', getUrlVars()['auth'])\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/restore.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось изменить пароль', { variant: 'error' });\r\n              break;\r\n            case 1:\r\n              self.props.enqueueSnackbar('Поздравляем, успешно удалось сменить пароль - теперь вы можете войти в систему', { variant: 'success' });\r\n              setTimeout(() => window.location.href = 'login', 237);\r\n              break;\r\n            default: return null;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login-screen\">\r\n        <Header />\r\n        <div className=\"form-container restore-container\">\r\n          <Typography variant='h6'>Введите новый пароль.</Typography>\r\n          <Typography variant='caption'> Выбор более безопасного пароля поможет обеспечить защиту вашей личной информации.</Typography>\r\n\r\n          <InputWrapper>\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='pw'\r\n              value={this.state.pw}\r\n              onChange={this.handleChange}\r\n              error={this.state.pw.length > 0 && this.state.pw.length < 8}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.pw.length > 0 && this.state.pw.length < 8 ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <TextField\r\n              label=\"Повторите пароль\"\r\n              variant=\"outlined\"\r\n              name='confirmed'\r\n              fullWidth\r\n              margin='dense'\r\n              type='password'\r\n              error={this.state.entered && this.state.confirmed.length < 8 && this.state.confirmed.length > 0}\r\n              onChange={this.handleChange}\r\n              value={this.state.confirmed}\r\n            />\r\n            {this.state.pw !== this.state.confirmed && this.state.confirmed ? <FormHelperText style={{ color: '#f44336' }}>Пароль должны совпадать</FormHelperText> : null}\r\n          </InputWrapper>\r\n\r\n          <BtnContainer>\r\n            <Button variant='contained' color='primary' onClick={this.handleSubmit}>Сменить пароль</Button>\r\n          </BtnContainer>\r\n        </div>\r\n        <BgBubbles />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst BtnContainer = styled.div`\r\n  button {\r\n    position: absolute;\r\n    bottom: 35px;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    width: fit-content;\r\n  }\r\n`;\r\nconst InputWrapper = styled.div`\r\n  margin-top: 15px;\r\n`;\r\nexport default withSnackbar(Restore);","import React, { Component } from 'react';\r\nimport './css/404.css';\r\n\r\nclass Page404 extends Component {\r\n\r\n  goToMain = () => window.location.href = '/';\r\n\r\n  render() {\r\n    return (\r\n      <main>\r\n        <div className=\"loading wave\">\r\n          404\r\n        </div>\r\n        <div className=\"not-found wave\">\r\n          Страница не найдена\r\n        </div> \r\n      <button onClick={this.goToMain}>перейти на главную</button>\r\n    </main>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Page404;","import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport BgBubbles from './BgBubbles';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport DefaultAvatar from './img/photos/images.png';\r\nimport API from './functions/API';\r\nimport { withSnackbar } from 'notistack';\r\nimport { DatePicker } from 'material-ui-pickers';\r\n\r\nif (window.location.pathname === '/settings') {\r\n  $(document.body).css({\r\n    background: 'linear-gradient(to bottom right,#00c5fe,#9de3dc,#0d11b4)'\r\n  })\r\n}\r\n\r\nconst styles = {\r\n  default: {\r\n    width: '600px',\r\n    margin: '0 auto',\r\n    position: 'relative',\r\n    padding: '20px 40px 80px',\r\n    zIndex: 37\r\n  },\r\n  input: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    width: 120,\r\n    bottom: 25,\r\n    margin: 'auto'\r\n  },\r\n  upload: {\r\n    background: '#ef6c00',\r\n    color: 'white',\r\n    margin: 'auto',\r\n    cursor: 'pointer',\r\n    position: 'relative'\r\n  },\r\n  hiddenInput: {\r\n    opacity: 0,\r\n    position: 'absolute',\r\n    cursor: 'pointer',\r\n    left: 0, right: 0, bottom: 0, top: 0\r\n  },\r\n  avatar: {\r\n    width: 100,\r\n    height: 100,\r\n    marginBottom: 15,\r\n    borderRadius: '50%'\r\n  },\r\n  header: {\r\n    marginTop: 100,\r\n    marginBottom: 12,\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontWeight: 500\r\n  }\r\n};\r\n\r\nconst genders = [\r\n  {\r\n    value: 'мужской',\r\n    label: 'мужской'\r\n  },\r\n  {\r\n    value: 'женский',\r\n    label: 'женский',\r\n  }\r\n];\r\n\r\nclass Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: [],\r\n      selectedFile: null,\r\n      user_id: '',\r\n      uploadedAvatar: '',\r\n      selectedDate: ''\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  fileSelect = event => {\r\n    if (event.target.files[0].size < 2 * 1024 * 1024) {\r\n      this.setState({ selectedFile: event.target.files[0] })\r\n      this.uploadAvatar(event.target.files[0]);\r\n    } else {\r\n      this.props.enqueueSnackbar('Файл слишком большой, размер должен не превышать 2МБ', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  uploadAvatar = (file) => {\r\n    let fd = new FormData();\r\n    let files = file;\r\n    let self = this;\r\n    fd.append('file', files);\r\n    fd.append('id', this.state.user_id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/upload.php`,\r\n      type: 'post',\r\n      data: fd,\r\n      contentType: false,\r\n      processData: false,\r\n      success: function (res) {\r\n        if (window.location.host.includes('localhost')) {\r\n          self.setState({ uploadedAvatar: res.location.slice(22) })\r\n        } else {\r\n          self.setState({ uploadedAvatar: res.location.slice(6) })\r\n        }\r\n        console.log(res);\r\n      },\r\n    });\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const id = localStorage.getItem('user_id');\r\n    this.setState({ user_id: id });\r\n    fetch(`${API}/api/user/info.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n  }\r\n\r\n\r\n  handleChange = event => {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    let user = { ...this.state.user };\r\n    user[event.target.name] = event.target.value;\r\n    this.setState({ user });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    var self = this;\r\n    self.setState({ modal: false });\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append('id', self.state.user.id);\r\n    formData.append('surname', $('input[name=\"surname\"]').val());\r\n    formData.append('name', $('input[name=\"name\"]').val());\r\n    formData.append('birthday', self.state.selectedDate.slice(0, 10) || this.state.user.birthday);\r\n    formData.append('sex', $('input[name=\"sex\"]').val());\r\n    formData.append('position', $('input[name=\"position\"]').val());\r\n    formData.append('avatar', self.state.uploadedAvatar);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/settings.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        console.log(res);\r\n        let response = res.result;\r\n        switch (response) {\r\n          case 0:\r\n            self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n            break;\r\n          case 1:\r\n            self.props.enqueueSnackbar('Персональные данные изменены', { variant: 'success' });\r\n            window.location.href = `id${self.state.user.id}`;\r\n            break;\r\n          default: break;\r\n        }\r\n      },\r\n      error: function () {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | устанавливаем дату из пикера в нужном формате\r\n  |--------------------------------------------------\r\n  */\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n\r\n  render() {\r\n    const { user, uploadedAvatar } = this.state;\r\n\r\n    let avatar = null;\r\n    if (window.location.host.includes('localhost')) {\r\n      avatar = user.avatar;\r\n    } else {\r\n      avatar = `frontend/public/${user.avatar}`;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <Typography variant=\"h5\" style={{ ...styles.header }}>Начните заполнять персональные данные</Typography>\r\n\r\n        <Paper style={{ ...styles.default }} elevation={1}>\r\n\r\n          <form id=\"personal-info\" action=\"\" method=\"POST\" encType=\"multipart/form-data\">\r\n            {uploadedAvatar ?\r\n              <div style={{ ...styles.avatar, background: `url(${uploadedAvatar ? uploadedAvatar : DefaultAvatar}) no-repeat center/cover` }}></div> :\r\n              <div style={{ ...styles.avatar, background: `url(${avatar}) no-repeat center/cover` }}></div>}\r\n            <Button variant=\"contained\" style={{ ...styles.upload }}>\r\n              Загрузить фото профиля\r\n            <Icon style={{ marginLeft: 10 }}>cloud_upload</Icon>\r\n              <input\r\n                id='avatar'\r\n                accept=\"image/*\"\r\n                style={{ ...styles.hiddenInput }}\r\n                type=\"file\"\r\n                name='avatar'\r\n                onChange={this.fileSelect}\r\n              />\r\n            </Button>\r\n\r\n            <TextField\r\n              required\r\n              label=\"Ваше имя\"\r\n              name='name'\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.name}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <TextField\r\n              required\r\n              label=\"Фамилия\"\r\n              name='surname'\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.surname}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <TextField\r\n              select\r\n              required\r\n              label=\"Пол\"\r\n              InputLabelProps={{ shrink: true }}\r\n              value={user.sex}\r\n              onChange={this.handleChange}\r\n              helperText=\"Пожалуйста, выберите пол\"\r\n              margin=\"normal\"\r\n              name='sex'\r\n              style={{ ...styles.input }}\r\n            >\r\n              {genders.map(option => (\r\n                <MenuItem name='sex' key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n\r\n            <TextField\r\n              required\r\n              label=\"Должность\"\r\n              name=\"position\"\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.position}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <DatePicker\r\n              name=\"birthday\"\r\n              margin=\"normal\"\r\n              label='Дата рождения'\r\n              format={'Do MMMM YYYY'}\r\n              value={this.state.selectedDate ? this.state.selectedDate : user.birthday}\r\n              fullWidth={true}\r\n              InputLabelProps={{ shrink: true }}\r\n              onChange={this.handleDateChange}\r\n              aria-describedby=\"component-helper-text\"\r\n              style={{ ...styles.input }}\r\n              required\r\n            />\r\n\r\n            <Typography variant=\"caption\" gutterBottom>\r\n              *Дата рождения будет видна только руководству\r\n            </Typography>\r\n\r\n            <Button variant=\"contained\" color='primary' style={{ ...styles.button }} onClick={this.handleSubmit}>\r\n              Вперёд!\r\n           </Button>\r\n\r\n          </form>\r\n        </Paper>\r\n\r\n        <BgBubbles />\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Settings);","import React, {Component} from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport MainPage from './components/MainPage';\nimport LoginForm from './components/LoginForm';\nimport Approved from './components/Approved';\nimport Restore from './components/Restore';\nimport Page404 from './components/Page404';\nimport Settings from './components/Settings';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faComments, faHeart, faEnvelope, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nlibrary.add(faComments, faHeart, faEnvelope, faEdit)\n\nclass App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>          \n            <Route path='/id:user_id' component={MainPage}/>\n            <Route path='/friends'    component={MainPage}/>\n            <Route path='/colleagues' component={MainPage}/>\n           {/*  <Route path='/favourites' component={MainPage}/>\n            <Route path='/gallery'    component={MainPage}/> */}\n            <Route path='/tasks'      component={MainPage}/>\n           {/*  <Route path='/learnings'  component={MainPage}/> */}\n            <Route path='/messages'   component={MainPage}/>\n            <Route path='/news'       component={MainPage}/> \n            <Route path='/settings'   component={Settings}/>\n            <Route path=\"/login\"      component={LoginForm}/>\n            <Route path=\"/approved\"   component={Approved}/>\n            <Route path=\"/restore\"    component={Restore}/>\n            <Route path=\"/404\"        component={Page404}/>\n            <Route path=\"/:any\"       component={Page404}/>\n        </Switch> \n      </BrowserRouter> \n    );\n  }\n}\n\nexport default App;\n\n","import { combineReducers } from 'redux';\r\nimport user from './user';\r\nimport tasks from './tasks';\r\nimport news from './news';\r\nimport chats from './chats';\r\nimport room from './room';\r\nimport messages from './messages';\r\n\r\nexport default combineReducers({\r\n  user,\r\n  news,\r\n  tasks,\r\n  chats,\r\n  room,\r\n  messages\r\n})","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'LOGGED_IN':\r\n      return [action.payload]\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_NEWS':\r\n      return [...action.payload]\r\n    case 'DELETE_NEWS':\r\n      let nextState = state.filter(item => item.id !== action.payload);\r\n      return [...nextState]\r\n    case 'ADD_NEWS':\r\n      return [...action.payload]  \r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_TASKS':\r\n      return [...action.payload]\r\n    case 'MARK_COMPLETED':\r\n      return [...action.payload]\r\n    case 'ADD_TASK':\r\n      return [...action.payload]\r\n    case 'FILTER_TASKS':\r\n      return [...action.payload]\r\n    case 'DELETE_TASK':\r\n      let nextState = state.filter(item => item.id !== action.payload);\r\n      return [...nextState]\r\n    default:\r\n      return state\r\n  }\r\n}","import _ from 'lodash';\r\n\r\nexport default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_CHATS':\r\n      return [...action.payload]\r\n    case 'CREATE_CHAT':\r\n      return [...state, action.payload]\r\n    case 'DELETE_CHAT':\r\n      let cleared = state.filter(chat => chat.id !== action.payload);\r\n      return cleared\r\n    case 'ADD_MESSAGE':\r\n      let newState = state.filter(chat => chat.id !== action.payload.chat);\r\n      let currentChat = state.find(chat => chat.id === action.payload.chat);\r\n      currentChat.message = action.payload;\r\n      newState = _.concat(newState, currentChat)\r\n      return newState\r\n    case 'EDIT_MESSAGE':\r\n      let editedState = state.filter(chat => chat.message.id !== action.payload);\r\n      let editedMessage = state.find(chat => chat.message.id === action.payload);\r\n      editedMessage.message.body = action.body;\r\n      editedState = _.concat(editedState, editedMessage)\r\n      return editedState\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'OPEN_CHAT':\r\n      return {chat_id: action.payload[0], user: action.payload[1]}\r\n    case 'CLOSE_CHAT':\r\n      return {user: action.payload[1]}\r\n    case 'DELETE_CHAT':\r\n      let initial = state;\r\n      delete initial.chat_id;\r\n      initial.user.message = null;\r\n      return initial\r\n    case 'ASSIGN_CHAT':\r\n      let newState = state;\r\n      newState.chat_id = action.payload;\r\n      return newState;\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_MESSAGES':\r\n      return [...action.payload]\r\n    case 'ADD_MESSAGE':\r\n      let newMessage = action.payload;\r\n      newMessage.id = (Number(localStorage.getItem('message_id')) + 1).toString();\r\n      let finder = state.find(message => message.id === newMessage.id);\r\n      if (finder) {\r\n        newMessage.id = (Number(newMessage.id) + 1).toString();\r\n      }\r\n      return [...state, newMessage]\r\n    case 'DELETE_MESSAGE':\r\n      let newState = state.filter(message => message.id !== action.payload);\r\n      return newState\r\n    case 'CLOSE_CHAT':\r\n      return []\r\n    default:\r\n      return state\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducer from './reducers';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n/* eslint-disable */\nimport { MuiPickersUtilsProvider } from 'material-ui-pickers';\nimport MomentUtils from '@date-io/moment';\nimport moment from 'moment';\nimport 'moment/locale/ru';\nimport { SnackbarProvider } from 'notistack';\n\nmoment.locale('ru');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: '#1976d2' }, \n    secondary: { main: '#ff4800' },\n  },\n  typography: { useNextVariants: true }\n});\n\nfunction Root() {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <Provider store={store}>\n        <MuiPickersUtilsProvider utils={MomentUtils} moment={moment}>\n          <SnackbarProvider maxSnack={3}>\n            <App />\n          </SnackbarProvider>\n        </MuiPickersUtilsProvider>\n      </Provider>\n    </MuiThemeProvider>\n  );\n}\n\nlet store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n/* store.subscribe(() => console.log('subscribe', store.getState())); */\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}