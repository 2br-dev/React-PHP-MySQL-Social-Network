{"version":3,"sources":["components/img/photos/Water image_Dreamstime.jpg","components/img/icons/baseline-search-24px.svg","components/img/photos/images.png","components/Header.jsx","components/Loader/Loader.jsx","components/MainpageHeader.jsx","components/functions/API.js","components/SingleNews.jsx","components/SideNews.jsx","components/functions/Cookie.js","components/FriendsList/Friend.jsx","components/FriendsList/Search.jsx","components/FriendsList/FriendsList.jsx","components/PersonalInfo.jsx","components/Fab/Fab.jsx","components/Modal/Modal.jsx","components/Tasks/Autocomplete.jsx","components/Tasks/Pickers.jsx","components/Tasks/TextInput.jsx","components/Tasks/Stepper.jsx","components/Tasks/NewTask.jsx","components/Tasks/Task.jsx","components/Tasks/ConfirmDelete.jsx","components/Tasks/Tasks.jsx","components/News/NewNews.jsx","components/News/ConfirmDelete.jsx","components/News.jsx","components/Navigation/sections.js","components/Navigation/Navigation.jsx","components/Chat/ChatItem.jsx","components/Chat/NoMessages.jsx","components/Chat/Message.jsx","components/Chat/Messages.jsx","components/Chat/SendMessageInput.jsx","components/Chat/EditMessageInput.jsx","components/Chat/DeleteModal.jsx","components/Chat/ChatRoom.jsx","components/Chat/Dialogues.jsx","components/Chat/NoChats.jsx","components/Chat/Chat.jsx","components/MainPage.jsx","components/ForgetPassword.jsx","components/SignupForm.jsx","components/RegisterForm.jsx","components/BgBubbles.jsx","components/LoginForm.jsx","components/Approved.jsx","components/Restore.jsx","components/Page404.jsx","components/Settings.jsx","App.jsx","reducers/index.js","reducers/user.js","reducers/news.js","reducers/tasks.js","reducers/chats.js","reducers/room.js","reducers/messages.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","date","Date","react_default","a","createElement","className","dist_default","element","format","id","toLocaleString","weekday","Component","StyledLoader","styled","div","_templateObject","Loader","props","style","minHeight","CircularProgress_default","color","Wrapper","MainpageHeader_templateObject","defaultBackground","MainpageHeader","user","defaultAvatar","backgroundImage","concat","image","uploadedAvatar","window","location","host","includes","avatar","slice","loading","background","components_Loader_Loader","react","name","surname","position","Button_default","variant","href","API","origin","SingleNews","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getAvatars","likedBy","state","currentNews","liked_by","split","formData","FormData","self","assertThisInitialized","append","$","ajax","url","data","processData","contentType","type","success","res","setState","error","err","console","log","handleChange","e","commentText","target","value","addLike","actions","document","getElementById","pointerEvents","preventDefault","fetch","singleNewsId","then","response","json","setTimeout","removeLike","stopPropagation","submitComment","commentsLoading","toJSON","replace","toLocaleTimeString","fetchComments","enqueueSnackbar","deleteComment","news_id","thisComments","loadedComments","_this2","_this3","_this4","_this$props","closeNews","_this$state","userAvatar","Single","core_index_es","placement","title","Icon","Clear_default","onClick","PostHeader","Avatar","DefaultAvatar","author","importance","createImportantBar","PostContent","text","PostLikes","likes","getNoun","map","i","key","PostActions","length","getCommentsNoun","index_es","icon","marginLeft","_","some","Fragment","NewComment","TextArea","label","multiline","onChange","required","disabled","comment","Comments","marginTop","who","author_id","DelIcon","Delete_default","SingleNews_Wrapper","SingleNews_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","withSnackbar","SideNews","goToSingleNews","singleNews","reloadComponent","changeImportance","number","Math","abs","news","singleNewsData","comments","bind","getNews","records","NEWS_COUNTER","store","SideNews_Wrapper","SideNews_News","NewsSwitch","item","Warning_default","NoNews","handleChangeSection","scrollTo","components_SingleNews","SideNews_templateObject","SideNews_templateObject2","News","SideNews_templateObject3","SideNews_templateObject4","connect","dispatch","payload","Cookie","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","cookie","ca","c","charAt","substring","indexOf","getCookie","alert","prompt","setCookie","Friend","friend","ListItem_default","button","TouchRippleProps","classes","child","ListItemAvatar_default","Avatar_default","height","width","alt","src","ListItemText_default","inset","primary","secondary","SearchWrapper","Search_templateObject","Search","TextField_default","margin","searchValue","handleSearch","InputProps","endAdornment","InputAdornment_default","IconButton_default","aria-label","SearchIcon","opacity","FriendList","friends","initial","documentTitle","toLowerCase","filter","componentWillUnmount","user_id","toString","Paper_default","FriendWrapper","FriendsList_Search","List_default","Link","to","handleChangeUserId","FriendsList_Friend","FriendsList_templateObject","PersonalInfo","handleDateChange","selectedDate","removeInput","newChildInput","createInput","user_logged_id","fullWidth","InputLabelProps","shrink","Naked","InputBase_default","htmlFor","userInfo","nameError","yearError","childName","childBirthyear","loadingChild","handleSubmit","fetchUserInfo","deleteChild","prepareChild","handleChild","addChild","action","birthday","catch","event","objectSpread","_this$setState","defineProperty","modal","val","sex","result","_this$props2","childrens","childs","JSON","parse","Form","method","onSubmit","react_input_mask_default","mask","phone","padding","material_ui_pickers_esm","aria-describedby","select","status","Childrens","keys","Children","child_name","child_birthyear","NewChild","Done_default","ChildBtns","city","district","adress","vuz","fakultet","army_country","army_type","Btn","form","PersonalInfo_templateObject","PersonalInfo_templateObject2","PersonalInfo_templateObject3","PersonalInfo_templateObject4","PersonalInfo_templateObject5","PersonalInfo_templateObject6","PersonalInfo_templateObject7","withStyles","theme","fixed","bottom","spacing","unit","right","Tooltip_default","Add_default","ModalWindow","Modal_default","open","onClose","handleClose","component","inputComponent","_ref","inputRef","objectWithoutProperties","assign","ref","components","Control","inputProps","selectProps","input","innerRef","children","innerProps","textFieldProps","Menu","square","paper","MultiValue","tabIndex","classNames","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","noOptionsMessage","Option","buttonRef","selected","fontWeight","isSelected","Placeholder","placeholder","SingleValue","singleValue","ValueContainer","valueContainer","IntegrationReactSelect","users","selectStyles","base","palette","& input","font","root","react_select_esm","styles","options","multi","isMulti","control","React","flexGrow","display","flexDirection","justifyContent","flexWrap","flex","alignItems","overflow","backgroundColor","emphasize","grey","fontSize","left","zIndex","withTheme","MaterialUIPickers","Grid_default","container","justify","paddingBottom","ampm","selectedTime","locale","handleTimeChange","TextInput","TextInput_TextArea","handleTextChange","TextInput_templateObject","VerticalLinearStepper","activeStep","handleNext","handleBack","handleReset","checkDisabled","step","time","steps","Stepper_default","orientation","index","Step_default","StepLabel_default","StepContent_default","Typography_default","getStepContent","actionsContainer","Autocomplete","Pickers","elevation","resetContainer","resetAll","marginRight","marginBottom","NewTask","componentDidMount","Number","forWho","forEach","push","toLocaleDateString","join","getHours","getMinutes","tasks","onAddNewTask","_this$state2","NewTask_Wrapper","Close_default","Tasks_Stepper","NewTask_templateObject","task","Task","getUserNames","usersId","find","getAdresant","from","now","moment","end","until_date","difference","duration","diff","_milliseconds","expandIcon","ExpandMore_default","Task_Icon","TaskStatus","task-completed","task-doing","task-late","DeleteIcon","handleConfirm","details","Footer","for","reverse","until_time","leaveDelay","handleCompleted","Task_templateObject","span","Task_templateObject2","Task_templateObject3","Task_templateObject4","ConfirmDelete","ConfirmDelete_Wrapper","ConfirmDelete_Icon","ButtonContainer","handleDelete","ConfirmDelete_templateObject","ConfirmDelete_templateObject2","ConfirmDelete_templateObject3","Tasks","confirm","preparedToDelete","disabledButton","getTasks","handleOpen","done_date","done_time","markAsCompleted","handleFilter","filtered","onFilter","onDeleteTask","Tasks_Wrapper","Filters","Task_Task","Fab_Fab","Tasks_NewTask","Tasks_templateObject","Tasks_templateObject2","NewNews","Container","NewNews_Header","NewNews_Icon","Body","submitNews","Topic","newNewsTopic","invalidTopic","NewNews_TextArea","invalidText","newNewsText","NewNews_Footer","checked","newNewsImportance","NewNews_Wrapper","NewNews_templateObject","NewNews_templateObject2","NewNews_templateObject3","NewNews_templateObject4","NewNews_templateObject5","NewNews_templateObject6","NewNews_templateObject7","NewNews_templateObject8","News_ConfirmDelete_Wrapper","News_ConfirmDelete_Icon","ConfirmDelete_ButtonContainer","removeNews","Dialogue","News_ConfirmDelete_templateObject","section","News_ConfirmDelete_templateObject2","News_ConfirmDelete_templateObject3","ConfirmDelete_templateObject4","newNews","editing","preparedNewsId","confirmDelete","prepareNews","editNews","addNews","Important","News_templateObject","prepareDelete","handleAvatarRoute","showNews","onAddNews","NewsContainer","UserAvatar","NewsInfo","News_Icon","News_Body","News_TextArea","Actions","News_NoNews","ConfirmDelete_ConfirmDelete","News_templateObject2","News_templateObject3","News_templateObject4","News_templateObject5","News_templateObject6","News_templateObject7","News_templateObject8","News_templateObject9","sections","img","Person_default","Message_default","NewReleases_default","ListAlt_default","People_default","PATH","pathname","urlValue","Navigation","countTask","counter","Navigation_Wrapper","AppBar_default","Tabs_default","indicatorColor","centered","Tab_default","BadgeWrapper","Badge_default","badgeContent","Navigation_templateObject","Navigation_templateObject2","Time","ChatItem_templateObject","MessageHeader","ChatItem_templateObject2","string","openRoom","hasOwnProperty","message","chat","readed","fromDayStart","startOf","dateFromNow","DoneAll_default","isSame","calendar","body","NoMessages","NoMessages_Container","NoMessages_templateObject","Message_templateObject","Message_templateObject2","Message_templateObject3","_props$store","room","Message_Container","Message_Avatar","Message_Body","Edit_default","editMessage","isToday","edited","Messages_templateObject","messages","messageContainer","scrollTop","scrollHeight","Messages_Container","Chat_Message","SendMessageInput","SendMessageInput_Container","sendMessage","autoFocus","handleNewMessage","Send_default","SendMessageInput_templateObject","EditMessageInput","EditMessageInput_Container","submitEdit","handleEdit","startAdornment","closeEditing","EditMessageInput_templateObject","DeleteModal","DeleteModal_Container","closeDelete","submitDelete","Overlay","DeleteModal_templateObject","DeleteModal_templateObject2","ChatRoom","editText","deleting","newMessage","deleteID","editID","interval","getMessages","setInterval","clearInterval","chat_id","_this$props$store","localStorage","setItem","message_id","getItem","chats","createChat","addMessage","getMessageId","user1","user2","messageId","assignChat","deleteMessage","deleteChat","_success","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","apply","arguments","Room","RoomHeader","ChatRoom_Icon","ArrowBack_default","Chat_Messages","ChatRoom_templateObject","ChatRoom_templateObject2","ChatRoom_templateObject3","messageID","messageBody","rebuildList","completed","initialAnimation","openChat","closeChat","direction","pages","renderprops","Chat_ChatRoom","ChatItem","getDirection","Dialogues_FriendWrapper","reset","unique","native","items","transform","enter","leave","Dialogues_templateObject","NoChats","NoChats_Container","NoChats_templateObject","Chat","trim","getChats","userStore","fetchChats","Dialogues","MainPage","initialUser","handleChangeUrl","switchComponent","cookie_id","parseInt","current_id","getUser","components_PersonalInfo","components_Chat_Chat","components_News","components_Tasks_Tasks","FriendsList_FriendList","components_MainpageHeader","components_Header","components_Navigation_Navigation","MainSection","components_SideNews","MainPage_templateObject","ForgetPassword","credentials","forgetPassword","ForgetPassword_Wrapper","ForgetPassword_Icon","credential","username","ForgetPassword_templateObject","ForgetPassword_templateObject2","SignupForm","isForget","handleClickShowPassword","isPassHidden","login","password","invalidPass","VisibilityOff_default","Visibility_default","FormHelperText_default","Buttons","components_ForgetPassword","SignupForm_templateObject","global","RegisterForm","email","confirmed","isEmailValid","entered","validateEmail","showPassword","test","lentgh","BtnWrapper","RegisterForm_templateObject","BgBubbles","LoginForm","whichForm","changeForm","components_RegisterForm","components_SignupForm","components_BgBubbles","Approved","goToMain","closeWindow","close","Restore","pw","vars","m","getUrlVars","InputWrapper","BtnContainer","Restore_templateObject","Restore_templateObject2","Page404","css","cursor","top","borderRadius","textAlign","genders","Settings","fileSelect","files","size","selectedFile","uploadAvatar","file","fd","encType","Icon_default","accept","helperText","option","MenuItem_default","gutterBottom","library","add","faComments","faHeart","faEnvelope","faEdit","App","BrowserRouter","Switch","Route","path","combineReducers","undefined","toConsumableArray","nextState","newState","currentChat","editedState","editedMessage","createMuiTheme","main","typography","useNextVariants","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","core_styles","es","utils","MomentUtils","build","maxSnack","src_App"],"mappings":"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","file":"static/js/main.2c662b37.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Water image_Dreamstime.b2e60f28.jpg\";","module.exports = __webpack_public_path__ + \"static/media/baseline-search-24px.a87eca9e.svg\";","module.exports = \"data:image/png;base64,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\"","import React, { Component } from 'react';\r\nimport Moment from 'react-moment';\r\nimport './css/Header.css';\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    const date = new Date();\r\n    return (\r\n      <div className=\"absolute-header\">\r\n        <div className=\"header-team\">#ЕдинаяКоманда</div>\r\n        <div className=\"header-date\">\r\n          <span>сегодня</span>\r\n          <Moment element=\"span\" format=\"DD.MM.YYYY\">{date}</Moment>\r\n          <span id=\"header-date-day\">{date.toLocaleString('ru', {weekday: 'long'})}</span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport styled from 'styled-components';\r\n\r\nconst Loader = props => (\r\n  <StyledLoader style={{ minHeight: props.minHeight }}>\r\n    <CircularProgress color={props.color} />\r\n  </StyledLoader>\r\n)\r\n\r\nconst StyledLoader = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default Loader;","import React, { Fragment } from 'react';\r\nimport './css/MainpageHeader.css';\r\nimport image from './img/photos/images.png';\r\nimport Button from '@material-ui/core/Button';\r\nimport styled from 'styled-components';\r\nimport defaultBackground from './img/photos/Water image_Dreamstime.jpg';\r\nimport Loader from './Loader/Loader';\r\n\r\nfunction MainpageHeader(props) {\r\n  const { user } = props;\r\n  const defaultAvatar = { backgroundImage: `url(${image})` };\r\n  let uploadedAvatar = '';\r\n\r\n  if (window.location.host.includes('localhost') && user.avatar) {\r\n    uploadedAvatar = { backgroundImage: `url(${user.avatar.slice(16)})` };\r\n  } else {\r\n    uploadedAvatar = { backgroundImage: `url(${user.avatar})` };\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <header className=\"header\">\r\n        <div className=\"person\">\r\n          {props.loading\r\n            ?\r\n            <div className=\"person-image\" style={{ background: 'rgba(255,255,255,0.5)' }}>\r\n              <Loader minHeight={125} color='primary' />\r\n            </div>\r\n            :\r\n            <div className=\"person-image\" style={user.avatar === '' ? defaultAvatar : uploadedAvatar}></div>\r\n          }\r\n          <div className=\"person-info\">\r\n            <div className=\"person-info__container\">\r\n              {!props.loading\r\n                ?\r\n                (<Fragment>\r\n                  <p className=\"person-info__name\">{`${user.name} ${user.surname}`}</p>\r\n                  <p className=\"person-info__position\">{user.position}</p>\r\n                </Fragment>)\r\n                :\r\n                <Loader minHeight={70} color='primary' />}\r\n            </div>\r\n            <Button variant=\"contained\" href=\"logout.php\" color=\"primary\">Выйти</Button>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"contained\" href=\"/settings\" color=\"primary\">Настройки</Button>\r\n      </header>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  background: url('${defaultBackground}') no-repeat center/cover;\r\n`;\r\n\r\nexport default MainpageHeader;","let API = '';\r\n\r\nif (window.location.host.includes('localhost')) {\r\n  API = 'http://akvatory.local';\r\n} else {\r\n  API = window.location.origin;\r\n}\r\n\r\nexport default API;","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport $ from 'jquery';\r\nimport DefaultAvatar from './img/photos/images.png';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\r\nimport API from './functions/API';\r\nimport _ from 'lodash';\r\nimport Loader from './Loader/Loader';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass SingleNews extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      thisComments: [],\r\n      loadedComments: false,\r\n      commentText: '',\r\n      currentNews: [],\r\n      likedBy: [],\r\n      loading: true,\r\n      commentsLoading: false\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(`${API}/api/news/read_one.php?id=${this.props.singleNewsId}`)\r\n      .then(response => response.json())\r\n      .then(currentNews => this.setState({ currentNews }))\r\n    await this.fetchComments(this.props.singleNewsId);\r\n    await this.getAvatars(this.props.singleNewsId);\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  fetchComments(id) {\r\n    fetch(`${API}/api/news/single_comments.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(thisComments => this.setState({ thisComments, loadedComments: !this.state.loadedComments }))\r\n  }\r\n\r\n  // получаем аватарки лайкнувших пост\r\n  getAvatars = () => {\r\n    const likedBy = this.state.currentNews.liked_by.split(', ').slice(1);\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('likedBy', likedBy);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/getAvatars.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => self.setState({ likedBy: res }),\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n  handleChange = e => this.setState({ commentText: e.target.value });\r\n\r\n  // добавляем лайк\r\n  addLike = (id, e) => {\r\n    const actions = document.getElementById('actions-news');\r\n    actions.style.pointerEvents = 'none';\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    \r\n    $.ajax({\r\n      url: `${API}/api/news/addlike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (e, res) {\r\n        console.log(res);\r\n        fetch(`${API}/api/news/read_one.php?id=${self.props.singleNewsId}`)\r\n          .then(response => response.json())\r\n          .then(currentNews => self.setState({ currentNews }))\r\n          .then(() => self.getAvatars(self.props.singleNewsId))\r\n\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 1000)  \r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // убираем лайк\r\n  removeLike = (id, e) => {\r\n    const actions = document.getElementById('actions-news');\r\n    actions.style.pointerEvents = 'none';\r\n    const self = this;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/removelike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        console.log(res);\r\n        fetch(`${API}/api/news/read_one.php?id=${self.props.singleNewsId}`)\r\n          .then(response => response.json())\r\n          .then(currentNews => self.setState({ currentNews }))\r\n          .then(() => self.getAvatars(self.props.singleNewsId))\r\n\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 1000)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  submitComment = e => {\r\n    this.setState({ commentsLoading: true });\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('news_id', this.props.singleNewsId);\r\n    formData.append('who', `${this.props.user.name} ${this.props.user.surname}`);\r\n    formData.append('date', new Date().toJSON().slice(0, 10).replace(/-/g, '.'));\r\n    formData.append('visible', 1);\r\n    formData.append('time', new Date().toLocaleTimeString().slice(0, -3));\r\n    formData.append('text', this.state.commentText);\r\n    formData.append('author_id', this.props.user.id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addcomment.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function() {\r\n        self.setState({ commentText: '' });\r\n        self.fetchComments();\r\n        self.props.enqueueSnackbar('Комментарий был добавлен', { variant: 'success' });\r\n        setTimeout(() => self.setState({ commentsLoading: false }), 250);\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Не удалось оставить комментарий', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Удаление комментария \r\n  | arguments: @id \r\n  | type: @int\r\n  |--------------------------------------------------\r\n  */\r\n  deleteComment = (e, id, news_id) => {\r\n    this.setState({ commentsLoading: true });\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/deletecomment.php`,\r\n      data: { id, news_id },\r\n      type: 'POST',\r\n      success: function() {\r\n        self.props.enqueueSnackbar('Комментарий был удален', { variant: 'info' });\r\n        self.fetchComments();\r\n        setTimeout(() => self.setState({ commentsLoading: false }), 250);\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Не удалось удалить комментарий', { variant: 'error' });\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    const { closeNews, singleNewsId, user } = this.props;\r\n    const { thisComments, loadedComments, commentText, currentNews, likedBy, loading, commentsLoading } = this.state;\r\n\r\n    let avatar = null;\r\n    if (window.location.host.includes('localhost') && user.avatar) {\r\n      avatar = user.avatar.slice(16);\r\n    } else {\r\n      avatar = user.avatar;\r\n    }\r\n    let userAvatar = null;\r\n    if (window.location.host.includes('localhost') && currentNews.avatar) {\r\n      userAvatar = currentNews.avatar.slice(16);\r\n    } else {\r\n      userAvatar = currentNews.avatar;\r\n    }\r\n\r\n    if (!loadedComments) this.fetchComments(singleNewsId);\r\n\r\n    return (\r\n      <Fragment>\r\n\r\n        <Single>\r\n          {loading ? <Loader minHeight={500} color='primary' /> :\r\n            <Fragment>\r\n              <Tooltip placement='left' title='Закрыть'>\r\n                <Icon><CloseIcon onClick={closeNews} /></Icon>\r\n              </Tooltip>\r\n\r\n              <PostHeader>\r\n                <Avatar style={{ background: `url(${currentNews.avatar ? userAvatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                <Typography variant='subtitle2'>{currentNews.author}</Typography>            \r\n              </PostHeader>\r\n\r\n              {currentNews.importance === '1' ? this.props.createImportantBar(10) : null}\r\n\r\n              <Typography variant='h5'>{currentNews.title.replace(/&quot;/g, `\"`)}</Typography>\r\n\r\n              <PostContent>\r\n                <Typography variant='body1'>{currentNews.text.replace(/&quot;/g, `\"`)}</Typography>\r\n                <Typography variant='caption'>{currentNews.date}</Typography>\r\n              </PostContent>\r\n\r\n              <PostLikes>\r\n                <Typography variant='subtitle2'>{currentNews.likes} {this.props.getNoun(currentNews.likes)} \"Нравится\"</Typography>\r\n                {/* eslint-disable-next-line*/}\r\n                {likedBy.map((user, i) => {\r\n\r\n                  while (i < 7) {\r\n                    return (\r\n                      <Tooltip key={i} title={`${user.name} ${user.surname}`} placement=\"top\">\r\n                        <Avatar style={{ background: `url(${user.avatar ? user.avatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                      </Tooltip>\r\n                    )\r\n                  }\r\n                })}\r\n              </PostLikes>\r\n\r\n              <PostActions id='actions-news'>\r\n                {thisComments.length}\r\n                <Tooltip placement='top' title={`${thisComments.length} ${this.props.getCommentsNoun(thisComments.length)}`}>\r\n                  <FontAwesomeIcon icon='comments' style={{ marginLeft: 10 }} />\r\n                </Tooltip>\r\n\r\n                {!_.some(likedBy, ['id', user.id])\r\n                  ?\r\n                  <React.Fragment>\r\n                    <span>{currentNews.likes}</span>\r\n                    <Tooltip placement='top' title={`${currentNews.likes} ${this.props.getNoun(currentNews.likes)} \"Нравится\"`}>\r\n                      <FontAwesomeIcon onClick={e => this.addLike(currentNews.id, e)} icon='heart' style={{ marginLeft: 10 }} />\r\n                    </Tooltip>\r\n                  </React.Fragment>\r\n                  :\r\n                  <React.Fragment>\r\n                    <span>{currentNews.likes}</span>\r\n                    <Tooltip placement='top' title={`${currentNews.likes} ${this.props.getNoun(currentNews.likes)} \"Нравится\"`}>\r\n                      <FontAwesomeIcon onClick={e => this.removeLike(currentNews.id, e)} icon='heart' style={{ color: '#1976d2', marginLeft: 10 }} />\r\n                    </Tooltip>  \r\n                  </React.Fragment>\r\n                }\r\n            {/*     <Tooltip placement='top' title='Написать сообщение'>\r\n                  <FontAwesomeIcon icon='envelope' style={{ marginLeft: '25px' }} />\r\n                </Tooltip> */}\r\n                \r\n              </PostActions>\r\n\r\n              <NewComment>\r\n                <p className='newcomment-reply'>В ответ <a href={`${window.location.origin}/id${currentNews.id}`}>{currentNews.author}</a></p>\r\n                <div className='newcomment-input'>\r\n                  <Avatar style={{ background: `url(${user.avatar ? avatar : DefaultAvatar}) no-repeat center/cover` }}></Avatar>\r\n                  <TextArea>\r\n                    <TextField\r\n                      label='Комментарий'\r\n                      multiline\r\n                      variant='outlined'\r\n                      name='commentText'\r\n                      value={commentText}\r\n                      onChange={this.handleChange}\r\n                      required\r\n                    />\r\n                  </TextArea>\r\n                </div>\r\n                <Button variant='contained' color='primary' onClick={this.submitComment} disabled={!commentText}>Отправить</Button>\r\n              </NewComment>\r\n\r\n              {commentsLoading ? <Loader minHeight={280} color='primary' /> :\r\n                thisComments.map((comment, i) => {\r\n                  return (\r\n                    <Comments key={i}>\r\n                      <div className='comment-header'>\r\n                        <Avatar style={{ background: `url(${comment.avatar ? comment.avatar : DefaultAvatar}) no-repeat center/cover`, marginTop: 20 }}></Avatar>\r\n                        <Typography variant='subtitle2'>{comment.who}</Typography>\r\n                        <Typography variant='caption' className='comment-date'>{comment.date}</Typography>\r\n                      </div>\r\n                      <div className='comment-text'>{comment.text}</div>\r\n\r\n                      {comment.author_id === user.id ?\r\n                      <DelIcon>\r\n                        <Tooltip placement='left' title=\"Удалить\">\r\n                          <DeleteIcon onClick={(e) => this.deleteComment(e, comment.id, comment.news_id)} />\r\n                        </Tooltip>\r\n                      </DelIcon>\r\n                      : null}\r\n                    </Comments>\r\n                  )\r\n                })}\r\n\r\n            </Fragment>}\r\n        </Single>\r\n        <Wrapper onClick={closeNews}></Wrapper>\r\n\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst Single = styled.div`\r\n  width: 600px;\r\n  min-height: 300px;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  position: fixed;\r\n  z-index: 50;\r\n  background: #fff;\r\n  top: 100px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n  padding: 15px 30px;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  max-height: 80%;\r\n\r\n  .close {\r\n    top: 5px;\r\n  }\r\n  ::-webkit-scrollbar { \r\n    display: none; \r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  background: rgba(0,0,0,.5);\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  z-index: 49;\r\n`;\r\n\r\nconst PostHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 25px;\r\n\r\n  img {\r\n    border-radius: 50%;\r\n    width: 60px;\r\n  }\r\n  p {\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n  }\r\n`;\r\n\r\nconst PostContent = styled.div`\r\n  p {\r\n    margin: 15px 0 5px;\r\n    font-size: 20px;\r\n  }\r\n  span {\r\n    color: #657786;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst PostLikes = styled.div`\r\n  border-top: 1px solid #e6ecf0;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  margin-top: 20px;\r\n  1px solid #e6ecf0;\r\n  align-items: center;\r\n  display: flex;\r\n\r\n  div {\r\n    margin: 0 5px;\r\n  }\r\n\r\n  h6:first-child {\r\n    width: 50%;\r\n    padding: 15px 10px;\r\n    border-right: 1px solid #e6ecf0;\r\n  }\r\n\r\n  span {\r\n    width: 50%;\r\n    padding: 15px 10px 15px;\r\n  }\r\n`;\r\n\r\nconst PostActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n\r\n  img {\r\n    width: 15px;\r\n    margin-right: 40px;\r\n    margin-left: 10px;\r\n    opacity: .7;\r\n    cursor: pointer;\r\n  }\r\n\r\n  img:hover {\r\n    opacity: 1;\r\n    transition: .37s ease;\r\n  }\r\n`;\r\n\r\nconst Comments = styled.div`\r\n  margin-left: -30px;\r\n  width: 600px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  cursor: pointer;\r\n  padding: 15px 30px;\r\n  position: relative;\r\n\r\n  :last-child {\r\n    border-bottom: none;\r\n  }\r\n\r\n  :hover {\r\n    background: #f5f8fa;\r\n    transition: .37s ease;\r\n  }\r\n\r\n  .comment-header {\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n    div {\r\n      border-radius: 50%;\r\n      width: 30px;\r\n      height: 30px;\r\n    }\r\n  }\r\n\r\n  .comment-text {\r\n    padding-left: 45px;\r\n  }\r\n\r\n  .comment-date {\r\n    margin-left: 10px;\r\n    color: #657786;\r\n    :before {\r\n      content: '\\00b7';\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst NewComment = styled.div`\r\n  padding: 15px 30px;\r\n  background: #f5f8fa;\r\n  width: 600px;\r\n  margin-top: 20px;\r\n  margin-left: -30px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  border-top: 1px solid #e6ecf0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  .close {\r\n    top: 5px;\r\n  }\r\n  button {\r\n    width: 150px;\r\n    align-self: flex-end;\r\n    margin-top: 15px;\r\n  }\r\n  \r\n  .newcomment-reply {\r\n    margin: 0 40px;\r\n    color: #657786;\r\n    a {\r\n      color: #0084B4;\r\n      text-decoration: none;\r\n      margin-left: 5px;\r\n      :hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n\r\n  .newcomment-input {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    margin-top: 20px;\r\n    div {\r\n      margin-right: 0;\r\n    }\r\n  }\r\n`;\r\nconst Avatar = styled.div`\r\n  min-width: 30px;\r\n  border-radius: 50%;\r\n  min-height: 30px;\r\n  margin-right: 15px;\r\n`;\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-left: 10px;\r\n  background: #fff;\r\n  height: 110px;\r\n  width: 100%;\r\n\r\n  textarea {\r\n    max-height: 90px;\r\n    background: #fff;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  position: absolute;\r\n  right: 25px;\r\n  top: 10px;\r\n  cursor: pointer;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\n\r\nconst DelIcon = styled.div`\r\n  cursor: pointer;\r\n  right: 25px;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  position: absolute;\r\n  height: fit-content;\r\n  svg {\r\n    color: rgba(0,0,0,.54);\r\n  }\r\n`;\r\n\r\nexport default withSnackbar(SingleNews);","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport './css/SideNews.css';\r\nimport SingleNews from './SingleNews';\r\nimport styled from 'styled-components';\r\nimport { Typography, Paper, Switch, Button, Tooltip } from '@material-ui/core';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { connect } from 'react-redux';\r\nimport Loader from './Loader/Loader';\r\nimport API from './functions/API';\r\n\r\nclass SideNews extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      news: [],\r\n      importance: false,\r\n      singleNews: false,\r\n      singleNewsData: [],\r\n      singleNewsId: '',\r\n      comments: [],\r\n      loading: true\r\n    }\r\n    this.reloadComponent = this.reloadComponent.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  async reloadComponent() {\r\n    await this.setState({ loading: true })\r\n    await fetch(`${API}/api/news/read.php`)\r\n      .then(response => response.json())\r\n      .then(news => this.props.getNews(news.records || []))\r\n    await fetch(`${API}/api/news/getcomments.php`)\r\n      .then(response => response.json())\r\n      .then(comments => this.setState({ comments: comments.records }))\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  // переходим к конкретной новости\r\n  goToSingleNews = id => this.setState({ singleNews: true, singleNewsId: id });\r\n\r\n  // закрываем новость \r\n  closeNews = () => {\r\n    this.setState({ singleNews: false, singleNewsId: '' });\r\n    this.reloadComponent();\r\n  }\r\n\r\n  changeImportance = () => this.setState({ importance: !this.state.importance });\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'отметок';\r\n    number %= 10;\r\n    if (number === 1) return 'отметка';\r\n    if (number >= 2 && number <= 4) return 'отметки';\r\n    return 'отметок';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getCommentsNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'комментариев';\r\n    number %= 10;\r\n    if (number === 1) return 'комментарий';\r\n    if (number >= 2 && number <= 4) return 'комментария';\r\n    return 'комментариев';\r\n  }\r\n\r\n  render() {\r\n    const { news, importance, singleNews, singleNewsId, comments, loading } = this.state;\r\n    var NEWS_COUNTER = 0;\r\n\r\n    if (this.state.news.length === 0) {\r\n      setTimeout(() => this.setState({ news: this.props.store.news }), 0);\r\n    }\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          {loading ? <Loader minHeight={250} color='primary' /> :\r\n            <News>\r\n              <NewsSwitch>\r\n                <Typography variant='subtitle2'>Только важное </Typography>\r\n                <Switch color='primary' onClick={this.changeImportance.bind(this)} />\r\n              </NewsSwitch>\r\n              {/* eslint-disable-next-line */}\r\n              {news.length > 0 ? this.props.store.news.map((item, i) => {\r\n\r\n                if (importance) {\r\n                  if (item.importance === '1' && NEWS_COUNTER < 3) {\r\n                    NEWS_COUNTER++;\r\n                    return (\r\n                      <div key={i} className=\"news-item\">\r\n                        <div className=\"news-item-header\">\r\n                          <Typography variant='subtitle2'>{item.author}</Typography>\r\n                          <Typography variant='caption'>{item.date}</Typography>\r\n                        </div>\r\n                        <Typography variant='button' className='news-caption' onClick={() => this.goToSingleNews(item.id)}>\r\n                          {item.importance === '1' ? <Tooltip title='Важное!' placement=\"left\"><WarningIcon /></Tooltip> : null}\r\n                          {item.title}\r\n                        </Typography>\r\n                        <div className=\"news-item-text\">\r\n                          <Typography variant='body2'>{item.text}</Typography>\r\n                        </div>\r\n                        <Tooltip title=\"Перейти к комментариям\" placement=\"top-start\">\r\n                          <div\r\n                            onClick={() => this.goToSingleNews(item.id)}\r\n                            className=\"news-item-comment\"\r\n                          >\r\n                            <FontAwesomeIcon icon='comments' />\r\n                            {item.comments} {this.getCommentsNoun(item.comments)}\r\n                          </div>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )\r\n                  }\r\n                } else {\r\n                  while (i < 3) {\r\n                    return (\r\n                      <div key={i} className=\"news-item\">\r\n                        <div className=\"news-item-header\">\r\n                          <Typography variant='subtitle2'>{item.author}</Typography>\r\n                          <Typography variant='caption'>{item.date}</Typography>\r\n                        </div>\r\n                        <Typography variant='button' className='news-caption' onClick={() => this.goToSingleNews(item.id)}>\r\n                          {item.importance === '1' ? <Tooltip title='Важное!' placement=\"top-start\"><WarningIcon /></Tooltip> : null}\r\n                          {item.title.replace(/&quot;/g, `\"`)}\r\n                        </Typography>\r\n                        <div className=\"news-item-text\">\r\n                          <Typography variant='body2'>{item.text.replace(/&quot;/g, `\"`)}</Typography>\r\n                        </div>\r\n                        <Tooltip title=\"Перейти к комментариям\" placement=\"top-start\">\r\n                          <div\r\n                            onClick={() => this.goToSingleNews(item.id)}\r\n                            className=\"news-item-comment\"\r\n                          >\r\n                            <FontAwesomeIcon icon='comments' />\r\n                            {item.comments} {this.getCommentsNoun(item.comments)}\r\n                          </div>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )\r\n                  }\r\n                }\r\n              }) :\r\n                <NoNews><Typography variant='h6'>нет новостей</Typography></NoNews>\r\n              }\r\n              <Button\r\n                variant='contained'\r\n                color='primary'\r\n                onClick={() => { this.props.handleChangeSection('news'); window.scrollTo(0, 0) }}\r\n              >\r\n                КО ВСЕМ НОВОСТЯМ\r\n            </Button>\r\n\r\n              {singleNews\r\n                ?\r\n                <SingleNews\r\n                  closeNews={this.closeNews.bind(this)}\r\n                  singleNewsId={singleNewsId}\r\n                  news={news}\r\n                  user={this.props.user}\r\n                  comments={comments}\r\n                  getNoun={this.getNoun}\r\n                  getCommentsNoun={this.getCommentsNoun}\r\n                  reloadComponent={this.reloadComponent}\r\n                />\r\n                : null}\r\n\r\n            </News>}\r\n        </Paper>\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  width: 30%;\r\n`;\r\nconst NewsSwitch = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\nconst News = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n\r\n  .news-item {\r\n    width: 100%;\r\n    padding-bottom: 0;\r\n  }\r\n  svg {\r\n    margin-left: 0;\r\n  }\r\n  .news-caption {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    width: 111%;\r\n    cursor: pointer;\r\n    margin-left: -15px;\r\n    padding: 10px 15px 8px;\r\n    &:hover {\r\n      background: #1976d2;\r\n      color: #ffffff;\r\n      transition: .37s ease;\r\n    }\r\n    svg {\r\n      color: rgba(0,0,0,.15) !important;\r\n      margin-right: 8px;\r\n      font-size: 22px;\r\n    }\r\n  }\r\n\r\n  .news-item-comment {\r\n    width: 111%;\r\n    cursor: pointer;\r\n    margin-left: -15px;\r\n    padding: 12px 15px;\r\n    &:hover {\r\n      background: rgba(0,0,0,0.015);\r\n    }\r\n  }\r\n`;\r\nconst NoNews = styled.div`\r\n  height: 150px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .37;\r\n  margin-bottom: 20px;\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    getNews: (news) => {\r\n      dispatch({ type: 'FETCH_NEWS', payload: news })\r\n    }\r\n  })\r\n)(SideNews);","class Cookie {\r\n  setCookie(cname, cvalue, exdays) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\"+d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n  }\r\n\r\n  getCookie(cname) {\r\n    var name = cname + \"=\";\r\n    var ca = document.cookie.split(';');\r\n    for(var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') {\r\n        c = c.substring(1);\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length);\r\n      }\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  checkCookie() {\r\n    var user = this.getCookie(\"username\");\r\n    if (user !== \"\") {\r\n      alert(\"Welcome again \" + user);\r\n    } else {\r\n      user = prompt(\"Please enter your name:\", \"\");\r\n      if (user !== \"\" && user !== null) {\r\n        this.setCookie(\"username\", user, 365);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cookie;","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport defaultAvatar from '../img/photos/images.png';\r\n\r\nfunction Friend(props) {\r\n  let avatar = '';\r\n\r\n  if (window.location.host.includes('localhost') && props.friend.avatar) {\r\n    avatar = props.friend.avatar.slice(16);\r\n  } else {\r\n    avatar = props.friend.avatar;\r\n  }\r\n\r\n  return (\r\n    <ListItem button TouchRippleProps={{ classes: { child: 'touch-ripple' }}} >\r\n      <ListItemAvatar>\r\n        <Avatar\r\n          style={{ height: 100, width: 100 }}\r\n          alt={`${props.friend.name} ${props.friend.surname}`}\r\n          src={props.friend.avatar !== '' ? avatar : defaultAvatar}\r\n        />\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        inset\r\n        primary={`${props.friend.name} ${props.friend.surname}`}\r\n        secondary={props.friend.position}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default Friend;","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchIcon from '../img/icons/baseline-search-24px.svg';\r\nimport styled from 'styled-components';\r\n\r\nfunction Search(props) {\r\n  return (\r\n    <SearchWrapper>\r\n      <TextField\r\n        id=\"outlined-adornment-password\"\r\n        variant=\"outlined\"\r\n        type='text'\r\n        label=\"Поиск\"\r\n        margin='dense'\r\n        value={props.searchValue}\r\n        onChange={props.handleSearch}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"Искать в списке коллег\"\r\n              >\r\n                <img alt='Поиск' src={SearchIcon} style={{ opacity: '.37' }} />\r\n              </IconButton>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </SearchWrapper>\r\n  )\r\n}\r\n\r\nconst SearchWrapper = styled.div`\r\n  padding: 20px\r\n  & > div {\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nexport default Search;","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport Friend from './Friend';\r\nimport API from '../functions/API';\r\nimport styled from 'styled-components';\r\nimport Search from './Search';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Loader from '../Loader/Loader';\r\n\r\nexport default class FriendList extends Component {\r\n  state = { \r\n    friends: [], \r\n    initial: [],\r\n    searchValue: '',\r\n    loading: true,\r\n    documentTitle: document.title\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(friends => this.setState({ \r\n        friends: friends.data.filter(friend => friend.id !== this.props.user_id.toString()), \r\n        initial: friends.data.filter(friend => friend.id !== this.props.user_id.toString()), \r\n      })) \r\n      .then(() => this.setState({ loading: false }))   \r\n  }\r\n\r\n  handleSearch = (e) => {\r\n    this.setState({ searchValue: e.target.value });\r\n    const searchValue = e.target.value.toLowerCase();\r\n\r\n    document.title = e.target.value || this.state.documentTitle;\r\n\r\n    let friends = this.state.initial;\r\n    friends = friends.filter(friend => \r\n      friend.name.toLowerCase().includes(searchValue) || \r\n      friend.surname.toLowerCase().includes(searchValue) ||\r\n      friend.position.toLowerCase().includes(searchValue)\r\n    );\r\n    this.setState({ friends });\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.title = this.state.documentTitle;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Paper>\r\n        {\r\n          this.state.loading ? \r\n            <Loader minHeight={370} color='primary' /> \r\n          :\r\n            <FriendWrapper>\r\n            <Search \r\n              handleSearch={this.handleSearch} \r\n              searchValue={this.searchValue}\r\n            />\r\n            <List>\r\n              {this.state.friends.map(friend  => \r\n                <Link \r\n                  key={friend.id} \r\n                  to={`id${friend.id}`}\r\n                  onClick={() => this.props.handleChangeUserId(friend.id)}\r\n                >\r\n                  <Friend\r\n                    friend={friend} \r\n                  />\r\n                </Link>\r\n              )} \r\n            </List>\r\n          </FriendWrapper>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst FriendWrapper = styled.div`\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n  ul {\r\n    padding: 0;\r\n    padding-bottom: 50px;\r\n  }\r\n`;","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport API from './functions/API';\r\nimport InputMask from 'react-input-mask';\r\nimport './css/PersonalInfo.css';\r\nimport defaultAvatar from './img/photos/images.png';\r\nimport { Typography, TextField, Tooltip, Paper, FormControl, FormHelperText, Button, MenuItem, InputLabel } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Done';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Loader from './Loader/Loader';\r\nimport { DatePicker } from 'material-ui-pickers';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass PersonalInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userInfo: {},\r\n      newChildInput: false,\r\n      nameError: true,\r\n      yearError: true,\r\n      childName: '',\r\n      childBirthyear: '',\r\n      loading: true,\r\n      selectedDate: '',\r\n      loadingChild: false\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.fetchUserInfo = this.fetchUserInfo.bind(this);\r\n    this.deleteChild = this.deleteChild.bind(this);\r\n    this.prepareChild = this.prepareChild.bind(this);\r\n    this.handleChild = this.handleChild.bind(this);\r\n    this.addChild = this.addChild.bind(this);\r\n    this.removeInput = this.removeInput.bind(this);\r\n  }\r\n\r\n  fetchUserInfo(action) {\r\n    if (!action) this.setState({ loading: true });\r\n      \r\n    if (action === 'child') this.setState({ loadingChild: true });\r\n\r\n    fetch(`${API}/api/user/info.php?id=${this.props.user_id}`)\r\n      .then(response => response.json())\r\n      .then(userInfo => this.setState({ userInfo, selectedDate: userInfo.birthday }))\r\n      .then(() => this.setState({ loading: false, loadingChild: false }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  // делаем запрос перед рендером\r\n  componentDidMount() {\r\n    this.fetchUserInfo();\r\n  }\r\n\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    let userInfo = { ...this.state.userInfo };\r\n    userInfo[event.target.name] = event.target.value;\r\n    this.setState({ userInfo });\r\n  }\r\n\r\n  prepareChild() {\r\n    this.setState({ newChildInput: true })\r\n  }\r\n\r\n  handleChild(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      nameError: true,\r\n      yearError: true\r\n    })\r\n  }\r\n\r\n  addChild(e) {\r\n    e.preventDefault();\r\n    if (this.state.childName && this.state.childBirthyear) {\r\n      var self = this;\r\n      const formData = new FormData();\r\n      formData.append('name', this.state.childName);\r\n      formData.append('year', this.state.childBirthyear);\r\n      formData.append('parent', self.props.user_logged_id);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/child/add.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          self.fetchUserInfo('child');\r\n          self.setState({ newChildInput: false, childBirthyear: '', childName: '' });\r\n          self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n          console.log(res);\r\n        },\r\n        error: function() {\r\n          self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      if (this.state.newChildInput) {\r\n        this.props.enqueueSnackbar('Нужно заполнить все поля', { variant: 'warning' });\r\n        if (!this.state.childBirthyear) this.setState({ yearError: false })\r\n        if (!this.state.childName) this.setState({ nameError: false })\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteChild(id) {\r\n    var self = this;\r\n    self.setState({ modal: false });\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/child/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.fetchUserInfo('child');\r\n        self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n        console.log(res);\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  removeInput = () => this.setState({ newChildInput: false });\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append('id', this.props.user_logged_id);\r\n    formData.append('adress', $('input[name=\"adress\"]').val());\r\n    formData.append('army_country', $('input[name=\"army_country\"]').val());\r\n    formData.append('army_type', $('input[name=\"army_type\"]').val());\r\n    formData.append('birthday', this.state.selectedDate.slice(0, 10));\r\n    formData.append('district', $('input[name=\"district\"]').val());\r\n    formData.append('fakultet', $('input[name=\"fakultet\"]').val());\r\n    formData.append('name', $('input[name=\"name\"]').val());\r\n    formData.append('phone', $('input[name=\"phone\"]').val());\r\n    formData.append('position', $('input[name=\"position\"]').val());\r\n    formData.append('status', $('input[name=\"status\"]').val());\r\n    formData.append('surname', $('input[name=\"surname\"]').val());\r\n    formData.append('vuz', $('input[name=\"vuz\"]').val());\r\n    formData.append('city', $('input[name=\"city\"]').val());\r\n    formData.append('sex', this.state.userInfo.sex);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/update.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        let response = res.result;\r\n        switch (response) {\r\n          case 0:\r\n            self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n            break;\r\n          case 1:\r\n            self.fetchUserInfo('update');\r\n            self.props.enqueueSnackbar('Персональные данные были обновлены', { variant: 'success' });\r\n            self.addChild(e);\r\n            break;\r\n          default: break;\r\n        }\r\n      },\r\n      error: function() {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  createInput = (label, value, name) => {\r\n    const { user_id, user_logged_id } = this.props;\r\n\r\n    if (user_id === user_logged_id) {\r\n      return (\r\n        <TextField\r\n          label={label}\r\n          value={value}\r\n          fullWidth={true}\r\n          name={name}\r\n          margin='dense'\r\n          InputLabelProps={{ shrink: true }}\r\n          onChange={this.handleChange}\r\n          variant=\"outlined\"\r\n        />\r\n      )\r\n    } else {\r\n      return (\r\n        <Naked>\r\n          {name === 'name' || name === 'surname' || name === 'position' ? (\r\n            <FormControl>\r\n              <InputBase value={value} />\r\n            </FormControl>\r\n          ) : (\r\n              <FormControl>\r\n                <InputLabel htmlFor={name}>{label}</InputLabel>\r\n                <InputBase id={name} value={value} />\r\n              </FormControl>\r\n            )}\r\n        </Naked>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loading, userInfo, newChildInput, childName, childBirthyear, nameError, yearError } = this.state;\r\n    const { user_id, user_logged_id, user } = this.props;\r\n    let childrens = {};\r\n    let avatar = user.avatar;\r\n\r\n    if (userInfo.childs) childrens = JSON.parse(userInfo.childs.replace(/\\//g, ''));\r\n    if (window.location.host.includes('localhost') && avatar) avatar = avatar.slice(16);\r\n\r\n    return (\r\n      <Paper className=\"personal\">\r\n\r\n        {!loading ? <Form id=\"personal-info\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n          <div className=\"personal-header\">\r\n            <div className=\"personal-header__photo\">\r\n              <div style={{ background: `url(${avatar ? avatar : defaultAvatar}) no-repeat center/cover` }}></div>\r\n            </div>\r\n            <div className={user_logged_id === user_id ? 'personal-header__info' : null}>\r\n              {user_logged_id === user_id ? (\r\n                <Fragment>\r\n                  {this.createInput('Имя', userInfo.name, 'name')}\r\n                  {this.createInput('Фамилия', userInfo.surname, 'surname')}\r\n                  {this.createInput('Должность', userInfo.position, 'position')}\r\n                </Fragment>\r\n              ) : (\r\n                  <Fragment>\r\n                    <InputBase className='user-header' value={userInfo.name + ' ' + userInfo.surname} />\r\n                    <span className='user-position'>{this.createInput('Должность', userInfo.position, 'position')}</span>\r\n                  </Fragment>\r\n                )}\r\n\r\n              {user_logged_id === user_id ? (\r\n                <InputMask\r\n                  mask=\"+7 (999) 99-99-999\"\r\n                  value={userInfo.phone}\r\n                  onChange={this.handleChange}\r\n                >\r\n                  {() => <TextField\r\n                    label='Номер телефона'\r\n                    name='phone'\r\n                    fullWidth={true}\r\n                    margin='dense'\r\n                    InputLabelProps={{ shrink: true }}\r\n                    variant=\"outlined\"\r\n                  />}\r\n                </InputMask>) : (\r\n                  <Naked>\r\n                    <InputBase id='phone' style={{ pointerEvents: 'none', padding: 0 }} value={userInfo.phone} />\r\n                  </Naked>\r\n                )}\r\n\r\n              {user_logged_id === user_id ? (\r\n                <FormControl >\r\n                  <DatePicker\r\n                    variant='outlined'\r\n                    name=\"birthday\"\r\n                    margin='dense'\r\n                    label='Дата рождения'\r\n                    format={'Do MMMM YYYY'}\r\n                    value={this.state.selectedDate ? this.state.selectedDate : userInfo.birthday}\r\n                    fullWidth={true}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    onChange={this.handleDateChange}\r\n                    aria-describedby=\"component-helper-text\"\r\n                  />\r\n                  <FormHelperText id=\"component-helper-text\">*Год рождения будет виден только руководству</FormHelperText>\r\n                </FormControl>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Семья</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {user_logged_id === user_id ? (\r\n              <TextField\r\n                select\r\n                label=\"Семейное положение\"\r\n                name=\"status\"\r\n                value={userInfo.status || ''}\r\n                onChange={this.handleChange}\r\n                margin=\"dense\"\r\n                variant='outlined'\r\n                fullWidth={true}\r\n                InputLabelProps={{ shrink: true }}\r\n              >\r\n                {userInfo.sex === 'женский' ?\r\n                  <MenuItem value=\"Не замужем\">Не замужем</MenuItem> :\r\n                  <MenuItem value=\"Не женат\">Не женат</MenuItem>\r\n                }\r\n                {userInfo.sex === 'женский' ?\r\n                  <MenuItem value=\"Замужем\">Замужем</MenuItem> :\r\n                  <MenuItem value=\"Женат\">Женат</MenuItem>\r\n                }\r\n                <MenuItem value=\"В гражданском браке\">В гражданском браке</MenuItem>\r\n              </TextField>\r\n            ) : (\r\n                <Naked>\r\n                  <FormControl>\r\n                    <InputLabel htmlFor='status'>Семейное положение</InputLabel>\r\n                    <InputBase id='status' value={userInfo.status} />\r\n                  </FormControl>\r\n                </Naked>\r\n              )}\r\n          </div>\r\n          <div className=\"personal-section\">\r\n          \r\n              <Fragment>\r\n                <div className=\"personal-section__header\">\r\n                  <Typography variant='h6' color='primary'>Дети</Typography>\r\n                  <hr />\r\n                </div>\r\n                {this.state.loadingChild ? <Loader minHeight={120} color='primary' /> :\r\n                <Childrens>\r\n                  {Object.keys(childrens).map(child =>\r\n                    <Children key={childrens[child].id}>\r\n                      <Typography variant='subtitle2'>Имя: {childrens[child].child_name} </Typography>\r\n                      <Typography variant='caption'>{childrens[child].child_birthyear} г.р.</Typography>\r\n                      <Tooltip title=\"Удалить\" placement=\"right\"><Clear onClick={() => this.deleteChild(childrens[child].id)} /></Tooltip>\r\n                    </Children>\r\n                  )}\r\n                </Childrens>}\r\n              </Fragment>\r\n\r\n            {newChildInput ? (<NewChild>\r\n              <div>\r\n                <TextField\r\n                  label='Имя'\r\n                  value={childName}\r\n                  fullWidth={true}\r\n                  name='childName'\r\n                  margin='dense'\r\n                  error={!nameError}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  onChange={this.handleChild}\r\n                  variant=\"outlined\"\r\n                />\r\n                <TextField\r\n                  label='Год рождения'\r\n                  value={childBirthyear}\r\n                  fullWidth={true}\r\n                  name='childBirthyear'\r\n                  margin='dense'\r\n                  type='date'\r\n                  error={!yearError}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  onChange={this.handleChild}\r\n                  variant=\"outlined\"\r\n                />\r\n              </div>\r\n              <span>\r\n                <Tooltip title=\"Добавить\" placement=\"right\">\r\n                  <AddIcon onClick={this.addChild} />\r\n                </Tooltip>\r\n                <Tooltip title=\"Отменить\" placement=\"right\">\r\n                  <Clear onClick={() => this.setState({ newChildInput: false, childBirthyear: '', childName: '', nameError: true, yearError: true })} />\r\n                </Tooltip>\r\n              </span>\r\n            </NewChild>) : null}\r\n\r\n            {user_logged_id === user_id ? (\r\n              <ChildBtns>\r\n                <Button variant='contained' color='primary' onClick={newChildInput ? this.addChild : this.prepareChild}>Добавить</Button>\r\n              </ChildBtns>) : null}\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Контакты</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {this.createInput('Родной город', userInfo.city, 'city')}\r\n            {this.createInput('Области/края', userInfo.district, 'district')}\r\n            {this.createInput('Актуальный адрес', userInfo.adress, 'adress')}\r\n\r\n          </div>\r\n          <div className=\"personal-section\">\r\n            <div className=\"personal-section__header\">\r\n              <Typography variant='h6' color='primary'>Образование</Typography>\r\n              <hr />\r\n            </div>\r\n\r\n            {this.createInput('ВУЗ', userInfo.vuz, 'vuz')}\r\n            {this.createInput('Факультет', userInfo.fakultet, 'fakultet')}\r\n\r\n          </div>\r\n          {userInfo.sex === 'мужской' ?\r\n            <div className=\"personal-section\">\r\n              <div className=\"personal-section__header\">\r\n                <Typography variant='h6' color='primary'>Служба</Typography>\r\n                <hr />\r\n              </div>\r\n\r\n              {this.createInput('Страна', userInfo.army_country, 'army_country')}\r\n              {this.createInput('Род войск', userInfo.army_type, 'army_type')}\r\n            </div> : null}\r\n\r\n          {user_logged_id === user_id ? <Btn><Button type='submit' variant='contained' color='primary' onClick={this.handleSubmit}>Обновить данные</Button></Btn> : null}\r\n        </Form> : <Loader minHeight={400} color='primary' />}\r\n      </Paper >\r\n    )\r\n  }\r\n}\r\nconst Form = styled.form`\r\n  padding-bottom: 30px;\r\n  label {\r\n    text-transform: lowercase;\r\n  }\r\n  .user-header {\r\n    color: #1976d2;\r\n    font-size: 20px;\r\n  }\r\n  .user-position {\r\n    display: block;\r\n    margin-top: -10px;\r\n    & > div > div {\r\n      margin: 0;\r\n      padding: 0;\r\n      & > div > input {\r\n        color: rgba(0,0,0,.54);\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  fieldset {\r\n    border: none;\r\n  }\r\n`;\r\nconst Btn = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\nconst Children = styled.div`\r\n  width: 30%;\r\n  position: relative;\r\n  margin-bottom: 15px;\r\n  margin-right: 3%;\r\n\r\n  &:hover > svg {\r\n    display: block;\r\n  } \r\n\r\n  svg {\r\n    display: none;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    opacity: .5;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    &:hover {\r\n      opacity: .8;\r\n    }\r\n  }\r\n`;\r\nconst Childrens = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: 20px 0 5px;\r\n  padding-left: 15px;\r\n`;\r\nconst NewChild = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  & > div {\r\n    width: 90%;\r\n  }\r\n\r\n  svg {\r\n    opacity: .5;\r\n    cursor: pointer;\r\n    font-size: 24px;\r\n    &:hover {\r\n      opacity: .8;\r\n    }\r\n  }\r\n`;\r\nconst ChildBtns = styled.div`\r\n  margin-top: 15px;\r\n  button {\r\n    margin-right: 15px;\r\n  }\r\n  padding-left: 15px;\r\n`;\r\nconst Naked = styled.div`\r\n  width: 100%;\r\n  display: inline-block;\r\n  & > div {\r\n    display: block;\r\n    margin-bottom: 10px;\r\n    padding-left: 37px;\r\n  }\r\n  & > div > div {\r\n    display: block;\r\n    pointer-events: none;\r\n    margin-top: -5px;\r\n  }\r\n  label {\r\n    font-size: 12px;\r\n    position: relative;\r\n    text-transform: lowercase;\r\n  }\r\n  .inline-input {\r\n    display: inline-flex;\r\n    margin-left: 10px;\r\n  }\r\n`;\r\nexport default withSnackbar(PersonalInfo);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { Fab as Fabulous } from '@material-ui/core';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst styles = theme => ({\r\n  fixed: {\r\n    position: 'fixed',\r\n    bottom: theme.spacing.unit * 2,\r\n    right: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nfunction Fab(props) {\r\n  const { classes } = props;\r\n  return (\r\n    <div>\r\n      <Tooltip title={props.title} aria-label={props.title}>\r\n        <Fabulous color={props.secondary ? 'secondary' : 'primary'} className={classes.fixed}>\r\n          <AddIcon />\r\n        </Fabulous>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n}\r\n\r\nFab.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Fab);","import React from 'react';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\nexport default function ModalWindow(props) {\r\n  return (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={props.handleClose}\r\n    >\r\n      {props.component}\r\n    </Modal>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport Select from 'react-select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography, FormControlLabel, Checkbox, NoSsr, TextField, Paper, Chip, MenuItem } from '@material-ui/core';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    height: 120,\r\n    marginTop: 20,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n      0.08,\r\n    ),\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n  },\r\n  singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  }\r\n});\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Menu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass IntegrationReactSelect extends React.Component {\r\n\r\n  render() {\r\n    const { classes, theme } = this.props;\r\n    \r\n    const users = this.props.users.map(user => ({\r\n      value: user.id,\r\n      label: `${user.name} ${user.surname}`,\r\n    }));\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <NoSsr>\r\n          <Select\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            textFieldProps={{\r\n              label: 'Сотрудники',\r\n              InputLabelProps: {\r\n                shrink: true,\r\n              },\r\n            }}\r\n            options={users}\r\n            components={components}\r\n            value={this.props.multi}\r\n            onChange={this.props.handleChange('multi')}\r\n            placeholder=\"Выберите сотрудников\"\r\n            isMulti\r\n          />\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                onChange={this.props.changeImportance}\r\n                color=\"primary\"\r\n              />\r\n            }\r\n            label=\"Отметить как важную\"\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nIntegrationReactSelect.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles, { withTheme: true })(IntegrationReactSelect);","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { TimePicker, DatePicker } from 'material-ui-pickers';\r\n\r\nclass MaterialUIPickers extends React.Component {\r\n  render() {\r\n    return (\r\n      <Grid container justify=\"space-around\" style={{ paddingBottom: 30 }}>\r\n        <DatePicker\r\n          margin=\"normal\"\r\n          label=\"Выберите дату\"\r\n          value={this.props.selectedDate}\r\n          fullWidth={true}\r\n          onChange={this.props.handleDateChange}\r\n        />\r\n        <TimePicker\r\n          ampm={false}\r\n          margin=\"normal\"\r\n          label=\"Выберите время\"\r\n          value={this.props.selectedTime}\r\n          locale='ru'\r\n          fullWidth={true}\r\n          onChange={this.props.handleTimeChange}\r\n        />\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MaterialUIPickers;","import React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function TextInput(props) {\r\n  return (\r\n    <TextArea>\r\n      <TextField\r\n        label=\"Поставленная задача\"\r\n        multiline\r\n        variant=\"outlined\"\r\n        name='text'\r\n        onChange={props.handleTextChange}\r\n        value={props.text}\r\n        required\r\n      />\r\n    </TextArea>\r\n  )\r\n}\r\n\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n  height: 150px;\r\n\r\n  textarea {\r\n    max-height: 130px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Autocomplete from './Autocomplete';\r\nimport Pickers from './Pickers';\r\nimport TextInput from './TextInput';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  actionsContainer: {\r\n    marginBottom: theme.spacing.unit * 2,\r\n  },\r\n  resetContainer: {\r\n    padding: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\nfunction getSteps() {\r\n  return ['Выберите сотрудника и важность', 'Назначьте дату и время', 'Поставьте задачу'];\r\n}\r\n\r\nfunction getStepContent(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return `Вы можете выбрать одного или более сотрудников. К тому же можете установить повышенную важность задачи.`;\r\n    case 1:\r\n      return 'Выберите дату и время в соответствующих полях.';\r\n    case 2:\r\n      return `Сотрудник сможет найти поставленные ему задачи в уведомлениях.`;\r\n    default:\r\n      return 'Unknown step';\r\n  }\r\n}\r\n\r\nclass VerticalLinearStepper extends React.Component {\r\n  state = {\r\n    activeStep: 0,\r\n  };\r\n\r\n  handleNext = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep + 1,\r\n    }));\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep - 1,\r\n    }));\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      activeStep: 0,\r\n    });\r\n  };\r\n\r\n  checkDisabled = (step, multi, date, time, text) => {\r\n    if (step === 0 && multi.length !== 0) return false;\r\n    if (step === 1 && typeof date === 'string' && typeof time === 'string') return false;\r\n    if (step === 2 && text.length > 0) return false;\r\n    \r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const { classes, users, multi, selectedTime, selectedDate, text } = this.props;\r\n    const steps = getSteps();\r\n    const { activeStep } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n          {steps.map((label, index) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n              <StepContent>\r\n                <Typography>{getStepContent(index)}</Typography>\r\n                <div className={classes.actionsContainer}>\r\n                  <div>\r\n                    <Button\r\n                      disabled={activeStep === 0}\r\n                      onClick={this.handleBack}\r\n                      className={classes.button}\r\n                    >\r\n                      Назад\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      onClick={activeStep === steps.length - 1 ? () => {this.props.handleSubmit(); this.handleNext()} : this.handleNext}\r\n                      className={classes.button}\r\n                      disabled={this.checkDisabled(activeStep, multi, selectedDate, selectedTime, text)} \r\n                    >\r\n                      {activeStep === steps.length - 1 ? 'Финиш' : 'Дальше'}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </StepContent>\r\n            </Step>\r\n          ))}\r\n                        \r\n        </Stepper>\r\n\r\n        {/* Контент */}\r\n        {activeStep === 0 \r\n          ? <Autocomplete \r\n              users={users} \r\n              multi={multi}\r\n              handleChange={this.props.handleChange}\r\n              changeImportance={this.props.changeImportance}\r\n            />\r\n          : activeStep === 1\r\n          ? <Pickers \r\n              selectedTime={selectedTime} \r\n              selectedDate={selectedDate}\r\n              handleDateChange={this.props.handleDateChange}\r\n              handleTimeChange={this.props.handleTimeChange}\r\n            />\r\n          : activeStep === 2\r\n          ? <TextInput\r\n              text={text}\r\n              handleTextChange={this.props.handleTextChange}\r\n            />\r\n          : null } \r\n\r\n        {activeStep === steps.length && (\r\n          <Paper square elevation={0} className={classes.resetContainer}>\r\n            <Typography>Задача успешно поставлена.</Typography>\r\n            <Button \r\n              onClick={() => {this.handleReset(); this.props.resetAll()}}\r\n              variant=\"contained\"               \r\n              color=\"primary\"\r\n              className={classes.button}\r\n            >\r\n              Поставить ещё задачу\r\n            </Button>\r\n            <Button \r\n              onClick={this.props.handleClose} \r\n              className={classes.button}\r\n            >\r\n              Закрыть\r\n            </Button>\r\n          </Paper>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nVerticalLinearStepper.propTypes = {\r\n  classes: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(VerticalLinearStepper);","import React, { Component } from 'react';\r\nimport { Paper, Typography, Tooltip } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport API from '../functions/API';\r\nimport Stepper from './Stepper';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass NewTask extends Component {\r\n  state = {\r\n    selectedDate: new Date(),\r\n    selectedTime: new Date(),\r\n    users: [],\r\n    multi: [],\r\n    text: '',\r\n    importance: 0\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(users => this.setState({ users: users.data.filter(user => Number(user.id) !== this.props.user_logged_id) }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChange = name => value => this.setState({ [name]: value });\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n  handleTimeChange = time => this.setState({ selectedTime: time.format() });\r\n  handleTextChange = e => this.setState({ text: e.target.value })\r\n  changeImportance = () => this.setState({ importance: !this.state.importance });\r\n  resetAll = () => {\r\n    this.setState({\r\n      selectedDate: new Date(),\r\n      selectedTime: new Date(),\r\n      multi: [],\r\n      text: '',\r\n      importance: 0\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const { multi, selectedTime, selectedDate, text, importance } = this.state;\r\n    const formData = new FormData();\r\n    const self = this;\r\n    let forWho = [];\r\n    let date = new Date();\r\n    multi.forEach(user => forWho.push(`for${user.value}`));\r\n\r\n    formData.append('from', this.props.user_logged_id);\r\n    formData.append('date', date.toLocaleDateString());\r\n    formData.append('for', forWho.join(','));\r\n    formData.append('time', `${date.getHours() < 10 ? '0' + date.getHours() : date.getHours()}:${date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()}`);\r\n    formData.append('until_date', selectedDate.slice(0, 10));\r\n    formData.append('text', text);\r\n    formData.append('until_time', selectedTime.slice(11, 16));\r\n    formData.append('importance', importance ? '1' : '0');\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/add.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.props.onAddNewTask(tasks.data))\r\n          .then(() => self.props.enqueueSnackbar('Задача была поставлена', { variant: 'success' }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n  \r\n  render() {\r\n    const { users, multi, selectedTime, selectedDate, text } = this.state;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          <span className='closeNewTask' onClick={this.props.handleClose}>\r\n            <Tooltip title=\"Закрыть\" placement=\"left\"><CloseIcon /></Tooltip>\r\n          </span>\r\n          <Typography variant='h5'>Новая Задача</Typography>\r\n          <Stepper\r\n            users={users}\r\n            multi={multi}\r\n            text={text}\r\n            selectedTime={selectedTime}\r\n            selectedDate={selectedDate}\r\n            handleChange={this.handleChange}\r\n            handleTextChange={this.handleTextChange}\r\n            handleDateChange={this.handleDateChange}\r\n            handleTimeChange={this.handleTimeChange}\r\n            changeImportance={this.changeImportance}\r\n            resetAll={this.resetAll}\r\n            handleClose={this.props.handleClose}\r\n            handleSubmit={this.handleSubmit}\r\n          />\r\n        </Paper>\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  max-width: 600px;\r\n  min-height: 300px;\r\n  height: fit-content;\r\n  margin: auto;\r\n  background: #ffffff;\r\n  border-radius: 10px;\r\n  outline: none;\r\n\r\n  .listFor {\r\n    max-height: 220px;\r\n    margin-top: 20px;\r\n    overflow: auto;\r\n  }\r\n  .listFor::-webkit-scrollbar {\r\n    width: 10px;\r\n  }\r\n  .listFor::-webkit-scrollbar-track {\r\n    background-color: #ebebeb;\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n  }\r\n  .listFor::-webkit-scrollbar-thumb {\r\n    -webkit-border-radius: 10px;\r\n    border-radius: 10px;\r\n    background: #1976d2; \r\n  }\r\n\r\n  & > div {\r\n    height: fit-content;\r\n    padding: 20px 30px;\r\n  }\r\n   \r\n  .closeNewTask svg {\r\n    font-size: 30px;\r\n    color: #1976d2;\r\n    opacity: .6;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: 20px;\r\n    top: 20px;\r\n\r\n    :hover {\r\n      opacity: .8;\r\n      transition: .37s ease;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({ store: state }),\r\n  dispatch => ({\r\n    onAddNewTask: (task) => {\r\n      dispatch({ type: 'ADD_TASK', payload: task })\r\n    }\r\n  })\r\n)(withSnackbar(NewTask));","import React from 'react';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport { Typography, ExpansionPanelDetails, ExpansionPanelSummary, ExpansionPanel, Tooltip, Button } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\n\r\nexport default class Task extends React.Component {\r\n\r\n  getUserNames = (users) => {\r\n    let usersId = users.split(',');\r\n    let result = 'Для: ';\r\n\r\n    usersId.forEach(id => {\r\n      result += `${this.props.users.find(user => user.id === id.slice(3)).name} `;\r\n      result += `${this.props.users.find(user => user.id === id.slice(3)).surname}, `;\r\n    })\r\n    return result;\r\n  }\r\n\r\n  getAdresant = (id) => {\r\n    let initial = \"От: \";\r\n    // eslint-disable-next-line\r\n    if (id = this.props.user_logged_id) return initial += 'Вас';\r\n\r\n    if (this.props.users.length > 0) {\r\n      initial += this.props.users.find(user => user.id === this.props.task.from).name;\r\n      initial += ` ${this.props.users.find(user => user.id === this.props.task.from).surname}`;\r\n      return initial;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const now = moment(new Date()); //todays date\r\n    const end = moment(this.props.task.until_date); // another date\r\n    const difference = moment.duration(end.diff(now))._milliseconds;\r\n\r\n    return (\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <Typography variant='caption'>\r\n            <Typography variant='subtitle2' style={styles.flex}>\r\n              Получено: {this.props.task.date} в {`${this.props.task.time} `}\r\n              {this.props.task.importance === '1' ? <Tooltip title=\"Отмечено как 'Важное'\" placement=\"top-start\"><Icon><WarningIcon /></Icon></Tooltip> : null}\r\n            </Typography>\r\n            {this.getAdresant(this.props.task.from)}\r\n            <TaskStatus>\r\n              <Typography variant='caption' className={classNames({\r\n                'task-completed': this.props.task.status === '1',\r\n                'task-doing': this.props.task.status === '0',\r\n                'task-late': difference < 0\r\n              })}>\r\n                {this.props.task.status === '1' && difference > 0 ? \"Выполнена\" :\r\n                  this.props.task.status === '0' && difference > 0 ? \"Выполняется\" :\r\n                    \"Просрочена\"}\r\n              </Typography>\r\n            </TaskStatus>\r\n          </Typography>\r\n\r\n          <DeleteIcon onClick={() => this.props.handleConfirm(this.props.task.id)}>\r\n            <Tooltip title=\"Удалить\" placement=\"left\">\r\n              <Delete />\r\n            </Tooltip>\r\n          </DeleteIcon>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={styles.details}>\r\n          <Typography variant='h6'>Задача: {this.props.task.text}  </Typography>\r\n          <Footer>\r\n            <div>\r\n              <Typography variant='caption'>{this.props.users.length > 0 ? this.getUserNames(this.props.task.for).slice(0, -2) : null}</Typography>\r\n              <Typography variant='subtitle2'>Выполнить до: {this.props.task.until_date.split('-').reverse().join('.')}, {this.props.task.until_time}</Typography>\r\n            </div>\r\n            {this.props.task.status === '0' && this.props.task.from.includes(`for${this.props.user_logged_id}`) ?\r\n              difference < 0 ?\r\n                <Tooltip title=\"Нельзя выполнить просроченную задачу\" placement=\"top-start\" leaveDelay={200}>\r\n                  <span><Button disabled={true} variant='contained' color='primary'>Выполнить</Button></span>\r\n                </Tooltip> :\r\n                <Button\r\n                  onClick={() => this.props.handleCompleted(this.props.task.id)}\r\n                  variant='contained'\r\n                  color='primary'\r\n                >\r\n                  Выполнить</Button>\r\n              : null}\r\n          </Footer>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    )\r\n  }\r\n}\r\nconst styles = {\r\n  flex: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  details: {\r\n    flexDirection: 'column'\r\n  }\r\n}\r\nconst Icon = styled.div`\r\n  svg {\r\n    color: rgba(0,0,0,.15) !important;\r\n    margin-left: 8px;\r\n    font-size: 22px;\r\n  }\r\n`;\r\nconst DeleteIcon = styled.span`\r\n  svg {\r\n    font-size: 26px;\r\n    color: rgba(0,0,0,0.54);\r\n    right: 55px;\r\n    padding: 5px;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    position: absolute;\r\n  }\r\n`;\r\nconst Footer = styled.div`\r\n  margin-top: 30px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\nconst TaskStatus = styled.span`\r\n  .task-completed {\r\n    color: darkgreen;\r\n  }\r\n  .task-doing {\r\n    color: darkblue;\r\n  }\r\n  .task-late {\r\n    color: darkred;\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ConfirmDelete(props) {\r\n  return (\r\n    <Wrapper>\r\n      <Paper>\r\n        <Icon onClick={props.handleClose}>\r\n          <CloseIcon />\r\n        </Icon>\r\n        <Typography variant='body1'>Вы уверены, что хотите удалить задачу?</Typography>\r\n        <Typography variant='caption'>Вся информация по задаче будет удалена безвозвратно.</Typography>\r\n        <ButtonContainer>\r\n          <Button variant='contained' color='secondary' onClick={props.handleDelete}>Удалить</Button>\r\n          <Button variant='text' color='default' onClick={props.handleClose}>Отмена</Button>\r\n        </ButtonContainer>\r\n      </Paper>\r\n    </Wrapper>\r\n  )\r\n}\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  height: 200px;\r\n  width: 400px;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  outline: none;\r\n  & > div {\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    padding: 30px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n  }\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 30px;\r\n  button {\r\n    margin-right: 25px;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  svg {\r\n    cursor: pointer;\r\n    color: rgba(0,0,0,.54);\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n  }\r\n`","import React, { Component, Fragment } from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport Fab from '../Fab/Fab';\r\nimport Modal from '../Modal/Modal';\r\nimport NewTask from './NewTask';\r\nimport styled from 'styled-components';\r\nimport API from '../functions/API';\r\nimport Task from './Task';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport ConfirmDelete from './ConfirmDelete';\r\nimport Loader from '../Loader/Loader';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass Tasks extends Component {\r\n  state = {\r\n    open: false,\r\n    confirm: false,\r\n    preparedToDelete: null,\r\n    tasks: [],\r\n    initial: [],\r\n    users: [],\r\n    disabledButton: 1,\r\n    loading: true\r\n  }\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(tasks => this.props.getTasks(tasks.data))\r\n      .catch(err => console.log(err))\r\n\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(users => this.setState({ users: users.data }))\r\n      .then(() => this.setState({ loading: false }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleOpen = () => this.setState({ open: true });\r\n  handleConfirm = id => this.setState({ confirm: true, preparedToDelete: id });\r\n  handleClose = () => this.setState({ open: false, confirm: false, preparedToDelete: null });\r\n\r\n  handleCompleted = (id) => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    let date = new Date();\r\n    this.setState({ loading: true })\r\n    const done_date = date.toLocaleDateString();\r\n    const done_time = `${date.getHours() < 10 ? '0' + date.getHours() : date.getHours()}:${date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()}`;\r\n\r\n    formData.append('id', id);\r\n    formData.append('done_date', done_date);\r\n    formData.append('done_time', done_time);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/complete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${self.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.setState({ tasks: tasks.data, initial: tasks.data }))\r\n          .then(() => self.props.enqueueSnackbar('Задача отмечена как \"Выполненная\"', { variant: 'success' }))\r\n          .then(() => self.props.markAsCompleted(self.state.tasks))\r\n          .then(() => this.setState({ loading: false }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте снова', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n\r\n  handleFilter = (id, filter) => {\r\n    this.setState({ disabledButton: id });\r\n    let filtered = this.state.initial;\r\n\r\n    if (filter === 'initial') this.props.onFilter(this.state.initial);\r\n    if (filter === 'transfered') {\r\n      filtered = filtered.filter(item => Number(item.from) === this.props.user_logged_id);\r\n      this.props.onFilter(filtered);\r\n    }\r\n    if (filter === 'completed') {\r\n      filtered = filtered.filter(item => item.status === '1');\r\n      this.props.onFilter(filtered);\r\n    }\r\n  }\r\n\r\n  handleDelete = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    this.setState({ loading: true })\r\n    formData.append('id', this.state.preparedToDelete);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/tasks/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: res => {\r\n        console.log(res);\r\n        fetch(`${API}/api/tasks/read.php?id=${self.props.user_logged_id}`)\r\n          .then(response => response.json())\r\n          .then(tasks => self.setState({ tasks: tasks.data || [], initial: tasks.data || [] }))\r\n          .then(() => self.props.enqueueSnackbar('Задача успешно была удалена', { variant: 'info' }))\r\n          .then(() => self.props.onDeleteTask(self.state.preparedToDelete))\r\n          .then(() => self.handleClose())\r\n          .then(() => this.setState({ loading: false }))\r\n          .catch(err => console.log(err))\r\n      },\r\n      error: err => {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте снова', { variant: 'error' })\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { open, users, disabledButton } = this.state;\r\n\r\n    if (this.state.initial.length === 0) {\r\n      setTimeout(() => this.setState({ initial: this.props.store.tasks, tasks: this.props.store.tasks }), 0);\r\n    }\r\n\r\n    return (\r\n      <Wrapper>\r\n        <Paper>\r\n          {!this.state.loading ?\r\n            <Fragment>\r\n              <Filters>\r\n                <Button\r\n                  onClick={() => this.handleFilter(1, 'initial')}\r\n                  variant={disabledButton === 1 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 1 ? true : false}>Все задачи</Button>\r\n                <Button\r\n                  color=\"primary\"\r\n                  onClick={() => this.handleFilter(2, 'transfered')}\r\n                  variant={disabledButton === 2 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 2 ? true : false}\r\n                >\r\n                  Переданные\r\n            </Button>\r\n                <Button\r\n                  onClick={() => this.handleFilter(3, 'completed')}\r\n                  variant={disabledButton === 3 ? 'contained' : 'text'}\r\n                  disabled={disabledButton === 3 ? true : false}\r\n                  color=\"secondary\">\r\n                  Выполненные\r\n            </Button>\r\n              </Filters>\r\n              {this.props.store.tasks.length > 0\r\n                ?\r\n                this.props.store.tasks.map(task =>\r\n                  <Task\r\n                    key={task.id}\r\n                    task={task}\r\n                    users={users}\r\n                    user_logged_id={this.props.user_logged_id}\r\n                    handleCompleted={this.handleCompleted}\r\n                    handleConfirm={this.handleConfirm.bind(this)}\r\n                  />)\r\n                :\r\n                <Typography className='no-tasks' variant='caption'>нет задач</Typography>}\r\n            </Fragment>\r\n            : <Loader minHeight={300} color='primary' />}\r\n        </Paper>\r\n\r\n\r\n        {/* Button to add task */}\r\n        <span onClick={this.handleOpen}><Fab title='Добавить задачу' /></span>\r\n\r\n        {/* Add new task modal */}\r\n        <Modal\r\n          open={open}\r\n          handleClose={this.handleClose.bind(this)}\r\n          component={\r\n            <NewTask\r\n              handleClose={this.handleClose.bind(this)}\r\n              user_logged_id={this.props.user_logged_id}\r\n            />}\r\n        />\r\n\r\n        {/* Confirm delete modal */}\r\n        <Modal\r\n          open={this.state.confirm}\r\n          handleClose={this.handleClose.bind(this)}\r\n          component={<ConfirmDelete\r\n            handleDelete={this.handleDelete}\r\n            handleClose={this.handleClose.bind(this)}\r\n          />}\r\n        />\r\n      </Wrapper>\r\n    )\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  .no-tasks {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    opacity: .37;\r\n    height: 300px;\r\n    font-size: 20px;\r\n  }\r\n`;\r\nconst Filters = styled.div`\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  button {\r\n    width: 33.3%;\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    markAsCompleted: (tasks) => {\r\n      dispatch({ type: 'MARK_COMPLETED', payload: tasks })\r\n    },\r\n    onDeleteTask: (task) => {\r\n      dispatch({ type: 'DELETE_TASK', payload: task })\r\n    },\r\n    onFilter: (tasks) => {\r\n      dispatch({ type: 'FILTER_TASKS', payload: tasks })\r\n    },\r\n    getTasks: (tasks) => {\r\n      dispatch({ type: 'FETCH_TASKS', payload: tasks })\r\n    }\r\n  })\r\n)(withSnackbar(Tasks));","import React, { Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Checkbox, Button, FormControlLabel, Typography, TextField, Tooltip } from '@material-ui/core';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function NewNews(props) {\r\n  let avatar = '';\r\n  if (!window.location.host.includes('localhost') && props.user.avatar) {\r\n    avatar = props.user.avatar;\r\n  } else {\r\n    avatar = props.user.avatar.slice(16);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n        <Header>\r\n          <Typography variant='button'>Новая новость</Typography> \r\n\r\n          <Tooltip placement='left' title='Закрыть'>\r\n            <Icon><CloseIcon onClick={props.closeNews} /></Icon>\r\n          </Tooltip>\r\n\r\n        </Header>\r\n        <Body>\r\n          <form action=\"\" method=\"POST\" onSubmit={props.submitNews}>\r\n            <Topic>\r\n              {props.user.avatar === ''\r\n                ? <div className='image' alt={`${props.user.name} ${props.user.surname}`} style={{ background: `url(${defaultAvatar}) no-repeat center/cover` }} />\r\n                : <div className='image' alt={`${props.user.name} ${props.user.surname}`} style={{ background: `url(${avatar}) no-repeat center/cover` }} />\r\n              }\r\n              <TextField\r\n                label=\"Заголовок\"\r\n                value={props.newNewsTopic}\r\n                onChange={props.handleChange}\r\n                error={props.invalidTopic}\r\n                variant=\"outlined\"\r\n                name='newNewsTopic'\r\n                type='text'\r\n                required\r\n              />\r\n            </Topic>\r\n            <TextArea>\r\n              <TextField\r\n                label=\"Текст новости\"\r\n                multiline\r\n                variant=\"outlined\"\r\n                name='newNewsText'\r\n                error={props.invalidText}\r\n                onChange={props.handleChange}\r\n                value={props.newNewsText}\r\n                required\r\n              />\r\n            </TextArea>\r\n            <Footer>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={props.newNewsImportance}\r\n                    onChange={props.changeImportance}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label=\"Отметить как важное\"\r\n              />\r\n              <Button onClick={props.submitNews} variant='contained' color='primary'>Добавить новость</Button>\r\n            </Footer>\r\n          </form>\r\n        </Body>\r\n      </Container>\r\n      <Wrapper onClick={props.closeNews}></Wrapper>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  background: rgba(0,0,0, .5);\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  z-index: 30;\r\n`;\r\nconst Container = styled.div`\r\n  background: #ffffff;\r\n  width: 600px;\r\n  position: fixed;\r\n  top: 150px;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  border-radius: 10px;\r\n  z-index: 37;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\r\n\r\n  .close {\r\n    top: -5px;\r\n  }\r\n`;\r\nconst Header = styled.div`\r\n  display: flex;\r\n  height: 50px;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\nconst Body = styled.div`\r\n  .image {\r\n    width: 56px;\r\n    height: 56px;\r\n    border-radius: 50%;\r\n    display: inline-block;\r\n  }\r\n  padding: 0 25px;\r\n`;\r\nconst Footer = styled.div`\r\n  display: flex;\r\n  height: 90px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 85%;\r\n  margin-left: 15%;\r\n`;\r\nconst Topic = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 5px;\r\n\r\n  & > div {\r\n    width: 85%;\r\n  }\r\n`;\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\r\n  height: 150px;\r\n\r\n  textarea {\r\n    max-height: 130px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 85%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 20px;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;","import React from 'react';\r\nimport { Paper, Typography, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ConfirmDelete(props) {\r\n  return (\r\n    <Wrapper>\r\n      <Paper>\r\n        <Icon onClick={props.closeNews}>\r\n          <CloseIcon />\r\n        </Icon>\r\n        <Typography variant='body1'>Вы уверены, что хотите удалить новость?</Typography>\r\n        <Typography variant='caption'>Вся информация по новости будет удалена безвозвратно.</Typography>\r\n        <ButtonContainer>\r\n          <Button variant='contained' color='secondary' onClick={props.removeNews}>Удалить</Button>\r\n          <Button variant='text' color='default' onClick={props.closeNews}>Отмена</Button>\r\n        </ButtonContainer>\r\n      </Paper>\r\n      <Dialogue />\r\n    </Wrapper>\r\n  )\r\n}\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  height: 200px;\r\n  width: 400px;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  outline: none;\r\n  & > div {\r\n    height: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    padding: 30px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    z-index: 10;\r\n  }\r\n`;\r\nconst Dialogue = styled.section`\r\n  position: fixed !important;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: rgba(0,0,0,0.54);\r\n  width: 100vw;\r\n  height: 100vh !important;\r\n  z-index: 5;\r\n`;\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 30px;\r\n  button {\r\n    margin-right: 25px;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  svg {\r\n    cursor: pointer;\r\n    color: rgba(0,0,0,.54);\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n  }\r\n`","import React, { Component, Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport $ from 'jquery';\r\nimport SingleNews from './SingleNews';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Fab from './Fab/Fab';\r\nimport NewNews from './News/NewNews';\r\nimport API from './functions/API';\r\nimport { Paper, Button, Typography, TextField, Tooltip } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport defaultAvatar from './img/photos/images.png';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Loader from './Loader/Loader';\r\nimport ConfirmDelete from './News/ConfirmDelete';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withSnackbar } from 'notistack';\r\n\r\nclass News extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      news: [],\r\n      newNews: false,\r\n      newNewsTopic: '',\r\n      newNewsText: '',\r\n      newNewsImportance: false,\r\n      editing: '',\r\n      singleNews: false,\r\n      singleNewsData: [],\r\n      singleNewsId: '',\r\n      invalidText: false,\r\n      invalidTopic: false,\r\n      loading: true,\r\n      confirmDelete: false,\r\n      preparedNewsId: ''\r\n    }\r\n\r\n    this.addLike = this.addLike.bind(this);\r\n    this.reloadComponent = this.reloadComponent.bind(this);\r\n    this.removeLike = this.removeLike.bind(this);\r\n    this.addNews = this.addNews.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.submitNews = this.submitNews.bind(this);\r\n    this.removeNews = this.removeNews.bind(this);\r\n    this.editNews = this.editNews.bind(this);\r\n    this.prepareNews = this.prepareNews.bind(this);\r\n    this.showNews = this.showNews.bind(this);\r\n    this.changeImportance = this.changeImportance.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadComponent();\r\n  }\r\n\r\n  async reloadComponent(action) {\r\n    if (!action) await this.setState({ loading: true })\r\n    await fetch(`${API}/api/news/read.php`)\r\n      .then(response => response.json())\r\n      .then(news => this.props.onAddNews(news.records || []))\r\n    await this.setState({ loading: false })\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n    this.setState({ invalidText: false, invalidTopic: false });\r\n  }\r\n\r\n  // добавляем лайк\r\n  addLike = (id, e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/addlike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function () {\r\n        self.reloadComponent('like');\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  // убираем лайк\r\n  removeLike = (id, e) => {\r\n    const self = this;\r\n    e.preventDefault();\r\n    const actions = document.getElementById('actions');\r\n    actions.style.pointerEvents = 'none';\r\n\r\n    const formData = new FormData();\r\n    formData.append('id', id);\r\n    formData.append('liked_by', this.props.user.id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/removelike.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.reloadComponent('like');\r\n        self.setState({ newNews: false });\r\n        setTimeout(() => actions.style.pointerEvents = 'all', 500)\r\n      },\r\n      error: function (err) {\r\n        console.log(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  submitNews = (e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n    if (this.state.newNewsTopic !== '' && this.state.newNewsText !== '') {\r\n      const formData = new FormData();\r\n\r\n      formData.append('author', `${this.props.user.name} ${this.props.user.surname}`);\r\n      formData.append('title', this.state.newNewsTopic);\r\n      formData.append('text', this.state.newNewsText);\r\n      formData.append('date', new Date().toJSON().slice(0, 10).replace(/-/g, '.'));\r\n      formData.append('created', new Date().getTime());\r\n      formData.append('importance', this.state.newNewsImportance ? 1 : 0);\r\n      formData.append('author_id', this.props.user.id);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/news/submitnews.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          self.reloadComponent();\r\n          self.setState({ \r\n            newNews: !self.state.newNews, \r\n            newNewsText: '', \r\n            newNewsTopic: ''\r\n          });\r\n          self.props.enqueueSnackbar('Добавлена новая новость', { variant: 'success' })\r\n        },\r\n        error: function (err) {\r\n          console.log(err);\r\n          self.props.enqueueSnackbar('Не удалось добавить новость', { variant: 'error' })\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Необходимо заполнить все поля', { variant: 'warning' })\r\n      if (self.state.newNewsTopic === '') this.setState({ invalidTopic: true });\r\n      if (self.state.newNewsText === '') this.setState({ invalidText: true });\r\n    }\r\n  }\r\n\r\n  changeImportance = () => this.setState({ newNewsImportance: !this.state.newNewsImportance });\r\n\r\n  removeNews = () => {\r\n    this.setState({ editing: true });\r\n    var self = this;\r\n    const formData = new FormData();\r\n    formData.append('id', this.state.preparedNewsId);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/news/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function() {\r\n        self.reloadComponent();\r\n        self.setState({ editing: '', preparedNewsId: '', confirmDelete: false  });\r\n        self.props.enqueueSnackbar('Новость была удалена', { variant: 'info' });\r\n      },\r\n      error: function(err) {\r\n        console.log(err);\r\n        self.props.enqueueSnackbar('Не удалось удалить новость', { variant: 'error' });\r\n      }\r\n    });\r\n  };\r\n\r\n  prepareNews = id => {\r\n    let title = this.props.store.news.find(news => news.id === id).title;\r\n    let text = this.props.store.news.find(news => news.id === id).text;\r\n    this.setState({ editing: id, newNewsTopic: title, newNewsText: text });\r\n  }\r\n\r\n  editNews = (e, id) => {\r\n    e.preventDefault();\r\n    var self = this;\r\n\r\n    if (this.state.newNewsTopic !== '' && this.state.newNewsText !== '') {\r\n      const formData = new FormData();\r\n      formData.append('id', id);\r\n      formData.append('title', this.state.newNewsTopic);\r\n      formData.append('text', this.state.newNewsText);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/news/edit.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function() {\r\n          self.reloadComponent();\r\n          setTimeout(() => self.setState({ editing: '' }), 200);\r\n          self.props.enqueueSnackbar('Новость была изменена', { variant: 'info' });\r\n        },\r\n        error: function (err) {\r\n          console.log(err);\r\n          self.props.enqueueSnackbar('Не удалось изменить новость', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      self.props.enqueueSnackbar('Нужно заполнить всё поля', { variant: 'warning' });\r\n      if (self.state.newNewsTopic === '') this.setState({ invalidTopic: true });\r\n      if (self.state.newNewsText === '') this.setState({ invalidText: true });\r\n    }\r\n  }\r\n\r\n  addNews = () => this.setState({ editing: '', newNews: !this.state.newNews, newNewsText: '', newNewsTopic: '' });\r\n\r\n  showNews(id) {\r\n    setTimeout(() => {\r\n      if (this.state.editing === '') this.setState({ singleNews: true, singleNewsId: id });\r\n    }, 100)\r\n  }\r\n\r\n  // закрываем новость \r\n  closeNews = () => {\r\n    this.setState({ \r\n      singleNews: false, \r\n      singleNewsId: '', \r\n      newNews: false, \r\n      likedBy: [], \r\n      preparedNewsId: '',\r\n      confirmDelete: false\r\n    });\r\n    this.reloadComponent('close');\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | находим правильную форму склонения лайков \r\n  |--------------------------------------------------\r\n  */\r\n getNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'отметок';\r\n    number %= 10;\r\n    if (number === 1) return 'отметка';\r\n    if (number >= 2 && number <= 4) return 'отметки';\r\n    return 'отметок';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Находим правильную форму склонения комментариев\r\n  |--------------------------------------------------\r\n  */\r\n  getCommentsNoun = number => {\r\n    number = Math.abs(number);\r\n    number %= 100;\r\n    if (number >= 5 && number <= 20) return 'комментариев';\r\n    number %= 10;\r\n    if (number === 1) return 'комментарий';\r\n    if (number >= 2 && number <= 4) return 'комментария';\r\n    return 'комментариев';\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | создаёт надпись \"Помечено как важное\"\r\n  |--------------------------------------------------\r\n  */\r\n  createImportantBar = (margin) => {\r\n    const Important = styled.div`\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 0;\r\n      margin-top: ${margin}px;\r\n      svg {\r\n        color: rgba(0,0,0,.15);\r\n        margin-right: 5px;  \r\n      }\r\n    `;\r\n    return (\r\n      <Important>\r\n        <WarningIcon />\r\n        <Typography variant='caption'>Отмечено как \"Важное\"</Typography>            \r\n      </Important>\r\n    )\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Спрашиваем об удалении новости\r\n  |--------------------------------------------------\r\n  */\r\n  prepareDelete = (id) => {\r\n    this.setState({ confirmDelete: true, preparedNewsId: id })\r\n  }\r\n\r\n  handleAvatarRoute = avatar => {\r\n    return window.location.host.includes('localhost') ? avatar.slice(16) : avatar;\r\n  }\r\n\r\n  render() {\r\n    const { news, invalidText, invalidTopic, newNews, loading, newNewsText, newNewsTopic, editing, singleNews, singleNewsId, newNewsImportance } = this.state;\r\n    const { user } = this.props;\r\n    let avatar = null;\r\n    window.location.host.includes('localhost') && user.avatar ? avatar = user.avatar.slice(16) : avatar = user.avatar;\r\n    \r\n\r\n    if (this.state.news.length === 0) {\r\n      setTimeout(() => this.setState({ news: this.props.store.news }), 0);\r\n    }\r\n\r\n    return (\r\n      <Paper>\r\n        {loading ? <Loader minHeight={300} color='primary' /> :\r\n          this.props.store.news.length > 0 && this.props.store.news ? this.props.store.news.map((item, i) => {\r\n            return (\r\n              <NewsContainer key={i}>\r\n                <UserAvatar style={{ background: `url(${this.handleAvatarRoute(item.avatar) === '' ? defaultAvatar : this.handleAvatarRoute(item.avatar)}) no-repeat center/cover` }} />\r\n                <div>\r\n                  <NewsInfo>\r\n                    {user.id === item.author_id\r\n                      ?\r\n                      <Fragment>\r\n                        <Typography variant='caption'>\r\n                          <Typography variant='subtitle2'>Вы</Typography>\r\n                          {item.date}\r\n                        </Typography>\r\n                        <Icon>\r\n                          <Tooltip placement='left' title=\"Удалить\">\r\n                            <DeleteIcon onClick={() => this.prepareDelete(item.id)} />\r\n                          </Tooltip>\r\n                        </Icon>\r\n                      </Fragment>\r\n                      :\r\n                      <Typography variant='caption'>\r\n                        <Typography variant='subtitle2'>{item.author}</Typography>\r\n                        {item.date}\r\n                      </Typography>}\r\n                  </NewsInfo>\r\n\r\n                  {item.importance === '1' ? this.createImportantBar(0) : null}\r\n\r\n                  {editing !== item.id ?\r\n                    <Fragment>\r\n                      <Typography variant='button'>{item.title.replace(/&quot;/g, `\"`)}</Typography>\r\n                      <Body><Typography variant='body2'>{item.text.replace(/&quot;/g, `\"`)}</Typography></Body>\r\n                    </Fragment>\r\n                    :\r\n                    <form id='edit-news' action={`${API}/api/news/edit.php`} method=\"POST\" onSubmit={(e) => this.editNews(e, item.id)} >\r\n                      <TextField\r\n                        label=\"Заголовок\"\r\n                        value={newNewsTopic}\r\n                        onChange={this.handleChange}\r\n                        variant=\"outlined\"\r\n                        name='newNewsTopic'\r\n                        type='text'\r\n                        error={this.state.invalidTopic}\r\n                      />\r\n                      <TextArea>\r\n                        <TextField\r\n                          label=\"Текст новости\"\r\n                          multiline\r\n                          variant=\"outlined\"\r\n                          name='newNewsText'\r\n                          onChange={this.handleChange}\r\n                          value={newNewsText}\r\n                          error={this.state.invalidText}\r\n                        />\r\n                      </TextArea>\r\n                      <Button onClick={(e) => this.editNews(e, item.id)} variant='contained' color='primary'>Изменить</Button>\r\n                    </form>}\r\n                </div>\r\n\r\n                <Actions id='actions'>\r\n                  <p>{item.comments}</p>\r\n                  <Tooltip title={`${item.comments} ${this.getCommentsNoun(item.comments)}`} placement='top'>\r\n                    <FontAwesomeIcon onClick={editing === '' ? () => this.showNews(item.id) : null} icon=\"comments\" />\r\n                  </Tooltip>\r\n                  \r\n                    <p>{item.likes}</p>\r\n\r\n                  {!item.liked_by.includes(` ${user.id}`)\r\n                    ?\r\n                    <Tooltip title={`${item.likes} ${this.getNoun(item.likes)} \"Нравится\"`} placement='top'>\r\n                      <FontAwesomeIcon onClick={e => this.addLike(item.id, e)} icon=\"heart\" />\r\n                    </Tooltip>  \r\n                    :\r\n                    <Tooltip title={`${item.likes} ${this.getNoun(item.likes)} \"Нравится\"`} placement='top'>\r\n                      <FontAwesomeIcon onClick={e => this.removeLike(item.id, e)} icon=\"heart\" style={{ color: '#1976d2' }} />\r\n                    </Tooltip>  \r\n                  }\r\n                 {/*  <Tooltip title='Отправить сообщение' placement='top'>\r\n                    <FontAwesomeIcon data-id={item.id} onClick={this.addLike} icon=\"envelope\" style={{ marginLeft: '25px' }} />\r\n                  </Tooltip> */}\r\n\r\n                  {user.id === item.author_id\r\n                    ?\r\n                    <Tooltip title='Редактировать' placement='top'>\r\n                    <FontAwesomeIcon onClick={() => this.prepareNews(item.id)} icon=\"edit\" style={{ marginLeft: '25px' }} />\r\n                    </Tooltip>\r\n                    :\r\n                    null\r\n                  }\r\n                  <Button onClick={() => this.showNews(item.id)} variant='contained' color='primary' style={{ position: 'absolute', right: 40 }}>Читать</Button>\r\n                </Actions>\r\n\r\n              </NewsContainer>\r\n            )\r\n          }\r\n          ) : <NoNews><Typography variant='h6'>нет новостей</Typography></NoNews>}\r\n\r\n        <div onClick={this.addNews}><Fab title='Добавить новость' /></div>\r\n\r\n        {newNews ?\r\n          <NewNews\r\n            user={user}\r\n            newNewsTopic={newNewsTopic}\r\n            newNewsText={newNewsText}\r\n            invalidText={invalidText}\r\n            invalidTopic={invalidTopic}\r\n            submitNews={this.submitNews}\r\n            handleChange={this.handleChange}\r\n            changeImportance={this.changeImportance}\r\n            newNewsImportance={newNewsImportance}\r\n            closeNews={this.closeNews.bind(this)}\r\n          /> : null}\r\n\r\n        {singleNews\r\n          ?\r\n          <SingleNews\r\n            showNews={this.showNews}\r\n            closeNews={this.closeNews.bind(this)}\r\n            singleNewsId={singleNewsId}\r\n            news={news}\r\n            user={user}\r\n            getNoun={this.getNoun}\r\n            getCommentsNoun={this.getCommentsNoun}\r\n            reloadComponent={this.reloadComponent}\r\n            createImportantBar={this.createImportantBar} />\r\n          :\r\n          null}\r\n\r\n        {/* Подтверить удаление новости */}\r\n        {this.state.confirmDelete ?\r\n        <ConfirmDelete\r\n          closeNews={this.closeNews.bind(this)}\r\n          removeNews={this.removeNews.bind(this)}\r\n        /> : null}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst NewsContainer = styled.div`\r\n  position: relative;\r\n  padding: 20px 40px 20px 120px;\r\n  border-bottom: 1px solid #e6ecf0;\r\n  input {\r\n    padding: 10px 15px;\r\n  }\r\n  :hover {\r\n    background: rgba(0,0,0,0.015);\r\n    transition: .37s ease;\r\n  }\r\n`;\r\nconst Body = styled.div`\r\n  padding: 10px 15px;\r\n  margin-top: 10px;\r\n  background: rgba(0,0,0,0.015);\r\n`;\r\nconst NewsInfo = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n\r\n  span {\r\n    display: flex;\r\n    align-items: baseline;\r\n    h6 {\r\n      margin-right: 10px;\r\n      :after {\r\n        content: '\\00b7';\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n`;\r\nconst UserAvatar = styled.div`\r\n  position: absolute;\r\n  left: 20px;\r\n  top: 30px;\r\n  border-radius: 50%;\r\n  width: 80px;\r\n  height: 80px;\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  p {\r\n    margin-right: 5px;\r\n    color: #657786;\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin: 15px 0 10px;\r\n  height: 120px;\r\n\r\n  textarea {\r\n    max-height: 100px;\r\n    &::-webkit-scrollbar {\r\n      width: 10px;\r\n    }\r\n   \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #ebebeb;\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n    }\r\n  \r\n    &::-webkit-scrollbar-thumb {\r\n      -webkit-border-radius: 10px;\r\n      border-radius: 10px;\r\n      background: #1976d2; \r\n    }\r\n  }\r\n\r\n  & > div {\r\n    width: 100%;\r\n    & > div {\r\n      height: 100%;\r\n    }\r\n  }\r\n`;\r\nconst NoNews = styled.div`\r\n  height: 254px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: .37;\r\n  margin-bottom: 20px;\r\n`;\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  svg {\r\n    color: rgba(0,0,0,0.54);\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    onAddNews: (news) => {\r\n      dispatch({ type: 'ADD_NEWS', payload: news })\r\n    }\r\n  })\r\n)(withSnackbar(News));","import React from 'react';\r\nimport Person from '@material-ui/icons/Person';\r\nimport Message from '@material-ui/icons/Message';\r\nimport Task from '@material-ui/icons/ListAlt';\r\nimport News from '@material-ui/icons/NewReleases';\r\nimport People from '@material-ui/icons/People';\r\n\r\nconst sections = [\r\n  {\r\n    value: 0,\r\n    section: 'id',\r\n    label: 'Моя страница',\r\n    img: <Person />,\r\n  },\r\n  { \r\n    value: 1,\r\n    section: 'messages',\r\n    label: 'Сообщения',\r\n    img: <Message />,\r\n  },\r\n  {\r\n    value: 2,\r\n    section: 'news',\r\n    label: 'Новости компании',\r\n    img: <News />,\r\n  },\r\n  {\r\n    value: 3,\r\n    section: 'tasks',\r\n    label: 'Входящие задачи',\r\n    img: <Task />,\r\n  },\r\n  {\r\n    value: 4,\r\n    section: 'colleagues',\r\n    label: 'Коллеги',\r\n    img: <People />,\r\n  }/* ,\r\n  {\r\n    section: 'learnings',\r\n    label: 'Обучение',\r\n    img: 'learning.png',\r\n  },\r\n  {\r\n    section: 'gallery',\r\n    label: 'Галерея',\r\n    img: 'gallery.png',\r\n  },\r\n  {\r\n    section: 'favourites',\r\n    label: 'Избранное',\r\n    img: 'favourites.png',\r\n  }, */\r\n];\r\n\r\nexport default sections;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport sections from './sections';\r\nimport styled from 'styled-components';\r\nimport _ from 'lodash';\r\nimport API from '../functions/API';\r\nimport { connect } from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nconst PATH = window.location.pathname;\r\nlet urlValue = _.find(sections, ['section', PATH.includes('id') ? 'id' : PATH.slice(1)]);\r\nif (urlValue) urlValue = urlValue.value;\r\n\r\nclass Navigation extends React.Component {\r\n  state = {\r\n    value: urlValue\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    fetch(`${API}/api/tasks/read.php?id=${this.props.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(tasks => this.props.getTasks(tasks.data))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChange = (event, value) => this.setState({ value });\r\n\r\n  countTask = () => {\r\n    let counter = 0;\r\n    const now = moment(new Date()); //todays date\r\n    const filtered = this.props.store.tasks.filter(task => Number(task.from) !== this.props.user_logged_id);\r\n    filtered.forEach(task => {\r\n      const end = moment(task.until_date); // another date\r\n      const difference = moment.duration(end.diff(now))._milliseconds;\r\n      if (task.status === '0' && difference > 0) counter++;\r\n    })\r\n    return counter;\r\n  }\r\n  render() {\r\n    const { value } = this.state;\r\n    const user = this.props;\r\n\r\n    return (\r\n      <Wrapper>\r\n        <AppBar position=\"static\" color=\"default\">\r\n          <Tabs\r\n            value={value}\r\n            onChange={this.handleChange}\r\n            indicatorColor=\"primary\"\r\n            centered\r\n          >\r\n            {sections.map((section, i) =>\r\n              <Tab\r\n                key={i}\r\n                label={section.section === 'tasks' && this.countTask() > 0 ?\r\n                  <BadgeWrapper><Badge color=\"secondary\" badgeContent={this.countTask()}>\r\n                    {section.label}\r\n                  </Badge></BadgeWrapper>\r\n                  : section.label\r\n                }\r\n                onClick={() => user.handleChangeSection(section.section !== 'id' ? section.section : `id${user.user_logged_id}`)}\r\n                component={Link}\r\n                to={section.section !== 'id' ? section.section : `id${user.user_logged_id}`}\r\n                icon={section.img}\r\n              />\r\n            )}\r\n          </Tabs>\r\n        </AppBar>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  background-color: #ffffff;\r\n  margin-bottom: 4px;\r\n\r\n  a {\r\n    width: ${100 / sections.length}%\r\n  }\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\nconst BadgeWrapper = styled.div`\r\n  & > span > span {\r\n    top: -19px;\r\n    right: -5px;\r\n  }\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getTasks: (tasks) => {\r\n      dispatch({ type: 'FETCH_TASKS', payload: tasks})\r\n    }     \r\n  })\r\n)(Navigation);","import React, { Fragment } from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport styled from 'styled-components';\r\nimport moment from 'moment';\r\nimport NotReaded from '@material-ui/icons/Done';\r\nimport Readed from '@material-ui/icons/DoneAll';\r\n\r\nfunction Friend(props) {\r\n  let avatar = '';\r\n\r\n  if (window.location.host.includes('localhost') && props.friend.avatar) {\r\n    avatar = props.friend.avatar.slice(16);\r\n  } else {\r\n    avatar = props.friend.avatar;\r\n  }\r\n\r\n  const cropString = string => {\r\n    if (string.length < 137) return string;\r\n    return `${string.substring(0,137)}...`;\r\n  }\r\n\r\n  const getTime = (time, date, readed) => {\r\n    const fromDayStart = moment().startOf('day').format();\r\n    const dateFromNow = moment(date, \"DD.MM.YYYY\").format();\r\n    let icon = null;\r\n\r\n    readed === '1' ? icon = <Readed /> : icon = <NotReaded />;   \r\n    \r\n    /**\r\n    |--------------------------------------------------\r\n    | здесь проблема с моментом, считает почему с ошибкой на день\r\n    | внизу заккоментирован правильный ретурн по логике\r\n    |--------------------------------------------------\r\n    */\r\n    if (!moment(fromDayStart).isSame(dateFromNow, 'day')) {\r\n      return <Time>{/* props.friend.id === props.friend.message.user ? icon : null */}<Typography variant=\"subtitle2\" color='primary'>{moment(date, \"DD.MM.YYYY\").calendar().slice(0,-4)} {time}</Typography></Time>\r\n      /* return <Time>{icon}<Typography variant=\"subtitle2\" color='primary'>{moment(date).fromNow()}</Typography></Time> */\r\n    }\r\n\r\n    return (\r\n      <Time>{/* props.friend.id === props.friend.message.user ? icon : null */}<Typography variant=\"subtitle2\" color='primary'>{props.friend.message.time}</Typography></Time>\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <ListItem \r\n      onClick={() => props.openRoom(props.friend.hasOwnProperty('message') && props.friend.message ? props.friend.message.chat : 0, props.friend)}\r\n      button \r\n      TouchRippleProps={{ classes: { child: 'touch-ripple' }}} \r\n    >\r\n      <ListItemAvatar>\r\n        <Avatar\r\n          style={{ height: 50, width: 50 }}\r\n          alt={`${props.friend.name} ${props.friend.surname}`}\r\n          src={props.friend.avatar !== '' ? avatar : defaultAvatar}\r\n        />\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        inset\r\n        primary={<MessageHeader>\r\n          <Typography variant=\"subtitle1\">{`${props.friend.name} ${props.friend.surname}`}</Typography>\r\n          {props.friend.message ? \r\n            getTime(props.friend.message.time, props.friend.message.date, props.friend.message.readed)     \r\n          : null}\r\n        </MessageHeader>}\r\n        secondary={props.friend.message ?\r\n          <Fragment>\r\n            <Typography component=\"span\" style={{ display: 'inline' }} color=\"primary\">\r\n              {props.friend.id === props.friend.message.user ? `${props.friend.name} ${props.friend.surname}:` : 'Вы:'}\r\n            </Typography>\r\n            {` — ${cropString(props.friend.message.body)} `} \r\n          </Fragment>\r\n        : null}    \r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst Time = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  opacity: .87;\r\n  svg {\r\n    margin-right: 6px;\r\n    font-size: 17px;\r\n    color: #1976d2;\r\n  }\r\n`;\r\nconst MessageHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\nexport default Friend;","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function NoMessages() {\r\n  return (\r\n    <Container>\r\n      <Typography variant='body1' style={{ marginBottom: 12 }}>\r\n        Будьте первым, кто отправит сообщение в этом диалоге.\r\n      </Typography>\r\n      <Typography variant='body2'>\r\n        Чтобы написать коллеге, просто введите текст сообщения в строке снизу и нажмите клавишу \"Enter\".\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 30px 80px;\r\n  height: 250px;\r\n  display: flex;\r\n  opacity: .75;\r\n  text-align: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n`;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport styled from 'styled-components';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport { Typography, Tooltip } from '@material-ui/core';\r\nimport NotReaded from '@material-ui/icons/Done';\r\nimport Readed from '@material-ui/icons/DoneAll';\r\nimport moment from 'moment';\r\nimport Delete from '@material-ui/icons/Delete';\r\nimport Edit from '@material-ui/icons/Edit';\r\n\r\nfunction Message(props) { \r\n  let prodUrl = '';\r\n  /* if (!window.location.host.includes('localhost')) {\r\n    prodUrl = `frontend/public/`;\r\n  }  */\r\n\r\n  function isToday(date) {\r\n    const fromDayStart = moment().startOf('day').format();\r\n    const dateFromNow = moment(date, \"DD.MM.YYYY\").format();\r\n\r\n    if (!moment(fromDayStart).isSame(dateFromNow, 'day')) {\r\n      return moment(date, \"DD.MM.YYYY\").calendar().slice(0,-4);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const { room, user } = props.store;\r\n\r\n  return (\r\n    <Container style={ room.user.id !== props.message.user ? { flexDirection: 'row-reverse'} : {}}>\r\n      <Avatar \r\n        style={ room.user.id !== props.message.user \r\n          ? { background: `url(${prodUrl}${user[0].avatar ? user[0].avatar : defaultAvatar}) no-repeat center/cover` } \r\n          : { background: `url(${prodUrl}${room.user.avatar? room.user.avatar : defaultAvatar}) no-repeat center/cover` } \r\n        }>\r\n      </Avatar>  \r\n      <Body>\r\n        <Typography className='message-name' variant='subtitle2' color='secondary'>      \r\n          {room.user.id !== props.message.user \r\n            ? `Вы` \r\n            : `${room.user.name} ${room.user.surname}` }\r\n          \r\n          {room.user.id !== props.message.user \r\n            ? <span>\r\n                <Tooltip title='редактировать' placement='top'><Edit onClick={() => props.editMessage(props.message.body, props.message.id)} /></Tooltip>\r\n                <Tooltip title='удалить' placement='top'><Delete onClick={props.handleDelete} /></Tooltip>\r\n              </span> \r\n            : null}\r\n        </Typography>\r\n        <Typography variant='body2'>{props.message.body}</Typography>\r\n        <Typography className='message-time' variant='subtitle2' color='primary'>    \r\n          {isToday(props.message.date)} {props.message.time}\r\n          {props.message.edited === '1' ? ' отредактировано' : null}\r\n          {/* room.user.id !== props.message.user ? props.message.readed === '1' ? <Readed /> : <NotReaded /> : null */}\r\n        </Typography>\r\n      </Body>  \r\n    </Container>\r\n  )\r\n}\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n`;\r\nconst Avatar = styled.div`\r\n  min-width: 35px;\r\n  min-height: 35px;\r\n  border-radius: 50%;\r\n  margin: 0 15px;\r\n`;\r\nconst Body = styled.div`\r\n  max-width: 70%;\r\n  background: #fafafa;\r\n  padding: 10px 15px;\r\n  border-radius: 7px;\r\n  margin: 15px 0 0;\r\n  .message-time {\r\n    font-size: .7rem;\r\n    display: flex;\r\n    align-items: center;\r\n    svg {\r\n      font-size: 18px;\r\n      margin-left: 5px; \r\n    }\r\n  }\r\n  .message-name {\r\n    display: flex;\r\n    align-items: center;\r\n    min-width: 100px;\r\n    justify-content: space-between;\r\n    svg {\r\n      font-size: 16px;\r\n      margin-left: 5px; \r\n      color: rgba(0,0,0,.34);\r\n      cursor: pointer;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  })\r\n)(Message);","import React from 'react';\r\nimport NoMessages from './NoMessages';\r\nimport { connect } from 'react-redux';\r\nimport Message from './Message';\r\nimport styled from 'styled-components';\r\n\r\nfunction Messages(props) {\r\n  const { messages } = props.store;\r\n  \r\n  setTimeout(() => {\r\n    const messageContainer = document.getElementById(\"messages\");\r\n    if (messages.length !== 0 && messageContainer) messageContainer.scrollTop = messageContainer.scrollHeight; \r\n  }, 0);\r\n\r\n  return (\r\n    <Container id='messages'>\r\n      {messages.length !== 0 ? \r\n        messages.map(message => \r\n          <Message \r\n            key={message.id} \r\n            message={message} \r\n            editMessage={props.editMessage}\r\n            handleDelete={() => props.handleDelete(message.id)}\r\n          />\r\n        )\r\n      : <NoMessages />}\r\n    </Container>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst Container = styled.div`\r\n  overflow: auto;\r\n  margin-top: 5px;\r\n  max-height: 310px;\r\n  &::-webkit-scrollbar {\r\n    width: 2px;\r\n  } \r\n  &::-webkit-scrollbar-track {\r\n    background-color: #fafafa;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #1976d2; \r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  })\r\n)(Messages);","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Send from '@material-ui/icons/Send';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport default function SendMessageInput(props) {\r\n  return (\r\n    <Container onSubmit={props.sendMessage}>\r\n      <TextField\r\n        placeholder=\"Напишите сообщение...\"\r\n        fullWidth\r\n        autoFocus\r\n        margin='dense'\r\n        variant=\"filled\"\r\n        onChange={props.handleNewMessage}\r\n        value={props.message}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Отправить сообщение' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Отправить сообщение\"\r\n                  onClick={props.sendMessage}\r\n                >\r\n                  <Send />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.form`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n  & > div {\r\n    margin: 0;\r\n  }\r\n  & > div > div {\r\n    background: #fafafa !important;\r\n    :hover {\r\n      background: #fafafa;\r\n    }\r\n  }\r\n  input {\r\n    background: #fafafa;\r\n    padding: 13px 25px;\r\n    font-size: 14px;\r\n  }\r\n`;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport default function EditMessageInput(props) {\r\n  return (\r\n    <Container onSubmit={props.submitEdit}>\r\n      <TextField\r\n        placeholder=\"Отредактируйте сообщение...\"\r\n        fullWidth\r\n        autoFocus\r\n        margin='dense'\r\n        variant=\"filled\"\r\n        onChange={props.handleEdit}\r\n        value={props.message}\r\n        InputProps={{\r\n          startAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Редактировать' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Редактировать\"\r\n                  onClick={props.submitEdit}\r\n                >\r\n                  <Edit />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              <Tooltip title='Закрыть' position='top'>\r\n                <IconButton\r\n                  aria-label=\"Закрыть\"\r\n                  onClick={props.closeEditing}\r\n                >\r\n                  <Clear />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.form`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n  z-index: 10;\r\n  & > div {\r\n    margin: 0;\r\n  }\r\n  & > div > div {\r\n    background: #fafafa !important;\r\n    :hover {\r\n      background: #fafafa;\r\n    }\r\n  }\r\n  input {\r\n    background: #fafafa;\r\n    padding: 13px 25px;\r\n    font-size: 14px;\r\n  }\r\n`;","import React, { Fragment } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Typography, Button } from '@material-ui/core';\r\n\r\nexport default function DeleteModal(props) {\r\n  return (\r\n    <Fragment>\r\n      <Container>\r\n        <Typography variant='body2'>Вы уверены, что хотите удалить сообщение?</Typography>\r\n        <Typography variant='body2'>Это действие удалит его для всех участников чата.</Typography>    \r\n        <div>\r\n          <Button variant='text' color='primary' onClick={props.closeDelete} >Отмена</Button>\r\n          <Button variant='text' color='primary' onClick={props.submitDelete}>Удалить</Button>\r\n        </div>       \r\n      </Container>\r\n      <Overlay onClick={props.closeDelete} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 30px 20px 10px;\r\n  width: 320px;\r\n  height: 200px;\r\n  margin: auto;\r\n  z-index: 10;\r\n  background: #fafafa;\r\n  box-shadow: rgba(0,0,0,0.2) 0px 1px 3px 0px, rgba(0,0,0,0.14) 0px 1px 1px 0px, rgba(0,0,0,0.12) 0px 2px 1px -1px;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  & > div {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n`;\r\n\r\nconst Overlay = styled.div`\r\n  position: absolute;\r\n  top: 0; bottom: 0;\r\n  left: 0; right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 5;\r\n  background: rgba(0,0,0,.17);\r\n`;","import React, { Component } from 'react';\r\nimport API from '../functions/API';\r\nimport $ from 'jquery';\r\nimport styled from 'styled-components';\r\nimport { connect } from 'react-redux';\r\nimport Back from '@material-ui/icons/ArrowBack';\r\nimport { Typography } from '@material-ui/core';\r\nimport defaultAvatar from '../img/photos/images.png';\r\nimport Messages from './Messages';\r\nimport Loader from '../Loader/Loader';\r\nimport SendMessageInput from './SendMessageInput';\r\nimport EditMessageInput from './EditMessageInput';\r\nimport DeleteModal from './DeleteModal';\r\nimport moment from 'moment';\r\n\r\nclass ChatRoom extends Component {\r\n  state = {\r\n    loading: true,\r\n    editing: false,\r\n    editText: '',\r\n    deleting: false,\r\n    newMessage: '',\r\n    deleteID: null,\r\n    editID: null\r\n  }\r\n  interval = null;\r\n\r\n  componentDidMount = () => {\r\n    this.getMessages();\r\n    this.interval = setInterval(() => this.getMessages(), 5000);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    clearInterval(this.interval);\r\n  }\r\n  \r\n  getMessages = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('chat', this.props.store.room.chat_id); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/read.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.setState({ loading: false });\r\n        if (res.messages) self.props.getMessages(res.messages);      \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n\r\n  }\r\n\r\n  handleEdit = (e) => this.setState({ editText: e.target.value });\r\n  editMessage = (message, id) => { if(!this.state.editing) this.setState({ editing: !this.state.editing, editText: message, editID: id })};\r\n  closeEditing = () =>  this.setState({ editing: false, editText: '', editID: null });\r\n\r\n  handleDelete = id => this.setState({ deleting: true, deleteID: id });\r\n  closeDelete = () =>  this.setState({ deleting: false, deleteID: null });\r\n\r\n  handleNewMessage = (e) => this.setState({ newMessage: e.target.value });\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Отправляет сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  sendMessage = (e) => {\r\n    if (e) e.preventDefault();\r\n\r\n    const { room, user } = this.props.store;  \r\n\r\n    // если в комнате нет чат-id то создадим чат\r\n    if (!room.hasOwnProperty('chat_id')) {\r\n      this.getMessageId(user[0].id, room.user.id);\r\n      return;\r\n    } else {\r\n      fetch(`${API}/api/message/get_id.php`)\r\n        .then(response => response.json())\r\n        .then(message => localStorage.setItem('message_id', message.message_id))\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    const formData = new FormData();\r\n    const self = this; \r\n    const message = {\r\n      user: user[0].id,\r\n      chat: room.hasOwnProperty('chat_id') ? room.chat_id : localStorage.getItem('chat_id'),\r\n      body: this.state.newMessage,\r\n      date: moment().format('L'),\r\n      time: moment().format('LT')\r\n    };\r\n\r\n    formData.append('chat', message.chat); \r\n    formData.append('user', message.user);\r\n    formData.append('body', message.body); \r\n    formData.append('date', message.date); \r\n    formData.append('time', message.time); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/send.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function(res) {\r\n        if (!self.props.store.chats.find(chat => chat.id === message.chat)) {\r\n          self.props.createChat(localStorage.getItem('users'), message.chat, message); \r\n        }  \r\n        self.props.addMessage(message);\r\n        self.setState({ newMessage: '' })\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | получаем @ID последнего сообщение в базе\r\n  |--------------------------------------------------\r\n  */\r\n  getMessageId = (user1, user2) => {\r\n    fetch(`${API}/api/message/get_id.php`)\r\n      .then(response => response.json())\r\n      .then(message => this.createChat(user1, user2, message.message_id))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | Создаем чат\r\n  |--------------------------------------------------\r\n  */\r\n  createChat = (user1, user2, message_id) => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    const users = `id${user1}, id${user2}`;\r\n    const messageId = (Number(message_id) + 1).toString();\r\n    formData.append('users', users); \r\n    formData.append('last_msg', messageId); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/chat/create.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.props.assignChat(res.chat_id);\r\n        localStorage.setItem('message_id', messageId);\r\n        localStorage.setItem('chat_id', res.chat_id);\r\n        localStorage.setItem('users', `id${user2}`);\r\n        self.sendMessage(false);    \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | удаляем сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  submitDelete = () => {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', this.state.deleteID); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/delete.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function(res) {\r\n        self.props.deleteMessage(self.state.deleteID);\r\n        if (self.props.store.messages.length === 0) self.props.deleteChat(self.props.store.room.chat_id);\r\n        self.closeDelete();\r\n        self.getMessages();\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | редактируем сообщение\r\n  |--------------------------------------------------\r\n  */\r\n  submitEdit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', this.state.editID); \r\n    formData.append('body', this.state.editText); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/message/edit.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: async () => {  \r\n        self.closeEditing();  \r\n        await self.getMessages();   \r\n        await self.props.editMessage(self.state.editID, self.state.editText); \r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, editing, deleting } = this.state;\r\n    const { room } = this.props.store;\r\n\r\n    let avatar = null;\r\n    if (room.hasOwnProperty('user') && window.location.host.includes('localhost')) {\r\n      avatar = room.user.avatar.slice(16);\r\n    } else if (room.hasOwnProperty('user')) {\r\n      avatar = room.user.avatar;\r\n    }\r\n\r\n    return (\r\n      <Room>\r\n        <RoomHeader>\r\n          <Icon onClick={() => this.props.openRoom(0, room.user)}>\r\n            <Back />\r\n          </Icon>\r\n          {room.hasOwnProperty('user') ?\r\n          <div className='room-header__user'>\r\n            <div className='room-header__avatar' style={{ background: `url(${room.user.avatar !== '' ? avatar : defaultAvatar}) no-repeat center/cover`}}></div>\r\n            <div className='room-header__info'>\r\n              <Typography variant='subtitle2'>{room.user.name} {room.user.surname}</Typography>\r\n              <Typography variant='caption'>{room.user.position}</Typography>\r\n            </div>\r\n          </div> : null}\r\n        </RoomHeader>\r\n\r\n        {loading ? <Loader minHeight={250} color='primary' /> : <Messages \r\n          editMessage={this.editMessage.bind(this)} \r\n          handleDelete={this.handleDelete.bind(this)}\r\n        />}\r\n\r\n        {editing ? <EditMessageInput \r\n          closeEditing={this.closeEditing.bind(this)} \r\n          message={this.state.editText} \r\n          handleEdit={this.handleEdit.bind(this)}\r\n          submitEdit={this.submitEdit.bind(this)}\r\n        /> : null}\r\n\r\n        <SendMessageInput \r\n          message={this.state.newMessage}\r\n          sendMessage={this.sendMessage} \r\n          handleNewMessage={this.handleNewMessage}\r\n        />\r\n\r\n        {deleting ? <DeleteModal \r\n          closeDelete={this.closeDelete.bind(this)}\r\n          submitDelete={this.submitDelete.bind(this)}\r\n        /> : null}\r\n      </Room>\r\n    )\r\n  }\r\n}\r\nconst Room = styled.div`\r\n  overflow: hidden;\r\n  height: 432px;\r\n`;\r\nconst RoomHeader = styled.div`\r\n  background: #1976d2;\r\n  height: 60px;\r\n  color: rgba(255,255,255,.5);\r\n  display: flex;\r\n  align-items: center;\r\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 2px 1px -1px;\r\n\r\n  .room-header__user {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n  }\r\n  .room-header__avatar {\r\n    height: 45px;\r\n    width: 45px;\r\n    border-radius: 50%;\r\n    margin-right: 15px;\r\n  }\r\n  h6 {\r\n    color: #fff;\r\n    opacity: .85;\r\n  }\r\n  span {\r\n    color: rgba(255,255,255,.5);\r\n  }\r\n  :hover {\r\n    color: #fff;\r\n    transition: .37s ease;\r\n  }\r\n`;\r\nconst Icon = styled.div`\r\n  width: 60px;\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n`;\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getMessages: (messages) => {\r\n      dispatch({ type: 'FETCH_MESSAGES', payload: messages })\r\n    },\r\n    createChat: (users, chat_id, message) => {\r\n      dispatch({ type: 'CREATE_CHAT', payload: { users: users, id: chat_id, message: message }})\r\n    },\r\n    assignChat: (chat_id) => {\r\n      dispatch({ type: 'ASSIGN_CHAT', payload: chat_id })\r\n    },\r\n    addMessage: (message) => {\r\n      dispatch({ type: 'ADD_MESSAGE', payload: message })\r\n    },\r\n    deleteMessage: (messageID) => {\r\n      dispatch({ type: 'DELETE_MESSAGE', payload: messageID })\r\n    },\r\n    editMessage: (messageID, messageBody) => {\r\n      dispatch({ type: 'EDIT_MESSAGE', payload: [messageID, messageBody] })\r\n    },\r\n    deleteChat: (chat_id) => {\r\n      dispatch({ type: 'DELETE_CHAT', payload: chat_id })\r\n    },\r\n  })\r\n)(ChatRoom);","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ChatItem from './ChatItem';\r\nimport API from '../functions/API';\r\nimport styled from 'styled-components';\r\nimport Search from '../FriendsList/Search';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Loader from '../Loader/Loader';\r\nimport { connect } from 'react-redux';\r\nimport { Transition, animated } from 'react-spring/renderprops';\r\nimport ChatRoom from './ChatRoom';\r\n\r\nclass FriendList extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      friends: [],\r\n      initial: [],\r\n      searchValue: '',\r\n      loading: true,\r\n      documentTitle: document.title,\r\n      completed: false,\r\n      openRoom: false,\r\n      index: 1,\r\n      initialAnimation: false,\r\n      direction: true\r\n    }\r\n\r\n    this.rebuildList = this.rebuildList.bind(this);\r\n  }\r\n    \r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read.php`)\r\n      .then(response => response.json())\r\n      .then(friends => {\r\n        const data = friends.data.filter(friend => friend.id !== this.props.user_id);\r\n        this.setState({ friends: data, initial: data, loading: false })\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleSearch = (e) => {\r\n    this.setState({ searchValue: e.target.value });\r\n    const searchValue = e.target.value.toLowerCase();\r\n\r\n    document.title = e.target.value || this.state.documentTitle;\r\n\r\n    let friends = this.state.initial;\r\n    friends = friends.filter(friend =>\r\n      friend.name.toLowerCase().includes(searchValue) ||\r\n      friend.surname.toLowerCase().includes(searchValue) ||\r\n      friend.position.toLowerCase().includes(searchValue)\r\n    );\r\n    this.setState({ friends });\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.title = this.state.documentTitle;\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | переделываем массив списка друзей исходя из полученных сообщений\r\n  |--------------------------------------------------\r\n  */\r\n  rebuildList = (chats) => {\r\n    let friends = this.state.friends;\r\n    chats.forEach(chat => {\r\n      friends.find(friend => `id${friend.id}` === chat.users).message = chat.message;\r\n    })\r\n    this.setState({ completed: true });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | переключаем и анимируем комнату чата и список\r\n  |--------------------------------------------------\r\n  */\r\n  openRoom = (chat, friend) => {\r\n    if (!this.state.initialAnimation) this.setState({ initialAnimation: true });\r\n\r\n    if (chat) {\r\n      this.props.openChat(chat, friend);\r\n    } else {\r\n      this.rebuildList(this.props.store.chats);\r\n      setTimeout(() => this.props.closeChat(friend), 570);\r\n    }\r\n\r\n    this.setState({ direction: !this.state.direction });\r\n\r\n    setTimeout(() => this.setState(state => ({\r\n      index: state.index === 1 ? 0 : 1,\r\n    })), 300)\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | массив того, что анимируем\r\n  |--------------------------------------------------\r\n  */\r\n  pages = [\r\n    style => (\r\n      <animated.div style={{ ...style, position: 'absolute', width: '100%' }}>\r\n        <ChatRoom\r\n          openRoom={this.openRoom.bind(this)}\r\n        />\r\n      </animated.div>\r\n    ),\r\n    style => (\r\n      <animated.div style={{ ...style, position: 'absolute', width: '100%' }}>\r\n        <Search\r\n          handleSearch={this.handleSearch}\r\n          searchValue={this.searchValue}\r\n        />\r\n        <List>\r\n          {this.state.friends.map(friend =>\r\n            <ChatItem\r\n              openRoom={this.openRoom.bind(this)}\r\n              key={friend.id}\r\n              friend={friend}\r\n            />\r\n          )}\r\n        </List>\r\n      </animated.div>\r\n    )\r\n  ]\r\n\r\n  getDirection = direction => {\r\n    if (direction) {\r\n      return 'translateX(100%)';\r\n    } else {\r\n      return 'translateX(-100%)';\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { chats } = this.props.store;\r\n    const { completed, friends, index, direction } = this.state;\r\n\r\n    if (chats.length > 0 && friends.length > 0 && !completed) {\r\n      this.rebuildList(chats);\r\n    }\r\n\r\n    return (\r\n      <Paper>\r\n        {this.state.loading ?\r\n          <Loader minHeight={370} color='primary' />\r\n          :\r\n          <FriendWrapper>\r\n            <Transition\r\n              reset\r\n              unique\r\n              native\r\n              items={index}\r\n              from={this.state.initialAnimation ? { transform: this.getDirection(direction) } : { zIndex: 1 }}\r\n              enter={{ transform: 'translateX(0%)' }}\r\n              leave={{ transform: this.getDirection(!direction) }}\r\n            >\r\n              {index => this.pages[index]}\r\n            </Transition>\r\n          </FriendWrapper>\r\n        }\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst FriendWrapper = styled.div`\r\n  height: 432px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n  position: relative;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 5px;\r\n  } \r\n  &::-webkit-scrollbar-track {\r\n    background-color: #fafafa;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: #1976d2; \r\n  }\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n  ul {\r\n    padding: 0;\r\n    padding-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport default connect(\r\n  state => ({ store: state }),\r\n  dispatch => ({\r\n    openChat: (chat, friend) => {\r\n      dispatch({ type: 'OPEN_CHAT', payload: [chat, friend] })\r\n    },\r\n    closeChat: (friend) => {\r\n      dispatch({ type: 'CLOSE_CHAT', payload: [null, friend] })\r\n    },\r\n  })\r\n)(FriendList);","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport default function NoChats() {\r\n  return (\r\n    <Container>\r\n      <Typography variant='body1'>\r\n        Пока у вас нет ни одного диалога.\r\n      </Typography>\r\n      <Typography variant='body2'>\r\n        Выберите коллегу из списка ниже или введите в строке поиска имя, фамилию или занимающую должность коллеги, которому хотите отправить сообщение.\r\n      </Typography>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  padding: 30px 40px;\r\n  height: 150px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-direction: column;\r\n`;","import React, { Component } from 'react';\r\nimport Dialogues from './Dialogues';\r\nimport API from '../functions/API';\r\nimport $ from 'jquery';\r\nimport Loader from '../Loader/Loader';\r\nimport { connect } from 'react-redux';\r\nimport { Paper } from '@material-ui/core';\r\nimport NoChats from './NoChats';\r\n\r\nclass Chat extends Component {\r\n  state = {\r\n    loading: true,\r\n    user: []\r\n  }\r\n\r\n  fetchChats(id) {\r\n    const formData = new FormData();\r\n    const self = this;\r\n    formData.append('id', id); \r\n\r\n    $.ajax({\r\n      url: `${API}/api/chat/read.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        self.setState({ loading: false });\r\n\r\n        if (res.chats) {\r\n          let result = res.chats;\r\n          result.forEach(item => {\r\n            item.users = item.users.replace(id, '').replace(',', '').trim();\r\n          }) \r\n          self.props.getChats(res.chats);\r\n        }\r\n      },\r\n      error: err => console.log(err)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, user } = this.state;\r\n    const chats = this.props.store.chats;\r\n    const userStore = this.props.store.user;\r\n\r\n    if (userStore.length > 0 && user.length === 0) {\r\n      this.setState({ user: userStore });\r\n      this.fetchChats(`id${userStore[0].id}`);\r\n    }\r\n    \r\n    return (\r\n      <Paper>\r\n\r\n        {chats.length === 0 ? <NoChats /> : null}\r\n\r\n        {!loading ?\r\n          <Dialogues\r\n            user_id={this.props.user.id}\r\n          />\r\n          : <Loader minHeight={300} color='primary' />}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state\r\n  }),\r\n  dispatch => ({\r\n    getChats: (chats) => {\r\n      dispatch({ type: 'FETCH_CHATS', payload: chats })\r\n    }\r\n  })\r\n)(Chat);\r\n","import React, { Component, Fragment } from 'react';\r\nimport './css/MainPage.css'\r\nimport Header from './Header';\r\nimport MainpageHeader from './MainpageHeader';\r\nimport SideNews from './SideNews';\r\nimport Cookie from './functions/Cookie';\r\nimport FriendsList from './FriendsList/FriendsList';\r\nimport PersonalInfo from './PersonalInfo';\r\nimport Tasks from './Tasks/Tasks';\r\nimport News from './News';\r\nimport Nav from './Navigation/Navigation';\r\nimport styled from 'styled-components';\r\nimport Chat from './Chat/Chat';\r\nimport { connect } from 'react-redux';\r\nimport API from './functions/API';\r\n\r\nclass MainPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user_id: 0,\r\n      user_logged_id: 0,\r\n      user: [],\r\n      initialUser: [],\r\n      section: window.location.pathname.slice(1),\r\n      loading: true\r\n    }\r\n    this.handleChangeUrl      = this.handleChangeUrl.bind(this);  \r\n    this.handleChangeSection  = this.handleChangeSection.bind(this);  \r\n    this.handleChangeUserId   = this.handleChangeUserId.bind(this);\r\n    this.switchComponent      = this.switchComponent.bind(this);  \r\n  }\r\n\r\n  handleChangeUrl() { \r\n    this.setState({ user_id: this.state.user_logged_id });\r\n    \r\n    fetch(`${API}/api/user/read_one.php?id=${this.state.user_logged_id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  handleChangeSection(section) {\r\n    this.setState({ section });\r\n    this.handleChangeUrl();\r\n  }\r\n\r\n  handleChangeUserId(id) {\r\n    this.setState({ user_id: id, section: `id${id}`})\r\n    fetch(`${API}/api/user/read_one.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n  }\r\n\r\n  componentWillMount() {\r\n    const cookie = new Cookie();\r\n    const cookie_id = cookie.getCookie('user_id');\r\n    this.setState({ user_id: parseInt(cookie_id), user_logged_id: parseInt(cookie_id) });\r\n    \r\n    if (window.location.pathname.includes('id')) {\r\n      const current_id = window.location.pathname.slice(3);\r\n      this.setState({ user_id: parseInt(current_id)});\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${API}/api/user/read_one.php?id=${this.state.user_id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user: user, initialUser: user, loading: false }))\r\n      .then(() => this.props.getUser(this.state.initialUser))\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  switchComponent(){\r\n    switch(this.state.section) {\r\n      case `id${this.state.user_id}`:\r\n        return <PersonalInfo user_id={this.state.user_id} user_logged_id={this.state.user_logged_id} user={this.state.user} />\r\n      case 'messages':\r\n        return <Chat user={this.state.user} />;\r\n      case 'news':\r\n        return <News user={this.state.user} />;\r\n      case 'tasks':\r\n        return <Tasks user_logged_id={this.state.user_logged_id} />;\r\n      case 'colleagues':\r\n        return (\r\n            <FriendsList \r\n              handleChangeUserId={this.handleChangeUserId} \r\n              user_id={this.state.user_logged_id}\r\n            />\r\n        )\r\n /*      case 'learnings':\r\n        return 'learnings';\r\n      case 'gallery':\r\n        return 'gallery';\r\n      case 'favourites':\r\n        return 'favourites'; */\r\n      default: return null;\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    const { user_id, user_logged_id, user, initialUser, loading } = this.state;\r\n    \r\n    if (user.error === 1) { window.location.href = '/404';}\r\n    \r\n    return (\r\n      <Fragment>\r\n        <MainpageHeader \r\n          user={initialUser} loading={loading}\r\n        />\r\n        <div className=\"container\">\r\n          <Header />\r\n          <Nav \r\n            user_id={user_id}\r\n            user_logged_id={user_logged_id} \r\n            handleChangeUrl={this.handleChangeUrl} \r\n            handleChangeSection={this.handleChangeSection}\r\n          />\r\n          <MainSection>\r\n            <SideNews \r\n              handleChangeSection={this.handleChangeSection} \r\n              user={user} \r\n            />\r\n            <div className=\"main-page-container\">\r\n              {this.switchComponent()}\r\n            </div>\r\n          </MainSection>  \r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst MainSection = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    store: state,\r\n  }),\r\n  dispatch => ({\r\n    getUser: user => {\r\n      dispatch({ type: 'LOGGED_IN', payload: user })\r\n    }\r\n  })\r\n)(MainPage);","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport { withSnackbar } from 'notistack';\r\nimport API from './functions/API';\r\nimport CloseIcon from '@material-ui/icons/Clear';\r\nimport { Button, Typography, TextField } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nclass ForgetPassword extends Component {\r\n  state = {\r\n    credentials: ''\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    if (this.state.credentials) {\r\n      const formData = new FormData();\r\n      formData.append('credentials', this.state.credentials);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/forget.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n\r\n          if (response === 1) {\r\n            self.props.enqueueSnackbar('На указанный вами при регистрации email - были отправлены рекомендации по восстановлению пароля', { variant: 'info' });\r\n            self.props.forgetPassword();\r\n          } else {\r\n            self.props.enqueueSnackbar('К сожалению, такого логина или email - не существует. Проверьте правильность введенных данных', { variant: 'info' });\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, введите, логин или пароль', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Wrapper>\r\n          <Icon>\r\n            <CloseIcon onClick={this.props.forgetPassword} />\r\n          </Icon>\r\n          <Typography variant='subtitle2'>Восстановление пароля.</Typography>\r\n          <TextField\r\n            label=\"E-mail или логин\"\r\n            variant=\"outlined\"\r\n            name='login'\r\n            fullWidth\r\n            margin='dense'\r\n            error={this.state.credential}\r\n            onChange={e => this.setState({ credentials: e.target.value })}\r\n            value={this.state.username}\r\n          />\r\n          <Button variant='contained' color='primary' onClick={this.handleSubmit}>Отправить</Button>\r\n        </Wrapper>\r\n        <div className=\"black-wrapper black-wrapper__this\" onClick={this.props.forgetPassword}></div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nconst Wrapper = styled.div`\r\n  background: #fff;\r\n  z-index: 100;\r\n  width: 500px;\r\n  height: 258px;\r\n  left: 0;\r\n  right: 0;\r\n  position: fixed;\r\n  top: 25%;\r\n  margin: auto;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  justify-content: space-evenly;\r\n  padding: 30px;\r\n`;\r\nconst Icon = styled.div`\r\n  position: absolute;\r\n  right: 25px;\r\n  top: 15px;  \r\n  cursor: pointer;\r\n  svg {\r\n    color: #1976d2;\r\n  }\r\n`;\r\nexport default withSnackbar(ForgetPassword);\r\n","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport Cookie from './functions/Cookie';\r\nimport ForgetPassword from './ForgetPassword';\r\nimport { connect } from 'react-redux';\r\nimport API from './functions/API';\r\nimport { Button } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\nimport { withSnackbar } from 'notistack';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nclass SignupForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      login: '',\r\n      password: '',\r\n      isForget: '',\r\n      isPassHidden: false,\r\n      invalidText: false,\r\n      invalidPass: false\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    this.setState({ invalidText: false, invalidPass: false })\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  forgetPassword = () => this.setState({ isForget: !this.state.isForget });\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n\r\n    if (this.state.login !== '' && this.state.password.length >= 8) {\r\n      const formData = new FormData();\r\n\r\n      formData.append('login', this.state.login);\r\n      formData.append('password', this.state.password);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/signup.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n          let user_id = res.user_id;\r\n          let cookie = new Cookie();\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось войти. Проверьте правильность введенных данных', { variant: 'warning' });\r\n              break;\r\n            case 0.5:\r\n              self.props.enqueueSnackbar('К сожалению, ваша учетная запись ещё не подтверждена, попробуйте войти позже', { variant: 'info' });\r\n              break;\r\n            case 1:\r\n              cookie.setCookie('user_id', user_id, 30);\r\n              localStorage.setItem('user_id', user_id);\r\n              window.location.href = `/`;\r\n              break;\r\n            default: break;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, заполните все поля', { variant: 'warning' });\r\n      if (this.state.password.length < 8) this.setState({ invalidPass: true })\r\n      if (!this.state.login) this.setState({ invalidText: true })\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"form-container\" style={{ 'paddingBottom': '45px' }}>\r\n          <form className=\"registerForm\" id=\"register\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n\r\n            <TextField\r\n              label=\"Логин или email\"\r\n              variant=\"outlined\"\r\n              name='login'\r\n              fullWidth\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.username}\r\n              error={this.state.invalidText}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='password'\r\n              error={this.state.invalidPass}\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.invalidPass ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <Buttons>\r\n              <Button variant='text' color='default' onClick={this.forgetPassword}>Забыли пароль?</Button>\r\n              <Button variant='contained' color='primary' type='submit'>Войти</Button>\r\n            </Buttons>\r\n            {this.state.isForget ? <ForgetPassword forgetPassword={this.forgetPassword} /> : null}\r\n          </form>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst Buttons = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 35px;\r\n`;\r\n\r\nexport default connect(\r\n  state => ({\r\n    global: state\r\n  }),\r\n  dispatch => ({\r\n    login: (user) => {\r\n      dispatch({ type: 'LOGGED_IN', payload: user })\r\n    }\r\n  })\r\n)(withSnackbar(SignupForm));","import React, { Component, Fragment } from 'react';\r\nimport $ from 'jquery';\r\nimport { withSnackbar } from 'notistack';\r\nimport API from './functions/API';\r\nimport { Button } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\nimport Loader from './Loader/Loader';\r\n\r\nclass RegisterForm extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      email: '',\r\n      login: '',\r\n      password: '',\r\n      confirmed: '',\r\n      isEmailValid: '',\r\n      isPassHidden: false, \r\n      entered: false,\r\n      loading: false\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.validateEmail = this.validateEmail.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showPassword = this.showPassword.bind(this);\r\n  }\r\n\r\n  // динамически обрабатываем изменения полей\r\n  handleChange(event) {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      entered: false\r\n    })\r\n    // если вводится е-мэйл то прогоняем через функцию\r\n    if (event.target.name === 'email') {\r\n      this.validateEmail(event.target.value);\r\n      // если вводимое значение пустое - то убираем подсказку \r\n      if (event.target.value === '') {\r\n        this.setState({ isEmailValid: '' });\r\n      }\r\n    }\r\n  }\r\n\r\n  validateEmail(email) {\r\n    // eslint-disable-next-line\r\n    const regExp = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    regExp.test(email) ? this.setState({ isEmailValid: true }) : this.setState({ isEmailValid: false });\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    e.preventDefault();\r\n    this.setState({ entered: true, loading: true });\r\n\r\n    if (this.state.login && this.state.isEmailValid && this.state.password) {\r\n      const formData = new FormData();\r\n\r\n      formData.append('login', this.state.login);\r\n      formData.append('email', this.state.email);\r\n      formData.append('password', this.state.password);\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/register.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          const response = res.result;\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось зарегистрироватьcя.', { variant: 'error' });\r\n              break;\r\n            case 1:\r\n              self.props.enqueueSnackbar('Вы успешно зарегистрировались, как только вашу учетную запись подтвердят - вы сможете начать пользоваться сервисом. Вы получите уведомление по указанной при регистрации почте.', { variant: 'success' });\r\n              self.setState({ \r\n                email: '',\r\n                login: '',\r\n                password: '',\r\n                confirmed: '',\r\n                isEmailValid: '',\r\n                isPassHidden: false, \r\n                entered: false,\r\n                loading: false\r\n              })\r\n              break;\r\n            case 2:\r\n              self.props.enqueueSnackbar('Пользователь с таким логином или email уже существует', { variant: 'warning' });\r\n              break;\r\n            default: return null;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка регистрации', { variant: 'error' });\r\n        }\r\n      });\r\n    } else {\r\n      self.props.enqueueSnackbar('Пожалуйста, заполните все поля', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  showPassword() {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"form-container\">\r\n          <form id=\"register\" action=\"\" method=\"POST\" onSubmit={this.handleSubmit}>\r\n            <TextField\r\n              label=\"Логин или email\"\r\n              variant=\"outlined\"\r\n              name='login'\r\n              fullWidth\r\n              error={this.state.entered && !this.state.login}\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.login}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='password'\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              error={this.state.entered && this.state.password.length < 8}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.password.length > 0 && this.state.password.length < 8 ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <TextField\r\n              label=\"Повторите пароль\"\r\n              variant=\"outlined\"\r\n              name='confirmed'\r\n              fullWidth\r\n              margin='dense'\r\n              type='password'\r\n              error={this.state.entered && this.state.confirmed.length < 8}\r\n              onChange={this.handleChange}\r\n              value={this.state.confirmed}\r\n            />\r\n\r\n            {this.state.password !== this.state.confirmed && this.state.confirmed !== '' ? <FormHelperText style={{ color: '#f44336' }}>Пароль должны совпадать</FormHelperText> : null}\r\n\r\n            <TextField\r\n              label=\"Электронная почта\"\r\n              variant=\"outlined\"\r\n              name='email'\r\n              fullWidth\r\n              error={this.state.entered && !this.state.isEmailValid && !this.state.email.lentgh}\r\n              margin='dense'\r\n              onChange={this.handleChange}\r\n              value={this.state.email}\r\n            />\r\n            {!this.state.isEmailValid && this.state.email ? <FormHelperText style={{ color: '#f44336' }}>Пожалуйста, введите настоящий email адрес</FormHelperText> : ''}\r\n\r\n            <BtnWrapper>\r\n              <Button variant='contained' color='primary' type='submit' disabled={this.state.loading}> \r\n                {this.state.loading ? <Loader minHeight={30} color='secondary' /> : 'Зарегистрироваться'}  \r\n              </Button>\r\n            </BtnWrapper>\r\n          </form>\r\n\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\nconst BtnWrapper = styled.div`\r\n  button {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 30px;\r\n    margin: auto;\r\n    width: fit-content;\r\n    min-width: 199px;\r\n    background: #1976d2 !important;\r\n    & > span > div > div {\r\n      height: 25px !important;\r\n      width: 25px !important;\r\n    }\r\n  }\r\n`;\r\nexport default withSnackbar(RegisterForm);","import React from 'react';\r\nimport './css/BgBubbles.css';\r\n\r\nconst BgBubbles = () => {\r\n  return (\r\n    <ul className=\"bg-bubbles\">\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default BgBubbles;","import React, { Component } from 'react';\nimport SignupForm from './SignupForm';\nimport RegisterForm from './RegisterForm';\nimport Header from './Header';\nimport Typography from '@material-ui/core/Typography';\nimport BgBubbles from './BgBubbles';\nimport './css/LoginForms.css';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      whichForm: false,\n    }\n    this.changeForm = this.changeForm.bind(this);\n  }\n\n  changeForm() {\n    this.setState({whichForm: !this.state.whichForm});\n  }\n\n  render() {\n    return (\n      <div className=\"login-screen\">\n        <Header />\n        <div className=\"login-screen-container\">\n          <p className=\"login-screen-greetings\">Здравствуйте</p>  \n          <div className=\"login-button-container\">\n            <button className={this.state.whichForm ? 'login-screen-button login-screen-button-enabled' : 'login-screen-button'} onClick={this.changeForm}>\n              <Typography variant='button'>Войти</Typography>\n            </button>\n            <button className={this.state.whichForm ? 'login-screen-button' : 'login-screen-button login-screen-button-enabled'} onClick={this.changeForm}>\n              <Typography variant='button'>Зарегистрироваться</Typography>\n            </button>\n          </div>              \n          {this.state.whichForm ? <RegisterForm /> : <SignupForm />}                        \n        </div>\n        <BgBubbles /> \n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React, { Component } from 'react';\r\nimport Header from './Header';\r\nimport BgBubbles from './BgBubbles';\r\nimport './css/LoginForms.css';\r\nimport './css/Approved.css';\r\n\r\nclass Approved extends Component {\r\n  goToMain = () => window.location.href = '/';\r\n  closeWindow = () => window.close();\r\n\r\n  render() {\r\n   return (\r\n      <div className=\"login-screen\">\r\n        <Header />\r\n        <div className=\"approved-container\">\r\n          <h1>Регистрация пользователя была подтверждена.</h1>\r\n          <button onClick={this.goToMain}>На главную</button>                   \r\n        </div>\r\n        <BgBubbles /> \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Approved;","import React, { Component } from 'react';\r\nimport Header from './Header';\r\nimport BgBubbles from './BgBubbles';\r\nimport $ from 'jquery';\r\nimport './css/LoginForms.css';\r\nimport './css/Restore.css';\r\nimport { withSnackbar } from 'notistack';\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport API from './functions/API';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport styled from 'styled-components';\r\n\r\nclass Restore extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pw: '',\r\n      confirmed: '',\r\n      isPassHidden: false,\r\n      entered: false\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange = (event) => {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n      entered: false\r\n    })\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    var self = this;\r\n    this.setState({ entered: true });\r\n\r\n    if (self.state.pw === self.state.confirmed && self.state.pw && self.state.confirmed) {\r\n      self.setState({ modal: false });\r\n      e.preventDefault();\r\n      const formData = new FormData();\r\n\r\n      function getUrlVars() {\r\n        let vars = {};\r\n        // eslint-disable-next-line\r\n        let parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\r\n          vars[key] = value;\r\n        });\r\n        return vars;\r\n      }\r\n\r\n      formData.append('password', $('input[name=\"pw\"]').val());\r\n      formData.append('auth', getUrlVars()['auth'])\r\n\r\n      $.ajax({\r\n        url: `${API}/api/user/restore.php`,\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        type: 'POST',\r\n        success: function (res) {\r\n          console.log(res);\r\n          let response = res.result;\r\n\r\n          switch (response) {\r\n            case 0:\r\n              self.props.enqueueSnackbar('Не удалось изменить пароль', { variant: 'error' });\r\n              break;\r\n            case 1:\r\n              self.props.enqueueSnackbar('Поздравляем, успешно удалось сменить пароль - теперь вы можете войти в систему', { variant: 'success' });\r\n              setTimeout(() => window.location.href = 'login', 237);\r\n              break;\r\n            default: return null;\r\n          }\r\n        },\r\n        error: function () {\r\n          self.props.enqueueSnackbar('Ошибка авторизации', { variant: 'error' });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ isPassHidden: !this.state.isPassHidden });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login-screen\">\r\n        <Header />\r\n        <div className=\"form-container restore-container\">\r\n          <Typography variant='h6'>Введите новый пароль.</Typography>\r\n          <Typography variant='caption'> Выбор более безопасного пароля поможет обеспечить защиту вашей личной информации.</Typography>\r\n\r\n          <InputWrapper>\r\n            <TextField\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              type={this.state.isPassHidden ? 'text' : 'password'}\r\n              label=\"Пароль\"\r\n              margin='dense'\r\n              name='pw'\r\n              value={this.state.pw}\r\n              onChange={this.handleChange}\r\n              error={this.state.pw.length > 0 && this.state.pw.length < 8}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"Toggle password visibility\"\r\n                      onClick={this.handleClickShowPassword}\r\n                    >\r\n                      {this.state.isPassHidden ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            {this.state.pw.length > 0 && this.state.pw.length < 8 ? <FormHelperText style={{ color: '#f44336' }}>Пароль должен быть не менее 8 символов</FormHelperText> : ''}\r\n\r\n            <TextField\r\n              label=\"Повторите пароль\"\r\n              variant=\"outlined\"\r\n              name='confirmed'\r\n              fullWidth\r\n              margin='dense'\r\n              type='password'\r\n              error={this.state.entered && this.state.confirmed.length < 8 && this.state.confirmed.length > 0}\r\n              onChange={this.handleChange}\r\n              value={this.state.confirmed}\r\n            />\r\n            {this.state.pw !== this.state.confirmed && this.state.confirmed ? <FormHelperText style={{ color: '#f44336' }}>Пароль должны совпадать</FormHelperText> : null}\r\n          </InputWrapper>\r\n\r\n          <BtnContainer>\r\n            <Button variant='contained' color='primary' onClick={this.handleSubmit}>Сменить пароль</Button>\r\n          </BtnContainer>\r\n        </div>\r\n        <BgBubbles />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst BtnContainer = styled.div`\r\n  button {\r\n    position: absolute;\r\n    bottom: 35px;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    width: fit-content;\r\n  }\r\n`;\r\nconst InputWrapper = styled.div`\r\n  margin-top: 15px;\r\n`;\r\nexport default withSnackbar(Restore);","import React, { Component } from 'react';\r\nimport './css/404.css';\r\n\r\nclass Page404 extends Component {\r\n\r\n  goToMain = () => window.location.href = '/';\r\n\r\n  render() {\r\n    return (\r\n      <main>\r\n        <div className=\"loading wave\">\r\n          404\r\n        </div>\r\n        <div className=\"not-found wave\">\r\n          Страница не найдена\r\n        </div> \r\n      <button onClick={this.goToMain}>перейти на главную</button>\r\n    </main>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Page404;","import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport BgBubbles from './BgBubbles';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport DefaultAvatar from './img/photos/images.png';\r\nimport API from './functions/API';\r\nimport { withSnackbar } from 'notistack';\r\nimport { DatePicker } from 'material-ui-pickers';\r\n\r\nif (window.location.pathname === '/settings') {\r\n  $(document.body).css({\r\n    background: 'linear-gradient(to bottom right,#00c5fe,#9de3dc,#0d11b4)'\r\n  })\r\n}\r\n\r\nconst styles = {\r\n  default: {\r\n    width: '600px',\r\n    margin: '0 auto',\r\n    position: 'relative',\r\n    padding: '20px 40px 80px',\r\n    zIndex: 37\r\n  },\r\n  input: {\r\n    width: '100%',\r\n  },\r\n  button: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    width: 120,\r\n    bottom: 25,\r\n    margin: 'auto'\r\n  },\r\n  upload: {\r\n    background: '#ef6c00',\r\n    color: 'white',\r\n    margin: 'auto',\r\n    cursor: 'pointer',\r\n    position: 'relative'\r\n  },\r\n  hiddenInput: {\r\n    opacity: 0,\r\n    position: 'absolute',\r\n    cursor: 'pointer',\r\n    left: 0, right: 0, bottom: 0, top: 0\r\n  },\r\n  avatar: {\r\n    width: 100,\r\n    height: 100,\r\n    marginBottom: 15,\r\n    borderRadius: '50%'\r\n  },\r\n  header: {\r\n    marginTop: 100,\r\n    marginBottom: 12,\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontWeight: 500\r\n  }\r\n};\r\n\r\nconst genders = [\r\n  {\r\n    value: 'мужской',\r\n    label: 'мужской'\r\n  },\r\n  {\r\n    value: 'женский',\r\n    label: 'женский',\r\n  }\r\n];\r\n\r\nclass Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: [],\r\n      selectedFile: null,\r\n      user_id: '',\r\n      uploadedAvatar: '',\r\n      selectedDate: ''\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  fileSelect = event => {\r\n    if (event.target.files[0].size < 2 * 1024 * 1024) {\r\n      this.setState({ selectedFile: event.target.files[0] })\r\n      this.uploadAvatar(event.target.files[0]);\r\n    } else {\r\n      this.props.enqueueSnackbar('Файл слишком большой, размер должен не превышать 2МБ', { variant: 'warning' });\r\n    }\r\n  }\r\n\r\n  uploadAvatar = (file) => {\r\n    let fd = new FormData();\r\n    let files = file;\r\n    let self = this;\r\n    fd.append('file', files);\r\n    fd.append('id', this.state.user_id);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/upload.php`,\r\n      type: 'post',\r\n      data: fd,\r\n      contentType: false,\r\n      processData: false,\r\n      success: function (res) {\r\n        if (window.location.host.includes('localhost')) {\r\n          self.setState({ uploadedAvatar: res.location.slice(22) })\r\n        } else {\r\n          self.setState({ uploadedAvatar: res.location.slice(6) })\r\n        }\r\n        console.log(res);\r\n      },\r\n    });\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const id = localStorage.getItem('user_id');\r\n    this.setState({ user_id: id });\r\n    fetch(`${API}/api/user/info.php?id=${id}`)\r\n      .then(response => response.json())\r\n      .then(user => this.setState({ user }))\r\n  }\r\n\r\n\r\n  handleChange = event => {\r\n    // ставим стейт исходя из именя поля и вводимого значения\r\n    let user = { ...this.state.user };\r\n    user[event.target.name] = event.target.value;\r\n    this.setState({ user });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    var self = this;\r\n    self.setState({ modal: false });\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n    formData.append('id', self.state.user.id);\r\n    formData.append('surname', $('input[name=\"surname\"]').val());\r\n    formData.append('name', $('input[name=\"name\"]').val());\r\n    formData.append('birthday', self.state.selectedDate.slice(0, 10) || this.state.user.birthday);\r\n    formData.append('sex', $('input[name=\"sex\"]').val());\r\n    formData.append('position', $('input[name=\"position\"]').val());\r\n    formData.append('avatar', self.state.uploadedAvatar);\r\n\r\n    $.ajax({\r\n      url: `${API}/api/user/settings.php`,\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      type: 'POST',\r\n      success: function (res) {\r\n        console.log(res);\r\n        let response = res.result;\r\n        switch (response) {\r\n          case 0:\r\n            self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n            break;\r\n          case 1:\r\n            self.props.enqueueSnackbar('Персональные данные изменены', { variant: 'success' });\r\n            window.location.href = `id${self.state.user.id}`;\r\n            break;\r\n          default: break;\r\n        }\r\n      },\r\n      error: function () {\r\n        self.props.enqueueSnackbar('Что-то пошло не так, попробуйте обновить страницу', { variant: 'error' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  |--------------------------------------------------\r\n  | устанавливаем дату из пикера в нужном формате\r\n  |--------------------------------------------------\r\n  */\r\n  handleDateChange = date => this.setState({ selectedDate: date.format() });\r\n\r\n  render() {\r\n    const { user, uploadedAvatar } = this.state;\r\n\r\n    let avatar = null;\r\n    if (window.location.host.includes('localhost') && user.avatar) {\r\n      avatar = user.avatar.slice(16);\r\n    } else {\r\n      avatar = user.avatar;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <Typography variant=\"h5\" style={{ ...styles.header }}>Начните заполнять персональные данные</Typography>\r\n\r\n        <Paper style={{ ...styles.default }} elevation={1}>\r\n\r\n          <form id=\"personal-info\" action=\"\" method=\"POST\" encType=\"multipart/form-data\">\r\n            {uploadedAvatar ?\r\n              <div style={{ ...styles.avatar, background: `url(${uploadedAvatar ? uploadedAvatar : DefaultAvatar}) no-repeat center/cover` }}></div> :\r\n              <div style={{ ...styles.avatar, background: `url(${avatar}) no-repeat center/cover` }}></div>}\r\n            <Button variant=\"contained\" style={{ ...styles.upload }}>\r\n              Загрузить фото профиля\r\n            <Icon style={{ marginLeft: 10 }}>cloud_upload</Icon>\r\n              <input\r\n                id='avatar'\r\n                accept=\"image/*\"\r\n                style={{ ...styles.hiddenInput }}\r\n                type=\"file\"\r\n                name='avatar'\r\n                onChange={this.fileSelect}\r\n              />\r\n            </Button>\r\n\r\n            <TextField\r\n              required\r\n              label=\"Ваше имя\"\r\n              name='name'\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.name}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <TextField\r\n              required\r\n              label=\"Фамилия\"\r\n              name='surname'\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.surname}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <TextField\r\n              select\r\n              required\r\n              label=\"Пол\"\r\n              InputLabelProps={{ shrink: true }}\r\n              value={user.sex}\r\n              onChange={this.handleChange}\r\n              helperText=\"Пожалуйста, выберите пол\"\r\n              margin=\"normal\"\r\n              name='sex'\r\n              style={{ ...styles.input }}\r\n            >\r\n              {genders.map(option => (\r\n                <MenuItem name='sex' key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n\r\n            <TextField\r\n              required\r\n              label=\"Должность\"\r\n              name=\"position\"\r\n              InputLabelProps={{ shrink: true }}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange}\r\n              value={user.position}\r\n              style={{ ...styles.input }}\r\n            />\r\n\r\n            <DatePicker\r\n              name=\"birthday\"\r\n              margin=\"normal\"\r\n              label='Дата рождения'\r\n              format={'Do MMMM YYYY'}\r\n              value={this.state.selectedDate ? this.state.selectedDate : user.birthday}\r\n              fullWidth={true}\r\n              InputLabelProps={{ shrink: true }}\r\n              onChange={this.handleDateChange}\r\n              aria-describedby=\"component-helper-text\"\r\n              style={{ ...styles.input }}\r\n              required\r\n            />\r\n\r\n            <Typography variant=\"caption\" gutterBottom>\r\n              *Дата рождения будет видна только руководству\r\n            </Typography>\r\n\r\n            <Button variant=\"contained\" color='primary' style={{ ...styles.button }} onClick={this.handleSubmit}>\r\n              Вперёд!\r\n           </Button>\r\n\r\n          </form>\r\n        </Paper>\r\n\r\n        <BgBubbles />\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Settings);","import React, {Component} from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport MainPage from './components/MainPage';\nimport LoginForm from './components/LoginForm';\nimport Approved from './components/Approved';\nimport Restore from './components/Restore';\nimport Page404 from './components/Page404';\nimport Settings from './components/Settings';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faComments, faHeart, faEnvelope, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nlibrary.add(faComments, faHeart, faEnvelope, faEdit)\n\nclass App extends Component {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>          \n            <Route path='/id:user_id' component={MainPage}/>\n            <Route path='/friends'    component={MainPage}/>\n            <Route path='/colleagues' component={MainPage}/>\n           {/*  <Route path='/favourites' component={MainPage}/>\n            <Route path='/gallery'    component={MainPage}/> */}\n            <Route path='/tasks'      component={MainPage}/>\n           {/*  <Route path='/learnings'  component={MainPage}/> */}\n            <Route path='/messages'   component={MainPage}/>\n            <Route path='/news'       component={MainPage}/> \n            <Route path='/settings'   component={Settings}/>\n            <Route path=\"/login\"      component={LoginForm}/>\n            <Route path=\"/approved\"   component={Approved}/>\n            <Route path=\"/restore\"    component={Restore}/>\n            <Route path=\"/404\"        component={Page404}/>\n            <Route path=\"/:any\"       component={Page404}/>\n        </Switch> \n      </BrowserRouter> \n    );\n  }\n}\n\nexport default App;\n\n","import { combineReducers } from 'redux';\r\nimport user from './user';\r\nimport tasks from './tasks';\r\nimport news from './news';\r\nimport chats from './chats';\r\nimport room from './room';\r\nimport messages from './messages';\r\n\r\nexport default combineReducers({\r\n  user,\r\n  news,\r\n  tasks,\r\n  chats,\r\n  room,\r\n  messages\r\n})","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'LOGGED_IN':\r\n      return [action.payload]\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_NEWS':\r\n      return [...action.payload]\r\n    case 'DELETE_NEWS':\r\n      let nextState = state.filter(item => item.id !== action.payload);\r\n      return [...nextState]\r\n    case 'ADD_NEWS':\r\n      return [...action.payload]  \r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_TASKS':\r\n      return [...action.payload]\r\n    case 'MARK_COMPLETED':\r\n      return [...action.payload]\r\n    case 'ADD_TASK':\r\n      return [...action.payload]\r\n    case 'FILTER_TASKS':\r\n      return [...action.payload]\r\n    case 'DELETE_TASK':\r\n      let nextState = state.filter(item => item.id !== action.payload);\r\n      return [...nextState]\r\n    default:\r\n      return state\r\n  }\r\n}","import _ from 'lodash';\r\n\r\nexport default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_CHATS':\r\n      return [...action.payload]\r\n    case 'CREATE_CHAT':\r\n      return [...state, action.payload]\r\n    case 'DELETE_CHAT':\r\n      let cleared = state.filter(chat => chat.id !== action.payload);\r\n      return cleared\r\n    case 'ADD_MESSAGE':\r\n      let newState = state.filter(chat => chat.id !== action.payload.chat);\r\n      let currentChat = state.find(chat => chat.id === action.payload.chat);\r\n      currentChat.message = action.payload;\r\n      newState = _.concat(newState, currentChat)\r\n      return newState\r\n    case 'EDIT_MESSAGE':\r\n      let editedState = state.filter(chat => chat.message.id !== action.payload[0]);\r\n      let editedMessage = state.find(chat => chat.message.id === action.payload[0]);\r\n      \r\n      if (editedMessage) {\r\n        editedMessage.message.body = action.payload[1];\r\n        editedState = _.concat(editedState, editedMessage)\r\n      }\r\n      \r\n      return editedState\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'OPEN_CHAT':\r\n      return {chat_id: action.payload[0], user: action.payload[1]}\r\n    case 'CLOSE_CHAT':\r\n      return {user: action.payload[1]}\r\n    case 'DELETE_CHAT':\r\n      let initial = state;\r\n      delete initial.chat_id;\r\n      initial.user.message = null;\r\n      return initial\r\n    case 'ASSIGN_CHAT':\r\n      let newState = state;\r\n      newState.chat_id = action.payload;\r\n      return newState;\r\n    default:\r\n      return state\r\n  }\r\n}","export default function reducing(state = [], action) {\r\n  switch (action.type) {\r\n    case 'FETCH_MESSAGES':\r\n      return [...action.payload]\r\n    case 'ADD_MESSAGE':\r\n      let newMessage = action.payload;\r\n      newMessage.id = (Number(localStorage.getItem('message_id')) + 1).toString();\r\n      let finder = state.find(message => message.id === newMessage.id);\r\n      if (finder) {\r\n        newMessage.id = (Number(newMessage.id) + 1).toString();\r\n      }\r\n      return [...state, newMessage]\r\n    case 'DELETE_MESSAGE':\r\n      let newState = state.filter(message => message.id !== action.payload);\r\n      return newState\r\n    case 'CLOSE_CHAT':\r\n      return []\r\n    default:\r\n      return state\r\n  }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducer from './reducers';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n/* eslint-disable */\nimport { MuiPickersUtilsProvider } from 'material-ui-pickers';\nimport MomentUtils from '@date-io/moment';\nimport moment from 'moment';\nimport 'moment/locale/ru';\nimport { SnackbarProvider } from 'notistack';\n\nmoment.locale('ru');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: '#1976d2' }, \n    secondary: { main: '#ff4800' },\n  },\n  typography: { useNextVariants: true }\n});\n\nfunction Root() {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <Provider store={store}>\n        <MuiPickersUtilsProvider utils={MomentUtils} moment={moment}>\n          <SnackbarProvider maxSnack={3}>\n            <App />\n          </SnackbarProvider>\n        </MuiPickersUtilsProvider>\n      </Provider>\n    </MuiThemeProvider>\n  );\n}\n\nlet store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n/* store.subscribe(() => console.log('subscribe', store.getState())); */\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}