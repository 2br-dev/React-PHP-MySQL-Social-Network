"use strict";function declOfNum(e,t){return e=Math.abs(e),[e,t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]].join(" ")}function saving(e,t){$.ajax({url:"/"+ADMIN_DIR+"/save/",type:"post",data:{id:e,cont:t,pathname:location.pathname},dataType:"JSON",success:function(e){1==e?alert("Данные удачно сохранены."):alert("Ошибка, данные небыли сохранены.")}})}function isFullScreen(e){return/\bCodeMirror-fullscreen\b/.test(e.getWrapperElement().className)}function winHeight(){return window.innerHeight||(document.documentElement||document.body).clientHeight}function setFullScreen(e,t){var i=e.getWrapperElement(),o=e.getScrollerElement();t?(i.className+=" CodeMirror-fullscreen",o.style.height=winHeight()+"px",document.documentElement.style.overflow="hidden"):(i.className=i.className.replace(" CodeMirror-fullscreen",""),o.style.height="",document.documentElement.style.overflow=""),e.refresh()}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function is_string(e){return"string"==typeof e}function is_numeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function checkAll(e){var t=$(e).prop("checked");$(".check-all-spy").prop("checked",t)}function yandexMaps(e){var t={link:null,mapid:"map-conteiner-"+e,place:"krasnodar",type:"yandex#map",city:{krasnodar:[45.09471716593029,39.01589900000001],moscow:[55.76,37.64]},getBaloon:function(e){return new ymaps.Placemark(e,{},{draggable:!0})},draw:function(e){t.link=new e.Map(this.mapid,{center:t.city[this.place],zoom:12,type:t.type}),t.link.controls.add("smallZoomControl",{right:10,top:15}).add(new e.control.ScaleLine).add("searchControl",{left:20,top:20});var i=this.getBaloon(t.city[this.place]);t.link.events.add("click",function(e){t.link.geoObjects.remove(i),i=t.getBaloon(e.get("coordPosition")),t.link.geoObjects.add(i),t.setCoord(e.get("coordPosition"))}),t.link.geoObjects.add(i).events.add("dragend",function(e){var i=e.get("target"),o=i.geometry.getCoordinates();i.properties.set("balloonContent",o),t.setCoord(o)})},add:function(){if(1==arguments.length)t.link.geoObjects.add(new ymaps.GeoObject({geometry:{type:"Point",coordinates:arguments[0]}}));else{for(var e=new ymaps.GeoObjectCollection,i=0;i<arguments.length;i++)e.add(new ymaps.Placemark(arguments[i]));t.link.geoObjects.add(e)}}};ymaps.ready(function(){t.draw(ymaps)})}function googleMaps(e){new google.maps.Map(d.getElementById("map-conteiner-"+e),{zoom:14,zoomControl:!1,panControl:!1,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!0,disableDoubleClickZoom:!0,center:new google.maps.LatLng(45.053548,39.016056)})}function selectize(e){var t=null;is_string(e=e||"select")?t=$(e):is_object(e)&&(t=e);var i={width:"100%",allow_single_deselect:!0,no_results_text:"Не найдено!",disable_search_threshold:10};t.each(function(){var e=$(this),t=e.attr("placeholder");if(t){e.prop("multiple")?i.placeholder_text_multiple=t:i.placeholder_text_single=t}e.chosen(i)})}function changeRow(e){$(e).prop("checked")?$(e).closest("tr").find("td").addClass("ch"):$(e).closest("tr").find("td").removeClass("ch")}function toggle_small_photo(e){$("#"+e).toggle()}function removeSection(e,t,i,o){if(t.preventDefault(),confirm("Вы действительно хотите удалить?")){i=parseInt(i);var n,r=[],s=$(e).val().split(",");for(n in s)""!==s[n]&&parseInt(s[n])!==i&&r.push(parseInt(s[n]));$(o).remove(),$(e).val(r.length>1?r.join(","):r)}return!1}function slider(e,t,i,o,n,r){var s="#"+e,a=document.getElementById(e);r=r||"horizontal",o=o||0,n=n||100;var l=i,c="lower",d="tap-drag";"range"==t&&(d="tap-drag",c=!0,l=[i[0],i[1]]),noUiSlider.create(a,{step:1,animate:!1,orientation:r,start:l,connect:c,behaviour:d,range:{min:o,max:n},format:wNumb({decimals:0})});var u={range:{0:"min",1:"max"},slider:{0:"value"}};a.noUiSlider.on("update",function(e,i){$(s+"-"+u[t][i]).val(e[i])})}function metaCounter(){$(".count-number").on("keyup",function(){var e=$(this).closest(".count-number-block").find(".count-number-block-count"),t=parseInt(e.data("recomend"))||"";e.html($(this).val().length+(""!==t?"/"+t:"")),""!==t&&$(this).val().length>t?e.addClass("unlim"):e.hasClass("unlim")&&e.removeClass("unlim")})}function seoCrowl(){$("input[name='changefreq']").on("change",function(){"fixed"==$.trim($(this).val())?$("#changefreq_fixed").removeClass("hidden"):$("#changefreq_fixed").addClass("hidden")}),$("input[name='priority']").on("change",function(){"fixed"==$.trim($(this).val())?$("#priority_fixed").removeClass("hidden"):$("#priority_fixed").addClass("hidden")})}function toggle_item(e,t,i,o){e.preventDefault(),$("#"+i).toggle();var n=$(t).find(".zmdi");n.hasClass(o[0])?(n.removeClass(o[0]),n.addClass(o[1])):(n.removeClass(o[1]),n.addClass(o[0]))}function switch_type_fields(e){!0===e.checked?($("#case2").hide(),$("#case2 input").attr({disabled:!0}),$("#case1").show(),$("#case1 input").attr({disabled:!1})):($("#case1").hide(),$("#case1 input").attr({disabled:!0}),$("#case2").show(),$("#case2 input").attr({disabled:!1}))}function show_tr(e){var t=$(e).val();10==t||11==t||12==t?$("#to_list").show():$("#to_list").hide()}function translate_key(e){$(e).val(generatePassword(random(14,24),!1,/\w/))}function secret(e,t){$(e).val(generatePassword(12,!1))}function random(e,t){return e=e||0,t=t||100,Math.floor(Math.random()*(t-e+1))+e}function token(e){e=e||8;var t="",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(i=1;i<e;i++){var n=Math.floor(Math.random()*o.length+1);t+=o.charAt(n)}return t}function del_list_fields(e){return cp.dialog("Вы дейсвительно хотите удалить поле?")&&$("#tr"+e).remove(),!1}function add_list_fields(){field_counter++,str='<tr id="tr'+field_counter+'">',str+='<td><input type="hidden" name="field_id['+field_counter+']" value="0" />',str+='<input type="text" name="field_name['+field_counter+']" class="bord padd ness" /></td>',str+='<td><input type="text" name="field_sys_name['+field_counter+']" class="bord padd ness" /></td>',str+='<td><select name="field_type['+field_counter+']" class="field_type ness" id="'+field_counter+'" onchange="select_type(this);">',$.each(arr_field_type,function(e,t){1*e&&(str+='<option value="'+e+'">'+t+"</option>")}),str+="</select></td>",str+='<td class="addition"></td>',str+='<td><input type="text" name="f_ord['+field_counter+']" value="'+field_counter+'0" class="bord padd w60px r" /></td>',str+='<td style="text-align:center"><input type="checkbox" name="in_list['+field_counter+']" /></td>',str+='<td class="actions c"><a href="#" class="ctr_a ctr_del margin" title="Удалить" onclick="del_list_fields('+field_counter+');return false;"></a></td>',str+="</tr>",$("#add_btn").before(str)}function add_list_fields_list(){field_counter++;var e=['<tr id="tr'+field_counter+'">',"<td>",'<input type="hidden" name="field_id['+field_counter+']" value="0">','<input name="var['+field_counter+']" placeholder="Например: Краснодарский край">',"</td>",'<td><input name="value['+field_counter+']" placeholder="Например: 23"></td>','<td><label class="controll"><input type="checkbox" class="controll__input" value="'+field_counter+'" name="default['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td><input name="ord['+field_counter+']" value="'+field_counter+'0" class="ord integer reducing-trigger"></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_list_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("");$("#add_btn").before(e)}function del_fields(e){field_counter--,$("#tr"+e).remove()}function add_fields(){field_counter++;var e="",t="";for(t in arr_field_type)"string"==typeof arr_field_type[t]&&(e+='<option value="'+t+'">'+arr_field_type[t]+"</option>");var i=['<tr id="tr'+field_counter+'">','<td class="va_t"><input name="f_name['+field_counter+']" class="ness"></td>','<td class="va_t"><input name="f_sys_name['+field_counter+']" class="ness"></td>','<td class="va_t"><select name="f_type['+field_counter+']" class="f_type ness" data-placeholder="Тип поля" id="fieldtype_'+field_counter+'" onchange="select_type(this)">',e,"</select></td>",'<td class="addition va_t">'+get_addition("input",field_counter)+"</td>",'<td class="va_t"><input name="f_ord['+field_counter+']" value="'+field_counter+'0"></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_in_list['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_index['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_unique['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("");$("#add_btn").before(i),selectize("#fieldtype_"+field_counter)}function add_fields_list(){field_counter++,str=['<tr id="tr'+field_counter+'">','<td><input name="var['+field_counter+']"></td>','<td><input name="value['+field_counter+']"></td>','<td><input type="checkbox" name="default['+field_counter+']"></td>','<td><input name="ord['+field_counter+']" value="'+field_counter+'0"></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("\n"),$("#add_btn").before(str)}function select_type(e){var t=1*$(e).attr("id").split("_")[1],i=$("#tr"+t+" .addition"),o=get_addition(e.value.split(":")[0],t);$(i).empty().append(o||""),selectize()}function get_addition(e,t){var i=[],o=[];if(["input","cost","int","hidden","document","timestamp","email","list","autocomplete","select","treeselect","float","system","multiselect","datetime"].indexOf(e)>=0&&(o=['<div class="group">','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="25"><span class="group__item__style"></span><span class="group__item__text">25%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="50"><span class="group__item__style"></span><span class="group__item__text">50%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="75"><span class="group__item__style"></span><span class="group__item__text">75%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="100" checked><span class="group__item__style"></span><span class="group__item__text">100%</span></label>',"</div>"],["list","autocomplete","select","treeselect","radio","multiselect","checkbox","system"].indexOf(e)>=0&&o.push('<div class="cb mb10"></div>')),"hidden"==e&&o.push('<input value="" name="f_hidden_default['+t+']" placeholder="Значение по умолчанию">'),"system"==e&&o.push('<input value="" name="f_binding['+t+']" placeholder="Например поле (title)">'),"date"==e&&(i=['<div class="help-cover">','<input name="f_date_format['+t+']" value="DD.MM.YYYY" placeholder="Формат даты">','<div class="tooltip tooltip-down">',"D — день,<br>","M — месяц (без нуля впереди)<br>","DD, MM — день и месяц с нулём впереди для значений от 1 до 9<br>","YY — 2-символьное обозначение года<br>","YYYY — 4-символьное обозначение года (год пишется полностью)","</div>","</div>"],o.push(i.join("\n"))),["file","image"].indexOf(e)>=0&&(i=['<div class="option-group option-combo">','<label><input type="radio" name="f_file_count['+t+']" value="0"><span class="option">Один файл</span></label>','<label><input type="radio" name="f_file_count['+t+']" value="1" checked><span class="option">Много файлов</span></label>',"</div>"],"image"==e&&i.push('<div class="cb mb10"></div>'),o.push(i.join("\n"))),["gallery","image"].indexOf(e)>=0&&"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.image){var n=[],r=[],s=[],a="";n=['<div class="js-size-list">','<table class="table-simple">','<col><col><col><col width="57"><col width="20">',"<thead>","<tr>",'<td class="h">Префикс</td>','<td class="h">Ширина</td>','<td class="h">Высота</td>','<td class="h">Метод</td>','<td class="h"></td>',"</tr>","</thead>","<tbody>"],r=template("tpl_image_row",{index:0,button:!0,iteration:t}),s=["</tbody>","</table>",'<a href="#" class="add-size js-add-size" data-iteration="{$smarty.foreach.i.iteration}"><i class="icon icon-plus-square"></i> Добавить размер</a>',"</div>"],o.push(n.join("\n")),o.push(r),o.push(s.join("\n"))}if(["embedded"].indexOf(e)>=0){if(!is_undefined(MODULE_LIST)){var l,c="";for(l in MODULE_LIST)c+='<option value="'+l+'">'+MODULE_LIST[l].name+"</option>"}i=['<div class="j-select-wrapper">','<div class="mb5">','<select name="f_module['+t+']" data-placeholder="Выбрать модуль" class="j-select-choosen">','<option value="0">---</option>',c,"</select>","</div>",'<div class="clearfix j-select-container">','<select name="f_fields['+t+'][]" multiple data-placeholder="Выбрать" disabled></select>',"</div>","</div>"],o.push(i.join("\n"))}if(["list","section","autocomplete","select","treeselect","radio","checkbox","multiselect"].indexOf(e)>=0&&(i=['<div class="cb clearfix">','<label class="controll"><input type="checkbox" class="controll__input" value="1" onchange="switch_types(this)" name="f_use_table_list['+t+']"><span class="controll__visible controll__visible_checkbox"></span><span class="controll__text">привязать к `#__mdd_lists`</span></label>','<div class="case case0">','<input name="f_table_name['+t+']" value="" class="mb5" placeholder="Название таблицы (#_news)">','<input name="f_table_field['+t+']" value="" placeholder="Поле (title)">',"</div>",'<div class="case case1 hidden">','<input name="f_table_list['+t+']" disabled placeholder="BIND списка" value="">',"</div>","</div>"],o.push(i.join("\n"))),["range","slider"].indexOf(e)>=0&&(i=['<div class="-col">','<div class="-left">','<input name="f_range['+t+'][min]" value="" placeholder="Min" class="integer">',"</div>",'<div class="-right">','<input name="f_range['+t+'][max]" value="" placeholder="Max" class="integer">',"</div>","</div>"],o.push(i.join("\n"))),"editor"==e&&"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.editor){(i=[]).push('<div class="option-group option-combo">');a="";for(d in CONFIGURE.editor)a="",void 0!==CONFIGURE.editor[d].default&&1==CONFIGURE.editor[d].default&&(a=" checked"),i.push('<label><input type="radio" name="f_editor['+t+']" value="'+CONFIGURE.editor[d].system+'" '+a+'><span class="option">'+CONFIGURE.editor[d].name+"</span></label>");if(i.push("</div>"),"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.editor_mode){i.push('<div class="cb mb10"></div>'),i.push('<div class="option-group">');for(d in CONFIGURE.editor_mode)i.push('<label><input type="radio" name="f_editor_mode['+t+']" value="'+CONFIGURE.editor_mode[d]+'"><span class="option">'+CONFIGURE.editor_mode[d]+"</span></label>");i.push("</div>")}o.push(i.join("\n"))}if("redactor"==e&&"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.redactor){(i=[]).push('<div class="group">');var d,a="";for(d in CONFIGURE.redactor)void 0!==CONFIGURE.redactor[d].name&&void 0!==CONFIGURE.redactor[d].system&&(a="",void 0!==CONFIGURE.redactor[d].default&&1==CONFIGURE.redactor[d].default&&(a=" checked"),i.push('<label class="group__item"><input type="radio" class="group__item__rb" name="f_redactor['+t+']" value="'+CONFIGURE.redactor[d].system+'"'+a+'><span class="group__item__style"></span><span class="group__item__text">'+CONFIGURE.redactor[d].name+"</span></label>"));i.push("</div>"),o.push(i.join("\n"))}return o.join("\n")}function switch_types(e){p_obj=$(e).closest("td"),e.checked?($(".case1",p_obj).show(),$(".case1 input",p_obj).attr({disabled:!1}),$(".case0",p_obj).hide(),$(".case0 input",p_obj).attr({disabled:!0})):($(".case0",p_obj).show(),$(".case0 input",p_obj).attr({disabled:!1}),$(".case1",p_obj).hide(),$(".case1 input",p_obj).attr({disabled:!0}))}function humanSize(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Гб":e>=1e6?(e/1e6).toFixed(2)+" Мб":e>=1024?(e/1e3).toFixed(2)+" Кб":e+" б"}function addExtendet(){$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:$("#action").attr("value"),id:$("#id").attr("value"),title:$("#title").attr("value"),ord:$("#ord").attr("value"),visible:$("#VoteAddQuestions input:radio[name=visible]:checked").val()},function(e){var t;t=1==$("#VoteAddQuestions input:radio[name=visible]:checked").val()?"Да":"Нет";var i='<tr id="tr_'+e+'">';i+="<td>",i+='<input name="parent_id_'+e+'" id="parent_id_'+e+'" value="2" type="hidden">',i+='<input name="id_'+e+'" id="id_'+e+'" value="'+e+'" type="hidden">',i+='<div id="title_'+e+'"><b>'+$("#title").attr("value")+"</b></div>",i+='<div id="title_i_'+e+'" style="display: none;">',i+='<input name="title_'+e+'" value="'+$("#title").attr("value")+'" class="bord padd w100" id="title_input_'+e+'" type="text">',i+='<p align="right">',i+='<a href="javascript:;" onclick="saveExtendet(\''+e+"');\">Сохранить</a> | ",i+='<a href="javascript:;" onclick="cancelExtendet(\''+e+"');\">Отмена</a> ",i+="</p>",i+="</div>",i+="</td>",i+="<td>",i+='<div id="ord_'+e+'"><b>'+$("#ord").attr("value")+"</b></div>",i+='<div id="ord_i_'+e+'" style="display: none;">',i+='<input name="ord_'+e+'" value="'+$("#ord").attr("value")+'" style="width: 100%;" class="bord padd w100" id="ord_input_'+e+'" type="text">',i+="</div>",i+="</td>",i+='<td align="center">',i+='<div id="visible_'+e+'"><b>'+t+"</b></div>",i+='<div id="visible_i_'+e+'" style="display: none;">',i+='<input name="visible_'+e+'" value="1" checked="checked" onclick="$(\'#vis_'+e+"').val('1');\" id=\"visible_input_"+e+'_1" type="radio">Да &nbsp;&nbsp;',i+='<input name="visible_'+e+'" value="0" onclick="$(\'#vis_'+e+"').val('0');\" id=\"visible_input_"+e+'_0" type="radio">Нет',i+='<input name="vis_'+e+'" id="vis_'+e+'" value="" type="hidden">',i+="</div>",i+="</td>",i+="<td>",i+='<a href="#" class="icon icon-edit" onclick="editExtendet(\''+e+"')\"></a>",i+='<a href="#" class="icon icon-delete remove-trigger" onClick="delExtendet(\''+e+"')\"></a>",i+="</td>",i+="</tr>",$(i).insertBefore("#ajax_add_form"),$("#title").attr({value:""}),$("#ord").attr({value:""}),$("#ajax_add_form").hide()})}function saveExtendet(e){$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:"update",id:$("#id_"+e).attr("value"),parent_id:$("#parent_id_"+e).attr("value"),title:$("#title_input_"+e).attr("value"),ord:$("#ord_input_"+e).attr("value"),visible:$("#VoteAddQuestions input:radio[name=visible_"+e+"]:checked").val()},function(t){var i;i=1==$("#vis_"+e).val()?"Да":"Нет",$("#title_"+e).html("<b>"+$("#title_input_"+e).attr("value")+"</b>"),$("#ord_"+e).html($("#ord_input_"+e).attr("value")),$("#visible_"+e).html(i),$("#title_"+e).show(),$("#ord_"+e).show(),$("#visible_"+e).show(),$("#title_i_"+e).hide(),$("#ord_i_"+e).hide(),$("#visible_i_"+e).hide()})}function editExtendet(e){$("#title_"+e).hide(),$("#ord_"+e).hide(),$("#visible_"+e).hide(),$("#title_i_"+e).show(),$("#ord_i_"+e).show(),$("#visible_i_"+e).show()}function delExtendet(e){cp.dialog("Вы действительно хотите удалить запись?")&&$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:"del",id:$("#id_"+e).val()},onAjaxSuccessDel)}function onAjaxSuccessDel(e){$("#tr_"+e).remove()}function cancelExtendet(e){$("#title_"+e).show(),$("#ord_"+e).show(),$("#visible_"+e).show(),$("#title_i_"+e).hide(),$("#ord_i_"+e).hide(),$("#visible_i_"+e).hide()}function onAjaxSuccess(e){alert(e)}function editTitle(e,t){if(void 0===t)t=$("#ftitle_"+e).text();var i=prompt("Введите новое имя",t);return""!=i&&i!=t&&null!==i&&$.ajax({url:"/"+ADMIN_DIR+"/meta/filename",type:"post",data:{id:e,name:i},dataType:"JSON",success:function(t){!0===t.status&&$("#ftitle_"+e).html(i)}}),!1}function editVisible(e,t){return t=1==t?0:1,$.ajax({url:"/"+ADMIN_DIR+"/meta/filevisible",type:"post",data:{id:e,visible:t},dataType:"JSON",success:function(i){!0===i.status&&($("#fvisible_"+e).removeClass("icon-eye icon-eye-off"),1==t?$("#fvisible_"+e).addClass("icon-eye"):$("#fvisible_"+e).addClass("icon-eye-off"))}}),!1}function editOrd(e,t){var i=prompt("Порядок",t);return!!i&&(""!=i&&i!=t&&$.post("/"+ADMIN_DIR+"/ajax/meta/",{action:"newfileord",neword:i,id:e},function(t){1==t&&$("#ordfile_"+e).html(i)}),!1)}function ajax_vis_toggle(e,t,i){return $(e).append('<i class="loading"></i>'),$.post("/"+ADMIN_DIR+"/ajax/structure/",{act:"toggle_visible",mod_id:i,id:t},function(t){1==t&&$(e).toggleClass("icon-eye").toggleClass("icon-eye-off").html("")}),!1}function show_tooltips(e){$("#"+e).toggle()}function my_uncheck(){$(".access").each(function(){$(this).attr({checked:""})})}function CheckAndSubmit(e){var t=!0;if($("#"+e+" .ness").each(function(){if(""==$(this).val())return $(this).focus().addClass("error"),t=!1,!1;$(this).removeClass("error")}),!t)return!1;$("#"+e).submit()}function setSort(e,t){value=$(e).val(),setCookie(t,value),location.href=location.href}function form_submit(e,t){"save"==t&&$("#"+e).submit(),$("#"+e).submit()}function openwin(e,t,i,o){null!=hwnd&&hwnd.close(),hwnd=window.open(e,"","toolbar=no , location=no , directories=no , resizable=no , width="+t+" , height="+i),hwnd.document.open(),hwnd.document.write("<html>"),hwnd.document.write("<head>"),hwnd.document.write("<title>"+o+"</title>"),hwnd.document.write("</head>"),hwnd.document.write("<body bgcolor=#ffffff bottommargin=0 leftmargin=0 marginheight=0 marginwidth=0 rightmargin=0 topmargin=0 style='border:0px;'>"),hwnd.document.write("<table align=center width=100% height=100% cellspacing=0 cellpadding=0 border=0>"),hwnd.document.write("<tr><td><img src='"+e+"' border=0></td></tr>"),hwnd.document.write("</table></body></html>"),hwnd.document.close()}function openwin_text(e,t,i){window.open(e,"","toolbar=no , location=no , directories=no , resizable=no , scrollbars=no , width="+t+" , height="+i)}function ltrim(e){for(var t=0;t<e.length&&isWhitespace(e.charAt(t));t++);return e.substring(t,e.length)}function rtrim(e){for(var t=e.length-1;t>=0&&isWhitespace(e.charAt(t));t--);return e.substring(0,t+1)}function trim(e){return e=e.replace(/\s{2,}/g," "),ltrim(rtrim(e))}function isWhitespace(e){return-1!=" \t\n\r\f".indexOf(e)}function transliterate(e,t){if(""!=(e=trim(e.toLowerCase()))){var i,o,n={},r=[],s="";if(i={"à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","ş":"s","ı":"i"},_defineProperty(i,"ç","c"),_defineProperty(i,"ü","u"),_defineProperty(i,"ö","o"),_defineProperty(i,"ğ","g"),_defineProperty(i,"а","a"),_defineProperty(i,"б","b"),_defineProperty(i,"в","v"),_defineProperty(i,"г","g"),_defineProperty(i,"д","d"),_defineProperty(i,"е","e"),_defineProperty(i,"ё","yo"),_defineProperty(i,"ж","zh"),_defineProperty(i,"з","z"),_defineProperty(i,"и","i"),_defineProperty(i,"й","j"),_defineProperty(i,"к","k"),_defineProperty(i,"л","l"),_defineProperty(i,"м","m"),_defineProperty(i,"н","n"),_defineProperty(i,"о","o"),_defineProperty(i,"п","p"),_defineProperty(i,"р","r"),_defineProperty(i,"с","s"),_defineProperty(i,"т","t"),_defineProperty(i,"у","u"),_defineProperty(i,"ф","f"),_defineProperty(i,"х","h"),_defineProperty(i,"ц","c"),_defineProperty(i,"ч","ch"),_defineProperty(i,"ш","sh"),_defineProperty(i,"щ","sch"),_defineProperty(i,"ъ",""),_defineProperty(i,"ы","y"),_defineProperty(i,"ь",""),_defineProperty(i,"э","e"),_defineProperty(i,"ю","yu"),_defineProperty(i,"я","ya"),_defineProperty(i,"є","ye"),_defineProperty(i,"і","i"),_defineProperty(i,"ї","yi"),_defineProperty(i,"ґ","g"),_defineProperty(i,"č","c"),_defineProperty(i,"ď","d"),_defineProperty(i,"ě","e"),_defineProperty(i,"ň","n"),_defineProperty(i,"ř","r"),_defineProperty(i,"š","s"),_defineProperty(i,"ť","t"),_defineProperty(i,"ů","u"),_defineProperty(i,"ž","z"),_defineProperty(i,"ą","a"),_defineProperty(i,"ć","c"),_defineProperty(i,"ę","e"),_defineProperty(i,"ł","l"),_defineProperty(i,"ń","n"),_defineProperty(i,"ó","o"),_defineProperty(i,"ś","s"),_defineProperty(i,"ź","z"),_defineProperty(i,"ż","z"),_defineProperty(i,"ā","a"),_defineProperty(i,"č","c"),_defineProperty(i,"ē","e"),_defineProperty(i,"ģ","g"),_defineProperty(i,"ī","i"),_defineProperty(i,"ķ","k"),_defineProperty(i,"ļ","l"),_defineProperty(i,"ņ","n"),_defineProperty(i,"š","s"),_defineProperty(i,"ū","u"),_defineProperty(i,"ž","z"),n=i,s=e.replace(/[^a-zа-я0-9]/gi,"-"),"cyrillic"==t)s=encodeURI(unescape(unescape(s)));else if("translate"==t)for(o in n)s=s.replace(RegExp(o,"g"),n[o]);else for(o in n)s=s.replace(RegExp(o,"g"),n[o]);"-"==(r=s.split(""))[0]&&(s=s.slice(1)),"-"==r[r.length-1]&&(s=s.slice(0,-1)),e=s}return redouble(e)}function binding(e,t){$("body").on("keyup blur keypress",'input[name="'+e+'"]',function(){if(""!==this.value){var e=$('input[name="'+t+'"]');e.prop("readonly")||e.val(transliterate(this.value,URL_TRANSLATE))}})}function redouble(e){return e=e.replace("__","_"),e=e.replace("_-_","_"),(e=e.replace("--","-")).indexOf("__")>-1?redouble(e):("_"==e.substr(0,1)&&e.length>1&&(e=e.substr(1,e.length)),e)}function ajax_toggle_group(e,t){var i=0;return i=$(e).hasClass("icon-eye-off")?1:0,$(e).append('<i class="loading"></i>'),$.post("/"+ADMIN_DIR+"/ajax/modules/",{action:"devisible",id:t,visible:i},function(t){1==t&&($(e).hasClass("icon-eye-off")?$(e).removeClass("icon-eye-off").addClass("icon-eye").html(""):$(e).removeClass("icon-eye").addClass("icon-eye-off").html(""))}),!1}function toggle_menu(e,t){$(e).toggleClass("minus").toggleClass("plus").parent(),$("#item"+t).toggle()}function toggle_small_photo(e){$("#"+e).toggle()}function hideField(e){title=$("#docs_"+e+" .title_in").val(),ord=$("#docs_"+e+" .ord_in").val(),$("#docs_"+e+" .title_f").empty().append(title),$("#docs_"+e+" .ord_f").empty().append(ord),$("#docs_"+e+" .but_save").hide(),$("#docs_"+e+" .ctr_edit").show()}function EditDocs(e){return $("#docs_"+e+" .but_save").show(),$("#docs_"+e+" .ctr_edit").hide(),curr_value=$("#docs_"+e+" .title_f").text(),$("#docs_"+e+" .title_f").empty().append("<input type='text' value='"+curr_value+"' name='title' class='bord padd w100 title_in' />"),curr_value=$("#docs_"+e+" .ord_f").text(),$("#docs_"+e+" .ord_f").empty().append("<input type='text' value='"+curr_value+"' name='ord' class='bord padd w20 ord_in' />"),$("#docs_"+e+" .title_in").focus(),!1}function SaveDocs(e){return title=$("#docs_"+e+" .title_in").val(),ord=$("#docs_"+e+" .ord_in").val(),title||(alert("Пустое имя документа"),hideField(e)),$.post("/"+ADMIN_DIR+"/ajax/document/",{id:"document_edit",docsid:e,title:title,ord:ord},function(t){alert("Данные обновлены"),hideField(e)}),!1}function DelDocs(e){return cp.dialog("Вы действительно хотите удалить?")&&$.post("/"+ADMIN_DIR+"/ajax/document/",{id:"document_del",docsid:e},function(t){t>0?$("#docs_"+e).hide():alert("ошибка обновления")}),!1}function page_update(item_id){return $.post("/"+ADMIN_DIR+"/ajax/document/",{id:"update",post_id:item_id},function(data){var json=eval("("+data+")");parseMsg(json,"file_docs")}),!1}function parseMsg(e,t){$("#"+t+" .uploadfiles").empty(),$("#"+t+" input:file").attr({value:""}),str='<table style="margin-bottom:10px;width:80%"><tr>\n<td class="h w100">Документ</td>\n<td class="h">Размер</td>\n<td class="h">Удалить</td></tr>\n';var i=0;$.each(e,function(e,o){odd=i%2!=0?"odd ":"",str+='<tr>\n<td class="'+odd+'"><a href="'+o.sys_name+'" title="" target="_blank">'+o.title+"</a></td>\n",str+='<td class="'+odd+'r"> '+o.size+"</td>\n",str+='<td class="actions"><a href="#" onclick="return Module.ajaxFileDelete('+o.id+",'"+t+'\');" class="ctr_a ctr_del margin" title="Удалить" onclick="return confirm(\'Вы действительно хотите удалить?\')"></a></td>\n</tr>\n',i++}),str+="</table>",$("#"+t+" .uploadfiles").append(str)}function ajaxFileDocsUpload(e){}function screening(e){return e.replace(/"/g,"&quot;")}function _addslashes(e){return e.replace("/([\"'])/g","\\$1").replace("/\0/g","\\0")}function _stripslashes(e){return e.replace("/\0/g","0").replace("/(.)/g","$1")}function clearCookie(){var e=new Date,t=new Date(e.getTime()-864e5);this.setCookie("co"+this.obj,"cookieValue",t),this.setCookie("cs"+this.obj,"cookieValue",t)}function setCookie(e,t,i,o,n,r){document.cookie=escape(e)+"="+escape(t)+(i?"; expires="+i.toGMTString():"")+(o?"; path="+o:"")+(n?"; domain="+n:"")+(r?"; secure":"")}function getCookie(e){var t="",i=document.cookie.indexOf(escape(e)+"=");if(-1!=i){var o=i+(escape(e)+"=").length,n=document.cookie.indexOf(";",o);t=-1!=n?unescape(document.cookie.substring(o,n)):unescape(document.cookie.substring(o))}return t}function __debug(e,t){var i="";t||(t=0);for(var o="",n=0;n<t+1;n++)o+="    ";if("object"==(void 0===e?"undefined":_typeof(e)))for(var r in e){var s=e[r];"object"==(void 0===s?"undefined":_typeof(s))?(i+=o+"'"+r+"' ...\n",i+=dump(s,t+1)):i+=o+"'"+r+"' => \""+s+'"\n'}else i="===>"+e+"<===("+(void 0===e?"undefined":_typeof(e))+")";return i}function serialize(e){var t,i,o="",n=0,r=function(e){var t,i,o,n,r=void 0===e?"undefined":_typeof(e);if("object"===r&&!e)return"null";if("object"===r){if(!e.constructor)return"object";(t=(o=e.constructor.toString()).match(/(\w+)\(/))&&(o=t[1].toLowerCase()),n=["boolean","number","string","array"];for(i in n)if(o===n[i]){r=n[i];break}}return r},s=r(e);switch(s){case"function":t="";break;case"boolean":t="b:"+(e?"1":"0");break;case"number":t=(Math.round(e)===e?"i":"d")+":"+e;break;case"string":t="s:"+function(e){var t=0,i=0,o=e.length,n="";for(i=0;i<o;i++)t+=(n=e.charCodeAt(i))<128?1:n<2048?2:3;return t}(e)+':"'+e+'"';break;case"array":case"object":t="a";for(i in e)if(e.hasOwnProperty(i)){if("function"===r(e[i]))continue;o+=serialize(i.match(/^[0-9]+$/)?parseInt(i,10):i)+serialize(e[i]),n++}t+=":"+n+":{"+o+"}";break;case"undefined":default:t="N"}return"object"!==s&&"array"!==s&&(t+=";"),t}function unserialize(e){function t(e,i){var o,a,l,c,d,u,p,h,f,m,g,_,v,b,y,k,w,x,C=0,j=function(e){return e};switch(i||(i=0),o=e.slice(i,i+1).toLowerCase(),a=i+2,o){case"i":j=function(e){return parseInt(e,10)},C=(f=r(e,a,";"))[0],h=f[1],a+=C+1;break;case"b":j=function(e){return 0!==parseInt(e,10)},C=(f=r(e,a,";"))[0],h=f[1],a+=C+1;break;case"d":j=function(e){return parseFloat(e)},C=(f=r(e,a,";"))[0],h=f[1],a+=C+1;break;case"n":h=null;break;case"s":C=(m=r(e,a,":"))[0],g=m[1],C=(f=s(e,(a+=C+2)+1,parseInt(g,10)))[0],h=f[1],a+=C+2,C!==parseInt(g,10)&&C!==h.length&&n("SyntaxError","String length mismatch");break;case"a":for(h={},C=(l=r(e,a,":"))[0],c=l[1],a+=C+2,u=parseInt(c,10),d=!0,_=0;_<u;_++)y=(b=t(e,a))[1],v=b[2],w=(k=t(e,a+=y))[1],x=k[2],a+=w,v!==_&&(d=!1),h[v]=x;if(d){for(p=new Array(u),_=0;_<u;_++)p[_]=h[_];h=p}a+=1;break;default:n("SyntaxError","Unknown / Unhandled data type(s): "+o)}return[o,a-i,j(h)]}var i="undefined"!=typeof window?window:global,o=function(e){for(var t=e.length,i=e.length-1;i>=0;i--){var o=e.charCodeAt(i);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&i--}return t-1},n=function(e,t,o,n){throw new i[e](t,o,n)},r=function(e,t,i){for(var o=2,r=[],s=e.slice(t,t+1);s!==i;)o+t>e.length&&n("Error","Invalid"),r.push(s),s=e.slice(t+(o-1),t+o),o+=1;return[r.length,r.join("")]},s=function(e,t,i){var n,r,s;for(s=[],n=0;n<i;n++)r=e.slice(t+(n-1),t+n),s.push(r),i-=o(r);return[s.length,s.join("")]};return t(e+"",0)[2]}var jscolor={dir:"/"+ADMIN_DIR+"/images/jscolor/",bindClass:"jscolor",binding:!0,preloading:!0,install:function(){this.init()},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var e=jscolor.detectDir();jscolor.dir=!1!==e?e:"jscolor/"}return jscolor.dir},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),i=0;i<t.length;i+=1)t[i].href&&(e=t[i].href);for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i+=1)if(t[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[i].src)){var o=new jscolor.URI(t[i].src).toAbsolute(e);return o.path=o.path.replace(/[^\/]+$/,""),o.query=null,o.fragment=null,o.toString()}return!1},bind:function(){for(var e=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),t=document.getElementsByTagName("input"),i=0;i<t.length;i+=1){var o;if(!t[i].color&&t[i].className&&(o=t[i].className.match(e))){var n={};if(o[3])try{n=new Function("return ("+o[3]+")")()}catch(e){}t[i].color=new jscolor.color(t[i],n)}}},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},fireEvent:function(e,t){if(e)if(document.createEvent){(i=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(i)}else if(document.createEventObject){var i=document.createEventObject();e.fireEvent("on"+t,i)}else e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,i=e,o=0,n=0;if(t.offsetParent)do{o+=t.offsetLeft,n+=t.offsetTop}while(t=t.offsetParent);for(;(i=i.parentNode)&&"BODY"!==i.nodeName.toUpperCase();)o-=i.scrollLeft,n-=i.scrollTop;return[o,n]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,i=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,i=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,i=e.layerY),{x:t,y:i}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if("."===e||".."===e)e="";else{var i=e.match(/^\/?[^\/]*/)[0];e=e.substr(i.length),t+=i}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){var e=new jscolor.URI(e),i=new jscolor.URI;return null!==e.scheme&&(null!==this.scheme&&this.scheme.toLowerCase()===e.scheme.toLowerCase()&&(this.scheme=null),null!==this.scheme?(i.scheme=this.scheme,i.authority=this.authority,i.path=t(this.path),i.query=this.query):(null!==this.authority?(i.authority=this.authority,i.path=t(this.path),i.query=this.query):(""===this.path?(i.path=e.path,null!==this.query?i.query=this.query:i.query=e.query):("/"===this.path.substr(0,1)?i.path=t(this.path):(null!==e.authority&&""===e.path?i.path="/"+this.path:i.path=e.path.replace(/[^\/]+$/,"")+this.path,i.path=t(i.path)),i.query=this.query),i.authority=e.authority),i.scheme=e.scheme),i.fragment=this.fragment,i)},e&&this.parse(e)},color:function(e,t){function i(e,t,i){if(null===e)return[i,i,i];var o=Math.floor(e),n=i*(1-t),r=i*(1-t*(o%2?e-o:1-(e-o)));switch(o){case 6:case 0:return[i,r,n];case 1:return[r,i,n];case 2:return[n,i,r];case 3:return[n,r,i];case 4:return[r,n,i];case 5:return[i,n,r]}}function o(e){return[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]]}function n(){switch(p){case 0:e=1;break;case 1:var e=2}var t=Math.round(u.hsv[0]/6*(jscolor.images.pad[0]-1)),o=Math.round((1-u.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=u.pickerFace+u.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(u.pickerFace+u.pickerInset+o-Math.floor(jscolor.images.cross[1]/2))+"px";var n=jscolor.picker.sld.childNodes;switch(p){case 0:for(var r=i(u.hsv[0],u.hsv[1],1),s=0;s<n.length;s+=1)n[s].style.backgroundColor="rgb("+r[0]*(1-s/n.length)*100+"%,"+r[1]*(1-s/n.length)*100+"%,"+r[2]*(1-s/n.length)*100+"%)";break;case 1:var a,l=[u.hsv[2],0,0],c=(s=Math.floor(u.hsv[0]))%2?u.hsv[0]-s:1-(u.hsv[0]-s);switch(s){case 6:case 0:r=[0,1,2];break;case 1:r=[1,0,2];break;case 2:r=[2,0,1];break;case 3:r=[2,1,0];break;case 4:r=[1,2,0];break;case 5:r=[0,2,1]}for(s=0;s<n.length;s+=1)a=1-1/(n.length-1)*s,l[1]=l[0]*(1-a*c),l[2]=l[0]*(1-a),n[s].style.backgroundColor="rgb("+100*l[r[0]]+"%,"+100*l[r[1]]+"%,"+100*l[r[2]]+"%)"}}function r(){switch(p){case 0:e=2;break;case 1:var e=1}var t=Math.round((1-u.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(u.pickerFace+u.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function s(){return jscolor.picker&&jscolor.picker.owner===u}function a(e){var t=jscolor.getRelMousePos(e),i=t.x-u.pickerFace-u.pickerInset,o=t.y-u.pickerFace-u.pickerInset;switch(p){case 0:u.fromHSV(i*(6/(jscolor.images.pad[0]-1)),1-o/(jscolor.images.pad[1]-1),null,w);break;case 1:u.fromHSV(i*(6/(jscolor.images.pad[0]-1)),null,1-o/(jscolor.images.pad[1]-1),w)}}function l(e){var t=jscolor.getRelMousePos(e).y-u.pickerFace-u.pickerInset;switch(p){case 0:u.fromHSV(null,null,1-t/(jscolor.images.sld[1]-1),k);break;case 1:u.fromHSV(null,1-t/(jscolor.images.sld[1]-1),null,k)}}function c(){if(u.onImmediateChange){("string"==typeof u.onImmediateChange?new Function(u.onImmediateChange):u.onImmediateChange).call(u)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=e,this.styleElement=e,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var d in t)t.hasOwnProperty(d)&&(this[d]=t[d]);this.hidePicker=function(){s()&&(jscolor.picker.owner.styleElement.parentNode.removeChild(jscolor.picker.boxB),delete jscolor.picker.owner)},this.showPicker=function(){if(!s()){var t,i,d,m=jscolor.getElementPos(e),b=jscolor.getElementSize(e),y=jscolor.getViewPos(),k=jscolor.getViewSize(),w=o(this);switch(this.pickerPosition.toLowerCase()){case"left":t=1,i=0,d=-1;break;case"right":t=1,i=0,d=1;break;case"top":t=0,i=1,d=-1;break;default:t=0,i=1,d=1}var x=(b[i]+w[i])/2;if(this.pickerSmartPosition)C=[-y[t]+m[t]+w[t]>k[t]&&-y[t]+m[t]+b[t]/2>k[t]/2&&m[t]+b[t]-w[t]>=0?m[t]+b[t]-w[t]:m[t],-y[i]+m[i]+b[i]+w[i]-x+x*d>k[i]?-y[i]+m[i]+b[i]/2>k[i]/2&&m[i]+b[i]-x-x*d>=0?m[i]+b[i]-x-x*d:m[i]+b[i]-x+x*d:m[i]+b[i]-x+x*d>=0?m[i]+b[i]-x+x*d:m[i]+b[i]-x-x*d];else var C=[m[t],m[i]+b[i]-x+x*d];!function(t,i){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(u.pickerCloseText)};for(var s=0;s<jscolor.images.sld[1];s+=4){var d=document.createElement("div");d.style.height="4px",d.style.fontSize="1px",d.style.lineHeight="0",jscolor.picker.sld.appendChild(d)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var m=jscolor.picker;if(m.box.onmouseup=m.box.onmouseout=function(){e.focus()},m.box.onmousedown=function(){h=!0},m.box.onmousemove=function(e){(g||_)&&(g&&a(e),_&&l(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),c())},"ontouchstart"in window){var b=function(e){var t={offsetX:e.touches[0].pageX-v.X,offsetY:e.touches[0].pageY-v.Y};(g||_)&&(g&&a(t),_&&l(t),c()),e.stopPropagation(),e.preventDefault()};m.box.removeEventListener("touchmove",b,!1),m.box.addEventListener("touchmove",b,!1)}m.padM.onmouseup=m.padM.onmouseout=function(){g&&(g=!1,jscolor.fireEvent(f,"change"))},m.padM.onmousedown=function(e){switch(p){case 0:0===u.hsv[2]&&u.fromHSV(null,null,1);break;case 1:0===u.hsv[1]&&u.fromHSV(null,1,null)}_=!1,g=!0,a(e),c()},"ontouchstart"in window&&m.padM.addEventListener("touchstart",function(e){v={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-v.X,offsetY:e.touches[0].pageY-v.Y})}),m.sldM.onmouseup=m.sldM.onmouseout=function(){_&&(_=!1,jscolor.fireEvent(f,"change"))},m.sldM.onmousedown=function(e){g=!1,_=!0,l(e),c()},"ontouchstart"in window&&m.sldM.addEventListener("touchstart",function(e){v={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-v.X,offsetY:e.touches[0].pageY-v.Y})});var y=o(u);m.box.style.width=y[0]+"px",m.box.style.height=y[1]+"px",m.boxB.style.position="absolute",m.boxB.style.clear="both",m.boxB.style.left="0px",m.boxB.style.top="100%",m.boxB.style.marginTop="2px",m.boxB.style.zIndex=u.pickerZIndex,m.boxB.style.border=u.pickerBorder+"px solid",m.boxB.style.borderColor=u.pickerBorderColor,m.boxB.style.background=u.pickerFaceColor,m.pad.style.width=jscolor.images.pad[0]+"px",m.pad.style.height=jscolor.images.pad[1]+"px",m.padB.style.position="absolute",m.padB.style.left=u.pickerFace+"px",m.padB.style.top="10px",m.padB.style.border=u.pickerInset+"px solid",m.padB.style.borderColor=u.pickerInsetColor,m.padM.style.position="absolute",m.padM.style.left="0",m.padM.style.top="0",m.padM.style.width=u.pickerFace+2*u.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",m.padM.style.height=m.box.style.height,m.padM.style.cursor="crosshair",m.sld.style.overflow="hidden",m.sld.style.width=jscolor.images.sld[0]+"px",m.sld.style.height=jscolor.images.sld[1]+"px",m.sldB.style.display=u.slider?"block":"none",m.sldB.style.position="absolute",m.sldB.style.right=u.pickerFace+"px",m.sldB.style.top=u.pickerFace+"px",m.sldB.style.border=u.pickerInset+"px solid",m.sldB.style.borderColor=u.pickerInsetColor,m.sldM.style.display=u.slider?"block":"none",m.sldM.style.position="absolute",m.sldM.style.right="0",m.sldM.style.top="0",m.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+u.pickerFace+2*u.pickerInset+"px",m.sldM.style.height=m.box.style.height;try{m.sldM.style.cursor="pointer"}catch(e){m.sldM.style.cursor="hand"}m.btn.style.display=u.pickerClosable?"block":"none",m.btn.style.position="absolute",m.btn.style.left=u.pickerFace+"px",m.btn.style.bottom=u.pickerFace+"px",m.btn.style.padding="0 15px",m.btn.style.height="18px",m.btn.style.border=u.pickerInset+"px solid",function(){var e=u.pickerInsetColor.split(/\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];m.btn.style.borderColor=t}(),m.btn.style.color=u.pickerButtonColor,m.btn.style.font="12px sans-serif",m.btn.style.textAlign="center";try{m.btn.style.cursor="pointer"}catch(e){m.btn.style.cursor="hand"}switch(m.btn.onmousedown=function(){u.hidePicker()},m.btnS.style.lineHeight=m.btn.style.height,p){case 0:k="hs.png";break;case 1:var k="hv.png"}m.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",m.padM.style.backgroundRepeat="no-repeat",m.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",m.sldM.style.backgroundRepeat="no-repeat",m.pad.style.backgroundImage="url('"+jscolor.getDir()+k+"')",m.pad.style.backgroundRepeat="no-repeat",m.pad.style.backgroundPosition="0 0",n(),r(),jscolor.picker.owner=u,jscolor.picker.owner.styleElement.parentNode.appendChild(m.boxB)}(C[t],C[i])}},this.importColor=function(){f?this.adjust?!this.required&&/^\s*$/.test(f.value)?(f.value="",m.style.backgroundImage=m.jscStyle.backgroundImage,m.style.backgroundColor=m.jscStyle.backgroundColor,m.style.color=m.jscStyle.color,this.exportColor(b|y)):this.fromString(f.value)||this.exportColor():this.fromString(f.value,b)||(m.style.backgroundImage=m.jscStyle.backgroundImage,m.style.backgroundColor=m.jscStyle.backgroundColor,m.style.color=m.jscStyle.color,this.exportColor(b|y)):this.exportColor()},this.exportColor=function(e){if(!(e&b)&&f){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),f.value=t}e&y||!m||(m.style.backgroundImage="none",m.style.backgroundColor="#"+this.toString(),m.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&k||!s()||n(),e&w||!s()||r()},this.fromHSV=function(e,t,o,n){null!==e&&(e=Math.max(0,this.minH,Math.min(6,this.maxH,e))),null!==t&&(t=Math.max(0,this.minS,Math.min(1,this.maxS,t))),null!==o&&(o=Math.max(0,this.minV,Math.min(1,this.maxV,o))),this.rgb=i(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===o?this.hsv[2]:this.hsv[2]=o),this.exportColor(n)},this.fromRGB=function(e,t,o,n){null!==e&&(e=Math.max(0,Math.min(1,e))),null!==t&&(t=Math.max(0,Math.min(1,t))),null!==o&&(o=Math.max(0,Math.min(1,o)));var r=function(e,t,i){var o=Math.min(Math.min(e,t),i),n=Math.max(Math.max(e,t),i),r=n-o;if(0===r)return[null,0,n];var s=e===o?3+(i-t)/r:t===o?5+(e-i)/r:1+(t-e)/r;return[6===s?0:s,r/n,n]}(null===e?this.rgb[0]:e,null===t?this.rgb[1]:t,null===o?this.rgb[2]:o);null!==r[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,r[0]))),0!==r[2]&&(this.hsv[1]=null===r[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,r[1]))),this.hsv[2]=null===r[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,r[2]));var s=i(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=s[0],this.rgb[1]=s[1],this.rgb[2]=s[2],this.exportColor(n)},this.fromString=function(e,t){var i=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return!!i&&(6===i[1].length?this.fromRGB(parseInt(i[1].substr(0,2),16)/255,parseInt(i[1].substr(2,2),16)/255,parseInt(i[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(i[1].charAt(0)+i[1].charAt(0),16)/255,parseInt(i[1].charAt(1)+i[1].charAt(1),16)/255,parseInt(i[1].charAt(2)+i[1].charAt(2),16)/255,t),!0)},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var u=this,p="hvs"===this.pickerMode.toLowerCase()?1:0,h=!1,f=jscolor.fetchElement(this.valueElement),m=jscolor.fetchElement(this.styleElement),g=!1,_=!1,v={},b=1,y=2,k=4,w=8;if(jscolor.addEvent(e,"focus",function(){u.pickerOnfocus&&u.showPicker()}),jscolor.addEvent(e,"blur",function(){h?h=!1:window.setTimeout(function(){h||(f===e&&u.importColor(),u.pickerOnfocus&&u.hidePicker()),h=!1},0)}),f){var x=function(){u.fromString(f.value,b),c()};jscolor.addEvent(f,"keyup",x),jscolor.addEvent(f,"input",x),jscolor.addEvent(f,"blur",function(){f!==e&&u.importColor()}),f.setAttribute("autocomplete","off")}switch(m&&(m.jscStyle={backgroundImage:m.style.backgroundImage,backgroundColor:m.style.backgroundColor,color:m.style.color}),p){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}},getSettings={merge:function(e,t){return Object.assign({},e,t)},trix:function(e){return this.merge(e,{smartyVersion:3,continueComments:"Enter"})},quill:function(e){return this.merge(e,{modules:{toolbar:[["code-block"],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]]},theme:"snow",placeholder:"Содержимое блока..."})},froala:function(e){return this.merge(e,{language:"ru",toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],pluginsEnabled:null})},Ckeditor5:function(e){return this.merge(e,{})},imperavi:function(e){return this.merge(e,{lang:"ru",plugins:["clips","beyondgrammar","alignment","widget","video","textexpander","table","specialchars","properties","pagebreak","limiter","inlinestyle","imagemanager","handle","fullscreen","fontsize","fontfamily","fontcolor","filemanager","definedlinks","counter"],toolbarFixed:!0,toolbarFixedTopOffset:10,fileUpload:"/apps/upload/file_upload.php",clipboardUploadUrl:"/apps/upload/clipboard.php",imageUpload:"/apps/upload/image_upload.php",imageResizable:!0,imagePosition:!0})},summernote:function(e){return this.merge(e,{smartyVersion:3,continueComments:"Enter"})},codemirror:function(e){return this.merge(e,{gutters:["note-gutter","CodeMirror-linenumbers"],tabSize:4,indentUnit:4,lineNumbers:!0,lineWrapping:!0,tabMode:"indent",autofocus:!1,smartIndent:!1,enterMode:"keep",smartyVersion:3,continueComments:"Enter"})},tinymce:function(e){return this.merge(e,{selector:"textarea",height:70,theme:"modern",plugins:"searchreplace directionality visualblocks visualchars fullscreen link image media codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists textcolor wordcount imagetools colorpicker textpattern",toolbar1:"formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat",menubar:!1,fullpage:!1,remove_script_host:!1,relative_urls:!1,image_advtab:!0,content_css:["/apps/wysiwyg/tinymce/codepen.min.css"]})}},cmp=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=asciifold(String(e||"")),t=asciifold(String(t||"")),e>t?1:t>e?-1:0)},extend=function(e,t){var i,o,n,r;for(i=1,o=arguments.length;i<o;i++)if(r=arguments[i])for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e},trim=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},escape_regex=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},is_array=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};!function(e){e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())}(jQuery);var _editor={codemirror:function(e,t){var i=document.getElementById(e);"xml"==t&&(t={name:"xml",alignCDATA:!0}),"sql"==t&&(t="text/x-mariadb",window.location.href.indexOf("mime=")>-1&&(t=window.location.href.substr(window.location.href.indexOf("mime=")+5))),CodeMirror.fromTextArea(i,getSettings.codemirror({mode:t,extraKeys:{"Ctrl-S":function(e){return saving(),!1},"Cmd-S":function(e){return saving(),!1},"Ctrl-Q":"toggleComment","Cmd-Q":"toggleComment"}}))},init:function(e,t,i){void 0!==this[t]&&this[t](e,i)}},d=document,css=function(e,t){for(var i in t)e.style[i]=t[i]},animate=function(e,t){var i=new Date,o=setInterval(function(){var n=(new Date-i)/e.duration;n>1&&(n=1),e.step(n),1==n&&(t&&t.apply(),clearInterval(o))},e.delay||20);return{stop:function(){clearInterval(o)}}},addClass=function(e,t){var i=e.className;-1==i.indexOf(t)&&(""!=i&&(t=" "+t),e.className=i+t)},removeClass=function(e,t){var i=e.className,o=new RegExp("\\s?\\b"+t+"\\b","g");i=i.replace(o,""),e.className=i},mapConteiner=function(e,t){"google"===e?googleMaps(t):"yandex"===e&&yandexMaps(t)},datepicker=function(){var e=this;$(".calendar").each(function(t,i){var o=$(i).closest(".calendar"),n=o.find(".calendar-input"),r=n.is(":disabled"),s=n.data("timestamp")||!1,a=!1!==s?"DD.MM.YYYY":n.data("format")||"DD.MM.YYYY";if(a=a.toLowerCase(),!r){n.prop("date",""),n.data("format",a);var l=n.datepicker({format:a,autoclose:!0,container:o,language:ADMIN_LOCALE});l.on("changeDate",function(t){var i=$(e).data("date");!1!==s&&(i=new Date(i).getTime()/1e3),n.val(l.datepicker("getFormattedDate"))}),o.find(".input-group-addon")&&o.find(".input-group-addon").on("click",function(){l.datepicker("show")})}})};!function(e,t,i,o){function n(t,o){this.w=e(i),this.el=e(t),this.options=e.extend({},a,o),this.init()}var r="ontouchstart"in i,s=function(){var e=i.createElement("div"),o=i.documentElement;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",o.appendChild(e);var n=t.getComputedStyle&&"auto"===t.getComputedStyle(e,"").pointerEvents;return o.removeChild(e),!!n}(),a={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button" class="dd-button dd-button__expand"></button>',collapseBtnHTML:'<button data-action="collapse" type="button" class="dd-button dd-button__collapse"></button>',group:0,maxDepth:5,threshold:20,dragStop:null,afterExpand:null,afterCollapse:null};n.prototype={init:function(){var i=this;i.reset(),i.el.data("nestable-group",this.options.group),i.placeEl=e('<div class="'+i.options.placeClass+'"/>'),e.each(this.el.find(i.options.itemNodeName),function(t,o){i.setParent(e(o))}),i.el.on("click","button",function(t){if(!i.dragEl){var o=e(t.currentTarget),n=o.data("action"),r=o.parent(i.options.itemNodeName);"collapse"===n&&i.collapseItem(r),"expand"===n&&i.expandItem(r)}});var o=function(t){var o=e(t.target);if(!o.hasClass(i.options.handleClass)){if(o.closest("."+i.options.noDragClass).length)return;o=o.closest("."+i.options.handleClass)}o.length&&!i.dragEl&&(i.isTouch=/^touch/.test(t.type),i.isTouch&&1!==t.touches.length||(t.preventDefault(),i.dragStart(t.touches?t.touches[0]:t)))},n=function(e){i.dragEl&&(e.preventDefault(),i.dragMove(e.touches?e.touches[0]:e))},s=function(e){i.dragEl&&(e.preventDefault(),i.dragStop(e.touches?e.touches[0]:e))};r&&(i.el[0].addEventListener("touchstart",o,!1),t.addEventListener("touchmove",n,!1),t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",s,!1)),i.el.on("mousedown",o),i.w.on("mousemove",n),i.w.on("mouseup",s)},serialize:function(){var t=this;return step=function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(i,o){var n=[];return i.children(t.options.itemNodeName).each(function(){var i=e(this),r=e.extend({},i.data()),s=i.children(t.options.listNodeName);s.length&&(r.children=step(s,o+1)),n.push(r)}),n}),step(t.el.find(t.options.listNodeName).first(),0)},serialise:function(){return this.serialize()},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null},expandItem:function(e){e.removeClass(this.options.collapsedClass),e.children('[data-action="expand"]').hide(),e.children('[data-action="collapse"]').show(),e.children(this.options.listNodeName).show(),"function"==typeof this.options.afterExpand&&this.options.afterExpand(e)},collapseItem:function(e){e.children(this.options.listNodeName).length&&(e.addClass(this.options.collapsedClass),e.children('[data-action="collapse"]').hide(),e.children('[data-action="expand"]').show(),e.children(this.options.listNodeName).hide()),"function"==typeof this.options.afterCollapse&&this.options.afterCollapse(e)},expandAll:function(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.expandItem(e(this))})},collapseAll:function(){var t=this;t.el.find(t.options.itemNodeName).each(function(){t.collapseItem(e(this))})},setParent:function(t){t.children(this.options.listNodeName).length&&(t.find(".dd-button__expand").length||t.prepend(e(this.options.expandBtnHTML)),t.find(".dd-button__collapse").length||t.prepend(e(this.options.collapseBtnHTML))),e(t[0]).hasClass("dd-collapsed")?t.children('[data-action="collapse"]').hide():t.children('[data-action="expand"]').hide()},unsetParent:function(e){e.removeClass(this.options.collapsedClass),e.children("[data-action]").remove(),e.children(this.options.listNodeName).remove()},dragStart:function(t){var o=this.mouse,n=e(t.target),r=n.closest(this.options.itemNodeName);this.placeEl.css("height",r.height()),o.offsetX=void 0!==t.offsetX?t.offsetX:t.pageX-n.offset().left,o.offsetY=void 0!==t.offsetY?t.offsetY:t.pageY-n.offset().top,o.startX=o.lastX=t.pageX,o.startY=o.lastY=t.pageY,this.dragRootEl=this.el,this.dragEl=e(i.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",r.width()),r.after(this.placeEl),r[0].parentNode.removeChild(r[0]),r.appendTo(this.dragEl),e(i.body).append(this.dragEl),this.dragEl.css({left:t.pageX-o.offsetX,top:t.pageY-o.offsetY});var s,a,l=this.dragEl.find(this.options.itemNodeName);for(s=0;s<l.length;s++)(a=e(l[s]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=a)},dragStop:function(e){var t=this.dragEl.children(this.options.itemNodeName).first();t[0].parentNode.removeChild(t[0]),this.placeEl.replaceWith(t),this.dragEl.remove(),this.el.trigger("change"),this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset(),"function"==typeof this.options.dragStop&&this.options.dragStop(t)},dragMove:function(o){var n,r,a,l=this.options,c=this.mouse;this.dragEl.css({left:o.pageX-c.offsetX,top:o.pageY-c.offsetY}),c.lastX=c.nowX,c.lastY=c.nowY,c.nowX=o.pageX,c.nowY=o.pageY,c.distX=c.nowX-c.lastX,c.distY=c.nowY-c.lastY,c.lastDirX=c.dirX,c.lastDirY=c.dirY,c.dirX=0===c.distX?0:c.distX>0?1:-1,c.dirY=0===c.distY?0:c.distY>0?1:-1;var d=Math.abs(c.distX)>Math.abs(c.distY)?1:0;if(!c.moving)return c.dirAx=d,void(c.moving=!0);c.dirAx!==d?(c.distAxX=0,c.distAxY=0):(c.distAxX+=Math.abs(c.distX),0!==c.dirX&&c.dirX!==c.lastDirX&&(c.distAxX=0),c.distAxY+=Math.abs(c.distY),0!==c.dirY&&c.dirY!==c.lastDirY&&(c.distAxY=0)),c.dirAx=d,c.dirAx&&c.distAxX>=l.threshold&&(c.distAxX=0,a=this.placeEl.prev(l.itemNodeName),c.distX>0&&a.length&&!a.hasClass(l.collapsedClass)&&(n=a.find(l.listNodeName).last(),this.placeEl.parents(l.listNodeName).length+this.dragDepth<=l.maxDepth&&(n.length?(n=a.children(l.listNodeName).last()).append(this.placeEl):((n=e("<"+l.listNodeName+"/>").addClass(l.listClass)).append(this.placeEl),a.append(n),this.setParent(a)))),c.distX<0&&(this.placeEl.next(l.itemNodeName).length||(r=this.placeEl.parent(),this.placeEl.closest(l.itemNodeName).after(this.placeEl),r.children().length||this.unsetParent(r.parent()))));var u=!1;if(s||(this.dragEl[0].style.visibility="hidden"),this.pointEl=e(i.elementFromPoint(o.pageX-i.body.scrollLeft,o.pageY-(t.pageYOffset||i.documentElement.scrollTop))),s||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(l.handleClass)&&(this.pointEl=this.pointEl.parent(l.itemNodeName)),this.pointEl.hasClass(l.emptyClass))u=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(l.itemClass))return;var p=this.pointEl.closest("."+l.rootClass),h=this.dragRootEl.data("nestable-id")!==p.data("nestable-id");if(!c.dirAx||h||u){if(h&&l.group!==p.data("nestable-group"))return;if(this.dragDepth-1+this.pointEl.parents(l.listNodeName).length>l.maxDepth)return;var f=o.pageY<this.pointEl.offset().top+this.pointEl.height()/2;r=this.placeEl.parent(),u?((n=e(i.createElement(l.listNodeName)).addClass(l.listClass)).append(this.placeEl),this.pointEl.replaceWith(n)):f?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),r.children().length||this.unsetParent(r.parent()),this.dragRootEl.find(l.itemNodeName).length||this.dragRootEl.append('<div class="'+l.emptyClass+'"/>'),h&&(this.dragRootEl=p,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},e.fn.nestable=function(t){var i=this;return this.each(function(){var o=e(this).data("nestable");o?"string"==typeof t&&"function"==typeof o[t]&&(i=o[t]()):(e(this).data("nestable",new n(this,t)),e(this).data("nestable-id",(new Date).getTime()))}),i||this}}(window.jQuery||window.Zepto,window,document),Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)};var _redactor={imperavi:function(e){$R(".redactor_imperavi",getSettings.imperavi({styles:!0}))},quill:function(e){var t=$("#"+e+"-container").get(0),i=new Quill(t,getSettings.quill());i.on("text-change",function(){$("#"+e).val(i.root.innerHTML)})},tinymce:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){tinymce.init(getSettings.tinymce({selector:["#",e].join("")}))}),cleditor:function(e){$(["#",e].join("")).cleditor()},froala:function(e){$(["#",e].join("")).froalaEditor(getSettings.tinymce({heightMin:200}))},summernote:function(e){$(["#",e].join("")).summernote({height:200,tabsize:2,toolbar:!0,codemirror:{theme:"monokai"}})},ckeditor5:function(e){ClassicEditor.create(document.querySelector(["#",e].join("")),{toolbar:["heading","|","bold","italic","link","|","bulletedList","numberedList","blockQuote"],alignment:{toolbar:["alignment:left","alignment:right","alignment:center","alignment:justify"],options:["left","right","center","justify"]},fontSize:{options:["tiny","small","default","big","huge"]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"],styles:[{name:"left",icon:"left"},{name:"center",icon:"center"},{name:"right",icon:"right"},{name:"fullSize",title:"Full size",icon:"right",isDefault:!0},{name:"side",icon:"left",title:"My side style",class:"custom-side-image"}]},ckfinder:{uploadUrl:"/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json"}}).catch(function(e){})},ckeditor:function(e){CKEDITOR.config.width="auto",CKEDITOR.config.height=600,CKEDITOR.disableAutoInline=!0,CKEDITOR.replace(e,{customConfig:"/apps/wysiwyg/ckeditor/config.js"})},wysiwyg:function(e){$(["#",e].join("")).wysiwyg({toolbar:"top",hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo"}})},init:function(e,t){void 0!==this[t]&&this[t](e)}};!function(e){e.fn.timeoutClass=function(t,i){i=i||10;var o=this;setTimeout(function(){e(o).toggleClass(t)},i)}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};