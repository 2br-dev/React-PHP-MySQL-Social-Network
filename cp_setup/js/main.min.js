function is_null(t){return null==t}function is_undefined(t){return"undefined"==typeof t}function is_touch_device(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||"onmsgesturechange"in window}!function(t){"use strict";t.app={initSandwich:function(){t(".menu-trigger").sandwich({wrapper:".layout-wrapper",overlay:"#menu-overlay"})},initSelect:function(){t("select").selectbox()},initMask:function(){t(".watch-datemask").mask("99/99/9999"),t(".watch-phonemask").mask("+ 7 (999) 999-99-99"),t(".watch-cartnumber").mask("999-999-999")},initFastclick:function(){FastClick.attach(document.body)},initGallery:function(){t(".js-open-image").on("click",function(){})},initPopup:function(){t.popup.init(".js-open-popup",{cssPosition:!0,wrapper:".layout-wrapper"})},init:function(){this.initPopup(),this.initMask(),this.initSelect(),this.initSandwich(),this.initGallery(),this.ajaxForm.init(),this.cart.init(),this.suggestions.init()}}}(jQuery),function(t){"use strict";t.app=t.app=t.app||{};var e,a=t("body");t.app.ajaxForm={config:{form_class:".form-ajax",link_class:".js-request-link",error_class:"error",error_message:"form__error-message",form_label:".form__wrapper",checkbox_label:"checkbox__label"},callback_stack:{},extend:function(t){if(e=this,"undefined"!=typeof t){var a;for(a in t)"undefined"!=typeof e.config[a]&&(e.config[a]=t[a])}},default_handler:function(a,n){e=this,n.status?n.hasOwnProperty("redirect_url")&&(window.location.href=n.redirect_url):n.errors&&e.validation(a,n.errors),n.hasOwnProperty("message")&&t.popup.message(n.title,n.message)},validation:function(t,a){e=this,t.find("."+e.config.error_class).removeClass(e.config.error_class),t.find("."+e.config.error_message).remove();var n,s;setTimeout(function(){if(a)for(n in a)t.find('input[name="'+n+'"]').length>0&&(s=t.find('input[name="'+n+'"]')),t.find('select[name="'+n+'"]').length>0&&(s=t.find('select[name="'+n+'"]')),t.find('textarea[name="'+n+'"]').length>0&&(s=t.find('textarea[name="'+n+'"]')),s.closest("."+e.config.checkbox_label).length>0&&(s=s.closest("."+e.config.checkbox_label)),"undefined"!=typeof s&&(s.addClass(e.config.error_class),s.closest(e.config.form_label).append('<div class="'+e.config.error_message+'">'+a[n]+"</div>"))},10)},upload:function(){e=this,a.on("submit",".form-file-upload",function(t){return AIM.submit(this,{onStart:function(){},onComplete:function(t){"object"==typeof t&&t.status===!0&&t.hasOwnProperty("photo_url")}})}),t(document).on("change",".upload_button_onchange",function(){t(this).closest(".upload_button").find(".upload_button_field").length>0&&t(this).closest(".upload_button").find(".upload_button_field").html(t(this).val())})},send:function(e,a,n,s,i){"function"!=typeof s&&(s=function(){}),"function"!=typeof i&&(i=function(){});try{t.ajax({url:e,type:a,data:n,contentType:!1,processData:"get"==a.toLowerCase(),success:s,error:i,dataType:"JSON"})}catch(o){}},initLink:function(){e=this,a.on("click",e.config.link_class,function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var n=t(this);if(!n.data("is-busy")){n.data("is-busy",!0);var s=t(this).attr("href")||t(this).data("action"),i=t(this).data("method")||"get",o={};e.send(s,i,o,function(t){n.data("callback")&&e.callback_stack.hasOwnProperty(n.data("callback"))?e.callback_stack[n.data("callback")](n,t):e.default_handler(n,t),t.status===!0,n.data("is-busy",!1)},function(t){e.default_handler(n,t),n.data("is-busy",!1)})}})},initForm:function(){e=this,a.on("submit",e.config.form_class,function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var n=t(this),s=n.attr("action"),i=n.attr("method")||"post",o=window.FormData?new FormData(n[0]):n.serialize();if(!n.data("is-busy"))return n.data("is-busy",!0),n.data("precallback")&&e.callback_stack.hasOwnProperty(n.data("precallback"))&&!e.callback_stack[n.data("precallback")](n)?!1:void e.send(s,i,o,function(t){n.data("callback")&&e.callback_stack.hasOwnProperty(n.data("callback"))?e.callback_stack[n.data("callback")](n,t):e.default_handler(n,t),t.status===!0,n.data("is-busy",!1)},function(t){e.default_handler(n,t),n.data("is-busy",!1)})})},init:function(t){this.extend(t),this.initForm(),this.initLink()}}}(jQuery),function(t){"use strict";var e,a,n,s=t("body");t.fn.extend({quantity:function(e){this.defaults={};t.extend({},this.defaults,e);return this.each(function(){var e=t(this);e.count=e.find(".watch-quantity-count"),e.max=e.count.data("max"),e.decrease=e.find('.js-quantity[data-method="decrease"]'),e.increase=e.find('.js-quantity[data-method="increase"]'),e.check=function(){var t=parseInt(e.count.val());1==t?e.decrease.addClass("disabled"):e.decrease.hasClass("disabled")&&e.decrease.removeClass("disabled")},e.clicks=function(){e.on("click",".js-quantity",function(a){var n=t(this).data("method"),s=parseInt(e.count.val());"decrease"==n&&s>1&&--s,"increase"==n&&s++,"undefined"!==e.max&&s>parseInt(e.max)&&(s=e.max),e.count.val(s),e.check()})},e.tracking=function(){e.on("keydown",e.count,function(t){if(38==t.which||40==t.which){t.preventDefault();var a=parseInt(e.count.val());38==t.which?a++:40==t.which&&a>1&&--a,"undefined"!==e.max&&a>parseInt(e.max)&&(a=e.max),e.count.val(a),e.check()}})},e.init=function(){e.clicks(),e.tracking(),e.check()},e.init()})}}),t.app.cart={element:{count:".watch-cart-count",money:".watch-cart-money, .watch-cart-total",discount:".watch-cart-discount"},events:{"click | .js-cart-add":"_buy","click | .js-cart-remove":"_remove","paste keyup | .js-cart-recount":"_recount","click | .js-quantity.js-cart-recount":"_recount"},methods:{_money:function(t){var e=0,a="",n=" ",s=0>t?"-":"",i=parseInt(t=Math.abs(+t||0).toFixed(e))+"",o=(o=i.length)>3?o%3:0;return s+(o?i.substr(0,o)+n:"")+i.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?a+Math.abs(t-i).toFixed(e).slice(2):"")},_update:function(a){"undefined"!=typeof a.count&&t(e.element.count).html(a.count),"undefined"!=typeof a.money&&t(e.element.money).html(a.money)},_buy:function(){var a=t(this).attr("href").split("-")[1],n=1;t("#count-"+a).length>0&&(n=parseInt(t("#count-"+a).val())),t.ajax({url:"/examples/shop/cart/add",type:"post",data:{item:a,count:n},dataType:"JSON",success:function(n){e.methods._update(n),n.status===!0&&t("#catalog-product-"+a).find(".js-incart-holder").length&&t("#catalog-product-"+a).find(".js-incart-holder").html('<a href="#item-'+a+'" class="product__remove-link js-cart-remove" title="РЈРґР°Р»РёС‚СЊ РёР· РєРѕСЂР·РёРЅС‹">РЈРґР°Р»РёС‚СЊ РёР· РєРѕСЂР·РёРЅС‹</a>'),n.hasOwnProperty("message")&&""!==n.message&&e.methods._message(n.message)}})},_remove:function(){var a=t(this),n=a.attr("href").split("-")[1];t.ajax({url:"/examples/shop/cart/remove",type:"post",data:{item:n},dataType:"JSON",success:function(s){e.methods._update(s),s.status===!0&&(t("#count-"+n).length>0&&t("#count-"+n).val(1),t("#catalog-product-"+n).find(".incart").length>0&&t("#catalog-product-"+n).find(".incart").remove(),t("#table-product-"+n).length>0&&t("#table-product-"+n).remove(),t("#cart-table").find("tbody").is(":empty")&&t("#cart-table").find("tbody").append('<tr class="cart-table-empty"><td colspan="8">Р’ РєРѕСЂР·РёРЅРµ РїСѓСЃС‚Рѕ.</td></tr>'),a.hasClass("catalog-product-incart")?a.remove():t("#catalog-product-"+n).find(".js-incart-holder").length&&t("#catalog-product-"+n).find(".js-incart-holder").html('<a href="#item-'+n+'" class="product__buy-link js-cart-add" title="Р”РѕР±Р°РІРёС‚СЊ РІ РєРѕСЂР·РёРЅСѓ">Р”РѕР±Р°РІРёС‚СЊ РІ РєРѕСЂР·РёРЅСѓ</a>')),s.hasOwnProperty("message")&&""!==s.message&&e.methods._message(s.message)}})},_recount:function(){var a=t(this).closest(".js-change-holder").find("input"),n=a.attr("id").split("-")[1],s=a.val();console.log(t(this)),t.ajax({url:"/examples/shop/cart/recount",type:"post",data:{item:n,count:s},dataType:"JSON",success:function(a){e.methods._update(a),a.status===!0&&0!==a.total&&t("#cart-item-total-"+n).html(a.total),a.hasOwnProperty("message")&&""!==a.message&&e.methods._message(a.message)}})},_message:function(e){clearTimeout(n),s.find(".popup-addcart-message").length||(a=t('<div class="alert-message popup-addcart-message">'+e+"</div>"),s.append(a),setTimeout(function(){a.addClass("animate")},10)),n=setTimeout(function(){a.removeClass("animate"),setTimeout(function(){a.remove()},300)},1500)},_changed:function(){var e=0;table.find(".js-change-row").each(function(){t(this).attr("checked")&&(e+=1)}),e>0&&e==count?t(".js-changeall").prop("checked",!0):t(".js-changeall").prop("checked",!1),e>0?header.addClass("table-caption-active"):header.removeClass("table-caption-active")}},init:function(){e=this;var a,n,i;for(a in this.events)i=a.split("|"),n=this.events[a],function(a,n){s.on(t.trim(a[0]),t.trim(a[1]),function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e.methods[n].call(this)})}(i,n);t(".js-quantity").quantity()}}}(jQuery),function(t){"use strict";t.app=t.app=t.app||{},t.app.suggestions={token:"5ac2fbf1f640b75b78f5d4214ff005ff5303eac8",init:function(){var e,a=this,n=t("#address"),s=t("#address-fields"),i=["postal_code","country","region","area","city","settlement","street","house","block","fias_id","kladr_id","okato","oktmo","geo_lat","geo_lon"];if(n.suggestions({serviceUrl:"https://dadata.ru/api/v2",token:a.token,type:"ADDRESS",count:5,onSelect:function(t){if("undefined"!=typeof t.data)for(e in t.data)i.indexOf(e)>=0&&s.find('input[name="'+e+'"]').length&&s.find('input[name="'+e+'"]').val(t.data[e])}}),t(".js-suggestions").length){var o;t(".js-suggestions").each(function(){o=t(this).data("suggestions"),"email"==o&&t(this).suggestions({serviceUrl:"https://dadata.ru/api/v2",token:a.token,type:"EMAIL",onSelect:function(t){console.log(t)}}),"org"==suggestion&&t("#party").suggestions({serviceUrl:"https://dadata.ru/api/v2",token:"Р’РђРЁ API-РљР›Р®Р§",type:"PARTY",onSelect:function(t){console.log(t)}})})}}}}(jQuery),function(t){t.fn.sandwich=function(e){var e=t.extend({wrapper:".wrap",overlay:".overlay"},e),a=t(this),n=t("body");a.on("click",function(a){a.preventDefault(),n.hasClass("page-visible")?setTimeout(function(){n.removeClass("page-visible")},10):setTimeout(function(){n.addClass("page-visible")},10),n.toggleClass("page-open");var s="visible";n.hasClass("page-open")||(s="hidden"),t(e.overlay).css({visibility:s})}),n.on("click",e.overlay,function(a){n.removeClass("page-open"),setTimeout(function(){n.removeClass("page-visible")},10),t(e.overlay).css({visibility:"hidden"})})}}(jQuery),$(document).ready(function(){$.app.init()});